<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>ç¬¬ 4 ç« ï¼šæ³¨æ„åŠ›æœºåˆ¶ä¸Transformer å­¦ä¹ ç¬”è®°</title>
      <link href="/posts/13793.html"/>
      <url>/posts/13793.html</url>
      
        <content type="html"><![CDATA[<h1 id="ç¬¬ä¸€èŠ‚-seq2seq-æ¶æ„"><a class="markdownIt-Anchor" href="#ç¬¬ä¸€èŠ‚-seq2seq-æ¶æ„"></a> ç¬¬ä¸€èŠ‚ Seq2Seq æ¶æ„</h1><h2 id="1-ä¸ºä»€ä¹ˆéœ€è¦-seq2seq"><a class="markdownIt-Anchor" href="#1-ä¸ºä»€ä¹ˆéœ€è¦-seq2seq"></a> 1. ä¸ºä»€ä¹ˆéœ€è¦ Seq2Seq</h2><p>ä¼ ç»Ÿ RNN / LSTM æ“…é•¿ä¸‰ç±»ä»»åŠ¡ï¼š</p><ul><li><strong>Many-to-One</strong>ï¼šåºåˆ— â†’ ä¸€ä¸ªå‘é‡ï¼ˆæƒ…æ„Ÿåˆ†ç±»ï¼‰</li><li><strong>Many-to-Manyï¼ˆå¯¹é½ï¼‰</strong>ï¼šæ¯ä¸ªè¾“å…¥å¯¹åº”ä¸€ä¸ªè¾“å‡ºï¼ˆNERã€POSï¼‰</li><li><strong>One-to-Many</strong>ï¼šå›ºå®šè¾“å…¥ â†’ åºåˆ—ï¼ˆå›¾åƒæè¿°ï¼‰</li></ul><p>ä½†åœ¨ <strong>æœºå™¨ç¿»è¯‘</strong> è¿™ç±»ä»»åŠ¡ä¸­ï¼š</p><ul><li>è¾“å…¥è¾“å‡º <strong>é•¿åº¦ä¸å›ºå®š</strong></li><li>è¾“å…¥è¾“å‡º <strong>ä¸ä¸¥æ ¼å¯¹é½</strong></li></ul><p>â†’ éœ€è¦ä¸€ç§èƒ½â€œæ•´ä½“ç†è§£ä¸€å¥è¯ï¼Œå†ç”Ÿæˆå¦ä¸€å¥è¯â€çš„ç»“æ„<br />â†’ <strong>Seq2Seqï¼ˆEncoderâ€“Decoderï¼‰</strong></p><hr /><h2 id="2-ä»-autoencoder-åˆ°-seq2seq"><a class="markdownIt-Anchor" href="#2-ä»-autoencoder-åˆ°-seq2seq"></a> 2. ä» Autoencoder åˆ° Seq2Seq</h2><p><strong>Autoencoder</strong>ï¼š</p><ul><li>Encoderï¼šè¾“å…¥ â†’ æ½œåœ¨å‘é‡</li><li>Decoderï¼šæ½œåœ¨å‘é‡ â†’ é‡æ„è¾“å…¥</li><li>ç›®æ ‡ï¼š<strong>è¿˜åŸè‡ªå·±</strong></li></ul><p><strong>Seq2Seq</strong>ï¼š</p><ul><li>Encoderï¼šè¾“å…¥åºåˆ— â†’ è¯­ä¹‰è¡¨ç¤º</li><li>Decoderï¼šè¯­ä¹‰è¡¨ç¤º â†’ <strong>æ–°åºåˆ—</strong></li><li>ç›®æ ‡ï¼š<strong>åºåˆ—è½¬æ¢</strong>ï¼ˆè€Œä¸æ˜¯é‡æ„ï¼‰</li></ul><p>ğŸ‘‰ æœ¬è´¨å˜åŒ–ï¼š<br /><strong>é‡æ„ â†’ ç”Ÿæˆ</strong></p><hr /><h2 id="3-seq2seq-æ ¸å¿ƒç»“æ„"><a class="markdownIt-Anchor" href="#3-seq2seq-æ ¸å¿ƒç»“æ„"></a> 3. Seq2Seq æ ¸å¿ƒç»“æ„</h2><h3 id="31-æ•´ä½“æ€æƒ³"><a class="markdownIt-Anchor" href="#31-æ•´ä½“æ€æƒ³"></a> 3.1 æ•´ä½“æ€æƒ³</h3><ul><li>Encoderï¼šè¯»å®Œæ•´ä¸ªè¾“å…¥åºåˆ—ï¼Œå‹ç¼©æˆä¸€ä¸ª <strong>ä¸Šä¸‹æ–‡å‘é‡ C</strong></li><li>Decoderï¼šä»¥ C ä¸ºæ¡ä»¶ï¼Œè‡ªå›å½’ç”Ÿæˆè¾“å‡ºåºåˆ—</li></ul><p>å¸¸è§å®ç°ï¼š<br />Encoder / Decoder éƒ½ç”¨ <strong>RNN / LSTM / GRU</strong></p><hr /><h3 id="32-encoderç¼–ç å™¨"><a class="markdownIt-Anchor" href="#32-encoderç¼–ç å™¨"></a> 3.2 Encoderï¼ˆç¼–ç å™¨ï¼‰</h3><ul><li>é¡ºåºè¯»å–è¾“å…¥è¯å…ƒ (x_1 \sim x_T)</li><li>ä¸æ–­æ›´æ–°éšè—çŠ¶æ€</li><li><strong>æœ€åä¸€ä¸ªæ—¶é—´æ­¥çš„çŠ¶æ€ = ä¸Šä¸‹æ–‡å‘é‡ C</strong></li></ul><p>å¸¸è§åšæ³•ï¼š</p><ul><li>RNNï¼š(C = h_T)</li><li>LSTMï¼š(C = (h_T, c_T))</li></ul><p>è¡¥å……ï¼š</p><ul><li>Encoder å¯ç”¨ <strong>åŒå‘ RNN</strong></li><li>C ä¹Ÿå¯ä»¥ç”±æ‰€æœ‰ hidden states èšåˆå¾—åˆ°ï¼ˆæ‹¼æ¥ / poolingï¼‰</li></ul><hr /><h3 id="33-decoderè§£ç å™¨"><a class="markdownIt-Anchor" href="#33-decoderè§£ç å™¨"></a> 3.3 Decoderï¼ˆè§£ç å™¨ï¼‰</h3><ul><li><p>æœ¬è´¨æ˜¯ä¸€ä¸ª <strong>æ¡ä»¶è¯­è¨€æ¨¡å‹</strong></p></li><li><p>åˆå§‹çŠ¶æ€ç”± C åˆå§‹åŒ–</p></li><li><p>ä» <code>&lt;SOS&gt;</code> å¼€å§‹é€è¯ç”Ÿæˆ</p></li><li><p>æ¯ä¸€æ­¥è¾“å…¥ï¼š</p><ul><li>ä¸Šä¸€æ­¥ç”Ÿæˆçš„è¯</li><li>ä¸Šä¸€æ­¥çš„éšè—çŠ¶æ€</li></ul></li><li><p>é‡åˆ° <code>&lt;EOS&gt;</code> æˆ–è¾¾åˆ°æœ€å¤§é•¿åº¦åœæ­¢</p></li></ul><p>å…³é”®ç‰¹æ€§ï¼š</p><ul><li><strong>è‡ªå›å½’</strong></li><li>å•å‘ï¼ˆæ»¡è¶³å› æœæ€§ï¼‰</li></ul><hr /><h3 id="34-decoder-ä¸å¤§è¯­è¨€æ¨¡å‹çš„å…³ç³»"><a class="markdownIt-Anchor" href="#34-decoder-ä¸å¤§è¯­è¨€æ¨¡å‹çš„å…³ç³»"></a> 3.4 Decoder ä¸å¤§è¯­è¨€æ¨¡å‹çš„å…³ç³»</h3><ul><li><p>å»æ‰ Encoderï¼Œåªä¿ç•™ Decoder<br />â†’ <strong>Decoder-only Language Model</strong></p></li><li><p>GPT å°±æ˜¯ï¼š</p><ul><li>é¢„æµ‹ä¸‹ä¸€ä¸ª token</li><li>ç”¨ prompt ä½œä¸ºæ¡ä»¶</li></ul></li></ul><p>ğŸ‘‰ Seq2Seq = Encoder + æ¡ä»¶ LM</p><p>ğŸ‘‰ GPT = çº¯ LM</p><hr /><h2 id="4-å…³é”®å®ç°ç»†èŠ‚"><a class="markdownIt-Anchor" href="#4-å…³é”®å®ç°ç»†èŠ‚"></a> 4. å…³é”®å®ç°ç»†èŠ‚</h2><h3 id="41-embedding-æ˜¯å¦å…±äº«"><a class="markdownIt-Anchor" href="#41-embedding-æ˜¯å¦å…±äº«"></a> 4.1 Embedding æ˜¯å¦å…±äº«</h3><ul><li><strong>ä¸å…±äº«</strong>ï¼šæºè¯­è¨€ â‰  ç›®æ ‡è¯­è¨€ï¼ˆè‹±â†’ä¸­ï¼‰</li><li><strong>å…±äº«</strong>ï¼šè¾“å…¥è¾“å‡ºåŒè¯­è¨€ï¼ˆæ‘˜è¦ã€æ”¹å†™ï¼‰</li></ul><p>å…±äº«ä¼˜ç‚¹ï¼š</p><ul><li>å‚æ•°æ›´å°‘</li><li>å¯èƒ½å­¦åˆ°è¯è¯­é—´çš„éšå¼å¯¹é½</li></ul><hr /><h3 id="42-ä¸Šä¸‹æ–‡å‘é‡-c-çš„ç”¨æ³•"><a class="markdownIt-Anchor" href="#42-ä¸Šä¸‹æ–‡å‘é‡-c-çš„ç”¨æ³•"></a> 4.2 ä¸Šä¸‹æ–‡å‘é‡ C çš„ç”¨æ³•</h3><p><strong>æ–¹å¼ä¸€ï¼šåˆå§‹åŒ– Decoder çŠ¶æ€ï¼ˆç»å…¸ï¼‰</strong></p><ul><li>ç®€å•ç›´è§‚</li><li>ä¿¡æ¯å¯èƒ½éšæ—¶é—´è¡°å‡</li></ul><p><strong>æ–¹å¼äºŒï¼šæ¯ä¸ªæ—¶é—´æ­¥éƒ½è¾“å…¥ C</strong></p><ul><li>æ¯æ­¥éƒ½æœ‰å…¨å±€ä¿¡æ¯</li><li>ä½† C æ˜¯é™æ€çš„ï¼Œä»ç„¶æ— æ³•å¯¹é½</li></ul><p>ğŸ‘‰ ä¸¤ç§æ–¹å¼éƒ½å­˜åœ¨ <strong>ä¿¡æ¯ç“¶é¢ˆ</strong></p><hr /><h3 id="43-æŸå¤±å‡½æ•°"><a class="markdownIt-Anchor" href="#43-æŸå¤±å‡½æ•°"></a> 4.3 æŸå¤±å‡½æ•°</h3><ul><li>æ¯ä¸ªæ—¶é—´æ­¥åšä¸€æ¬¡ softmax</li><li>ç”¨ <strong>CrossEntropyLoss</strong></li><li>å¿½ç•¥ <code>&lt;PAD&gt;</code>ï¼ˆignore_indexï¼‰</li><li>æ€»æŸå¤± = å„æ—¶é—´æ­¥æŸå¤±ä¹‹å’Œ / å¹³å‡</li></ul><hr /><h3 id="44-ç‰¹æ®Š-token-ä¸æ•°æ®æ„é€ "><a class="markdownIt-Anchor" href="#44-ç‰¹æ®Š-token-ä¸æ•°æ®æ„é€ "></a> 4.4 ç‰¹æ®Š Token ä¸æ•°æ®æ„é€ </h3><p>å¸¸è§ tokenï¼š</p><ul><li><code>&lt;PAD&gt;</code>ï¼šå¡«å……</li><li><code>&lt;SOS&gt;</code>ï¼šè§£ç èµ·å§‹</li><li><code>&lt;EOS&gt;</code>ï¼šå¥å­ç»“æŸ</li><li><code>&lt;UNK&gt;</code>ï¼šæœªç™»å½•è¯</li></ul><p>Decoder è®­ç»ƒæ—¶çš„â€œé”™ä½â€è®¾è®¡ï¼š</p><ul><li>åŸç›®æ ‡ï¼š<code>W X Y Z</code></li><li>Decoder è¾“å…¥ï¼š<code>&lt;SOS&gt; W X Y</code></li><li>Decoder ç›®æ ‡ï¼š<code>W X Y Z &lt;EOS&gt;</code></li></ul><hr /><h2 id="5-è®­ç»ƒ-vs-æ¨ç†"><a class="markdownIt-Anchor" href="#5-è®­ç»ƒ-vs-æ¨ç†"></a> 5. è®­ç»ƒ vs æ¨ç†</h2><h3 id="51-æ•™å¸ˆå¼ºåˆ¶teacher-forcing"><a class="markdownIt-Anchor" href="#51-æ•™å¸ˆå¼ºåˆ¶teacher-forcing"></a> 5.1 æ•™å¸ˆå¼ºåˆ¶ï¼ˆTeacher Forcingï¼‰</h3><p>è®­ç»ƒæ—¶ï¼š</p><ul><li><p>ä¸‹ä¸€æ­¥è¾“å…¥ <strong>ç”¨çœŸå®æ ‡ç­¾</strong></p></li><li><p>å¥½å¤„ï¼š</p><ul><li>æ”¶æ•›æ›´å¿«</li><li>æ›´ç¨³å®š</li></ul></li><li><p>ç¼ºç‚¹ï¼š</p><ul><li>è®­ç»ƒ / æ¨ç†ä¸ä¸€è‡´ï¼ˆexposure biasï¼‰</li></ul></li></ul><hr /><h3 id="52-æ¨ç†è‡ªå›å½’"><a class="markdownIt-Anchor" href="#52-æ¨ç†è‡ªå›å½’"></a> 5.2 æ¨ç†ï¼ˆè‡ªå›å½’ï¼‰</h3><p>æ¨ç†æ—¶ï¼š</p><ul><li>æ²¡æœ‰çœŸå®ç­”æ¡ˆ</li><li>ç”¨ <strong>è‡ªå·±ä¸Šä¸€æ­¥çš„é¢„æµ‹</strong> ä½œä¸ºè¾“å…¥</li></ul><p>å®ç°è¦ç‚¹ï¼š</p><ul><li><strong>ç¼“å­˜ hidden / cell</strong></li><li>æ¯ä¸€æ­¥åªç®—ä¸€æ¬¡ RNN</li><li>é¿å…ä»å¤´é‡å¤è®¡ç®—</li></ul><hr /><h3 id="53-è§£ç ç­–ç•¥"><a class="markdownIt-Anchor" href="#53-è§£ç ç­–ç•¥"></a> 5.3 è§£ç ç­–ç•¥</h3><ul><li><p><strong>Greedy Search</strong></p><ul><li>æ¯æ­¥é€‰æœ€å¤§æ¦‚ç‡</li><li>å¿«ï¼Œä½†å®¹æ˜“å±€éƒ¨æœ€ä¼˜</li></ul></li><li><p><strong>Beam Search</strong></p><ul><li>ä¿ç•™å¤šä¸ªå€™é€‰</li><li>å…¨å±€æ•ˆæœæ›´å¥½</li></ul></li></ul><hr /><h2 id="6-seq2seq-çš„æ³›åŒ–åº”ç”¨"><a class="markdownIt-Anchor" href="#6-seq2seq-çš„æ³›åŒ–åº”ç”¨"></a> 6. Seq2Seq çš„æ³›åŒ–åº”ç”¨</h2><p>Encoderâ€“Decoder æ˜¯ä¸€ç§<strong>é€šç”¨è½¬æ¢èŒƒå¼</strong>ï¼š</p><ul><li>è¯­éŸ³ â†’ æ–‡æœ¬ï¼ˆASRï¼‰</li><li>å›¾åƒ â†’ æ–‡æœ¬ï¼ˆImage Captionï¼‰</li><li>æ–‡æœ¬ â†’ è¯­éŸ³ï¼ˆTTSï¼‰</li><li>QA / æ‘˜è¦ / å¯¹è¯</li><li>ç”šè‡³åˆ†ç±»ä¹Ÿå¯â€œç”ŸæˆåŒ–â€</li></ul><hr /><h2 id="7-æ ¸å¿ƒå±€é™ä¿¡æ¯ç“¶é¢ˆ"><a class="markdownIt-Anchor" href="#7-æ ¸å¿ƒå±€é™ä¿¡æ¯ç“¶é¢ˆ"></a> 7. æ ¸å¿ƒå±€é™ï¼šä¿¡æ¯ç“¶é¢ˆ</h2><p>é—®é¢˜æœ¬è´¨ï¼š</p><ul><li>Encoder â†’ Decoder ä¹‹é—´ <strong>åªæœ‰ä¸€ä¸ªå›ºå®šé•¿åº¦å‘é‡ C</strong></li></ul><p>åæœï¼š</p><ol><li><strong>é•¿å¥ä¿¡æ¯å‹ç¼©å›°éš¾</strong></li><li>Decoder æ¯ä¸€æ­¥çœ‹åˆ°çš„éƒ½æ˜¯åŒä¸€ä¸ª C</li><li>æ— æ³•â€œå¯¹é½â€è¾“å…¥ä¸è¾“å‡ºä½ç½®</li></ol><p>ç›´è§‚ç†è§£ï¼š</p><blockquote><p>è®©äººæŠŠä¸€æ•´ç¯‡æ–‡ç« å‹ç¼©æˆä¸€å¥è¯ï¼Œå†å¤è¿°å…¨æ–‡</p></blockquote><p>ğŸ‘‰ ç›´æ¥å‚¬ç”Ÿäº† <strong>Attention æœºåˆ¶</strong></p><p>ğŸ‘‰ æœ€ç»ˆå‘å±•ä¸º <strong>Transformer</strong></p>]]></content>
      
      
      <categories>
          
          <category> base-llmå­¦ä¹ ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> datawhaleç»„é˜Ÿå­¦ä¹ , base-llmå­¦ä¹ ç¬”è®°, å¤§æ¨¡å‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[ä¹¦ç”Ÿå¤§æ¨¡å‹]è®ºæ–‡åˆ†ç±»å¾®è°ƒæ‰“æ¦œèµ›äºŒç­‰å¥–-æ¯”èµ›æ–¹æ¡ˆåˆ†äº«</title>
      <link href="/posts/22078.html"/>
      <url>/posts/22078.html</url>
      
        <content type="html"><![CDATA[<h2 id="æ¯”èµ›èƒŒæ™¯"><a class="markdownIt-Anchor" href="#æ¯”èµ›èƒŒæ™¯"></a> æ¯”èµ›èƒŒæ™¯</h2><p>è¯¥æ¯”èµ›ç®—æ˜¯â€œä¹¦ç”Ÿå¤§æ¨¡å‹å®æˆ˜è¥-ç¬¬äº”æœŸâ€çš„æ²æ›¦é­”ä¹ä¸“åœºã€‚</p><img src="https://picbed.octalzhihao.top/img/202508141719985.png" style="zoom:50%;" align=left /><div style="clear: both;"></div><p>æ¯”èµ›ä»»åŠ¡å°±æ˜¯åœ¨æ²æ›¦ç®—åŠ›ä¸‹å¾®è°ƒInternLM-1.5Bè¿›è¡Œè®ºæ–‡åˆ†ç±»ï¼Œç”±æ²æ›¦å’Œé­”ä¹ç¤¾åŒºæä¾›èµåŠ©å’Œå¹³å°æ”¯æŒï¼Œè¦æ±‚å‘¢å°±æ˜¯å¿…é¡»å¾—ç”¨æ²æ›¦çš„ç®—åŠ›æ¥å¾®è°ƒã€‚</p><blockquote><p>ç¬”è€…æœ€ç»ˆæ¯”èµ›æˆç»©ä¸º83.36ï¼Œåœ¨æ¯”èµ›ç»“æŸåç‰¹å°†æ¯”èµ›æ–¹æ¡ˆåˆ†äº«äºæ­¤ã€‚<br /><img src="https://picbed.octalzhihao.top/img/202508141722485.png" alt="" /></p></blockquote><h2 id="åˆ›å»ºæ²æ›¦ç®—åŠ›å®¹å™¨åŠé…ç½®ç¯å¢ƒ"><a class="markdownIt-Anchor" href="#åˆ›å»ºæ²æ›¦ç®—åŠ›å®¹å™¨åŠé…ç½®ç¯å¢ƒ"></a> åˆ›å»ºæ²æ›¦ç®—åŠ›å®¹å™¨åŠé…ç½®ç¯å¢ƒ</h2><blockquote><p>æœ¬ä»»åŠ¡ä½¿ç”¨D.runå¹³å°æä¾›çš„æ²æ›¦ç®—åŠ›å®Œæˆï¼Œå¤§éƒ¨åˆ†æ—¶é—´ç™½å«–äº†32Gçš„ï¼Œé«˜å³°æœŸåˆ™ä½¿ç”¨äº†é¦™æ¸¯ä¸€åŒºçš„64Gã€‚</p></blockquote><p><a href="https://console.d.run/zestu/market?regionId=sh-06">https://console.d.run/zestu/market?regionId=sh-06</a></p><p>é€‰æ‹©Pytorché•œåƒ</p><p><img src="https://picbed.octalzhihao.top/img/202508141726619.png" alt="" /></p><p>å®‰è£… ms-swift</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">conda create -n ms-swift python=3.10 -y</span><br><span class="line">conda activate ms-swift</span><br><span class="line">pip install ms-swift -U</span><br></pre></td></tr></table></figure><blockquote><p>ä¸­é€”æœåŠ¡å™¨é•œåƒæ›´æ–°è¿‡ä¸€æ¬¡ï¼Œæœ€æ–°ç‰ˆçš„é•œåƒå¯èƒ½éœ€è¦å…ˆ <code>pip uninstall flash_attn</code> å†æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œä¸ç„¶ä¼šæœ‰ç‰ˆæœ¬é—®é¢˜ã€‚</p><p>(PSï¼šæœ¬æ–‡å…·æœ‰æ—¶æ•ˆæ€§ï¼Œä¸ç¡®ä¿è¯¥æ–¹æ¡ˆä¼šé€‚ç”¨äºD.runæœªæ¥æ›´æ–°åçš„é•œåƒ)</p></blockquote><p>ç„¶åå®‰è£…mxç¼–è¯‘åçš„åŒ…</p><p>åˆ›å»ºrequirements.txtå†…å®¹å¦‚ä¸‹</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">apex==0.1+metax2.32.0.3</span><br><span class="line">torch==2.6.0+metax2.32.0.3</span><br><span class="line">torchaudio==2.4.1+metax2.32.0.3</span><br><span class="line">torchvision==0.15.1+metax2.32.0.3</span><br><span class="line">triton==3.0.0+metax2.32.0.3 </span><br><span class="line">flash_attn</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install -r requirements.txt -i https://repos.metax-tech.com/r/maca-pypi/simple --trusted-host repos.metax-tech.com --no-build-isolation</span><br></pre></td></tr></table></figure><p>å®‰è£…æäº¤é­”ä¹å¹³å°çš„åŒ…</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip install openmind_hub[all]</span><br><span class="line">pip install <span class="string">&quot;openmind[pt]&quot;</span> --extra-index-url https://download.pytorch.org/whl/cpu</span><br></pre></td></tr></table></figure><h2 id="æ„å»ºæ•°æ®é›†"><a class="markdownIt-Anchor" href="#æ„å»ºæ•°æ®é›†"></a> æ„å»ºæ•°æ®é›†</h2><p>è€ƒè™‘åˆ°å…¬å¼€çš„ç¤ºä¾‹æ•°æ®æ˜¯ååˆ†ç±»ï¼Œå¹¶ä¸”åªåŒ…æ‹¬äº†26ç±»ä¸­çš„6ç±»ï¼Œç›´æ¥ä½¿ç”¨ç¤ºä¾‹æ•°æ®æ¥è¿›è¡Œè®­ç»ƒä¸Šé™è‚¯å®šæ˜¯æœ‰é™çš„ã€‚ï¼ˆæœ€æ—©æˆ‘è¯•äº†ï¼Œåº”è¯¥åªèƒ½åˆ°å››åå‡ åˆ†æ•°ï¼‰</p><p>æ‰€ä»¥éœ€è¦è‡ªå·±æ ¹æ®arXivæ•°æ®é›†é€ æ•°æ®ï¼Œæˆ‘æ˜¯ç›´æ¥æŠŠarXivæ•°æ®é›†ä¸‹è½½åˆ°æœ¬åœ°è¿›è¡Œå¤„ç†çš„ã€‚</p><p><strong>å…ˆå¯¹æ•°æ®é›†åšä¸€ä¸ªç®€å•çš„åˆ†æ</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> Counter</span><br><span class="line"><span class="keyword">from</span> pathlib <span class="keyword">import</span> Path</span><br><span class="line"></span><br><span class="line"><span class="comment"># åŸå§‹ç±»åˆ«æ˜ å°„ï¼ˆè‹±æ–‡ â†’ A-Zï¼‰</span></span><br><span class="line">CATEGORY_MAP = &#123;</span><br><span class="line">    <span class="string">&quot;quant-ph&quot;</span>: <span class="string">&quot;A&quot;</span>, <span class="string">&quot;physics.chem-ph&quot;</span>: <span class="string">&quot;B&quot;</span>, <span class="string">&quot;physics.atom-ph&quot;</span>: <span class="string">&quot;C&quot;</span>,</span><br><span class="line">    <span class="string">&quot;cond-mat.soft&quot;</span>: <span class="string">&quot;D&quot;</span>, <span class="string">&quot;cs.RO&quot;</span>: <span class="string">&quot;E&quot;</span>, <span class="string">&quot;cs.CL&quot;</span>: <span class="string">&quot;F&quot;</span>, <span class="string">&quot;cs.SE&quot;</span>: <span class="string">&quot;G&quot;</span>,</span><br><span class="line">    <span class="string">&quot;cs.IR&quot;</span>: <span class="string">&quot;H&quot;</span>, <span class="string">&quot;hep-th&quot;</span>: <span class="string">&quot;I&quot;</span>, <span class="string">&quot;hep-ph&quot;</span>: <span class="string">&quot;J&quot;</span>, <span class="string">&quot;physics.optics&quot;</span>: <span class="string">&quot;K&quot;</span>,</span><br><span class="line">    <span class="string">&quot;cs.AI&quot;</span>: <span class="string">&quot;L&quot;</span>, <span class="string">&quot;cs.CV&quot;</span>: <span class="string">&quot;M&quot;</span>, <span class="string">&quot;nucl-th&quot;</span>: <span class="string">&quot;N&quot;</span>, <span class="string">&quot;astro-ph&quot;</span>: <span class="string">&quot;O&quot;</span>,</span><br><span class="line">    <span class="string">&quot;math.PR&quot;</span>: <span class="string">&quot;P&quot;</span>, <span class="string">&quot;cs.OS&quot;</span>: <span class="string">&quot;Q&quot;</span>, <span class="string">&quot;eess.SP&quot;</span>: <span class="string">&quot;R&quot;</span>, <span class="string">&quot;math.OC&quot;</span>: <span class="string">&quot;S&quot;</span>,</span><br><span class="line">    <span class="string">&quot;math.DS&quot;</span>: <span class="string">&quot;T&quot;</span>, <span class="string">&quot;math.DG&quot;</span>: <span class="string">&quot;U&quot;</span>, <span class="string">&quot;math.MP&quot;</span>: <span class="string">&quot;V&quot;</span>, <span class="string">&quot;cs.MM&quot;</span>: <span class="string">&quot;W&quot;</span>,</span><br><span class="line">    <span class="string">&quot;stat.ME&quot;</span>: <span class="string">&quot;X&quot;</span>, <span class="string">&quot;math.CO&quot;</span>: <span class="string">&quot;Y&quot;</span>, <span class="string">&quot;cs.NE&quot;</span>: <span class="string">&quot;Z&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸­æ–‡åæ˜ å°„ï¼ˆA-Z â†’ ä¸­æ–‡ï¼‰</span></span><br><span class="line">CATEGORY_NAME_MAP = &#123;</span><br><span class="line">    <span class="string">&quot;A&quot;</span>: <span class="string">&quot;é‡å­ç‰©ç†&quot;</span>, <span class="string">&quot;B&quot;</span>: <span class="string">&quot;åŒ–å­¦ç‰©ç†&quot;</span>, <span class="string">&quot;C&quot;</span>: <span class="string">&quot;åŸå­ç‰©ç†&quot;</span>, <span class="string">&quot;D&quot;</span>: <span class="string">&quot;è½¯å‡èšæ€ç‰©ç†&quot;</span>, <span class="string">&quot;E&quot;</span>: <span class="string">&quot;æœºå™¨äººå­¦&quot;</span>,</span><br><span class="line">    <span class="string">&quot;F&quot;</span>: <span class="string">&quot;è®¡ç®—è¯­è¨€å­¦&quot;</span>, <span class="string">&quot;G&quot;</span>: <span class="string">&quot;è½¯ä»¶å·¥ç¨‹&quot;</span>, <span class="string">&quot;H&quot;</span>: <span class="string">&quot;ä¿¡æ¯æ£€ç´¢&quot;</span>, <span class="string">&quot;I&quot;</span>: <span class="string">&quot;é«˜èƒ½ç†è®ºç‰©ç†&quot;</span>, <span class="string">&quot;J&quot;</span>: <span class="string">&quot;é«˜èƒ½ç°è±¡å­¦&quot;</span>,</span><br><span class="line">    <span class="string">&quot;K&quot;</span>: <span class="string">&quot;å…‰å­¦&quot;</span>, <span class="string">&quot;L&quot;</span>: <span class="string">&quot;äººå·¥æ™ºèƒ½&quot;</span>, <span class="string">&quot;M&quot;</span>: <span class="string">&quot;è®¡ç®—æœºè§†è§‰&quot;</span>, <span class="string">&quot;N&quot;</span>: <span class="string">&quot;æ ¸ç†è®º&quot;</span>, <span class="string">&quot;O&quot;</span>: <span class="string">&quot;å¤©ä½“ç‰©ç†&quot;</span>,</span><br><span class="line">    <span class="string">&quot;P&quot;</span>: <span class="string">&quot;æ¦‚ç‡è®º&quot;</span>, <span class="string">&quot;Q&quot;</span>: <span class="string">&quot;æ“ä½œç³»ç»Ÿ&quot;</span>, <span class="string">&quot;R&quot;</span>: <span class="string">&quot;ä¿¡å·å¤„ç†&quot;</span>, <span class="string">&quot;S&quot;</span>: <span class="string">&quot;æœ€ä¼˜åŒ–ä¸æ§åˆ¶&quot;</span>, <span class="string">&quot;T&quot;</span>: <span class="string">&quot;åŠ¨åŠ›ç³»ç»Ÿ&quot;</span>,</span><br><span class="line">    <span class="string">&quot;U&quot;</span>: <span class="string">&quot;å¾®åˆ†å‡ ä½•&quot;</span>, <span class="string">&quot;V&quot;</span>: <span class="string">&quot;æ•°å­¦ç‰©ç†&quot;</span>, <span class="string">&quot;W&quot;</span>: <span class="string">&quot;å¤šåª’ä½“&quot;</span>, <span class="string">&quot;X&quot;</span>: <span class="string">&quot;ç»Ÿè®¡æ–¹æ³•&quot;</span>, <span class="string">&quot;Y&quot;</span>: <span class="string">&quot;ç»„åˆæ•°å­¦&quot;</span>, <span class="string">&quot;Z&quot;</span>: <span class="string">&quot;ç¥ç»ä¸è¿›åŒ–è®¡ç®—&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">analyze_arxiv_categories</span>(<span class="params">jsonl_path: <span class="built_in">str</span></span>):</span><br><span class="line">    single_label_counter = Counter()</span><br><span class="line">    multi_label_counter = Counter()</span><br><span class="line">    total_single = <span class="number">0</span></span><br><span class="line">    total_multi = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(jsonl_path, <span class="string">&#x27;r&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        <span class="keyword">for</span> line <span class="keyword">in</span> f:</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                paper = json.loads(line)</span><br><span class="line">                raw_cat_str = paper.get(<span class="string">&quot;categories&quot;</span>, <span class="string">&quot;&quot;</span>)</span><br><span class="line">                raw_cats = raw_cat_str.strip().split()</span><br><span class="line">                mapped_cats = [CATEGORY_MAP[cat] <span class="keyword">for</span> cat <span class="keyword">in</span> raw_cats <span class="keyword">if</span> cat <span class="keyword">in</span> CATEGORY_MAP]</span><br><span class="line">                unique_cats = <span class="built_in">list</span>(<span class="built_in">set</span>(mapped_cats))</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> <span class="keyword">not</span> unique_cats:</span><br><span class="line">                    <span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> <span class="built_in">len</span>(unique_cats) == <span class="number">1</span>:</span><br><span class="line">                    single_label_counter[unique_cats[<span class="number">0</span>]] += <span class="number">1</span></span><br><span class="line">                    total_single += <span class="number">1</span></span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    <span class="keyword">for</span> c <span class="keyword">in</span> unique_cats:</span><br><span class="line">                        multi_label_counter[c] += <span class="number">1</span></span><br><span class="line">                    total_multi += <span class="number">1</span></span><br><span class="line">            <span class="keyword">except</span> json.JSONDecodeError:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;âš ï¸ æ— æ³•è§£æä»¥ä¸‹è¡Œï¼š&quot;</span>, line.strip()[:<span class="number">80</span>])</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">display</span>(<span class="params">counter, total, title</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;\n===== <span class="subst">&#123;title&#125;</span> =====&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;æ€»è®ºæ–‡æ•°ï¼š<span class="subst">&#123;total&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="keyword">for</span> cat <span class="keyword">in</span> <span class="built_in">sorted</span>(CATEGORY_NAME_MAP.keys()):</span><br><span class="line">            count = counter[cat]</span><br><span class="line">            percent = (count / total * <span class="number">100</span>) <span class="keyword">if</span> total &gt; <span class="number">0</span> <span class="keyword">else</span> <span class="number">0</span></span><br><span class="line">            name = CATEGORY_NAME_MAP[cat]</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;ç±»åˆ« <span class="subst">&#123;cat&#125;</span>ï¼ˆ<span class="subst">&#123;name&#125;</span>ï¼‰: <span class="subst">&#123;count&#125;</span> ç¯‡ï¼Œå æ¯” <span class="subst">&#123;percent:<span class="number">.2</span>f&#125;</span>%&quot;</span>)</span><br><span class="line"></span><br><span class="line">    display(single_label_counter, total_single, <span class="string">&quot;å•æ ‡ç­¾è®ºæ–‡ç»Ÿè®¡&quot;</span>)</span><br><span class="line">    display(multi_label_counter, total_multi, <span class="string">&quot;å¤šæ ‡ç­¾è®ºæ–‡ç»Ÿè®¡&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    jsonl_file = <span class="string">&quot;arxiv_raw.json&quot;</span>  <span class="comment"># ä¿®æ”¹ä¸ºä½ çš„çœŸå®è·¯å¾„</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> Path(jsonl_file).exists():</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;âŒ æ‰¾ä¸åˆ°æ–‡ä»¶ï¼š<span class="subst">&#123;jsonl_file&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        analyze_arxiv_categories(jsonl_file)</span><br></pre></td></tr></table></figure><p>åˆ†æç»“æœ</p><p><img src="https://picbed.octalzhihao.top/img/202508141732728.png" alt="" /></p><p><img src="https://picbed.octalzhihao.top/img/202508141732961.png" alt="" /></p><p>åŸæœ¬æ•°æ®æ˜¯ä¸å¹³è¡¡çš„ï¼Œå¹¶ä¸”æœ‰å¤šç±»åˆ«çš„å¹²æ‰°ï¼Œæ¯”è¾ƒæ£˜æ‰‹ã€‚æœ€å¼€å§‹æˆ‘æœ‰å°è¯•æŠŠå¤šç±»åˆ«æ•°æ®åŠ è¿›æ¥ï¼Œä½†å»é™¤åŒæ—¶åŒ…å«è¿™26ç±»ä¸­çš„å¤šç±»çš„ï¼Œä½†åç»­æ„Ÿè§‰è¿˜ä¸å¦‚ç›´æ¥ç”¨å•ç±»åˆ«çš„è®ºæ–‡æ¥çš„æ•ˆæœå¥½ã€‚</p><h3 id="æŠ½å–26ç±»çš„å­é›†"><a class="markdownIt-Anchor" href="#æŠ½å–26ç±»çš„å­é›†"></a> æŠ½å–26ç±»çš„å­é›†</h3><p>ä»¥ä¸‹æ˜¯ä»arXivåŸå§‹æ•°æ®é›†ä¸­é€‰æ‹©å­é›†çš„è„šæœ¬</p><p>è¿™é‡Œæ”¾çš„æ˜¯æˆ‘æœ€ç»ˆé‡‡ç”¨çš„æ–¹æ³•ï¼šç›´æ¥èˆå¼ƒäº†å¤šç±»åˆ«æ•°æ®ï¼Œåªçœ‹å•ä¸€ç±»åˆ«çš„è®ºæ–‡ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> argparse</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">from</span> pathlib <span class="keyword">import</span> Path</span><br><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> defaultdict</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç›®æ ‡ 26 ç±»</span></span><br><span class="line">TARGET_CATEGORIES = [</span><br><span class="line">    <span class="string">&quot;quant-ph&quot;</span>, <span class="string">&quot;physics.chem-ph&quot;</span>, <span class="string">&quot;physics.atom-ph&quot;</span>, <span class="string">&quot;cond-mat.soft&quot;</span>,</span><br><span class="line">    <span class="string">&quot;cs.RO&quot;</span>, <span class="string">&quot;cs.CL&quot;</span>, <span class="string">&quot;cs.SE&quot;</span>, <span class="string">&quot;cs.IR&quot;</span>, <span class="string">&quot;hep-th&quot;</span>, <span class="string">&quot;hep-ph&quot;</span>,</span><br><span class="line">    <span class="string">&quot;physics.optics&quot;</span>, <span class="string">&quot;cs.AI&quot;</span>, <span class="string">&quot;cs.CV&quot;</span>, <span class="string">&quot;nucl-th&quot;</span>, <span class="string">&quot;astro-ph&quot;</span>,</span><br><span class="line">    <span class="string">&quot;math.PR&quot;</span>, <span class="string">&quot;cs.OS&quot;</span>, <span class="string">&quot;eess.SP&quot;</span>, <span class="string">&quot;math.OC&quot;</span>, <span class="string">&quot;math.DS&quot;</span>,</span><br><span class="line">    <span class="string">&quot;math.DG&quot;</span>, <span class="string">&quot;math.MP&quot;</span>, <span class="string">&quot;cs.MM&quot;</span>, <span class="string">&quot;stat.ME&quot;</span>, <span class="string">&quot;math.CO&quot;</span>, <span class="string">&quot;cs.NE&quot;</span></span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment"># â€”â€” åœ¨è¿™é‡Œå®šä¹‰ custom æ¨¡å¼ä¸‹çš„å„ç±»æŠ½æ ·æ•° â€”â€” </span></span><br><span class="line"><span class="comment"># æŒ‡å®š 6 ç±»ä¸º 10ï¼Œå…¶ä½™ 20 ç±»ä¸º 60</span></span><br><span class="line">CUSTOM_COUNTS = &#123;</span><br><span class="line">    <span class="comment"># 6 ç±»ï¼Œæ¯ç±»æ•°é‡ 10</span></span><br><span class="line">    <span class="string">&quot;astro-ph&quot;</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="string">&quot;cs.CL&quot;</span>:    <span class="number">0</span>,</span><br><span class="line">    <span class="string">&quot;cs.CV&quot;</span>:    <span class="number">0</span>,</span><br><span class="line">    <span class="string">&quot;hep-ph&quot;</span>:   <span class="number">0</span>,</span><br><span class="line">    <span class="string">&quot;hep-th&quot;</span>:   <span class="number">0</span>,</span><br><span class="line">    <span class="string">&quot;quant-ph&quot;</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="comment"># å…¶ä½™ 20 ç±»ï¼Œæ¯ç±»æ•°é‡ 60</span></span><br><span class="line">    <span class="string">&quot;physics.chem-ph&quot;</span>: <span class="number">60</span>,</span><br><span class="line">    <span class="string">&quot;physics.atom-ph&quot;</span>: <span class="number">60</span>,</span><br><span class="line">    <span class="string">&quot;cond-mat.soft&quot;</span>:   <span class="number">60</span>,</span><br><span class="line">    <span class="string">&quot;cs.RO&quot;</span>:           <span class="number">60</span>,</span><br><span class="line">    <span class="string">&quot;cs.SE&quot;</span>:           <span class="number">60</span>,</span><br><span class="line">    <span class="string">&quot;cs.IR&quot;</span>:           <span class="number">60</span>,</span><br><span class="line">    <span class="string">&quot;physics.optics&quot;</span>:  <span class="number">60</span>,</span><br><span class="line">    <span class="string">&quot;cs.AI&quot;</span>:           <span class="number">60</span>,</span><br><span class="line">    <span class="string">&quot;nucl-th&quot;</span>:         <span class="number">60</span>,</span><br><span class="line">    <span class="string">&quot;math.PR&quot;</span>:         <span class="number">60</span>,</span><br><span class="line">    <span class="string">&quot;cs.OS&quot;</span>:           <span class="number">60</span>,</span><br><span class="line">    <span class="string">&quot;eess.SP&quot;</span>:         <span class="number">60</span>,</span><br><span class="line">    <span class="string">&quot;math.OC&quot;</span>:         <span class="number">60</span>,</span><br><span class="line">    <span class="string">&quot;math.DS&quot;</span>:         <span class="number">60</span>,</span><br><span class="line">    <span class="string">&quot;math.DG&quot;</span>:         <span class="number">60</span>,</span><br><span class="line">    <span class="string">&quot;math.MP&quot;</span>:         <span class="number">60</span>,</span><br><span class="line">    <span class="string">&quot;cs.MM&quot;</span>:           <span class="number">60</span>,</span><br><span class="line">    <span class="string">&quot;stat.ME&quot;</span>:         <span class="number">60</span>,</span><br><span class="line">    <span class="string">&quot;math.CO&quot;</span>:         <span class="number">60</span>,</span><br><span class="line">    <span class="string">&quot;cs.NE&quot;</span>:           <span class="number">60</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">sample_and_shuffle</span>(<span class="params">input_path: Path,</span></span><br><span class="line"><span class="params">                       output_path: Path,</span></span><br><span class="line"><span class="params">                       mode: <span class="built_in">str</span>,</span></span><br><span class="line"><span class="params">                       uniform_count: <span class="built_in">int</span>,</span></span><br><span class="line"><span class="params">                       seed: <span class="built_in">int</span></span>):</span><br><span class="line">    random.seed(seed)</span><br><span class="line">    buckets = defaultdict(<span class="built_in">list</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 1) æ”¶é›†æ°å¥½å•æ ‡ç­¾è®°å½•</span></span><br><span class="line">    <span class="keyword">with</span> input_path.<span class="built_in">open</span>(<span class="string">&#x27;r&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> fin:</span><br><span class="line">        <span class="keyword">for</span> line <span class="keyword">in</span> fin:</span><br><span class="line">            rec = json.loads(line)</span><br><span class="line">            <span class="comment"># æ‹†åˆ† raw categories</span></span><br><span class="line">            raw = []</span><br><span class="line">            <span class="keyword">for</span> seg <span class="keyword">in</span> rec.get(<span class="string">&quot;categories&quot;</span>, <span class="string">&quot;&quot;</span>).split():</span><br><span class="line">                raw += seg.split(<span class="string">&#x27;,&#x27;</span>)</span><br><span class="line">            cats = [c.strip() <span class="keyword">for</span> c <span class="keyword">in</span> raw <span class="keyword">if</span> c.strip()]</span><br><span class="line">            matched = [c <span class="keyword">for</span> c <span class="keyword">in</span> cats <span class="keyword">if</span> c <span class="keyword">in</span> TARGET_CATEGORIES]</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">len</span>(matched) == <span class="number">1</span>:</span><br><span class="line">                cat = matched[<span class="number">0</span>]</span><br><span class="line">                rec[<span class="string">&quot;categories&quot;</span>] = cat</span><br><span class="line">                buckets[cat].append(rec)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 2) æŒ‰æ¨¡å¼ç¡®å®šæ¯ç±»æŠ½æ ·æ•°å¹¶é‡‡æ ·</span></span><br><span class="line">    sampled = []</span><br><span class="line">    <span class="keyword">for</span> cat <span class="keyword">in</span> TARGET_CATEGORIES:</span><br><span class="line">        recs = buckets.get(cat, [])</span><br><span class="line">        total = <span class="built_in">len</span>(recs)</span><br><span class="line">        <span class="keyword">if</span> mode == <span class="string">&quot;uniform&quot;</span>:</span><br><span class="line">            n = <span class="built_in">min</span>(total, uniform_count)</span><br><span class="line">        <span class="keyword">else</span>:  <span class="comment"># custom</span></span><br><span class="line">            <span class="keyword">if</span> cat <span class="keyword">not</span> <span class="keyword">in</span> CUSTOM_COUNTS:</span><br><span class="line">                <span class="keyword">raise</span> ValueError(<span class="string">f&quot;Custom counts æœªåŒ…å«ç±»åˆ« &#x27;<span class="subst">&#123;cat&#125;</span>&#x27;&quot;</span>)</span><br><span class="line">            n = <span class="built_in">min</span>(total, CUSTOM_COUNTS[cat])</span><br><span class="line">        chosen = random.sample(recs, n)</span><br><span class="line">        sampled.extend(chosen)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;cat&#125;</span>: æ€»æ•° <span class="subst">&#123;total&#125;</span>ï¼ŒæŠ½å– <span class="subst">&#123;n&#125;</span> æ¡&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 3) æ‰“ä¹±å…¨å±€å¹¶å†™å…¥</span></span><br><span class="line">    random.shuffle(sampled)</span><br><span class="line">    output_path.parent.mkdir(parents=<span class="literal">True</span>, exist_ok=<span class="literal">True</span>)</span><br><span class="line">    <span class="keyword">with</span> output_path.<span class="built_in">open</span>(<span class="string">&#x27;w&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> fout:</span><br><span class="line">        <span class="keyword">for</span> rec <span class="keyword">in</span> sampled:</span><br><span class="line">            fout.write(json.dumps(rec, ensure_ascii=<span class="literal">False</span>) + <span class="string">&quot;\n&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;\nâœ… å®Œæˆï¼æ¨¡å¼ï¼š<span class="subst">&#123;mode&#125;</span>ï¼Œç»“æœä¿å­˜åœ¨ <span class="subst">&#123;output_path&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    parser = argparse.ArgumentParser(</span><br><span class="line">        description=<span class="string">&quot;æŒ‰ 26 ç±»å•æ ‡ç­¾æŠ½æ ·å¹¶æ‰“ä¹±ï¼Œæ”¯æŒç»Ÿä¸€æˆ–è‡ªå®šä¹‰æ•°é‡ä¸¤ç§æ¨¡å¼&quot;</span></span><br><span class="line">    )</span><br><span class="line">    parser.add_argument(<span class="string">&quot;-i&quot;</span>,<span class="string">&quot;--input&quot;</span>,   <span class="built_in">type</span>=Path, default=<span class="string">&quot;arxiv_raw.json&quot;</span>,</span><br><span class="line">                        <span class="built_in">help</span>=<span class="string">&quot;åŸå§‹ Arxiv JSONL æ–‡ä»¶è·¯å¾„&quot;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&quot;-o&quot;</span>,<span class="string">&quot;--output&quot;</span>,  <span class="built_in">type</span>=Path, default=<span class="string">&quot;arxiv_26_subset.jsonl&quot;</span>,</span><br><span class="line">                        <span class="built_in">help</span>=<span class="string">&quot;è¾“å‡ºå­é›† JSONL æ–‡ä»¶è·¯å¾„&quot;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&quot;--mode&quot;</span>,         choices=[<span class="string">&quot;uniform&quot;</span>,<span class="string">&quot;custom&quot;</span>], default=<span class="string">&quot;uniform&quot;</span>,</span><br><span class="line">                        <span class="built_in">help</span>=<span class="string">&quot;æŠ½æ ·æ¨¡å¼ï¼šuniformï¼ˆç»Ÿä¸€æ•°é‡ï¼‰æˆ– customï¼ˆä½¿ç”¨è„šæœ¬ä¸­å®šä¹‰çš„å­—å…¸ï¼‰&quot;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&quot;-n&quot;</span>,<span class="string">&quot;--count&quot;</span>,   <span class="built_in">type</span>=<span class="built_in">int</span>, default=<span class="number">1000</span>,</span><br><span class="line">                        <span class="built_in">help</span>=<span class="string">&quot;è‹¥ mode=uniformï¼Œæ¯ç±»æŠ½å–çš„æ•°é‡&quot;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&quot;-s&quot;</span>,<span class="string">&quot;--seed&quot;</span>,    <span class="built_in">type</span>=<span class="built_in">int</span>, default=<span class="number">24</span>,</span><br><span class="line">                        <span class="built_in">help</span>=<span class="string">&quot;éšæœºç§å­ï¼Œä¿è¯å¯å¤ç°&quot;</span>)</span><br><span class="line">    args = parser.parse_args()</span><br><span class="line"></span><br><span class="line">    sample_and_shuffle(</span><br><span class="line">        input_path=args.<span class="built_in">input</span>,</span><br><span class="line">        output_path=args.output,</span><br><span class="line">        mode=args.mode,</span><br><span class="line">        uniform_count=args.count,</span><br><span class="line">        seed=args.seed</span><br><span class="line">    )</span><br></pre></td></tr></table></figure><blockquote><p>ä½¿ç”¨äº†ä¸¤ç§æ¨¡å¼ï¼Œcustomä¸ºè‡ªå®šä¹‰æ¯ä¸€ç±»çš„æ•°é‡ï¼Œuniformä¸ºç»Ÿä¸€æ•°é‡ç”Ÿæˆã€‚ä¸»è¦åŸå› æ˜¯æœ€å¼€å§‹æˆ‘å‘ç°ï¼Œéƒ¨åˆ†æ•°æ®ä½¿ç”¨å®˜æ–¹å…¬å¼€çš„ç¤ºä¾‹æ•°æ®æ•ˆæœä¼¼ä¹å¯ä»¥æœ‰ä¸€ç‚¹ç‚¹æå‡ï¼Œæ‰€ä»¥ä¸ºäº†æ•°æ®ç±»åˆ«çš„å¹³è¡¡æ€§å°±é€‰æ‹©è‡ªå®šä¹‰æ•°é‡ç”Ÿæˆä¹‹åå’Œç¤ºä¾‹æ•°æ®åšä¸€ä¸ªåˆå¹¶ã€‚</p><p>ä½†åé¢éšç€è®­ç»ƒæ•°æ®é‡çš„å˜å¤§å°±æ‡’å¾—é‡‡ç”¨è¿™ç§æ–¹æ³•äº†ï¼Œç›´æ¥é€‰æ‹©äº†ç»Ÿä¸€æ•°é‡éšæœºç”Ÿæˆã€‚</p></blockquote><h3 id="æ„å»ºé¢„è®­ç»ƒä¸sftæ•°æ®"><a class="markdownIt-Anchor" href="#æ„å»ºé¢„è®­ç»ƒä¸sftæ•°æ®"></a> æ„å»ºé¢„è®­ç»ƒä¸sftæ•°æ®</h3><p>å…ˆæœ‰æŠ½å–è„šæœ¬æŠ½å–å‡ºjsonlæ ¼å¼çš„å­é›†ï¼Œç„¶åä½œä¸ºè¾“å…¥æ–‡ä»¶è¿è¡Œä»¥ä¸‹è„šæœ¬</p><p>åˆ›å»ºä¸€ä¸ªmake_pretrain.pyè„šæœ¬å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> argparse</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">from</span> pathlib <span class="keyword">import</span> Path</span><br><span class="line"><span class="keyword">from</span> dateutil <span class="keyword">import</span> parser <span class="keyword">as</span> dateparser  <span class="comment"># pip install python-dateutil</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ”¯æŒçš„ 26 ç±»</span></span><br><span class="line">SUPPORTED_CATEGORIES = [</span><br><span class="line">    <span class="string">&quot;quant-ph&quot;</span>,<span class="string">&quot;physics.chem-ph&quot;</span>,<span class="string">&quot;physics.atom-ph&quot;</span>,<span class="string">&quot;cond-mat.soft&quot;</span>,</span><br><span class="line">    <span class="string">&quot;cs.RO&quot;</span>,<span class="string">&quot;cs.CL&quot;</span>,<span class="string">&quot;cs.SE&quot;</span>,<span class="string">&quot;cs.IR&quot;</span>,<span class="string">&quot;hep-th&quot;</span>,<span class="string">&quot;hep-ph&quot;</span>,</span><br><span class="line">    <span class="string">&quot;physics.optics&quot;</span>,<span class="string">&quot;cs.AI&quot;</span>,<span class="string">&quot;cs.CV&quot;</span>,<span class="string">&quot;nucl-th&quot;</span>,<span class="string">&quot;astro-ph&quot;</span>,</span><br><span class="line">    <span class="string">&quot;math.PR&quot;</span>,<span class="string">&quot;cs.OS&quot;</span>,<span class="string">&quot;eess.SP&quot;</span>,<span class="string">&quot;math.OC&quot;</span>,<span class="string">&quot;math.DS&quot;</span>,</span><br><span class="line">    <span class="string">&quot;math.DG&quot;</span>,<span class="string">&quot;math.MP&quot;</span>,<span class="string">&quot;cs.MM&quot;</span>,<span class="string">&quot;stat.ME&quot;</span>,<span class="string">&quot;math.CO&quot;</span>,<span class="string">&quot;cs.NE&quot;</span></span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">format_versions</span>(<span class="params">versions</span>):</span><br><span class="line">    latest = versions[-<span class="number">1</span>]</span><br><span class="line">    v = latest.get(<span class="string">&quot;version&quot;</span>, <span class="string">&quot;v?&quot;</span>)</span><br><span class="line">    created = latest.get(<span class="string">&quot;created&quot;</span>, <span class="string">&quot;&quot;</span>)</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        dt = dateparser.parse(created)</span><br><span class="line">        created_fmt = dt.strftime(<span class="string">&quot;%B %-d, %Y&quot;</span>)</span><br><span class="line">    <span class="keyword">except</span> Exception:</span><br><span class="line">        created_fmt = created</span><br><span class="line">    <span class="keyword">return</span> v, created_fmt</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">build_pretrain_record</span>(<span class="params">rec: <span class="built_in">dict</span></span>) -&gt; <span class="built_in">dict</span>:</span><br><span class="line">    pid       = rec.get(<span class="string">&quot;id&quot;</span>, <span class="string">&quot;Unknown&quot;</span>)</span><br><span class="line">    title     = rec.get(<span class="string">&quot;title&quot;</span>, <span class="string">&quot;&quot;</span>).strip()</span><br><span class="line">    submitter = rec.get(<span class="string">&quot;submitter&quot;</span>, <span class="string">&quot;Unknown&quot;</span>)</span><br><span class="line">    authors   = rec.get(<span class="string">&quot;authors&quot;</span>, <span class="string">&quot;&quot;</span>).strip()</span><br><span class="line">    journal   = rec.get(<span class="string">&quot;journal-ref&quot;</span>) <span class="keyword">or</span> <span class="string">&quot;&quot;</span></span><br><span class="line">    doi       = rec.get(<span class="string">&quot;doi&quot;</span>) <span class="keyword">or</span> <span class="string">&quot;&quot;</span></span><br><span class="line">    license_  = rec.get(<span class="string">&quot;license&quot;</span>) <span class="keyword">or</span> <span class="string">&quot;&quot;</span></span><br><span class="line">    abstract  = rec.get(<span class="string">&quot;abstract&quot;</span>, <span class="string">&quot;&quot;</span>).strip()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># åªä¿ç•™ç¬¬ä¸€ä¸ªåŒ¹é…çš„æ”¯æŒç±»åˆ«</span></span><br><span class="line">    raw = rec.get(<span class="string">&quot;categories&quot;</span>, <span class="string">&quot;&quot;</span>)</span><br><span class="line">    parts = []</span><br><span class="line">    <span class="keyword">for</span> seg <span class="keyword">in</span> raw.split():</span><br><span class="line">        parts += seg.split(<span class="string">&#x27;,&#x27;</span>)</span><br><span class="line">    parts = [c.strip() <span class="keyword">for</span> c <span class="keyword">in</span> parts <span class="keyword">if</span> c.strip()]</span><br><span class="line">    selected = <span class="built_in">next</span>((c <span class="keyword">for</span> c <span class="keyword">in</span> parts <span class="keyword">if</span> c <span class="keyword">in</span> SUPPORTED_CATEGORIES), <span class="literal">None</span>)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> selected:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">None</span>  <span class="comment"># ä¸åŒ¹é…åˆ™è·³è¿‡</span></span><br><span class="line">    categories = selected</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ç‰ˆæœ¬ä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">if</span> rec.get(<span class="string">&quot;versions&quot;</span>):</span><br><span class="line">        v, vdate = format_versions(rec[<span class="string">&quot;versions&quot;</span>])</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        v, vdate = <span class="string">&quot;v?&quot;</span>, <span class="string">&quot;Unknown date&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># æ„é€  content</span></span><br><span class="line">    content = (</span><br><span class="line">        <span class="string">f&quot;This is a paper with ID <span class="subst">&#123;pid&#125;</span>, titled \&quot;<span class="subst">&#123;title&#125;</span>\&quot;, submitted by <span class="subst">&#123;submitter&#125;</span>. &quot;</span></span><br><span class="line">        <span class="string">f&quot;The authors are <span class="subst">&#123;authors&#125;</span>.\n&quot;</span></span><br><span class="line">    )</span><br><span class="line">    <span class="keyword">if</span> journal:</span><br><span class="line">        content += <span class="string">f&quot;It is published in <span class="subst">&#123;journal&#125;</span>. &quot;</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        content += <span class="string">&quot;It is not published in any journal. &quot;</span></span><br><span class="line">    content += <span class="string">f&quot;The latest version is <span class="subst">&#123;v&#125;</span>, created on <span class="subst">&#123;vdate&#125;</span>. &quot;</span></span><br><span class="line">    <span class="keyword">if</span> doi:</span><br><span class="line">        content += <span class="string">f&quot;DOI: <span class="subst">&#123;doi&#125;</span>. &quot;</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        content += <span class="string">&quot;No DOI information available. &quot;</span></span><br><span class="line">    <span class="keyword">if</span> license_:</span><br><span class="line">        content += <span class="string">f&quot;The license is <span class="subst">&#123;license_&#125;</span>. &quot;</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        content += <span class="string">&quot;No license information available. &quot;</span></span><br><span class="line">    content += <span class="string">f&quot;\n\nAbstract:\n<span class="subst">&#123;abstract&#125;</span>\n\n&quot;</span></span><br><span class="line">    content += <span class="string">f&quot;The paper belongs to the <span class="subst">&#123;categories&#125;</span> category.&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="string">&quot;messages&quot;</span>:[&#123;<span class="string">&quot;role&quot;</span>:<span class="string">&quot;assistant&quot;</span>,<span class="string">&quot;content&quot;</span>: content&#125;]&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    parser = argparse.ArgumentParser(</span><br><span class="line">        description=<span class="string">&quot;å°† Arxiv JSONL æ„é€ æˆ Pretrain æ ¼å¼ï¼Œä»…ä¿ç•™æ”¯æŒçš„ 26 ç±»&quot;</span></span><br><span class="line">    )</span><br><span class="line">    parser.add_argument(<span class="string">&quot;-i&quot;</span>,<span class="string">&quot;--input&quot;</span>, <span class="built_in">type</span>=Path, required=<span class="literal">True</span>, <span class="built_in">help</span>=<span class="string">&quot;Arxiv åŸå§‹ JSONL&quot;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&quot;-o&quot;</span>,<span class="string">&quot;--output&quot;</span>, <span class="built_in">type</span>=Path, required=<span class="literal">True</span>, <span class="built_in">help</span>=<span class="string">&quot;è¾“å‡º Pretrain JSONL&quot;</span>)</span><br><span class="line">    args = parser.parse_args()</span><br><span class="line"></span><br><span class="line">    args.output.parent.mkdir(parents=<span class="literal">True</span>, exist_ok=<span class="literal">True</span>)</span><br><span class="line">    kept = <span class="number">0</span></span><br><span class="line">    <span class="keyword">with</span> args.<span class="built_in">input</span>.<span class="built_in">open</span>(<span class="string">&#x27;r&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> fin, \</span><br><span class="line">         args.output.<span class="built_in">open</span>(<span class="string">&#x27;w&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> fout:</span><br><span class="line">        <span class="keyword">for</span> line <span class="keyword">in</span> fin:</span><br><span class="line">            rec = json.loads(line)</span><br><span class="line">            pre = build_pretrain_record(rec)</span><br><span class="line">            <span class="keyword">if</span> pre:</span><br><span class="line">                fout.write(json.dumps(pre, ensure_ascii=<span class="literal">False</span>) + <span class="string">&quot;\n&quot;</span>)</span><br><span class="line">                kept += <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;âœ… å®Œæˆï¼å…±ä¿ç•™ <span class="subst">&#123;kept&#125;</span> æ¡è®°å½•ï¼Œè¾“å‡ºåˆ° <span class="subst">&#123;args.output&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__==<span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure><p>make_sft.pyè„šæœ¬å¦‚ä¸‹ï¼ˆä¿®æ”¹æç¤ºè¯ç›´æ¥åœ¨æ­¤è„šæœ¬è¿›è¡Œï¼‰ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> argparse</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">from</span> pathlib <span class="keyword">import</span> Path</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ”¯æŒçš„ 26 ç±»ï¼ˆAâ€“Z é¡ºåºï¼‰</span></span><br><span class="line">LABELS = [</span><br><span class="line">    <span class="string">&quot;quant-ph&quot;</span>, <span class="string">&quot;physics.chem-ph&quot;</span>, <span class="string">&quot;physics.atom-ph&quot;</span>, <span class="string">&quot;cond-mat.soft&quot;</span>,</span><br><span class="line">    <span class="string">&quot;cs.RO&quot;</span>, <span class="string">&quot;cs.CL&quot;</span>, <span class="string">&quot;cs.SE&quot;</span>, <span class="string">&quot;cs.IR&quot;</span>, <span class="string">&quot;hep-th&quot;</span>, <span class="string">&quot;hep-ph&quot;</span>,</span><br><span class="line">    <span class="string">&quot;physics.optics&quot;</span>, <span class="string">&quot;cs.AI&quot;</span>, <span class="string">&quot;cs.CV&quot;</span>, <span class="string">&quot;nucl-th&quot;</span>, <span class="string">&quot;astro-ph&quot;</span>,</span><br><span class="line">    <span class="string">&quot;math.PR&quot;</span>, <span class="string">&quot;cs.OS&quot;</span>, <span class="string">&quot;eess.SP&quot;</span>, <span class="string">&quot;math.OC&quot;</span>, <span class="string">&quot;math.DS&quot;</span>,</span><br><span class="line">    <span class="string">&quot;math.DG&quot;</span>, <span class="string">&quot;math.MP&quot;</span>, <span class="string">&quot;cs.MM&quot;</span>, <span class="string">&quot;stat.ME&quot;</span>, <span class="string">&quot;math.CO&quot;</span>, <span class="string">&quot;cs.NE&quot;</span></span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">SYSTEM_PROMPT = <span class="string">&quot;ä½ æ˜¯ä¸ªä¼˜ç§€çš„è®ºæ–‡åˆ†ç±»å¸ˆ&quot;</span></span><br><span class="line"></span><br><span class="line">SUFFIX = (</span><br><span class="line">    <span class="string">&quot;please determine the scientific category of this paper.  \n\n&quot;</span></span><br><span class="line">    <span class="string">&quot;A. quant-ph\n&quot;</span></span><br><span class="line">    <span class="string">&quot;B. physics.chem-ph\n&quot;</span></span><br><span class="line">    <span class="string">&quot;C. physics.atom-ph\n&quot;</span></span><br><span class="line">    <span class="string">&quot;D. cond-mat.soft\n&quot;</span></span><br><span class="line">    <span class="string">&quot;E. cs.RO\n&quot;</span></span><br><span class="line">    <span class="string">&quot;F. cs.CL\n&quot;</span></span><br><span class="line">    <span class="string">&quot;G. cs.SE\n&quot;</span></span><br><span class="line">    <span class="string">&quot;H. cs.IR\n&quot;</span></span><br><span class="line">    <span class="string">&quot;I. hep-th\n&quot;</span></span><br><span class="line">    <span class="string">&quot;J. hep-ph\n&quot;</span></span><br><span class="line">    <span class="string">&quot;K. physics.optics\n&quot;</span></span><br><span class="line">    <span class="string">&quot;L. cs.AI\n&quot;</span></span><br><span class="line">    <span class="string">&quot;M. cs.CV\n&quot;</span></span><br><span class="line">    <span class="string">&quot;N. nucl-th\n&quot;</span></span><br><span class="line">    <span class="string">&quot;O. astro-ph\n&quot;</span></span><br><span class="line">    <span class="string">&quot;P. math.PR\n&quot;</span></span><br><span class="line">    <span class="string">&quot;Q. cs.OS\n&quot;</span></span><br><span class="line">    <span class="string">&quot;R. eess.SP\n&quot;</span></span><br><span class="line">    <span class="string">&quot;S. math.OC\n&quot;</span></span><br><span class="line">    <span class="string">&quot;T. math.DS\n&quot;</span></span><br><span class="line">    <span class="string">&quot;U. math.DG\n&quot;</span></span><br><span class="line">    <span class="string">&quot;V. math.MP\n&quot;</span></span><br><span class="line">    <span class="string">&quot;W. cs.MM\n&quot;</span></span><br><span class="line">    <span class="string">&quot;X. stat.ME\n&quot;</span></span><br><span class="line">    <span class="string">&quot;Y. math.CO\n&quot;</span></span><br><span class="line">    <span class="string">&quot;Z. cs.NE&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">build_sft_record</span>(<span class="params">rec: <span class="built_in">dict</span></span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    æ„é€  SFT è®°å½•ï¼Œè‹¥æ— åŒ¹é…ç±»åˆ«åˆ™è¿”å› Noneã€‚</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    title    = rec.get(<span class="string">&quot;title&quot;</span>, <span class="string">&quot;&quot;</span>).strip()</span><br><span class="line">    authors  = rec.get(<span class="string">&quot;authors&quot;</span>, <span class="string">&quot;&quot;</span>).strip()</span><br><span class="line">    abstract = rec.get(<span class="string">&quot;abstract&quot;</span>, <span class="string">&quot;&quot;</span>).strip()</span><br><span class="line">    cats_raw = rec.get(<span class="string">&quot;categories&quot;</span>, <span class="string">&quot;&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># æ‹†åˆ†å¤šç±»åˆ«å­—æ®µ</span></span><br><span class="line">    parts = []</span><br><span class="line">    <span class="keyword">for</span> seg <span class="keyword">in</span> cats_raw.split():</span><br><span class="line">        parts += seg.split(<span class="string">&#x27;,&#x27;</span>)</span><br><span class="line">    parts = [c.strip() <span class="keyword">for</span> c <span class="keyword">in</span> parts <span class="keyword">if</span> c.strip()]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># é€‰ç¬¬ä¸€ä¸ªå‡ºç°åœ¨ LABELS ä¸­çš„ç±»åˆ«</span></span><br><span class="line">    selected = <span class="built_in">next</span>((c <span class="keyword">for</span> c <span class="keyword">in</span> parts <span class="keyword">if</span> c <span class="keyword">in</span> LABELS), <span class="literal">None</span>)</span><br><span class="line">    <span class="keyword">if</span> selected <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">None</span>, parts  <span class="comment"># è¿”å› parts ä¾›æ—¥å¿—</span></span><br><span class="line"></span><br><span class="line">    idx = LABELS.index(selected)</span><br><span class="line">    answer = <span class="built_in">chr</span>(<span class="built_in">ord</span>(<span class="string">&#x27;A&#x27;</span>) + idx)</span><br><span class="line"></span><br><span class="line">    human = (</span><br><span class="line">        <span class="string">f&quot;Based on the title &#x27;<span class="subst">&#123;title&#125;</span>&#x27;, authors &#x27;<span class="subst">&#123;authors&#125;</span>&#x27;, and abstract &#x27;<span class="subst">&#123;abstract&#125;</span>&#x27;,\n&quot;</span></span><br><span class="line">        + SUFFIX</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="string">&quot;system&quot;</span>: SYSTEM_PROMPT,</span><br><span class="line">        <span class="string">&quot;conversation&quot;</span>: [</span><br><span class="line">            &#123;<span class="string">&quot;human&quot;</span>: human, <span class="string">&quot;assistant&quot;</span>: answer&#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;, <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    parser = argparse.ArgumentParser(</span><br><span class="line">        description=<span class="string">&quot;å°†å¤šç±»åˆ« JSONL æ„é€ æˆ 26 ç±» SFT æ•°æ®ï¼Œåªå–é¦–ä¸ªåŒ¹é…ç±»åˆ«ï¼›å¹¶è¾“å‡ºæ— åŒ¹é…é¡¹&quot;</span></span><br><span class="line">    )</span><br><span class="line">    parser.add_argument(<span class="string">&quot;-i&quot;</span>, <span class="string">&quot;--input&quot;</span>,  <span class="built_in">type</span>=Path, required=<span class="literal">True</span>,</span><br><span class="line">                        <span class="built_in">help</span>=<span class="string">&quot;å­é›† JSONL è¾“å…¥è·¯å¾„&quot;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&quot;-o&quot;</span>, <span class="string">&quot;--output&quot;</span>, <span class="built_in">type</span>=Path, required=<span class="literal">True</span>,</span><br><span class="line">                        <span class="built_in">help</span>=<span class="string">&quot;è¾“å‡º SFT JSONL è·¯å¾„&quot;</span>)</span><br><span class="line">    args = parser.parse_args()</span><br><span class="line"></span><br><span class="line">    args.output.parent.mkdir(parents=<span class="literal">True</span>, exist_ok=<span class="literal">True</span>)</span><br><span class="line">    kept = <span class="number">0</span></span><br><span class="line">    skipped = []</span><br><span class="line"></span><br><span class="line">    <span class="keyword">with</span> args.<span class="built_in">input</span>.<span class="built_in">open</span>(<span class="string">&#x27;r&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> fin, \</span><br><span class="line">         args.output.<span class="built_in">open</span>(<span class="string">&#x27;w&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> fout:</span><br><span class="line">        <span class="keyword">for</span> ln, line <span class="keyword">in</span> <span class="built_in">enumerate</span>(fin, <span class="number">1</span>):</span><br><span class="line">            rec = json.loads(line)</span><br><span class="line">            sft_rec, unmatched_parts = build_sft_record(rec)</span><br><span class="line">            <span class="keyword">if</span> sft_rec:</span><br><span class="line">                fout.write(json.dumps(sft_rec, ensure_ascii=<span class="literal">False</span>) + <span class="string">&quot;\n&quot;</span>)</span><br><span class="line">                kept += <span class="number">1</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="comment"># è®°å½•è¡Œå·ä¸åŸå§‹ç±»åˆ«åˆ—è¡¨</span></span><br><span class="line">                skipped.append((ln, unmatched_parts))</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;âœ… å®Œæˆï¼šä¿ç•™ <span class="subst">&#123;kept&#125;</span> æ¡è®°å½•&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> skipped:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;âŒ å…± <span class="subst">&#123;<span class="built_in">len</span>(skipped)&#125;</span> æ¡æ— åŒ¹é…ç±»åˆ«ï¼Œè¯¦æƒ…ï¼š&quot;</span>)</span><br><span class="line">        <span class="keyword">for</span> ln, parts <span class="keyword">in</span> skipped:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;  è¡Œ <span class="subst">&#123;ln&#125;</span>: åŸç±»åˆ« <span class="subst">&#123;parts&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure><h3 id="æ„å»ºéªŒè¯é›†ç»™opencompassçš„è¯„æµ‹æ•°æ®"><a class="markdownIt-Anchor" href="#æ„å»ºéªŒè¯é›†ç»™opencompassçš„è¯„æµ‹æ•°æ®"></a> æ„å»ºéªŒè¯é›†ï¼ˆç»™OpenCompassçš„è¯„æµ‹æ•°æ®ï¼‰</h3><p>ä½¿ç”¨ä»¥ä¸‹è„šæœ¬æ ¹æ®åŸå§‹æ•°æ®é›†æå–å‡ºçš„å­é›†jsonlç”Ÿæˆä¸€ä¸ªå¯ç”¨äºOpenCompasså•é€‰é¢˜è¯„æµ‹çš„csvã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> csv</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¾“å…¥ï¼è¾“å‡ºæ–‡ä»¶</span></span><br><span class="line">INPUT_FILE = <span class="string">&#x27;arxiv_26_subset.jsonl&#x27;</span></span><br><span class="line">OUTPUT_FILE = <span class="string">&#x27;val_dataset2.csv&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># A~Z å¯¹åº”çš„ç±»åˆ«é¡ºåº</span></span><br><span class="line">letters = <span class="built_in">list</span>(<span class="string">&quot;ABCDEFGHIJKLMNOPQRSTUVWXYZ&quot;</span>)</span><br><span class="line">categories = [</span><br><span class="line">    <span class="string">&quot;quant-ph&quot;</span>,</span><br><span class="line">    <span class="string">&quot;physics.chem-ph&quot;</span>,</span><br><span class="line">    <span class="string">&quot;physics.atom-ph&quot;</span>,</span><br><span class="line">    <span class="string">&quot;cond-mat.soft&quot;</span>,</span><br><span class="line">    <span class="string">&quot;cs.RO&quot;</span>,</span><br><span class="line">    <span class="string">&quot;cs.CL&quot;</span>,</span><br><span class="line">    <span class="string">&quot;cs.SE&quot;</span>,</span><br><span class="line">    <span class="string">&quot;cs.IR&quot;</span>,</span><br><span class="line">    <span class="string">&quot;hep-th&quot;</span>,</span><br><span class="line">    <span class="string">&quot;hep-ph&quot;</span>,</span><br><span class="line">    <span class="string">&quot;physics.optics&quot;</span>,</span><br><span class="line">    <span class="string">&quot;cs.AI&quot;</span>,</span><br><span class="line">    <span class="string">&quot;cs.CV&quot;</span>,</span><br><span class="line">    <span class="string">&quot;nucl-th&quot;</span>,</span><br><span class="line">    <span class="string">&quot;astro-ph&quot;</span>,</span><br><span class="line">    <span class="string">&quot;math.PR&quot;</span>,</span><br><span class="line">    <span class="string">&quot;cs.OS&quot;</span>,</span><br><span class="line">    <span class="string">&quot;eess.SP&quot;</span>,</span><br><span class="line">    <span class="string">&quot;math.OC&quot;</span>,</span><br><span class="line">    <span class="string">&quot;math.DS&quot;</span>,</span><br><span class="line">    <span class="string">&quot;math.DG&quot;</span>,</span><br><span class="line">    <span class="string">&quot;math.MP&quot;</span>,</span><br><span class="line">    <span class="string">&quot;cs.MM&quot;</span>,</span><br><span class="line">    <span class="string">&quot;stat.ME&quot;</span>,</span><br><span class="line">    <span class="string">&quot;math.CO&quot;</span>,</span><br><span class="line">    <span class="string">&quot;cs.NE&quot;</span></span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†ç±»åˆ«æ˜ å°„åˆ°å­—æ¯</span></span><br><span class="line">cat2letter = &#123;cat: let <span class="keyword">for</span> let, cat <span class="keyword">in</span> <span class="built_in">zip</span>(letters, categories)&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(INPUT_FILE, <span class="string">&#x27;r&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> fin, \</span><br><span class="line">     <span class="built_in">open</span>(OUTPUT_FILE, <span class="string">&#x27;w&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>, newline=<span class="string">&#x27;&#x27;</span>) <span class="keyword">as</span> fout:</span><br><span class="line"></span><br><span class="line">    writer = csv.writer(fout)</span><br><span class="line">    <span class="comment"># å†™ header</span></span><br><span class="line">    writer.writerow([<span class="string">&#x27;question&#x27;</span>] + letters + [<span class="string">&#x27;answer&#x27;</span>])</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> fin:</span><br><span class="line">        rec = json.loads(line)</span><br><span class="line"></span><br><span class="line">        title    = (rec.get(<span class="string">&#x27;title&#x27;</span>)    <span class="keyword">or</span> <span class="string">&#x27;&#x27;</span>).replace(<span class="string">&#x27;\n&#x27;</span>, <span class="string">&#x27; &#x27;</span>).strip()</span><br><span class="line">        authors  = (rec.get(<span class="string">&#x27;authors&#x27;</span>)  <span class="keyword">or</span> <span class="string">&#x27;&#x27;</span>).replace(<span class="string">&#x27;\n&#x27;</span>, <span class="string">&#x27; &#x27;</span>).strip()</span><br><span class="line">        abstract = (rec.get(<span class="string">&#x27;abstract&#x27;</span>) <span class="keyword">or</span> <span class="string">&#x27;&#x27;</span>).replace(<span class="string">&#x27;\n&#x27;</span>, <span class="string">&#x27; &#x27;</span>).strip()</span><br><span class="line">        comments = (rec.get(<span class="string">&#x27;comments&#x27;</span>) <span class="keyword">or</span> <span class="string">&#x27;&#x27;</span>).replace(<span class="string">&#x27;\n&#x27;</span>, <span class="string">&#x27; &#x27;</span>).strip()</span><br><span class="line"></span><br><span class="line">        extra = <span class="string">f&quot; Additional info: <span class="subst">&#123;comments&#125;</span>&quot;</span> <span class="keyword">if</span> comments <span class="keyword">else</span> <span class="string">&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">        question = (</span><br><span class="line">            <span class="string">f&quot;Based on the title &#x27;<span class="subst">&#123;title&#125;</span>&#x27;, authors &#x27;<span class="subst">&#123;authors&#125;</span>&#x27;, &quot;</span></span><br><span class="line">            <span class="string">f&quot;and abstract &#x27;<span class="subst">&#123;abstract&#125;</span>&#x27;, please determine the scientific category of this paper.&quot;</span></span><br><span class="line">            + extra</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        primary_cat = (rec.get(<span class="string">&#x27;categories&#x27;</span>) <span class="keyword">or</span> <span class="string">&#x27;&#x27;</span>).split(<span class="string">&#x27;,&#x27;</span>)[<span class="number">0</span>].strip()</span><br><span class="line">        answer = cat2letter.get(primary_cat, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> answer:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;è­¦å‘Šï¼šæœªè¯†åˆ«ç±»åˆ« &#x27;<span class="subst">&#123;primary_cat&#125;</span>&#x27;ï¼Œè·³è¿‡è¿™æ¡è®°å½•&quot;</span>)</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line">        row = [question] + categories + [answer]</span><br><span class="line">        writer.writerow(row)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;è½¬æ¢å®Œæˆï¼Œå·²ç”Ÿæˆï¼š<span class="subst">&#123;OUTPUT_FILE&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure><p>åœ¨ç¼–å†™ä¸€ä¸ªé…ç½®è„šæœ¬ï¼Œè®¾ç½®å¥½æ¨¡å‹è·¯å¾„ã€æ•°æ®é›†è·¯å¾„å’Œè®­ç»ƒå‚æ•°ï¼Œç”¨OpenCompassæµ‹è¯„å³å¯ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> mmengine.config <span class="keyword">import</span> read_base</span><br><span class="line"><span class="keyword">from</span> opencompass.models <span class="keyword">import</span> TurboMindModelwithChatTemplate</span><br><span class="line"><span class="keyword">from</span> opencompass.models <span class="keyword">import</span> HuggingFaceCausalLM</span><br><span class="line">models = [</span><br><span class="line">    <span class="built_in">dict</span>(</span><br><span class="line">        <span class="built_in">type</span>=TurboMindModelwithChatTemplate,</span><br><span class="line">        abbr=<span class="string">f&#x27;internlm2-papercls&#x27;</span>,</span><br><span class="line">        <span class="comment"># model path, which can be the address of a model repository on the Hugging Face Hub or a local path</span></span><br><span class="line">        path=<span class="string">&#x27;/root/swift_output/InternLM2-sft/v35-20250805-194627/checkpoint-1300-merged&#x27;</span>,</span><br><span class="line">        backend=<span class="string">&#x27;turbomind&#x27;</span>,</span><br><span class="line">        engine_config=<span class="built_in">dict</span>(tp=<span class="number">1</span>),</span><br><span class="line">        gen_config=<span class="built_in">dict</span>(do_sample=<span class="literal">False</span>),</span><br><span class="line">        max_seq_len=<span class="number">4096</span>,</span><br><span class="line">        max_out_len=<span class="number">100</span>,</span><br><span class="line">        batch_size=<span class="number">5000</span>,</span><br><span class="line">        run_cfg=<span class="built_in">dict</span>(num_gpus=<span class="number">1</span>),</span><br><span class="line">    )</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">datasets = [</span><br><span class="line">    <span class="comment"># &#123;&quot;path&quot;: &quot;/root/arXiv/val_dataset1.csv&quot;, &quot;data_type&quot;: &quot;mcq&quot;, &quot;infer_method&quot;: &quot;gen&quot;&#125;,</span></span><br><span class="line">    <span class="comment"># &#123;&quot;path&quot;: &quot;/root/arXiv/val_dataset2.csv&quot;, &quot;data_type&quot;: &quot;mcq&quot;, &quot;infer_method&quot;: &quot;gen&quot;&#125;,</span></span><br><span class="line">    &#123;<span class="string">&quot;path&quot;</span>: <span class="string">&quot;/root/arXiv/val_dataset3.csv&quot;</span>, <span class="string">&quot;data_type&quot;</span>: <span class="string">&quot;mcq&quot;</span>, <span class="string">&quot;infer_method&quot;</span>: <span class="string">&quot;gen&quot;</span>&#125;,</span><br><span class="line">    <span class="comment"># &#123;&quot;path&quot;: &quot;/root/arXiv/val_dataset4.csv&quot;, &quot;data_type&quot;: &quot;mcq&quot;, &quot;infer_method&quot;: &quot;gen&quot;&#125;,</span></span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">work_dir = <span class="string">&#x27;/root/val&#x27;</span></span><br></pre></td></tr></table></figure><p>é«˜å³°æœŸçš„Bæ¦œæµ‹è¯„å¾€å¾€è¦æ•°å°æ—¶ï¼Œæ‰€ä»¥æœ¬åœ°æœ‰ä¸ªè¯„æµ‹çš„éªŒè¯é›†è¿˜æ˜¯æŒºæœ‰ç”¨çš„ã€‚ï¼ˆæˆ‘å¤§æ¦‚ç”¨äº†2w+çš„æ•°æ®æ„å»ºäº†ä¸€ä¸ªéªŒè¯é›†ï¼‰</p><p>å¾ˆå·§çš„æ˜¯åœ¨æˆ‘è‡ªå·±çš„éªŒè¯é›†ä¸Šè¡¨ç°æœ€å¥½çš„ä¹Ÿæ˜¯æˆ‘æœ€ç»ˆæœ‰æ•ˆæœ€é«˜åˆ†å¯¹åº”çš„æ¨¡å‹ï¼Œè·‘äº†86.12ã€‚</p><p><img src="https://picbed.octalzhihao.top/img/202508141734033.png" alt="" /></p><h2 id="é¢„è®­ç»ƒ"><a class="markdownIt-Anchor" href="#é¢„è®­ç»ƒ"></a> é¢„è®­ç»ƒ</h2><p>å‚è€ƒbaselineæ–‡æ¡£æ¥ç¼–å†™çš„è®­ç»ƒè„šæœ¬å¦‚ä¸‹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºæ—¥å¿—ç›®å½•</span></span><br><span class="line">LOG_DIR=<span class="string">&quot;logs&quot;</span></span><br><span class="line"><span class="built_in">mkdir</span> -p <span class="variable">$LOG_DIR</span>  <span class="comment"># ç¡®ä¿æ—¥å¿—ç›®å½•å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™åˆ›å»º</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å–å½“å‰æ—¶é—´æˆ³ï¼Œç”¨äºç”Ÿæˆå”¯ä¸€çš„æ—¥å¿—æ–‡ä»¶å</span></span><br><span class="line">TIMESTAMP=$(<span class="built_in">date</span> +<span class="string">&quot;%Y%m%d_%H%M%S&quot;</span>)</span><br><span class="line">LOG_FILE=<span class="string">&quot;<span class="variable">$LOG_DIR</span>/pretrain/internlm2_lora_<span class="variable">$&#123;TIMESTAMP&#125;</span>.log&quot;</span>  <span class="comment"># è®¾ç½®æ—¥å¿—æ–‡ä»¶è·¯å¾„</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®CUDAç¯å¢ƒå˜é‡</span></span><br><span class="line"><span class="built_in">export</span> NPROC_PER_NODE=1  <span class="comment"># è®¾ç½®æ¯ä¸ªèŠ‚ç‚¹ä½¿ç”¨çš„è¿›ç¨‹æ•°ä¸º1</span></span><br><span class="line"><span class="built_in">export</span> OMP_NUM_THREADS=1  <span class="comment"># é™åˆ¶OpenMPçº¿ç¨‹æ•°ä¸º1ï¼Œé¿å…è¿‡å¤šçº¿ç¨‹ç«äº‰</span></span><br><span class="line"><span class="built_in">export</span> CUDA_VISIBLE_DEVICES=0  <span class="comment"># æŒ‡å®šä½¿ç”¨çš„GPUç¼–å·ä¸º0</span></span><br><span class="line"><span class="built_in">export</span> MASTER_PORT=$((<span class="number">10000</span> + RANDOM % <span class="number">50000</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨nohupå‘½ä»¤åœ¨åå°è¿è¡Œè®­ç»ƒä»»åŠ¡ï¼Œå³ä½¿ç»ˆç«¯å…³é—­ä¹Ÿèƒ½ç»§ç»­è¿è¡Œ</span></span><br><span class="line"><span class="built_in">nohup</span> swift sft \</span><br><span class="line">    --model /root/public-model/models/Shanghai_AI_Laboratory/internlm2_5-1_8b-chat \</span><br><span class="line">    --train_type lora \</span><br><span class="line">    --dataset /root/arXiv/pretrain_26.jsonl \</span><br><span class="line">    --torch_dtype float16 \</span><br><span class="line">    --num_train_epochs 10 \</span><br><span class="line">    --per_device_train_batch_size 16 \</span><br><span class="line">    --learning_rate 5e-5 \</span><br><span class="line">    --warmup_ratio 0.1 \</span><br><span class="line">    --split_dataset_ratio 0 \</span><br><span class="line">    --lora_rank 16 \</span><br><span class="line">    --lora_alpha 32 \</span><br><span class="line">    --use_chat_template <span class="literal">false</span> \</span><br><span class="line">    --target_modules all-linear \</span><br><span class="line">    --gradient_accumulation_steps 2 \</span><br><span class="line">    --save_steps 2000 \</span><br><span class="line">    --save_total_limit 3 \</span><br><span class="line">    --gradient_checkpointing_kwargs <span class="string">&#x27;&#123;&quot;use_reentrant&quot;: false&#125;&#x27;</span> \</span><br><span class="line">    --logging_steps 5 \</span><br><span class="line">    --max_length 2048 \</span><br><span class="line">    --output_dir ./swift_output/InternLM2-pretrain \</span><br><span class="line">    --dataloader_num_workers 128 \</span><br><span class="line">    --model_author octal \</span><br><span class="line">    --model_name InternLM2-papercls \</span><br><span class="line">    &gt; <span class="string">&quot;<span class="variable">$LOG_FILE</span>&quot;</span> 2&gt;&amp;1 &amp;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰“å°è¿›ç¨‹IDå’Œæ—¥å¿—æ–‡ä»¶ä½ç½®ï¼Œä¾¿äºç”¨æˆ·è·Ÿè¸ª</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Training started with PID $!&quot;</span>  <span class="comment"># æ˜¾ç¤ºåå°è¿›ç¨‹çš„PID</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Log file: <span class="variable">$LOG_FILE</span>&quot;</span>  <span class="comment"># æ˜¾ç¤ºæ—¥å¿—æ–‡ä»¶ä½ç½®</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æç¤ºç”¨æˆ·å¦‚ä½•å®æ—¶æŸ¥çœ‹æ—¥å¿—</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;To view logs in real-time, use:&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;tail -f <span class="variable">$LOG_FILE</span>&quot;</span></span><br></pre></td></tr></table></figure><p>è®­ç»ƒå®Œ swift export åˆå¹¶ä¸€ä¸‹æƒé‡å°±okäº†ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">swfit <span class="built_in">export</span> --adpters /path/to/your/model/ --merge_lora <span class="literal">true</span></span><br></pre></td></tr></table></figure><h2 id="sft-æŒ‡ä»¤å¾®è°ƒ"><a class="markdownIt-Anchor" href="#sft-æŒ‡ä»¤å¾®è°ƒ"></a> SFT æŒ‡ä»¤å¾®è°ƒ</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># æŒ‡å®šä½¿ç”¨bashè§£é‡Šå™¨æ‰§è¡Œè„šæœ¬</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºæ—¥å¿—ç›®å½•</span></span><br><span class="line">LOG_DIR=<span class="string">&quot;logs&quot;</span></span><br><span class="line"><span class="comment"># å®šä¹‰æ—¥å¿—å­˜å‚¨ç›®å½•å˜é‡</span></span><br><span class="line"><span class="built_in">mkdir</span> -p <span class="variable">$LOG_DIR</span></span><br><span class="line"><span class="comment"># åˆ›å»ºæ—¥å¿—ç›®å½•ï¼Œ-på‚æ•°ç¡®ä¿å³ä½¿ç›®å½•å·²å­˜åœ¨ä¹Ÿä¸ä¼šæŠ¥é”™</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å–å½“å‰æ—¶é—´æˆ³</span></span><br><span class="line">TIMESTAMP=$(<span class="built_in">date</span> +<span class="string">&quot;%Y%m%d_%H%M%S&quot;</span>)</span><br><span class="line"><span class="comment"># è·å–å½“å‰æ—¶é—´å¹¶æ ¼å¼åŒ–ä¸ºå¹´æœˆæ—¥_æ—¶åˆ†ç§’æ ¼å¼</span></span><br><span class="line">LOG_FILE=<span class="string">&quot;<span class="variable">$LOG_DIR</span>/sft/internlm2_lora_<span class="variable">$&#123;TIMESTAMP&#125;</span>.log&quot;</span></span><br><span class="line"><span class="comment"># ç»„åˆæ—¥å¿—æ–‡ä»¶è·¯å¾„ï¼Œä½¿ç”¨æ—¶é—´æˆ³ç¡®ä¿æ–‡ä»¶åå”¯ä¸€</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®CUDAè®¾å¤‡</span></span><br><span class="line"><span class="comment"># è®¾ç½®æ¯ä¸ªèŠ‚ç‚¹çš„è¿›ç¨‹æ•°ä¸º1</span></span><br><span class="line"><span class="built_in">export</span> OMP_NUM_THREADS=1</span><br><span class="line"><span class="comment"># è®¾ç½®OpenMPçº¿ç¨‹æ•°ä¸º1ï¼Œé™åˆ¶å¹¶è¡Œçº¿ç¨‹æ•°</span></span><br><span class="line"><span class="built_in">export</span> CUDA_VISIBLE_DEVICES=0</span><br><span class="line"><span class="comment"># æŒ‡å®šä½¿ç”¨çš„GPUè®¾å¤‡ä¸º0å·è®¾å¤‡</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">nohup</span> swift sft \</span><br><span class="line">    --model /root/public-model/models/Shanghai_AI_Laboratory/internlm2_5-1_8b-chat \</span><br><span class="line">    --train_type lora \</span><br><span class="line">    --dataset <span class="string">&#x27;/root/arXiv/sft_26.jsonl&#x27;</span> \</span><br><span class="line">    --torch_dtype float16 \</span><br><span class="line">    --num_train_epochs 4 \</span><br><span class="line">    --per_device_train_batch_size 8 \</span><br><span class="line">    --learning_rate 1e-4 \</span><br><span class="line">    --warmup_ratio 0.1 \</span><br><span class="line">    --split_dataset_ratio 0 \</span><br><span class="line">    --lora_rank 16 \</span><br><span class="line">    --lora_alpha 32 \</span><br><span class="line">    --target_modules all-linear \</span><br><span class="line">    --gradient_accumulation_steps 2 \</span><br><span class="line">    --save_steps 2000 \</span><br><span class="line">    --save_total_limit 5 \</span><br><span class="line">    --gradient_checkpointing_kwargs <span class="string">&#x27;&#123;&quot;use_reentrant&quot;: false&#125;&#x27;</span> \</span><br><span class="line">    --logging_steps 5 \</span><br><span class="line">    --max_length 2048 \</span><br><span class="line">    --output_dir ./swift_output/InternLM2-sft \</span><br><span class="line">    --dataloader_num_workers 128 \</span><br><span class="line">    --model_author octal \</span><br><span class="line">    --model_name InternLM2-sft-octal \</span><br><span class="line">    &gt; <span class="string">&quot;<span class="variable">$LOG_FILE</span>&quot;</span> 2&gt;&amp;1 &amp;</span><br><span class="line">    <span class="comment"># å°†æ ‡å‡†è¾“å‡ºå’Œæ ‡å‡†é”™è¯¯é‡å®šå‘åˆ°æ—¥å¿—æ–‡ä»¶ï¼Œå¹¶åœ¨åå°è¿è¡Œ</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰“å°è¿›ç¨‹IDå’Œæ—¥å¿—æ–‡ä»¶ä½ç½®</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Training started with PID $!&quot;</span></span><br><span class="line"><span class="comment"># æ˜¾ç¤ºè®­ç»ƒè¿›ç¨‹çš„PIDï¼ˆ$!ä»£è¡¨æœ€è¿‘ä¸€ä¸ªåå°è¿›ç¨‹çš„PIDï¼‰</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Log file: <span class="variable">$LOG_FILE</span>&quot;</span></span><br><span class="line"><span class="comment"># æ˜¾ç¤ºæ—¥å¿—æ–‡ä»¶çš„è·¯å¾„</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ˜¾ç¤ºæŸ¥çœ‹æ—¥å¿—çš„å‘½ä»¤</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;To view logs in real-time, use:&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;tail -f <span class="variable">$LOG_FILE</span>&quot;</span></span><br><span class="line"><span class="comment"># æç¤ºç”¨æˆ·å¦‚ä½•å®æ—¶æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶å†…å®¹</span></span><br></pre></td></tr></table></figure><p>è®­ç»ƒäº†å¤šä¸ªæ¨¡å‹åï¼Œæ€»ç»“å‡ºçš„ç»éªŒï¼šå¯¹äº1.8Bæ¨¡å‹è®­ç»ƒä¸åŒè§„æ¨¡çš„æ•°æ®ï¼Œç¬¬ä¸€è½®sftè®­ç»ƒåŸºæœ¬éƒ½æ˜¯2~4ä¸ªepochä¸ºæœ€ä½³ï¼Œå†ç»§ç»­è®­ç»ƒçš„å‡†ç¡®ç‡åè€Œæ›´å¯èƒ½ä¸‹é™ã€‚å¦‚æœæ­¤å‰pretrainçš„è½®æ¬¡å¤šï¼Œsftçš„è½®æ¬¡ä¼¼ä¹ä¹Ÿå¯ä»¥ç•¥é«˜ä¸€ç‚¹ï¼Œä½†ä¹Ÿä¸èƒ½è¿‡é«˜ã€‚ï¼ˆåœ¨éš”å£èµ›é“è¯•éªŒå‘ç°ï¼Œ8Bæ¨¡å‹çš„æœ€ä½³è®­ç»ƒè½®æ¬¡ä¼¼ä¹æ˜¯è¦æ›´å¤šä¸€äº›ï¼‰</p><p>æœ€å¼€å§‹æˆ‘æ˜¯ä½¿ç”¨äº†1kå·¦å³çš„æ•°æ®å¤ç°ä»¥ä¸Šçš„baselineï¼Œå…¶å®è¯„æµ‹ç»“æœå·²ç»è¾¾åˆ°äº†60åˆ†å·¦å³ã€‚</p><p>æˆ‘åˆæ‰©å¤§æ•°æ®é‡åˆ°3kå·¦å³ï¼ˆå¹³å‡é‡‡æ ·ï¼‰ï¼Œå…¶å®å°±å¦¥å¦¥è¾¾åˆ°70åˆ†äº†ã€‚æ‰€ä»¥æˆ‘è§‰å¾—åªè¦è·Ÿç€æ•™ç¨‹è€å¿ƒå¤ç°ï¼Œæ‹¿ä¸ªä¸‰ç­‰å¥–æ˜¯éš¾åº¦ä¸å¤§çš„ã€‚</p><h2 id="baselineåŸºç¡€ä¸Šç»§ç»­ä¼˜åŒ–çš„æ€è·¯"><a class="markdownIt-Anchor" href="#baselineåŸºç¡€ä¸Šç»§ç»­ä¼˜åŒ–çš„æ€è·¯"></a> baselineåŸºç¡€ä¸Šç»§ç»­ä¼˜åŒ–çš„æ€è·¯</h2><p>ç”±äºéš”å£10åˆ†ç±»èµ›é“å¯ä»¥ä½¿ç”¨A100ç®—åŠ›ï¼Œæ›´ä¾¿äºæˆ‘ä¸æ–­å»è®­ç»ƒå°è¯•ã€‚æ‰€ä»¥æˆ‘æ˜¯å…ˆæŠŠ10åˆ†ç±»çš„èµ›é“åˆ†æ•°åˆ·åˆ°è¿˜ç®—çœ‹å¾—è¿‡å»å†æ¥åšæœ¬èµ›é“çš„ã€‚è€Œå¯¹10åˆ†ç±»æ¥è¯´ï¼Œæˆ‘å½“æ—¶æµ‹å‡ºæ¥ä¼¼ä¹å¹¶éæ•°æ®é‡è¶Šå¤§è¶Šå¥½ï¼Œæ‰€ä»¥ä¸€å¼€å§‹å°±æ²¡æƒ³ç€æ‰©å¤§æ•°æ®é‡ã€‚</p><p>æ‰€ä»¥åœ¨å¼€å§‹åš26ç±»çš„ä»»åŠ¡æ—¶ï¼Œæˆ‘æœ€åˆæ˜¯æŠŠæ•°æ®é‡çš„æ•°é‡çº§ç¨³å®šåœ¨3kï¼Œç„¶åä»ä¼˜åŒ–æ•°æ®è´¨é‡å…¥æ‰‹ã€‚</p><p>è¿‡ç¨‹ä¸­å°è¯•äº†è®¸å¤šæ–¹æ³•ï¼Œè¿™é‡Œå…ˆåˆ—ä¸¾å‡ ä¸ªè¯•éªŒè¿‡ç¨‹ï¼ˆ<strong>ä½†éäº§ç”Ÿæœ€ä¼˜æ¨¡å‹çš„ä¸»è¦å› ç´ </strong>ï¼‰ï¼š</p><ol><li><strong>é‡å†™sftçš„system prompt</strong>ï¼šä¾‹å¦‚æŠŠä¸­æ–‡æ”¹æˆè‹±æ–‡ï¼Œè¿ç”¨æç¤ºè¯å·¥ç¨‹çš„å¸¸è§æ‰‹æ®µä¸°å¯Œå†…å®¹ç­‰ã€‚æœ€ç»ˆæ•ˆæœå´éƒ½ä¸ç†æƒ³ï¼Œæ”¹æˆè‹±æ–‡åç”šè‡³ä¼šæœ‰æ˜æ˜¾çš„æˆç»©ä¸‹æ»‘ã€‚å¾—å‡ºçš„ç»“è®ºæ˜¯ï¼šè¿˜æ˜¯ç”¨ä¸€å¥ç®€æ´æ˜ç»ƒçš„ä¸­æ–‡æç¤ºè¯æœ€ä¸ºæœ‰æ•ˆã€‚</li><li><strong>åœ¨å¹³è¡¡ç±»åˆ«çš„åŸºç¡€ä¸Šå†å¹³è¡¡å‘è¡¨å¹´ä»½</strong>ï¼Œä»¥é‡‡é›†æ›´å¤šæ ·åŒ–çš„è®ºæ–‡é£æ ¼ï¼šä¹Ÿæå‡æå°ï¼ŒèŠèƒœäºæ— ï¼Œåç»­å°±æ²¡è¿™ä¹ˆæŠ˜è…¾äº†ã€‚</li><li><strong>ä½¿ç”¨æ›´å¤šçš„æé—®æ¨¡ç‰ˆ</strong>ï¼ˆç›´æ¥è®©GPTå†™ï¼‰ï¼šæ–°å¢äº†4ä¸ªæ¨¡æ¿ï¼Œå¢åŠ æ•°æ®çš„å¤šæ ·æ€§ã€‚å–œæŠ¥æ˜¯æˆç»©æœ‰æ˜æ˜¾æå‡äº†ï¼Œä¸è¿‡ç°åœ¨å›æƒ³èµ·æ¥ä¹Ÿå¯èƒ½æ˜¯æ•°æ®é‡å˜å¤§æ‰€å¸¦æ¥çš„é•¿è¿›ã€‚</li><li><strong>ReSFT</strong>ï¼šè®­å®Œä¸€ä¸ªæ¨¡å‹åç”¨OpenCompassåœ¨éªŒè¯é›†åšä¸€æ¬¡æµ‹è¯„ï¼Œå†ç”¨å›ç­”é”™çš„è®ºæ–‡ä¿¡æ¯å¯¹æ¨¡å‹è¿›è¡Œ2æ¬¡è®­ç»ƒã€‚æ­¤æ–¹æ³•åˆ·æ¦œæ—¶è¿˜æ˜¯æŒºæœ‰ç”¨çš„ï¼Œå½“æ¨¡å‹è¾¾åˆ°ä¸€ä¸ªè¿˜ä¸é”™çš„åˆ†æ•°ä¸”å’Œå‰é¢é€‰æ‰‹ç›¸å·®ä¸å¤§çš„æ—¶å€™ï¼Œè¿™æ ·å¤šæ¬¡è®­ç»ƒä¸€ä¸‹å¾€å¾€è¿˜æ˜¯å¯ä»¥è®©æˆç»©å†æ0.0xç”šè‡³0.xçš„ã€‚</li></ol><p>å‰2/3ä»¥ä¸Šçš„èµ›ç¨‹ä¸­ï¼Œå…¶å®æˆ‘éƒ½åœ¨ç”¨3kå·¦å³çš„æ•°æ®é‡+å„ç§ä¼˜åŒ–å°è¯•è®­äº†ä¸€äº›æ¨¡å‹ç»“æœã€‚ä½†æ­¤æ—¶çš„æœ€å¥½ç»“æœå°±åªæœ‰80ç‚¹å‡ ï¼Œå¤§éƒ¨åˆ†æäº¤éƒ½åœ¨75~80åˆ†ã€‚</p><p>åˆ°åæœŸå¤§å®¶å¼€å§‹å†²æ¦œï¼Œå·èµ·æ¥çš„æ—¶å€™ï¼Œè¿™ä¸ªåˆ†å·²ç»ä¸å¤Ÿçœ‹äº†ï¼Œä»¥æ¯å¤©åå‡ åçš„é€Ÿåº¦ä¸æ–­å¾€ä¸‹æ‰ã€‚</p><p>åé¢ç—…æ€¥ä¹±æŠ•åŒ»ï¼Œæˆ‘ç”¨1w+çš„æ•°æ®è¯•äº†ä¸€ä¸‹ï¼Œç»“æœçªç„¶å°±æœ‰äº†æ˜æ˜¾ä¼˜åŒ–ã€‚æœ¬åœ°OpenCompassè¯„æµ‹éªŒè¯é›†çš„ç»“æœæ›´æ˜¯ä¸€ä¸‹å­æäº†5ä¸ªç‚¹ã€‚</p><p>æœ€ååˆç”¨2w+çš„æ•°æ®è·‘äº†ä¸€æ¬¡ï¼ˆå½“æ—¶è§‰å¾—å·²ç»å¤Ÿå¤šäº†ï¼Œæ¯•ç«ŸOSç±»å°±ä¸€åƒç¯‡å·¦å³ï¼Œå†å¤šå¥½åƒå°±æ²¡æ³•è®©ç±»åˆ«åˆ†å¸ƒå¹³è¡¡äº†ï¼‰ï¼Œè·‘å®Œç”¨ä¸Šè¿°è¯´çš„â€œ<strong>ReSFT</strong>â€åˆä¼˜åŒ–äº†é›¶ç‚¹å‡ ï¼Œå°±æˆäº†æœ€ç»ˆ83.36çš„ç»“æœã€‚</p><p>åç»­ç”±äºæ—¶é—´åŸå› ä¹Ÿæ²¡æœ‰å†è¯•æ›´å¤šæ•°æ®äº†ï¼Œå‹çº¿æ‹¿äº†ä¸ª60åè¿˜æ˜¯éå¸¸å¹¸è¿çš„ï¼ğŸ˜</p><blockquote><p>æ„Ÿæ‚Ÿï¼šåœ¨å¾®è°ƒæ•°æ®è´¨é‡æœ‰ä¿éšœçš„æƒ…å†µä¸‹ï¼Œæ‰©å¤§æ•°æ®é‡ç»ˆå½’æ˜¯ç¡¬é“ç†ğŸ˜‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> LLM </category>
          
      </categories>
      
      
        <tags>
            
            <tag> LLM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[Datawhale AIå¤ä»¤è¥] è¯­éŸ³å…‹éš†æ¯”èµ›æ–¹æ¡ˆ</title>
      <link href="/posts/56265.html"/>
      <url>/posts/56265.html</url>
      
        <content type="html"><![CDATA[<blockquote><p>2025å¹´Datawhale AIå¤ä»¤è¥AIGCè¯­éŸ³æ–¹å‘å­¦ä¹ ç¬”è®° &amp; 2025å…¨çƒAIæ”»é˜²æŒ‘æˆ˜èµ›-èµ›é“ä¸‰æ¯”èµ›æ–¹æ¡ˆ</p></blockquote><p>èµ›äº‹é“¾æ¥ï¼š</p><p><a href="https://tianchi.aliyun.com/competition/entrance/532393/introduction">https://tianchi.aliyun.com/competition/entrance/532393/introduction</a></p><blockquote><p>æœ¬æ¬¡æ›´æ–°æ˜¯ç¬”è€…çš„æˆç»©åœ¨82.16ã€‚ç”±äºæ¯”èµ›ä»åœ¨è¿›è¡Œä¸­ï¼Œè¿™é‡Œå…¬å¼€ä¸€éƒ¨åˆ†åŸºç¡€æ–¹æ¡ˆï¼Œå®Œæ•´æ¯”èµ›æ–¹æ¡ˆå°†äºæ¯”èµ›ç»“æŸåæ›´æ–°ã€‚</p></blockquote><h2 id="f5-ttsæ–¹æ¡ˆ-baseline"><a class="markdownIt-Anchor" href="#f5-ttsæ–¹æ¡ˆ-baseline"></a> F5-TTSæ–¹æ¡ˆ (baseline)</h2><h3 id="å®‰è£…ç¯å¢ƒ"><a class="markdownIt-Anchor" href="#å®‰è£…ç¯å¢ƒ"></a> å®‰è£…ç¯å¢ƒ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip install f5-tts</span><br><span class="line"><span class="built_in">export</span> HF_ENDPOINT=https://hf-mirror.com</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ä¸€ä¸‹æ˜¯å¦å®‰è£…æˆåŠŸ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">f5-tts_infer-cli --model F5TTS_v1_Base --ref_audio <span class="string">&quot;./aigc_speech_generation_tasks/reference_1.wav&quot;</span> --gen_text <span class="string">&quot;å…­&quot;</span></span><br></pre></td></tr></table></figure><h3 id="è¿è¡Œç”Ÿæˆè„šæœ¬"><a class="markdownIt-Anchor" href="#è¿è¡Œç”Ÿæˆè„šæœ¬"></a> è¿è¡Œç”Ÿæˆè„šæœ¬</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> shutil</span><br><span class="line"><span class="keyword">import</span> os, sys</span><br><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line">os.makedirs(<span class="string">&quot;result/&quot;</span>, exist_ok=<span class="literal">True</span>)</span><br><span class="line">task = pd.read_csv(<span class="string">&quot;aigc_speech_generation_tasks/aigc_speech_generation_tasks.csv&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> row <span class="keyword">in</span> task.iterrows():</span><br><span class="line">    <span class="keyword">if</span> row[<span class="number">1</span>].utt &lt; <span class="number">10</span>:</span><br><span class="line">        subprocess.check_output(</span><br><span class="line">            <span class="string">f&#x27;f5-tts_infer-cli --model F5TTS_v1_Base --ref_audio &quot;./aigc_speech_generation_tasks/<span class="subst">&#123;row[<span class="number">1</span>].reference_speech&#125;</span>&quot; --gen_text &quot;<span class="subst">&#123;row[<span class="number">1</span>].text&#125;</span>&quot;&#x27;</span>,</span><br><span class="line">            shell=<span class="literal">True</span></span><br><span class="line">        )</span><br><span class="line">    shutil.copy(<span class="string">&quot;tests/infer_cli_basic.wav&quot;</span>, <span class="string">&quot;result/&quot;</span> + <span class="built_in">str</span>(row[<span class="number">1</span>].utt) + <span class="string">&quot;.wav&quot;</span>)</span><br><span class="line"></span><br><span class="line">task[<span class="string">&#x27;synthesized_speech&#x27;</span>] = [<span class="built_in">str</span>(i) + <span class="string">&quot;.wav&quot;</span> <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">201</span>)]</span><br><span class="line"></span><br><span class="line">task.to_csv(<span class="string">&quot;result/result.csv&quot;</span>, index=<span class="literal">None</span>)</span><br></pre></td></tr></table></figure><p>è¾“å‡ºçš„resultæ–‡ä»¶å¤¹å³ä¸ºæ¯”èµ›æ‰€éœ€æäº¤çš„æ–‡ä»¶ï¼Œå‹ç¼©åæäº¤å³å¯å®Œæˆbaselineã€‚</p><h3 id="æäº¤ç»“æœcheckè„šæœ¬"><a class="markdownIt-Anchor" href="#æäº¤ç»“æœcheckè„šæœ¬"></a> æäº¤ç»“æœcheckè„šæœ¬</h3><p>è€ƒè™‘åˆ°ä¸Šä¼ ä¸€ä¸ªä¸åˆæ³•çš„zipä¼šæµªè´¹ä¸€æ¬¡å®è´µçš„æœºä¼šï¼Œå¹¶ä¸”å¯èƒ½éœ€è¦ç­‰å¾ˆä¹…æ‰èƒ½æ„è¯†åˆ°ç»“æœä¸åˆè§„ã€‚æ‰€ä»¥åœ¨æäº¤ä¹‹å‰æœ‰å¿…è¦è‡ªå·±checkä¸€ä¸‹åˆæ³•æ€§ã€‚</p><p>äºæ˜¯æˆ‘å†™äº†ä¸€ä¸ªcheckè„šæœ¬ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> zipfile</span><br><span class="line"><span class="keyword">import</span> csv</span><br><span class="line"><span class="keyword">import</span> io</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">check_submission</span>(<span class="params">zip_path</span>):</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(zip_path):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;âŒ æ–‡ä»¶ä¸å­˜åœ¨: <span class="subst">&#123;zip_path&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># æ£€æŸ¥ zip æ–‡ä»¶å</span></span><br><span class="line">    base_name = os.path.basename(zip_path)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> re.<span class="keyword">match</span>(<span class="string">r&quot;^(.*-)?result\.zip$&quot;</span>, base_name):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;âš ï¸ è­¦å‘Š: æ–‡ä»¶ååº”ä¸º &#x27;result.zip&#x27; æˆ– &#x27;&lt;é˜Ÿä¼å&gt;-result.zip&#x27;&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">with</span> zipfile.ZipFile(zip_path, <span class="string">&#x27;r&#x27;</span>) <span class="keyword">as</span> zf:</span><br><span class="line">        file_list = zf.namelist()</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># æŸ¥æ‰¾ CSV æ–‡ä»¶</span></span><br><span class="line">        csv_files = [f <span class="keyword">for</span> f <span class="keyword">in</span> file_list <span class="keyword">if</span> f.lower().endswith(<span class="string">&quot;-result.csv&quot;</span>) <span class="keyword">or</span> f.lower().endswith(<span class="string">&quot;/result.csv&quot;</span>) <span class="keyword">or</span> f.lower() == <span class="string">&quot;result.csv&quot;</span>]</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(csv_files) != <span class="number">1</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;âŒ ZIP åŒ…ä¸­å¿…é¡»ä¸”ä»…æœ‰ä¸€ä¸ª result.csv æˆ– &lt;é˜Ÿä¼å&gt;-result.csv æ–‡ä»¶&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        csv_file = csv_files[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">        <span class="comment"># è¯†åˆ«CSVæ‰€åœ¨ç›®å½•å‰ç¼€ï¼Œæ¯”å¦‚ &quot;result/result.csv&quot; --&gt; &quot;result/&quot;</span></span><br><span class="line">        csv_dir = os.path.dirname(csv_file)</span><br><span class="line">        <span class="keyword">if</span> csv_dir <span class="keyword">and</span> <span class="keyword">not</span> csv_dir.endswith(<span class="string">&quot;/&quot;</span>):</span><br><span class="line">            csv_dir += <span class="string">&quot;/&quot;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># æ£€æŸ¥ CSV ç¼–ç åŠè¡¨å¤´</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="keyword">with</span> zf.<span class="built_in">open</span>(csv_file, <span class="string">&#x27;r&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">                content = f.read().decode(<span class="string">&quot;utf-8&quot;</span>)</span><br><span class="line">        <span class="keyword">except</span> UnicodeDecodeError:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;âŒ <span class="subst">&#123;csv_file&#125;</span> ä¸æ˜¯ UTF-8 ç¼–ç &quot;</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        </span><br><span class="line">        reader = csv.reader(io.StringIO(content))</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            header = <span class="built_in">next</span>(reader)</span><br><span class="line">        <span class="keyword">except</span> StopIteration:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;âŒ <span class="subst">&#123;csv_file&#125;</span> æ–‡ä»¶ä¸ºç©º&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">        required_header = &#123;<span class="string">&quot;utt&quot;</span>, <span class="string">&quot;reference_speech&quot;</span>, <span class="string">&quot;text&quot;</span>, <span class="string">&quot;synthesized_speech&quot;</span>&#125;</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">set</span>(header) != required_header:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;âŒ CSV è¡¨å¤´å¿…é¡»æ˜¯ <span class="subst">&#123;required_header&#125;</span>ï¼Œå½“å‰ä¸º: <span class="subst">&#123;header&#125;</span>&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        </span><br><span class="line">        idx_synth = header.index(<span class="string">&quot;synthesized_speech&quot;</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># æ£€æŸ¥ synthesized_speech å¯¹åº”çš„æ–‡ä»¶å­˜åœ¨æ€§</span></span><br><span class="line">        all_exist = <span class="literal">True</span></span><br><span class="line">        <span class="keyword">for</span> i, row <span class="keyword">in</span> <span class="built_in">enumerate</span>(reader, start=<span class="number">2</span>):</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">len</span>(row) != <span class="built_in">len</span>(header):</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;âŒ ç¬¬ <span class="subst">&#123;i&#125;</span> è¡Œåˆ—æ•°ä¸å¯¹ï¼Œåº”ä¸º <span class="subst">&#123;<span class="built_in">len</span>(header)&#125;</span> åˆ—&quot;</span>)</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">            synth_file = row[idx_synth].strip()</span><br><span class="line">            <span class="comment"># æ‹¼æ¥ç›®å½•å‰ç¼€</span></span><br><span class="line">            synth_path_in_zip = csv_dir + synth_file <span class="keyword">if</span> csv_dir <span class="keyword">else</span> synth_file</span><br><span class="line">            <span class="keyword">if</span> synth_path_in_zip <span class="keyword">not</span> <span class="keyword">in</span> file_list:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;âŒ ç¬¬ <span class="subst">&#123;i&#125;</span> è¡Œ: åˆæˆè¯­éŸ³æ–‡ä»¶ <span class="subst">&#123;synth_file&#125;</span> (zipè·¯å¾„: <span class="subst">&#123;synth_path_in_zip&#125;</span>) ä¸åœ¨ ZIP åŒ…ä¸­&quot;</span>)</span><br><span class="line">                all_exist = <span class="literal">False</span></span><br><span class="line">            <span class="keyword">elif</span> <span class="keyword">not</span> synth_path_in_zip.lower().endswith(<span class="string">&quot;.wav&quot;</span>):</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;âŒ ç¬¬ <span class="subst">&#123;i&#125;</span> è¡Œ: åˆæˆè¯­éŸ³æ–‡ä»¶ <span class="subst">&#123;synth_file&#125;</span> ä¸æ˜¯ WAV æ ¼å¼&quot;</span>)</span><br><span class="line">                all_exist = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> all_exist:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;âœ… æ ¼å¼æ£€æŸ¥é€šè¿‡&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(sys.argv) != <span class="number">2</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;ç”¨æ³•: python <span class="subst">&#123;sys.argv[<span class="number">0</span>]&#125;</span> &lt;æäº¤çš„zipæ–‡ä»¶&gt;&quot;</span>)</span><br><span class="line">        sys.exit(<span class="number">1</span>)</span><br><span class="line">    check_submission(sys.argv[<span class="number">1</span>])</span><br></pre></td></tr></table></figure><p>baselineæœ€ç»ˆçš„ç»“æœå‘¢å¤§çº¦æ˜¯33åˆ†å·¦å³ï¼Œå®é™…å¬äº†ä¸€ä¸‹ç”Ÿæˆçš„éŸ³é¢‘å‘ç°æ•ˆæœç¡®å®ä¸å’‹åœ°ï¼Œå…¶ä¸­è¿˜æºæ‚äº†ä¸å°‘æ— æ•ˆéŸ³é¢‘ï¼Œè¿™ä¸ªåˆ†å€’æ˜¯ä¹Ÿä¸å†¤ã€‚</p><img src="https://picbed.octalzhihao.top/img/202508121826108.png" alt="202508121826108.png (386Ã—121)" style="zoom:80%;" align="left" /><div style="clear: both;"></div><h2 id="cosyvoiceæ–¹æ¡ˆ"><a class="markdownIt-Anchor" href="#cosyvoiceæ–¹æ¡ˆ"></a> Cosyvoiceæ–¹æ¡ˆ</h2><p>Cosyvoiceæ˜¯é˜¿é‡Œå·´å·´é€šä¹‰å®éªŒå®¤å¼€æºçš„è¯­éŸ³ç”Ÿæˆå¤§æ¨¡å‹ï¼Œè¿™é‡Œæˆ‘é€‰æ‹©ä½¿ç”¨çš„æ˜¯CosyVoice2-0.5Bæ¨¡å‹ã€‚</p><h3 id="å®‰è£…ç¯å¢ƒ-2"><a class="markdownIt-Anchor" href="#å®‰è£…ç¯å¢ƒ-2"></a> å®‰è£…ç¯å¢ƒ</h3><p>é¦–å…ˆå…‹éš†ä»“åº“</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> --recursive https://github.com/FunAudioLLM/CosyVoice.git</span><br><span class="line"><span class="comment"># è‹¥æ˜¯submoduleä¸‹è½½å¤±è´¥ï¼Œè¦å…ˆè¿›å…¥CosyVoiceç›®å½•å†æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå¯ä»¥å¤šæ¬¡æ‰§è¡Œç›´åˆ°submoduleå®‰è£…æˆåŠŸï¼Œä¼šæœ‰Successfullyæç¤ºã€‚</span></span><br><span class="line"><span class="built_in">cd</span> CosyVoice</span><br><span class="line">git submodule update --init --recursive</span><br></pre></td></tr></table></figure><p>åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ</p><p>å¦‚æœä½¿ç”¨çš„æ˜¯é­”æ­ç¤¾åŒºçš„notebook åˆå§‹åº”è¯¥æ˜¯æœªå®‰è£…condaçš„ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤è¿›è¡Œå®‰è£…</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p /mnt/workspace/miniconda3</span><br><span class="line"></span><br><span class="line">wget https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh -O /mnt/workspace/miniconda3/miniconda.sh</span><br><span class="line"></span><br><span class="line">bash /mnt/workspace/miniconda3/miniconda.sh -b -u -p /mnt/workspace/miniconda3</span><br><span class="line"></span><br><span class="line"><span class="built_in">rm</span> /mnt/workspace/miniconda3/miniconda.sh</span><br><span class="line"></span><br><span class="line"><span class="built_in">source</span> /mnt/workspace/miniconda3/bin/activate</span><br><span class="line"></span><br><span class="line">conda init --all</span><br></pre></td></tr></table></figure><p>å®‰è£…å®Œcondaåï¼Œæ¥ä¸‹æ¥å¼€å§‹åˆ›å»ºcondaè™šæ‹Ÿç¯å¢ƒ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">conda create -n cosyvoice python=3.10</span><br><span class="line">conda activate cosyvoice</span><br><span class="line">conda install -y -c conda-forge pynini==2.1.5</span><br><span class="line">pip install -r requirements.txt -i https://mirrors.aliyun.com/pypi/simple/ --trusted-host=mirrors.aliyun.com</span><br></pre></td></tr></table></figure><h3 id="è¿è¡Œç”Ÿæˆè„šæœ¬-2"><a class="markdownIt-Anchor" href="#è¿è¡Œç”Ÿæˆè„šæœ¬-2"></a> è¿è¡Œç”Ÿæˆè„šæœ¬</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> pathlib <span class="keyword">import</span> Path</span><br><span class="line"><span class="keyword">import</span> shutil</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> torchaudio</span><br><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¡®ä¿ third_party path å·²ç»åŠ å…¥ sys.path</span></span><br><span class="line">sys.path.append(<span class="string">&#x27;third_party/Matcha-TTS&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> cosyvoice.cli.cosyvoice <span class="keyword">import</span> CosyVoice2</span><br><span class="line"></span><br><span class="line"><span class="comment"># é…ç½®è·¯å¾„</span></span><br><span class="line">TASK_CSV = <span class="string">&quot;data/aigc_speech_generation_tasks.csv&quot;</span></span><br><span class="line">REFERENCE_DIR = <span class="string">&quot;data&quot;</span></span><br><span class="line">FALLBACK_WAV = <span class="string">&quot;tests/infer_cli_basic.wav&quot;</span></span><br><span class="line">OUT_DIR = Path(<span class="string">&quot;result&quot;</span>)</span><br><span class="line">OUT_DIR.mkdir(parents=<span class="literal">True</span>, exist_ok=<span class="literal">True</span>)</span><br><span class="line">OUT_CSV = OUT_DIR / <span class="string">&quot;result.csv&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆå§‹åŒ– CosyVoiceï¼ˆåªåšä¸€æ¬¡ï¼‰</span></span><br><span class="line">cosyvoice = CosyVoice2(<span class="string">&#x27;iic/CosyVoice2-0.5B&#x27;</span>, load_jit=<span class="literal">False</span>, load_trt=<span class="literal">False</span>, fp16=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¯»å–ä»»åŠ¡è¡¨</span></span><br><span class="line">task = pd.read_csv(TASK_CSV)</span><br><span class="line"></span><br><span class="line">synthesized_files = []</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> idx, row <span class="keyword">in</span> task.iterrows():</span><br><span class="line">    utt = <span class="built_in">int</span>(row[<span class="string">&#x27;utt&#x27;</span>]) <span class="keyword">if</span> <span class="string">&#x27;utt&#x27;</span> <span class="keyword">in</span> row.index <span class="keyword">else</span> idx + <span class="number">1</span></span><br><span class="line">    text = <span class="built_in">str</span>(row[<span class="string">&#x27;text&#x27;</span>])</span><br><span class="line">    ref_fname = <span class="built_in">str</span>(row[<span class="string">&#x27;reference_speech&#x27;</span>]) <span class="keyword">if</span> <span class="string">&#x27;reference_speech&#x27;</span> <span class="keyword">in</span> row.index <span class="keyword">else</span> <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># ç»Ÿä¸€å‘½åï¼šsynthesized_speech_1.wav, synthesized_speech_2.wav ...</span></span><br><span class="line">    out_fname = <span class="string">f&quot;synthesized_speech_<span class="subst">&#123;utt&#125;</span>.wav&quot;</span></span><br><span class="line">    out_path = OUT_DIR / out_fname</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="comment"># åŠ è½½å¹¶é‡é‡‡æ ·å‚è€ƒéŸ³é¢‘</span></span><br><span class="line">        prompt_audio = <span class="literal">None</span></span><br><span class="line">        <span class="keyword">if</span> ref_fname:</span><br><span class="line">            ref_path = Path(REFERENCE_DIR) / ref_fname</span><br><span class="line">            <span class="keyword">if</span> ref_path.exists():</span><br><span class="line">                wav, sr = torchaudio.load(<span class="built_in">str</span>(ref_path))</span><br><span class="line">                target_sr = cosyvoice.sample_rate  <span class="comment"># æ¨¡å‹éœ€è¦çš„é‡‡æ ·ç‡</span></span><br><span class="line">                <span class="keyword">if</span> sr != target_sr:</span><br><span class="line">                    wav = torchaudio.transforms.Resample(sr, target_sr)(wav)</span><br><span class="line">                prompt_audio = wav</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;[Warning] reference not found for utt=<span class="subst">&#123;utt&#125;</span>: <span class="subst">&#123;ref_path&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># ç”Ÿæˆè¯­éŸ³</span></span><br><span class="line">        gen_iter = cosyvoice.inference_cross_lingual(text, prompt_audio, stream=<span class="literal">False</span>)</span><br><span class="line">        generated = <span class="literal">None</span></span><br><span class="line">        <span class="keyword">for</span> item <span class="keyword">in</span> gen_iter:</span><br><span class="line">            generated = item.get(<span class="string">&#x27;tts_speech&#x27;</span>, <span class="literal">None</span>)</span><br><span class="line">            <span class="keyword">if</span> generated <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> generated <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">raise</span> RuntimeError(<span class="string">&quot;CosyVoice did not return any tts_speech.&quot;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">isinstance</span>(generated, torch.Tensor):</span><br><span class="line">            gen = generated.detach().cpu()</span><br><span class="line">            <span class="keyword">if</span> gen.dim() == <span class="number">1</span>:</span><br><span class="line">                gen = gen.unsqueeze(<span class="number">0</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">            gen = torch.from_numpy(np.asarray(generated))</span><br><span class="line">            <span class="keyword">if</span> gen.dim() == <span class="number">1</span>:</span><br><span class="line">                gen = gen.unsqueeze(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">        torchaudio.save(<span class="built_in">str</span>(out_path), gen, cosyvoice.sample_rate)</span><br><span class="line">        synthesized_files.append(out_fname)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;[OK] synthesized utt=<span class="subst">&#123;utt&#125;</span> -&gt; <span class="subst">&#123;out_path&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;[Error] generation failed for utt=<span class="subst">&#123;utt&#125;</span>: <span class="subst">&#123;e&#125;</span>. Using fallback audio.&quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> Path(FALLBACK_WAV).exists():</span><br><span class="line">            shutil.copy(FALLBACK_WAV, out_path)</span><br><span class="line">            synthesized_files.append(out_fname)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;[Error] fallback file <span class="subst">&#123;FALLBACK_WAV&#125;</span> not found. Skipping utt=<span class="subst">&#123;utt&#125;</span>.&quot;</span>)</span><br><span class="line">            synthesized_files.append(<span class="string">&quot;&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¿å­˜ç»“æœ CSVï¼ˆç¬¬å››åˆ—ä¸ºç›¸å¯¹è·¯å¾„ï¼‰</span></span><br><span class="line">task[<span class="string">&#x27;synthesized_speech&#x27;</span>] = synthesized_files</span><br><span class="line">task.to_csv(OUT_CSV, index=<span class="literal">False</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;âœ… Done. Results written to <span class="subst">&#123;OUT_DIR&#125;</span> and <span class="subst">&#123;OUT_CSV&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æŸä¹‹åï¼Œå‹ç¼©ä¸€ä¸‹æäº¤å³å¯ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zip -r result.zip result/</span><br></pre></td></tr></table></figure><h3 id="checkè„šæœ¬"><a class="markdownIt-Anchor" href="#checkè„šæœ¬"></a> checkè„šæœ¬</h3><p>åŒæ ·ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹ç”Ÿæˆçš„zipå…ˆcheckä¸€ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> zipfile</span><br><span class="line"><span class="keyword">import</span> csv</span><br><span class="line"><span class="keyword">import</span> io</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">check_submission</span>(<span class="params">zip_path</span>):</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(zip_path):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;âŒ æ–‡ä»¶ä¸å­˜åœ¨: <span class="subst">&#123;zip_path&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># æ£€æŸ¥ zip æ–‡ä»¶å</span></span><br><span class="line">    base_name = os.path.basename(zip_path)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> re.<span class="keyword">match</span>(<span class="string">r&quot;^(.*-)?result\.zip$&quot;</span>, base_name):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;âš ï¸ è­¦å‘Š: æ–‡ä»¶ååº”ä¸º &#x27;result.zip&#x27; æˆ– &#x27;&lt;é˜Ÿä¼å&gt;-result.zip&#x27;&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">with</span> zipfile.ZipFile(zip_path, <span class="string">&#x27;r&#x27;</span>) <span class="keyword">as</span> zf:</span><br><span class="line">        file_list = zf.namelist()</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># æŸ¥æ‰¾ CSV æ–‡ä»¶</span></span><br><span class="line">        csv_files = [f <span class="keyword">for</span> f <span class="keyword">in</span> file_list <span class="keyword">if</span> f.lower().endswith(<span class="string">&quot;-result.csv&quot;</span>) <span class="keyword">or</span> f.lower().endswith(<span class="string">&quot;/result.csv&quot;</span>) <span class="keyword">or</span> f.lower() == <span class="string">&quot;result.csv&quot;</span>]</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(csv_files) != <span class="number">1</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;âŒ ZIP åŒ…ä¸­å¿…é¡»ä¸”ä»…æœ‰ä¸€ä¸ª result.csv æˆ– &lt;é˜Ÿä¼å&gt;-result.csv æ–‡ä»¶&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        csv_file = csv_files[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">        <span class="comment"># è¯†åˆ«CSVæ‰€åœ¨ç›®å½•å‰ç¼€ï¼Œæ¯”å¦‚ &quot;result/result.csv&quot; --&gt; &quot;result/&quot;</span></span><br><span class="line">        csv_dir = os.path.dirname(csv_file)</span><br><span class="line">        <span class="keyword">if</span> csv_dir <span class="keyword">and</span> <span class="keyword">not</span> csv_dir.endswith(<span class="string">&quot;/&quot;</span>):</span><br><span class="line">            csv_dir += <span class="string">&quot;/&quot;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># æ£€æŸ¥ CSV ç¼–ç åŠè¡¨å¤´</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="keyword">with</span> zf.<span class="built_in">open</span>(csv_file, <span class="string">&#x27;r&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">                content = f.read().decode(<span class="string">&quot;utf-8&quot;</span>)</span><br><span class="line">        <span class="keyword">except</span> UnicodeDecodeError:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;âŒ <span class="subst">&#123;csv_file&#125;</span> ä¸æ˜¯ UTF-8 ç¼–ç &quot;</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        </span><br><span class="line">        reader = csv.reader(io.StringIO(content))</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            header = <span class="built_in">next</span>(reader)</span><br><span class="line">        <span class="keyword">except</span> StopIteration:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;âŒ <span class="subst">&#123;csv_file&#125;</span> æ–‡ä»¶ä¸ºç©º&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">        required_header = &#123;<span class="string">&quot;utt&quot;</span>, <span class="string">&quot;reference_speech&quot;</span>, <span class="string">&quot;text&quot;</span>, <span class="string">&quot;synthesized_speech&quot;</span>&#125;</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">set</span>(header) != required_header:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;âŒ CSV è¡¨å¤´å¿…é¡»æ˜¯ <span class="subst">&#123;required_header&#125;</span>ï¼Œå½“å‰ä¸º: <span class="subst">&#123;header&#125;</span>&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        </span><br><span class="line">        idx_synth = header.index(<span class="string">&quot;synthesized_speech&quot;</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># æ£€æŸ¥ synthesized_speech å¯¹åº”çš„æ–‡ä»¶å­˜åœ¨æ€§</span></span><br><span class="line">        all_exist = <span class="literal">True</span></span><br><span class="line">        <span class="keyword">for</span> i, row <span class="keyword">in</span> <span class="built_in">enumerate</span>(reader, start=<span class="number">2</span>):</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">len</span>(row) != <span class="built_in">len</span>(header):</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;âŒ ç¬¬ <span class="subst">&#123;i&#125;</span> è¡Œåˆ—æ•°ä¸å¯¹ï¼Œåº”ä¸º <span class="subst">&#123;<span class="built_in">len</span>(header)&#125;</span> åˆ—&quot;</span>)</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">            synth_file = row[idx_synth].strip()</span><br><span class="line">            <span class="comment"># æ‹¼æ¥ç›®å½•å‰ç¼€</span></span><br><span class="line">            synth_path_in_zip = csv_dir + synth_file <span class="keyword">if</span> csv_dir <span class="keyword">else</span> synth_file</span><br><span class="line">            <span class="keyword">if</span> synth_path_in_zip <span class="keyword">not</span> <span class="keyword">in</span> file_list:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;âŒ ç¬¬ <span class="subst">&#123;i&#125;</span> è¡Œ: åˆæˆè¯­éŸ³æ–‡ä»¶ <span class="subst">&#123;synth_file&#125;</span> (zipè·¯å¾„: <span class="subst">&#123;synth_path_in_zip&#125;</span>) ä¸åœ¨ ZIP åŒ…ä¸­&quot;</span>)</span><br><span class="line">                all_exist = <span class="literal">False</span></span><br><span class="line">            <span class="keyword">elif</span> <span class="keyword">not</span> synth_path_in_zip.lower().endswith(<span class="string">&quot;.wav&quot;</span>):</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;âŒ ç¬¬ <span class="subst">&#123;i&#125;</span> è¡Œ: åˆæˆè¯­éŸ³æ–‡ä»¶ <span class="subst">&#123;synth_file&#125;</span> ä¸æ˜¯ WAV æ ¼å¼&quot;</span>)</span><br><span class="line">                all_exist = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> all_exist:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;âœ… æ ¼å¼æ£€æŸ¥é€šè¿‡&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(sys.argv) != <span class="number">2</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;ç”¨æ³•: python <span class="subst">&#123;sys.argv[<span class="number">0</span>]&#125;</span> &lt;æäº¤çš„zipæ–‡ä»¶&gt;&quot;</span>)</span><br><span class="line">        sys.exit(<span class="number">1</span>)</span><br><span class="line">    check_submission(sys.argv[<span class="number">1</span>])</span><br></pre></td></tr></table></figure><p>æœ¬æ–¹æ¡ˆç”Ÿæˆçš„æˆç»©å¦‚ä¸‹ï¼š</p><p><img src="https://picbed.octalzhihao.top/img/202508141744415.png" alt="" /></p><h2 id="ä¼˜å…ˆçº§é€’å‡çš„çº§è”è°ƒç”¨æ–¹æ¡ˆæ–°baseline"><a class="markdownIt-Anchor" href="#ä¼˜å…ˆçº§é€’å‡çš„çº§è”è°ƒç”¨æ–¹æ¡ˆæ–°baseline"></a> ä¼˜å…ˆçº§é€’å‡çš„çº§è”è°ƒç”¨æ–¹æ¡ˆï¼ˆæ–°baselineï¼‰</h2><p>æœ¬æ–¹æ¡ˆä¸ºç¤¾åŒºå¤§ä½¬æ…·æ…¨åˆ†æï¼Œä½œä¸ºæ¯”èµ›çš„æ–°baselineï¼Œæœ‰è®¸å¤šæˆ‘ä»¬å¯ä»¥å€Ÿé‰´ä¹‹å¤„ï¼Œè¿™é‡Œé™„ä¸Š<a href="https://tianchi.aliyun.com/forum/post/920293">åŸæ–‡åœ°å€</a>ã€‚</p><ol><li>å¤šæ¨¡å‹çº§è”ç­–ç•¥<br />æˆ‘ä»¬çš„æ–¹æ¡ˆæŒ‰ä»¥ä¸‹ä¼˜å…ˆçº§é¡ºåºå°è¯•ç”Ÿæˆè¯­éŸ³ï¼š</li></ol><ul><li>ç¬¬ä¸€æ¢¯é˜Ÿï¼ˆæ ¸å¿ƒæ¨¡å‹ï¼‰ï¼šCoqui-AI XTTS - å®ç°é«˜è´¨é‡å£°éŸ³å…‹éš†<ul><li>ä¸ºä»€ä¹ˆæ˜¯å®ƒï¼Ÿ XTTSæ˜¯ä¸€ä¸ªå¼ºå¤§çš„å¤šè¯­è¨€é›¶æ ·æœ¬è¯­éŸ³å…‹éš†æ¨¡å‹ã€‚å®ƒèƒ½ç›´æ¥åˆ©ç”¨å‚è€ƒéŸ³é¢‘æ¥é©±åŠ¨TTSï¼ˆæ–‡æœ¬åˆ°è¯­éŸ³ï¼‰åˆæˆï¼Œå®Œç¾å¥‘åˆèµ›é¢˜è¦æ±‚ã€‚è¿™æ˜¯æˆ‘ä»¬å†²å‡»â€œè¯­éŸ³ç›¸ä¼¼åº¦â€å¾—åˆ†çš„ä¸»åŠ›ã€‚</li><li>ä¼˜åŠ¿ï¼šéŸ³è‰²ç›¸ä¼¼åº¦é«˜ï¼Œæ”¯æŒä¸­è‹±æ–‡æ··åˆã€‚</li><li>æŒ‘æˆ˜ï¼šæ¨¡å‹è¾ƒå¤§ï¼Œå¯¹ç¯å¢ƒæœ‰ä¸€å®šè¦æ±‚ï¼Œä¸”åœ¨æŸäº›æç«¯æƒ…å†µä¸‹å¯èƒ½ç”Ÿæˆå¤±è´¥ã€‚</li></ul></li><li>ç¬¬äºŒæ¢¯é˜Ÿï¼ˆå¤‡ç”¨æ–¹æ¡ˆï¼‰ï¼šMicrosoft Edge TTS - ä¿è¯é«˜è´¨é‡ä¸è‡ªç„¶åº¦<ul><li>ä¸ºä»€ä¹ˆæ˜¯å®ƒï¼Ÿ å½“XTTSå¤±è´¥æ—¶ï¼Œæˆ‘ä»¬ä¸èƒ½æäº¤ä¸€ä¸ªé”™è¯¯çš„éŸ³é¢‘ã€‚Edge-TTSæ˜¯å¾®è½¯æä¾›çš„ä¸€é¡¹é«˜è´¨é‡åœ¨çº¿TTSæœåŠ¡ï¼Œå…¶åˆæˆçš„è¯­éŸ³åœ¨è‡ªç„¶åº¦å’Œæ¸…æ™°åº¦ä¸Šè¡¨ç°éƒ½éå¸¸å‡ºè‰²ã€‚</li><li>ä¼˜åŠ¿ï¼šåˆæˆè´¨é‡æé«˜ï¼Œéå¸¸ç¨³å®šï¼Œå¤„ç†é•¿æ–‡æœ¬èƒ½åŠ›å¼ºã€‚</li><li>åŠ£åŠ¿ï¼šå®ƒä¸å…·å¤‡å£°éŸ³å…‹éš†èƒ½åŠ›ã€‚è¿™æ˜¯ä¸€ä¸ªâ€œä¿åº•â€æ–¹æ¡ˆï¼Œç‰ºç‰²â€œç›¸ä¼¼åº¦â€åˆ†æ•°ï¼Œä½†èƒ½ç¨³æ‹¿â€œå¯æ‡‚åº¦â€å’Œâ€œè‡ªç„¶åº¦â€çš„åˆ†æ•°ï¼Œé¿å…åœ¨æŸä¸ªä»»åŠ¡ä¸Šå¾—é›¶åˆ†ã€‚</li></ul></li><li>ç¬¬ä¸‰æ¢¯é˜Ÿï¼ˆç»ˆæä¿éšœï¼‰ï¼špyttsx3 - ç¦»çº¿è¿è¡Œï¼Œæ°¸ä¸å¤±è´¥<ul><li>ä¸ºä»€ä¹ˆæ˜¯å®ƒï¼Ÿ åœ¨æç«¯æƒ…å†µä¸‹ï¼ˆå¦‚ç½‘ç»œä¸­æ–­å¯¼è‡´Edge-TTSå¤±è´¥ï¼‰ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªä¸‡æ— ä¸€å¤±çš„æ–¹æ¡ˆã€‚pyttsx3æ˜¯ä¸€ä¸ªçº¯æœ¬åœ°çš„TTSåº“ã€‚</li><li>ä¼˜åŠ¿ï¼šå®Œå…¨ç¦»çº¿ï¼Œ100%èƒ½ç”Ÿæˆç»“æœã€‚</li><li>åŠ£åŠ¿ï¼šéŸ³è´¨å’Œè‡ªç„¶åº¦è¾ƒå·®ï¼Œæ˜¯æ‰€æœ‰æ–¹æ¡ˆä¸­çš„ä¸‹ä¸‹ç­–ã€‚å®ƒçš„å­˜åœ¨åªä¸ºä¸€ä¸ªç›®çš„ï¼šç¡®ä¿æ¯ä¸ªä»»åŠ¡éƒ½æœ‰å¯¹åº”çš„è¾“å‡ºæ–‡ä»¶ï¼Œä¿è¯ç¨‹åºçš„å®Œæ•´æ€§ã€‚</li></ul></li></ul><ol start="2"><li>éŸ³é¢‘å¤„ç†æµç¨‹<br />æ— è®ºæ˜¯å‚è€ƒéŸ³é¢‘è¿˜æ˜¯ç”Ÿæˆçš„éŸ³é¢‘ï¼Œæˆ‘ä»¬éƒ½è®¾è®¡äº†å¤„ç†ç¯èŠ‚æ¥æå‡æœ€ç»ˆæ•ˆæœã€‚</li></ol><ul><li>é¢„å¤„ç† (preprocess_audio)ï¼šå¯¹è¾“å…¥çš„å‚è€ƒéŸ³é¢‘è¿›è¡Œæ ‡å‡†åŒ–ã€‚æ— è®ºåŸå§‹éŸ³é¢‘æ˜¯ä½•ç§é‡‡æ ·ç‡ã€é€šé“æ•°ï¼Œæˆ‘ä»¬éƒ½ç»Ÿä¸€è½¬æ¢ä¸º16kHzå•å£°é“ï¼Œå¹¶è¿›è¡Œå½’ä¸€åŒ–ã€‚è¿™èƒ½ç¡®ä¿é€å…¥æ¨¡å‹çš„éŸ³é¢‘æ ¼å¼æ˜¯ä¸€è‡´çš„ï¼Œé¿å…å…¼å®¹æ€§é—®é¢˜ã€‚</li><li>åå¤„ç† (enhance_audio_quality)ï¼šå¯¹æ¨¡å‹ç”Ÿæˆçš„éŸ³é¢‘è¿›è¡Œå¢å¼ºã€‚æˆ‘ä»¬ä½¿ç”¨é¢„åŠ é‡ï¼ˆPre-emphasisï¼‰æ»¤æ³¢å™¨æ¥æå‡é«˜é¢‘æˆåˆ†ï¼Œè¿™èƒ½æœ‰æ•ˆå¢å¼ºè¯­éŸ³çš„æ¸…æ™°åº¦ï¼Œé™ä½ä½é¢‘å™ªéŸ³çš„å¹²æ‰°ã€‚</li></ul><h3 id="å®‰è£…ç¯å¢ƒ-3"><a class="markdownIt-Anchor" href="#å®‰è£…ç¯å¢ƒ-3"></a> å®‰è£…ç¯å¢ƒ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å»ºè®®ä½¿ç”¨torch 2.3.1ç‰ˆæœ¬</span></span><br><span class="line">pip install torch==2.3.1 torchaudio</span><br><span class="line"><span class="comment"># å®‰è£…å…¶ä»–ä¾èµ–</span></span><br><span class="line">pip install pandas numpy librosa soundfile tqdm pydub TTS edge-tts pyttsx3</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼šå¦‚æœä½ åœ¨ä¸­å›½å¤§é™†ï¼Œè®¿é—®Hugging Faceï¼ˆTTSæ¨¡å‹åº“çš„æ¥æºï¼‰å¯èƒ½ä¼šå¾ˆæ…¢ã€‚å¯ä»¥è®¾ç½®ç¯å¢ƒå˜é‡æ¥ä½¿ç”¨é•œåƒã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> HF_ENDPOINT=https://hf-mirror.com</span><br></pre></td></tr></table></figure><h3 id="ä»£ç æ‹†è§£"><a class="markdownIt-Anchor" href="#ä»£ç æ‹†è§£"></a> ä»£ç æ‹†è§£</h3><h4 id="æ ¸å¿ƒå‡½æ•°"><a class="markdownIt-Anchor" href="#æ ¸å¿ƒå‡½æ•°"></a> æ ¸å¿ƒå‡½æ•°</h4><p><strong>éŸ³é¢‘é¢„å¤„ç†</strong> <code>preprocess_audio</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">preprocess_audio</span>(<span class="params">audio_path, target_sr=<span class="number">16000</span></span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Preprocess audio to ensure consistent format&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="comment"># ä½¿ç”¨librosaåŠ è½½ï¼Œå®ƒèƒ½æ›´å¥½åœ°å¤„ç†å„ç§æ ¼å¼</span></span><br><span class="line">        audio, sr = librosa.load(audio_path, sr=<span class="literal">None</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># å¦‚æœé‡‡æ ·ç‡ä¸æ˜¯16kHzï¼Œåˆ™é‡é‡‡æ ·</span></span><br><span class="line">        <span class="keyword">if</span> sr != target_sr:</span><br><span class="line">            audio = librosa.resample(audio, orig_sr=sr, target_sr=target_sr)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># å¦‚æœæ˜¯ç«‹ä½“å£°ï¼Œåˆ™è½¬ä¸ºå•å£°é“</span></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(audio.shape) &gt; <span class="number">1</span>:</span><br><span class="line">            audio = librosa.to_mono(audio)</span><br><span class="line">            </span><br><span class="line">        <span class="comment"># å½’ä¸€åŒ–ï¼Œå°†æŒ¯å¹…è°ƒæ•´åˆ°[-0.9, 0.9]ä¹‹é—´</span></span><br><span class="line">        audio = audio / np.<span class="built_in">max</span>(np.<span class="built_in">abs</span>(audio)) * <span class="number">0.9</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> audio, target_sr</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;Error processing <span class="subst">&#123;audio_path&#125;</span>: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">None</span>, <span class="literal">None</span></span><br></pre></td></tr></table></figure><p><strong>éŸ³é¢‘è´¨é‡å¢å¼º</strong> <code>enhance_audio_quality</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">enhance_audio_quality</span>(<span class="params">audio, sr</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Apply basic audio enhancement techniques&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="comment"># åº”ç”¨é¢„åŠ é‡æ»¤æ³¢å™¨ï¼Œæå‡è¯­éŸ³æ¸…æ™°åº¦</span></span><br><span class="line">        audio_filtered = librosa.effects.preemphasis(audio, coef=<span class="number">0.95</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># å†æ¬¡å½’ä¸€åŒ–ï¼Œç¡®ä¿éŸ³é‡å‡è¡¡</span></span><br><span class="line">        audio_normalized = librosa.util.normalize(audio_filtered)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> audio_normalized</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;Error enhancing audio: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> audio</span><br></pre></td></tr></table></figure><h4 id="æ¨¡å‹åŠ è½½é€»è¾‘"><a class="markdownIt-Anchor" href="#æ¨¡å‹åŠ è½½é€»è¾‘"></a> æ¨¡å‹åŠ è½½é€»è¾‘</h4><p>ä»£ç ä½¿ç”¨<code>try-except</code>ç»“æ„æ¥åŠ¨æ€åŠ è½½æ¨¡å‹ï¼Œå¦‚æœæŸä¸ªåº“ä¸å­˜åœ¨ï¼Œå®ƒä¼šå°è¯•è‡ªåŠ¨å®‰è£…ã€‚è¿™å¢å¼ºäº†ä»£ç çš„å¯ç§»æ¤æ€§ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä»¥XTTSä¸ºä¾‹</span></span><br><span class="line">vits_available = <span class="literal">False</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">from</span> TTS.api <span class="keyword">import</span> TTS</span><br><span class="line">    <span class="comment"># æ³¨æ„ï¼šXTTS v2æ¨¡å‹è¾ƒå¤§ï¼Œé¦–æ¬¡è¿è¡Œä¼šä¸‹è½½</span></span><br><span class="line">    tts = TTS(<span class="string">&quot;tts_models/multilingual/multi-dataset/xtts_v2&quot;</span>, gpu=torch.cuda.is_available())</span><br><span class="line">    vits_available = <span class="literal">True</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;XTTS model loaded successfully&quot;</span>)</span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;XTTS model not available: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="comment"># å¯ä»¥åœ¨è¿™é‡ŒåŠ å…¥è‡ªåŠ¨å®‰è£…é€»è¾‘</span></span><br></pre></td></tr></table></figure><p>å…¶ä»–æ¨¡å‹ï¼ˆ<code>edge-tts</code>, <code>pyttsx3</code>ï¼‰çš„åŠ è½½é€»è¾‘ä¸æ­¤ç±»ä¼¼ã€‚</p><h4 id="ä¸»å¤„ç†å¾ªç¯ä¸çº§è”è°ƒç”¨"><a class="markdownIt-Anchor" href="#ä¸»å¤„ç†å¾ªç¯ä¸çº§è”è°ƒç”¨"></a> ä¸»å¤„ç†å¾ªç¯ä¸çº§è”è°ƒç”¨</h4><p>è¿™æ˜¯æ•´ä¸ªè„šæœ¬çš„æ ¸å¿ƒï¼Œå®ƒéå†æ‰€æœ‰ä»»åŠ¡å¹¶æŒ‰ä¼˜å…ˆçº§è°ƒç”¨TTSæ¨¡å‹ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> idx, row <span class="keyword">in</span> tqdm(task.iterrows(), total=<span class="built_in">len</span>(task)):</span><br><span class="line">    <span class="comment"># ... è·å–ä»»åŠ¡ä¿¡æ¯ ...</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># é¢„å¤„ç†å‚è€ƒéŸ³é¢‘</span></span><br><span class="line">    ref_audio, sr = preprocess_audio(ref_audio_path)</span><br><span class="line">    <span class="keyword">if</span> ref_audio <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        <span class="comment"># å¦‚æœå‚è€ƒéŸ³é¢‘å¤„ç†å¤±è´¥ï¼Œç›´æ¥è·³åˆ°å¤‡ç”¨æ–¹æ¡ˆ</span></span><br><span class="line">        <span class="comment"># ...</span></span><br><span class="line">        <span class="keyword">continue</span></span><br><span class="line">    </span><br><span class="line">    success = <span class="literal">False</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 1. å°è¯•ä½¿ç”¨XTTS</span></span><br><span class="line">    <span class="keyword">if</span> vits_available:</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="comment"># ... ç”Ÿæˆé€»è¾‘ ...</span></span><br><span class="line">            <span class="comment"># XTTSéœ€è¦å‚è€ƒéŸ³é¢‘è·¯å¾„ï¼Œæˆ‘ä»¬ä½¿ç”¨tempfileåˆ›å»ºä¸€ä¸ªä¸´æ—¶æ–‡ä»¶</span></span><br><span class="line">            tts.tts_to_file(</span><br><span class="line">                text=text,</span><br><span class="line">                file_path=output_path,</span><br><span class="line">                speaker_wav=temp_ref_path, <span class="comment"># ä¸´æ—¶å‚è€ƒéŸ³é¢‘æ–‡ä»¶</span></span><br><span class="line">                language=<span class="string">&quot;zh&quot;</span> <span class="keyword">if</span> <span class="built_in">any</span>(<span class="string">&#x27;\u4e00&#x27;</span> &lt;= c &lt;= <span class="string">&#x27;\u9fff&#x27;</span> <span class="keyword">for</span> c <span class="keyword">in</span> text) <span class="keyword">else</span> <span class="string">&quot;en&quot;</span></span><br><span class="line">            )</span><br><span class="line">            success = <span class="literal">True</span></span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;XTTS failed for task <span class="subst">&#123;utt_id&#125;</span>: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 2. å¦‚æœXTTSå¤±è´¥ï¼Œå°è¯•Edge-TTS</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> success <span class="keyword">and</span> edge_tts_available:</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="comment"># Edge-TTSä½¿ç”¨asyncioï¼Œéœ€è¦ç‰¹åˆ«å¤„ç†</span></span><br><span class="line">            <span class="keyword">import</span> asyncio</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">edge_tts_generate</span>():</span><br><span class="line">                <span class="comment"># ...</span></span><br><span class="line">                communicate = edge_tts.Communicate(text, voice)</span><br><span class="line">                <span class="keyword">await</span> communicate.save(temp_output) <span class="comment"># ä¿å­˜ä¸ºmp3</span></span><br><span class="line">            </span><br><span class="line">            asyncio.run(edge_tts_generate())</span><br><span class="line">            </span><br><span class="line">            <span class="comment"># å°†mp3è½¬æ¢ä¸ºwav</span></span><br><span class="line">            audio = AudioSegment.from_mp3(temp_output)</span><br><span class="line">            audio.export(output_path, <span class="built_in">format</span>=<span class="string">&quot;wav&quot;</span>)</span><br><span class="line">            </span><br><span class="line">            success = <span class="literal">True</span></span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;Edge TTS failed for task <span class="subst">&#123;utt_id&#125;</span>: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">            </span><br><span class="line">    <span class="comment"># 3. å¦‚æœå…¨éƒ¨å¤±è´¥ï¼Œä½¿ç”¨pyttsx3ä½œä¸ºæœ€åä¿éšœ</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> success <span class="keyword">and</span> pyttsx3_available:</span><br><span class="line">        <span class="comment"># ... pyttsx3ç”Ÿæˆé€»è¾‘ ...</span></span><br><span class="line">        success = <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 4. å¦‚æœè¿pyttsx3éƒ½å¤±è´¥äº†ï¼ˆæç½•è§ï¼‰ï¼Œç”Ÿæˆä¸€ä¸ªé™éŸ³æ–‡ä»¶</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> success:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;All TTS models failed for task <span class="subst">&#123;utt_id&#125;</span>, using fallback&quot;</span>)</span><br><span class="line">        <span class="comment"># åˆ›å»ºä¸€ä¸ª2ç§’çš„é™éŸ³éŸ³é¢‘ï¼Œé‡‡æ ·ç‡ä¸º16kHz</span></span><br><span class="line">        silence = np.zeros(<span class="number">16000</span> * <span class="number">2</span>) </span><br><span class="line">        sf.write(output_path, silence, <span class="number">16000</span>)</span><br></pre></td></tr></table></figure><h4 id="ç»“æœæ‰“åŒ…"><a class="markdownIt-Anchor" href="#ç»“æœæ‰“åŒ…"></a> ç»“æœæ‰“åŒ…</h4><p>æœ€åï¼Œè„šæœ¬ä¼šæ›´æ–°<code>pandas</code>çš„DataFrameï¼Œæ·»åŠ ç”Ÿæˆçš„æ–‡ä»¶åï¼Œä¿å­˜ä¸º<code>result.csv</code>ï¼Œå¹¶è°ƒç”¨<code>zip</code>å‘½ä»¤æ‰“åŒ…æ•´ä¸ª<code>result</code>æ–‡ä»¶å¤¹ï¼Œç”Ÿæˆæœ€ç»ˆçš„æäº¤æ–‡ä»¶ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zip -r result.zip result/</span><br></pre></td></tr></table></figure><h3 id="å®Œæ•´è„šæœ¬"><a class="markdownIt-Anchor" href="#å®Œæ•´è„šæœ¬"></a> å®Œæ•´è„šæœ¬</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> shutil</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> torchaudio</span><br><span class="line"><span class="keyword">from</span> tqdm <span class="keyword">import</span> tqdm</span><br><span class="line"><span class="keyword">import</span> librosa</span><br><span class="line"><span class="keyword">import</span> soundfile <span class="keyword">as</span> sf</span><br><span class="line"><span class="keyword">from</span> pydub <span class="keyword">import</span> AudioSegment</span><br><span class="line"><span class="keyword">import</span> tempfile</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> warnings</span><br><span class="line">warnings.filterwarnings(<span class="string">&quot;ignore&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ£€æŸ¥PyTorchç‰ˆæœ¬</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;PyTorchç‰ˆæœ¬: <span class="subst">&#123;torch.__version__&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºå¿…è¦ç›®å½•</span></span><br><span class="line">os.makedirs(<span class="string">&quot;result/&quot;</span>, exist_ok=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¯»å–ä»»åŠ¡æ•°æ®</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;æ­£åœ¨è¯»å–ä»»åŠ¡æ•°æ®...&quot;</span>)</span><br><span class="line">task = pd.read_csv(<span class="string">&quot;aigc_speech_generation_tasks/aigc_speech_generation_tasks.csv&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># é¢„å¤„ç†éŸ³é¢‘çš„å‡½æ•°å®šä¹‰</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">preprocess_audio</span>(<span class="params">audio_path, target_sr=<span class="number">16000</span></span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;é¢„å¤„ç†éŸ³é¢‘ä»¥ç¡®ä¿æ ¼å¼ä¸€è‡´&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="comment"># ä½¿ç”¨librosaåŠ è½½éŸ³é¢‘å¤„ç†ä¸åŒæ ¼å¼</span></span><br><span class="line">        audio, sr = librosa.load(audio_path, sr=<span class="literal">None</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># é‡æ–°é‡‡æ ·</span></span><br><span class="line">        <span class="keyword">if</span> sr != target_sr:</span><br><span class="line">            audio = librosa.resample(audio, orig_sr=sr, target_sr=target_sr)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># è½¬æ¢ä¸ºå•å£°é“</span></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(audio.shape) &gt; <span class="number">1</span>:</span><br><span class="line">            audio = librosa.to_mono(audio)</span><br><span class="line">            </span><br><span class="line">        <span class="comment"># å½’ä¸€åŒ–éŸ³é¢‘</span></span><br><span class="line">        audio = audio / np.<span class="built_in">max</span>(np.<span class="built_in">abs</span>(audio)) * <span class="number">0.9</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> audio, target_sr</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;å¤„ç†éŸ³é¢‘<span class="subst">&#123;audio_path&#125;</span>æ—¶å‡ºé”™: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">None</span>, <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># éŸ³é¢‘è´¨é‡å¢å¼ºå‡½æ•°</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">enhance_audio_quality</span>(<span class="params">audio, sr</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;åº”ç”¨åŸºç¡€éŸ³é¢‘å¢å¼ºæŠ€æœ¯&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="comment"># åº”ç”¨é«˜é€šæ»¤æ³¢å™¨å‡å°‘ä½é¢‘å™ªå£°</span></span><br><span class="line">        audio_filtered = librosa.effects.preemphasis(audio, coef=<span class="number">0.95</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># æ ‡å‡†åŒ–éŸ³é¢‘ç”µå¹³</span></span><br><span class="line">        audio_normalized = librosa.util.normalize(audio_filtered)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> audio_normalized</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;éŸ³é¢‘å¢å¼ºå‡ºé”™: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> audio</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°è¯•åŠ è½½TTSæ¨¡å‹ - ä½¿ç”¨VITSå› å…¶å¹¿æ³›å¯ç”¨æ€§</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;æ­£åœ¨åŠ è½½TTSæ¨¡å‹...&quot;</span>)</span><br><span class="line"></span><br><span class="line">vits_available = <span class="literal">False</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">from</span> TTS.api <span class="keyword">import</span> TTS</span><br><span class="line">    tts = TTS(<span class="string">&quot;tts_models/multilingual/multi-dataset/xtts_v2&quot;</span>, gpu=torch.cuda.is_available())</span><br><span class="line">    vits_available = <span class="literal">True</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;XTTSæ¨¡å‹åŠ è½½æˆåŠŸ&quot;</span>)</span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;XTTSæ¨¡å‹ä¸å¯ç”¨: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;æ­£åœ¨å°è¯•å®‰è£…TTS...&quot;</span>)</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        subprocess.check_call([sys.executable, <span class="string">&quot;-m&quot;</span>, <span class="string">&quot;pip&quot;</span>, <span class="string">&quot;install&quot;</span>, <span class="string">&quot;TTS&quot;</span>])</span><br><span class="line">        <span class="keyword">from</span> TTS.api <span class="keyword">import</span> TTS</span><br><span class="line">        tts = TTS(<span class="string">&quot;tts_models/multilingual/multi-dataset/xtts_v2&quot;</span>, gpu=torch.cuda.is_available())</span><br><span class="line">        vits_available = <span class="literal">True</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;å®‰è£…åXTTSæ¨¡å‹åŠ è½½æˆåŠŸ&quot;</span>)</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;å®‰è£…å’ŒåŠ è½½XTTSå¤±è´¥: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°è¯•åŠ è½½edge-ttsä½œä¸ºå¤‡ç”¨æ–¹æ¡ˆï¼ˆMicrosoft Edge TTSï¼‰</span></span><br><span class="line">edge_tts_available = <span class="literal">False</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">import</span> edge_tts</span><br><span class="line">    edge_tts_available = <span class="literal">True</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Edge TTSå¯ç”¨&quot;</span>)</span><br><span class="line"><span class="keyword">except</span> ImportError:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Edge TTSä¸å¯ç”¨ï¼Œæ­£åœ¨å°è¯•å®‰è£…...&quot;</span>)</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        subprocess.check_call([sys.executable, <span class="string">&quot;-m&quot;</span>, <span class="string">&quot;pip&quot;</span>, <span class="string">&quot;install&quot;</span>, <span class="string">&quot;edge-tts&quot;</span>])</span><br><span class="line">        <span class="keyword">import</span> edge_tts</span><br><span class="line">        edge_tts_available = <span class="literal">True</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Edge TTSå®‰è£…æˆåŠŸ&quot;</span>)</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;å®‰è£…Edge TTSå¤±è´¥: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°è¯•åŠ è½½pyttsx3ä½œä¸ºæœ€åæ–¹æ¡ˆ</span></span><br><span class="line">pyttsx3_available = <span class="literal">False</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">import</span> pyttsx3</span><br><span class="line">    pyttsx3_available = <span class="literal">True</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;pyttsx3å¯ç”¨&quot;</span>)</span><br><span class="line"><span class="keyword">except</span> ImportError:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;pyttsx3ä¸å¯ç”¨ï¼Œæ­£åœ¨å°è¯•å®‰è£…...&quot;</span>)</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        subprocess.check_call([sys.executable, <span class="string">&quot;-m&quot;</span>, <span class="string">&quot;pip&quot;</span>, <span class="string">&quot;install&quot;</span>, <span class="string">&quot;pyttsx3&quot;</span>])</span><br><span class="line">        <span class="keyword">import</span> pyttsx3</span><br><span class="line">        pyttsx3_available = <span class="literal">True</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;pyttsx3å®‰è£…æˆåŠŸ&quot;</span>)</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;å®‰è£…pyttsx3å¤±è´¥: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¤„ç†æ¯ä¸ªä»»åŠ¡</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;æ­£åœ¨å¤„ç†<span class="subst">&#123;<span class="built_in">len</span>(task)&#125;</span>ä¸ªä»»åŠ¡...&quot;</span>)</span><br><span class="line"><span class="keyword">for</span> idx, row <span class="keyword">in</span> tqdm(task.iterrows(), total=<span class="built_in">len</span>(task)):</span><br><span class="line">    utt_id = row[<span class="string">&#x27;utt&#x27;</span>]</span><br><span class="line">    ref_audio_path = os.path.join(<span class="string">&quot;aigc_speech_generation_tasks&quot;</span>, row[<span class="string">&#x27;reference_speech&#x27;</span>])</span><br><span class="line">    text = row[<span class="string">&#x27;text&#x27;</span>]</span><br><span class="line">    output_path = os.path.join(<span class="string">&quot;result&quot;</span>, <span class="string">f&quot;<span class="subst">&#123;utt_id&#125;</span>.wav&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># å¤„ç†å‚è€ƒéŸ³é¢‘</span></span><br><span class="line">    ref_audio, sr = preprocess_audio(ref_audio_path)</span><br><span class="line">    <span class="keyword">if</span> ref_audio <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;è­¦å‘Šï¼šæ— æ³•å¤„ç†ä»»åŠ¡<span class="subst">&#123;utt_id&#125;</span>çš„å‚è€ƒéŸ³é¢‘ï¼Œä½¿ç”¨å¤‡ç”¨æ–¹æ¡ˆ&quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> pyttsx3_available:</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                engine = pyttsx3.init()</span><br><span class="line">                engine.save_to_file(text, output_path)</span><br><span class="line">                engine.runAndWait()</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            <span class="keyword">except</span>:</span><br><span class="line">                <span class="keyword">pass</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> os.path.exists(<span class="string">&quot;tests/infer_cli_basic.wav&quot;</span>):</span><br><span class="line">            shutil.copy(<span class="string">&quot;tests/infer_cli_basic.wav&quot;</span>, output_path)</span><br><span class="line">        <span class="keyword">continue</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># å°è¯•ä¸åŒTTSæ¨¡å‹æŒ‰ä¼˜å…ˆçº§é¡ºåº</span></span><br><span class="line">    success = <span class="literal">False</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># ä¼˜å…ˆå°è¯•XTTS</span></span><br><span class="line">    <span class="keyword">if</span> vits_available:</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="keyword">with</span> tempfile.NamedTemporaryFile(suffix=<span class="string">&quot;.wav&quot;</span>, delete=<span class="literal">False</span>) <span class="keyword">as</span> temp_ref:</span><br><span class="line">                temp_ref_path = temp_ref.name</span><br><span class="line">                sf.write(temp_ref_path, ref_audio, sr)</span><br><span class="line">            </span><br><span class="line">            <span class="comment"># ç”Ÿæˆè¯­éŸ³</span></span><br><span class="line">            tts.tts_to_file(</span><br><span class="line">                text=text,</span><br><span class="line">                file_path=output_path,</span><br><span class="line">                speaker_wav=temp_ref_path,</span><br><span class="line">                language=<span class="string">&quot;zh&quot;</span> <span class="keyword">if</span> <span class="built_in">any</span>(<span class="string">&#x27;\u4e00&#x27;</span> &lt;= c &lt;= <span class="string">&#x27;\u9fff&#x27;</span> <span class="keyword">for</span> c <span class="keyword">in</span> text) <span class="keyword">else</span> <span class="string">&quot;en&quot;</span></span><br><span class="line">            )</span><br><span class="line">            </span><br><span class="line">            os.unlink(temp_ref_path)</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> os.path.exists(output_path):</span><br><span class="line">                gen_audio, gen_sr = preprocess_audio(output_path)</span><br><span class="line">                <span class="keyword">if</span> gen_audio <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">                    enhanced_audio = enhance_audio_quality(gen_audio, gen_sr)</span><br><span class="line">                    sf.write(output_path, enhanced_audio, gen_sr)</span><br><span class="line">                success = <span class="literal">True</span></span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;ä»»åŠ¡<span class="subst">&#123;utt_id&#125;</span>çš„XTTSç”Ÿæˆå¤±è´¥: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># Edge TTSä½œä¸ºç¬¬äºŒé€‰æ‹©</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> success <span class="keyword">and</span> edge_tts_available:</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            temp_output = <span class="string">f&quot;temp_edge_<span class="subst">&#123;utt_id&#125;</span>.mp3&quot;</span></span><br><span class="line">            </span><br><span class="line">            <span class="comment"># ä½¿ç”¨asyncioè¿è¡ŒEdge TTS</span></span><br><span class="line">            <span class="keyword">import</span> asyncio</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">edge_tts_generate</span>():</span><br><span class="line">                voice = <span class="string">&quot;zh-CN-XiaoxiaoNeural&quot;</span>  <span class="comment"># é»˜è®¤ä¸­æ–‡å‘éŸ³</span></span><br><span class="line">                <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">any</span>(<span class="string">&#x27;\u4e00&#x27;</span> &lt;= c &lt;= <span class="string">&#x27;\u9fff&#x27;</span> <span class="keyword">for</span> c <span class="keyword">in</span> text):  <span class="comment"># éä¸­æ–‡</span></span><br><span class="line">                    voice = <span class="string">&quot;en-US-AriaNeural&quot;</span>  <span class="comment"># è‹±æ–‡å‘éŸ³</span></span><br><span class="line">                </span><br><span class="line">                communicate = edge_tts.Communicate(text, voice)</span><br><span class="line">                <span class="keyword">await</span> communicate.save(temp_output)</span><br><span class="line">            </span><br><span class="line">            asyncio.run(edge_tts_generate())</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> os.path.exists(temp_output):</span><br><span class="line">                audio = AudioSegment.from_mp3(temp_output)</span><br><span class="line">                audio.export(output_path, <span class="built_in">format</span>=<span class="string">&quot;wav&quot;</span>)</span><br><span class="line">                os.remove(temp_output)</span><br><span class="line">                </span><br><span class="line">                gen_audio, gen_sr = preprocess_audio(output_path)</span><br><span class="line">                <span class="keyword">if</span> gen_audio <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">                    enhanced_audio = enhance_audio_quality(gen_audio, gen_sr)</span><br><span class="line">                    sf.write(output_path, enhanced_audio, gen_sr)</span><br><span class="line">                success = <span class="literal">True</span></span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;ä»»åŠ¡<span class="subst">&#123;utt_id&#125;</span>çš„Edge TTSç”Ÿæˆå¤±è´¥: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># æœ€åä½¿ç”¨pyttsx3</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> success <span class="keyword">and</span> pyttsx3_available:</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            engine = pyttsx3.init()</span><br><span class="line">            engine.save_to_file(text, output_path)</span><br><span class="line">            engine.runAndWait()</span><br><span class="line">            success = os.path.exists(output_path)</span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;ä»»åŠ¡<span class="subst">&#123;utt_id&#125;</span>çš„pyttsx3ç”Ÿæˆå¤±è´¥: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># å…¨éƒ¨å¤±è´¥æ—¶ä½¿ç”¨å¤‡ç”¨æ–¹æ¡ˆ</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> success:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;ä»»åŠ¡<span class="subst">&#123;utt_id&#125;</span>æ‰€æœ‰TTSæ¨¡å‹å‡å¤±è´¥ï¼Œä½¿ç”¨å¤‡ç”¨æ–¹æ¡ˆ&quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> os.path.exists(<span class="string">&quot;tests/infer_cli_basic.wav&quot;</span>):</span><br><span class="line">            shutil.copy(<span class="string">&quot;tests/infer_cli_basic.wav&quot;</span>, output_path)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            silence = np.zeros(sr * <span class="number">2</span>)  <span class="comment"># åˆ›å»º2ç§’é™éŸ³</span></span><br><span class="line">            sf.write(output_path, silence, sr)</span><br><span class="line"></span><br><span class="line">    time.sleep(<span class="number">0.1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ›´æ–°ä»»åŠ¡æ•°æ®è¡¨ä¸­çš„åˆæˆè¯­éŸ³æ–‡ä»¶å</span></span><br><span class="line">task[<span class="string">&#x27;synthesized_speech&#x27;</span>] = [<span class="string">f&quot;<span class="subst">&#123;i&#125;</span>.wav&quot;</span> <span class="keyword">for</span> i <span class="keyword">in</span> task[<span class="string">&#x27;utt&#x27;</span>]]</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¿å­˜ç»“æœCSVæ–‡ä»¶</span></span><br><span class="line">task.to_csv(<span class="string">&quot;result/result.csv&quot;</span>, index=<span class="literal">None</span>, encoding=<span class="string">&quot;utf-8&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰“åŒ…ç»“æœæ–‡ä»¶å¤¹</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;æ­£åœ¨åˆ›å»ºæäº¤çš„å‹ç¼©åŒ…...&quot;</span>)</span><br><span class="line">subprocess.run(<span class="string">&quot;zip -r result.zip result/&quot;</span>, shell=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;å®Œæˆï¼æäº¤æ–‡ä»¶å·²ç”Ÿæˆï¼šresult.zip&quot;</span>)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> AIGC </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AIGC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ACMå¸¸ç”¨åº“å‡½æ•°ç³»åˆ—ï¼šlower_bound/upper_bound</title>
      <link href="/posts/21889.html"/>
      <url>/posts/21889.html</url>
      
        <content type="html"><![CDATA[<p>åœ¨C++ä¸­ï¼Œlower_boundå’Œupper_boundæ˜¯ç”¨äºåœ¨æœ‰åºåºåˆ—ä¸­é«˜æ•ˆæŸ¥æ‰¾å…ƒç´ çš„å‡½æ•°ï¼Œä½äº<algorithm>å¤´æ–‡ä»¶ã€‚å®ƒä»¬çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(log n)ï¼ˆè¦æ±‚éšæœºè®¿é—®è¿­ä»£å™¨ï¼‰ã€‚</p><p>ä¸€èˆ¬æ¥è¯´ï¼Œè¿™ä¸¤ä¸ªå‡½æ•°èƒ½å®ç°çš„åŠŸèƒ½ï¼Œä½¿ç”¨äºŒåˆ†æ³•éƒ½èƒ½å®ç°ï¼›ä¸è¿‡ä¸ºäº†ç¼–ç é€Ÿåº¦å’Œä»£ç çš„ç®€æ´æ€§ï¼Œåœ¨ç¨‹åºçš„æŸä¸ªç¯èŠ‚å¦‚æœéœ€è¦ä¸€ä¸ªç®€å•äºŒåˆ†æŸ¥æ‰¾äº†ï¼Œæˆ‘ä»¬å¾€å¾€è¿˜æ˜¯ä½¿ç”¨è¿™ä¸¤ä¸ªå‡½æ•°æ¥æŸ¥æ‰¾ã€‚</p><h2 id="åŠŸèƒ½ç®€è¦è¯´æ˜"><a class="markdownIt-Anchor" href="#åŠŸèƒ½ç®€è¦è¯´æ˜"></a> åŠŸèƒ½ç®€è¦è¯´æ˜</h2><p><strong>lower_bound</strong>ï¼šè¿”å›ç¬¬ä¸€ä¸ª<strong>ä¸å°äº</strong>valueçš„å…ƒç´ çš„ä½ç½®ã€‚<br /><strong>upper_bound</strong>ï¼šè¿”å›ç¬¬ä¸€ä¸ª<strong>å¤§äº</strong>valueçš„å…ƒç´ çš„ä½ç½®ã€‚</p><h2 id="å‡½æ•°åŸå‹"><a class="markdownIt-Anchor" href="#å‡½æ•°åŸå‹"></a> å‡½æ•°åŸå‹</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">template</span>&lt; <span class="keyword">class</span> ForwardIt, <span class="keyword">class</span> T &gt;</span></span><br><span class="line"><span class="function">ForwardIt <span class="title">lower_bound</span><span class="params">( ForwardIt first, ForwardIt last, <span class="type">const</span> T&amp; value )</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt; <span class="keyword">class</span> ForwardIt, <span class="keyword">class</span> T &gt;</span></span><br><span class="line"><span class="function">ForwardIt <span class="title">upper_bound</span><span class="params">( ForwardIt first, ForwardIt last, <span class="type">const</span> T&amp; value )</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¸¦è‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°çš„ç‰ˆæœ¬</span></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt; <span class="keyword">class</span> ForwardIt, <span class="keyword">class</span> T, <span class="keyword">class</span> Compare &gt;</span></span><br><span class="line"><span class="function">ForwardIt <span class="title">lower_bound</span><span class="params">( ForwardIt first, ForwardIt last, <span class="type">const</span> T&amp; value, Compare comp )</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt; <span class="keyword">class</span> ForwardIt, <span class="keyword">class</span> T, <span class="keyword">class</span> Compare &gt;</span></span><br><span class="line"><span class="function">ForwardIt <span class="title">upper_bound</span><span class="params">( ForwardIt first, ForwardIt last, <span class="type">const</span> T&amp; value, Compare comp )</span></span>;</span><br></pre></td></tr></table></figure><h2 id="è¯¦ç»†ç”¨æ³•"><a class="markdownIt-Anchor" href="#è¯¦ç»†ç”¨æ³•"></a> è¯¦ç»†ç”¨æ³•</h2><blockquote><p>é¦–å…ˆä½¿ç”¨è¿™ä¸¤ä¸ªå‡½æ•°çš„ä¸€ä¸ªå‰ææ¡ä»¶æ˜¯ï¼šæœ‰åºã€‚<br />å¦‚æœæ˜¯å¯¹äºæ•°ç»„ä½¿ç”¨ï¼Œéœ€è¦å…ˆä¿è¯æ•°ç»„æ˜¯æœ‰åºçš„ï¼›å¦‚æœå¯¹äºé›†åˆä½¿ç”¨ï¼Œéœ€è¦ç¡®ä¿æ˜¯setï¼Œè€Œä¸æ˜¯unordered_setï¼Œå› ä¸ºsetæ˜¯é»˜è®¤æœ‰åºçš„ã€‚</p></blockquote><p>å‰æ–‡æåˆ°äº†ï¼Œlower_boundå…¶å®å°±æ˜¯æ‰¾&gt;=valueçš„è¾¹ç•Œï¼Œupper_boundå…¶å®å°±æ˜¯æ‰¾&gt;valueçš„è¾¹ç•Œã€‚<br />é‚£ä¹ˆï¼Œå¦‚ä½•æ‰¾&lt;å’Œ&lt;=çš„è¾¹ç•Œå€¼å‘¢ï¼Ÿ<br />å…¶å®æˆ‘ä»¬å¯ä»¥é€šè¿‡&gt;valueçš„ç¬¬ä¸€ä¸ªå…ƒç´ æ¥ç¡®å®š&lt;=valueçš„æœ€åä¸€ä¸ªå…ƒç´ ï¼›åŒç†&lt;ä¹Ÿå¯ä»¥é€šè¿‡&gt;=æ¥ç¡®å®šã€‚<br />ç”±äºè¿™ä¸¤ä¸ªå‡½æ•°è¿”å›å€¼éƒ½æ˜¯æŒ‡é’ˆï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åˆ©ç”¨prev()æ¥è·å–ä¸Šä¸€ä¸ªä½ç½®ã€‚<br />æ€»ç»“æ¥è¯´å°±æ˜¯ï¼š<br />æ‰¾è¾¹ç•Œå€¼çš„ä¸‹æ ‡</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">lower_bound</span>(a.<span class="built_in">begin</span>(), a.<span class="built_in">end</span>(), value) - a.<span class="built_in">begin</span>() <span class="comment">// &gt;=vaule</span></span><br><span class="line"><span class="built_in">prev</span>(<span class="built_in">upper_bound</span>(a.<span class="built_in">begin</span>(), a.<span class="built_in">end</span>(), value)) - a.<span class="built_in">begin</span>() <span class="comment">// &lt;=vaule</span></span><br><span class="line"><span class="built_in">upper_bound</span>(a.<span class="built_in">begin</span>(), a.<span class="built_in">end</span>(), value) - a.<span class="built_in">begin</span>() <span class="comment">// &gt;vaule</span></span><br><span class="line"><span class="built_in">prev</span>(<span class="built_in">lower_bound</span>(a.<span class="built_in">begin</span>(), a.<span class="built_in">end</span>(), value)) - a.<span class="built_in">begin</span>() <span class="comment">// &lt;vaule</span></span><br></pre></td></tr></table></figure><p>å¦‚æœæ˜¯éœ€è¦è·å–å¯¹åº”ä½ç½®ä¸Šçš„å€¼ï¼Œç”¨ä¸€ä¸ª*è·å–åœ°å€ä¸Šçš„å€¼å³å¯ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> t = *<span class="built_in">lower_bound</span>(a.<span class="built_in">begin</span>(), a.<span class="built_in">end</span>(), value);</span><br></pre></td></tr></table></figure><p><strong>æ‰¾ä¸åˆ°çš„æ—¶å€™</strong>:<br />lower_bound()å’Œupper_bound()éƒ½æ˜¯è¿”å›æ•°ç»„çš„æœ€åä¸€ä¸ªå…ƒç´ åé¢ä¸€ä¸ªä½ç½®ã€‚</p><hr /><p>è¿™ä¸¤ä¸ªå‡½æ•°ä¸ä»…å¯¹æ•°ç»„ï¼ˆint[]/vector<int>()ï¼‰é€‚ç”¨ï¼Œå¯¹setä¹Ÿæ˜¯é€‚ç”¨çš„ï¼Œsetæ²¡æœ‰ä½ç½®ï¼ˆä¸‹æ ‡ï¼‰çš„åŒºåˆ†ï¼Œä¸€èˆ¬æ¥è¯´éƒ½æ˜¯æŸ¥æ‰¾å€¼ï¼Œå…·ä½“ç”¨æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">set&lt;<span class="type">int</span>&gt; st = &#123;<span class="number">5</span>, <span class="number">1</span>, <span class="number">9</span>, <span class="number">3</span>, <span class="number">0</span>&#125;;</span><br><span class="line"><span class="comment">// æ‰¾åˆ°&gt;=2çš„æœ€å°æ•°, è¾“å‡º3</span></span><br><span class="line">cout &lt;&lt; *st.<span class="built_in">lower_bound</span>(<span class="number">2</span>) &lt;&lt; endl;</span><br><span class="line"><span class="comment">// æ‰¾ä¸åˆ°çš„æ—¶å€™è¿”å›st.end(), è¾“å‡º1, è¡¨ç¤ºtrue</span></span><br><span class="line">cout &lt;&lt; (st.<span class="built_in">lower_bound</span>(<span class="number">10</span>) == st.<span class="built_in">end</span>()) &lt;&lt; endl;</span><br></pre></td></tr></table></figure><blockquote><p>å¦‚æœè¦æ‰¾&gt;, &lt;, &lt;=å’Œvectoræ˜¯åŒç†çš„ã€‚</p></blockquote><h2 id="é€šè¿‡å®é™…æ¡ˆä¾‹ç†è§£"><a class="markdownIt-Anchor" href="#é€šè¿‡å®é™…æ¡ˆä¾‹ç†è§£"></a> é€šè¿‡å®é™…æ¡ˆä¾‹ç†è§£</h2><p>ä»¥ä¸‹åˆ—ä¸¾äº†å‡ ç§ç‰¹æ®Šè¾¹ç•Œæƒ…å†µï¼Œå¤§å®¶å¯ä»¥çœ‹ç€æ¡ˆä¾‹ç†è§£ä¸€ä¸‹ï¼š</p><p>æ‰¾&lt;=çš„å³è¾¹ç•Œï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ³¨æ„æ•°ç»„ä¸‹æ ‡ä»0å¼€å§‹</span></span><br><span class="line">vector&lt;<span class="type">int</span>&gt; a = &#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;;</span><br><span class="line"><span class="comment">// æ‰¾&lt;=6çš„æœ€åä¸€ä¸ªæ•°çš„ä½ç½®</span></span><br><span class="line"><span class="type">int</span> res = <span class="built_in">prev</span>(<span class="built_in">upper_bound</span>(a.<span class="built_in">begin</span>(), a.<span class="built_in">end</span>(), <span class="number">6</span>)) - a.<span class="built_in">begin</span>();</span><br><span class="line"><span class="comment">// res = 5</span></span><br><span class="line">cout &lt;&lt; res &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰¾&lt;=5çš„æœ€åä¸€ä¸ªæ•°çš„ä½ç½®</span></span><br><span class="line">res = <span class="built_in">prev</span>(<span class="built_in">upper_bound</span>(a.<span class="built_in">begin</span>(), a.<span class="built_in">end</span>(), <span class="number">5</span>)) - a.<span class="built_in">begin</span>();</span><br><span class="line"><span class="comment">// res = 5</span></span><br><span class="line">cout &lt;&lt; res &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰¾&lt;=-1çš„æœ€åä¸€ä¸ªæ•°çš„ä½ç½®</span></span><br><span class="line">res = <span class="built_in">prev</span>(<span class="built_in">upper_bound</span>(a.<span class="built_in">begin</span>(), a.<span class="built_in">end</span>(), <span class="number">-1</span>)) - a.<span class="built_in">begin</span>();</span><br><span class="line"><span class="comment">// æ‰¾ä¸åˆ°ï¼Œæ­¤æ—¶çš„prev(upper_bound(a.begin(), a.end(), -1))å…¶å®æ˜¯ä¼šè¿”å›a.begin()çš„å‰ä¸€ä¸ªä½ç½®</span></span><br><span class="line"><span class="comment">// res = -1</span></span><br><span class="line">cout &lt;&lt; res &lt;&lt; endl;</span><br></pre></td></tr></table></figure><p>æ‰¾&gt;=çš„å·¦è¾¹ç•Œ</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ³¨æ„æ•°ç»„ä¸‹æ ‡ä»0å¼€å§‹</span></span><br><span class="line">vector&lt;<span class="type">int</span>&gt; a = &#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;;</span><br><span class="line"><span class="comment">// æ‰¾&gt;=6çš„ç¬¬ä¸€ä¸ªæ•°çš„ä½ç½®</span></span><br><span class="line"><span class="type">int</span> res = <span class="built_in">lower_bound</span>(a.<span class="built_in">begin</span>(), a.<span class="built_in">end</span>(), <span class="number">6</span>) - a.<span class="built_in">begin</span>();</span><br><span class="line"><span class="comment">// æ‰¾ä¸åˆ°ï¼Œæ­¤æ—¶lower_boundè¿”å›çš„æ˜¯a.end()ï¼Œ5åé¢ä¸€ä¸ªä½ç½®</span></span><br><span class="line"><span class="comment">// res = 6</span></span><br><span class="line">cout &lt;&lt; res &lt;&lt; endl;</span><br><span class="line"><span class="comment">// è¾“å‡º 0</span></span><br><span class="line">cout &lt;&lt; <span class="built_in">lower_bound</span>(a.<span class="built_in">begin</span>(), a.<span class="built_in">end</span>(), <span class="number">6</span>) - a.<span class="built_in">end</span>() &lt;&lt; endl;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³•éšç¬” </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>nndlå­¦ä¹ ç¬”è®° ç¬¬ä¸€ç« ï¼šç»ªè®º</title>
      <link href="/posts/1115.html"/>
      <url>/posts/1115.html</url>
      
        <content type="html"><![CDATA[<p>è¯¾ç¨‹ä¸»é¡µï¼š<a href="https://nndl.github.io/">https://nndl.github.io/</a></p><h1 id="ç¬¬ä¸€ç« -ç»ªè®º"><a class="markdownIt-Anchor" href="#ç¬¬ä¸€ç« -ç»ªè®º"></a> ç¬¬ä¸€ç«  ç»ªè®º</h1><ul><li><p>ç¥ç»ç½‘ç»œï¼šä¸€ç§ä»¥ï¼ˆäººå·¥ï¼‰ç¥ç»å…ƒä¸ºåŸºæœ¬å•å…ƒçš„æ¨¡å‹ã€‚</p></li><li><p>æ·±åº¦å­¦ä¹ ï¼šä¸€ç±»æœºå™¨å­¦ä¹ é—®é¢˜ï¼Œä¸»è¦è§£å†³è´ŸçŒ®åº¦åˆ†é…é—®é¢˜ã€‚</p></li><li><img src="https://picbed.octalzhihao.top/img/20250326153414027.png" alt="image-20250227142111089" style="zoom: 50%;" align="left"/></li></ul><div style="clear: both;"></div><h2 id="11-æœ¬ä¹¦çš„çŸ¥è¯†ä½“ç³»"><a class="markdownIt-Anchor" href="#11-æœ¬ä¹¦çš„çŸ¥è¯†ä½“ç³»"></a> 1.1 æœ¬ä¹¦çš„çŸ¥è¯†ä½“ç³»</h2><img src="https://picbed.octalzhihao.top/img/20250326153418535.png" alt="image-20250227141850858" style="zoom:80%;" align="left"/><p><img src="https://picbed.octalzhihao.top/img/20250326153418536.png" alt="image-20250227143125590" /></p><h2 id="12-äººå·¥æ™ºèƒ½"><a class="markdownIt-Anchor" href="#12-äººå·¥æ™ºèƒ½"></a> 1.2 äººå·¥æ™ºèƒ½</h2><p>äººå·¥æ™ºèƒ½çš„è¯ç”Ÿ</p><blockquote><p>1956 å¹´çš„è¾¾ç‰¹èŒ…æ–¯ï¼ˆDartmouthï¼‰ä¼šè®®ï¼š<br />åœ¨è¿™æ¬¡ä¼šè®®ä¸Šï¼Œâ€œäººå·¥æ™ºèƒ½â€è¢«æå‡ºå¹¶ä½œä¸ºæœ¬ç ”ç©¶é¢†åŸŸçš„åç§°ï¼åŒæ—¶ï¼Œäººå·¥æ™ºèƒ½ç ”ç©¶çš„ä½¿å‘½ä¹Ÿå¾—ä»¥ç¡®å®šï¼John McCarthyæå‡ºäº†äººå·¥æ™ºèƒ½çš„å®šä¹‰ï¼š<strong>äººå·¥æ™ºèƒ½å°±æ˜¯è¦è®©æœºå™¨çš„è¡Œä¸ºçœ‹èµ·æ¥å°±åƒæ˜¯äººæ‰€è¡¨ç°å‡ºçš„æ™ºèƒ½è¡Œä¸ºä¸€æ ·</strong>ï¼</p></blockquote><p>ç›®å‰ï¼Œäººå·¥æ™ºèƒ½çš„ä¸»è¦é¢†åŸŸå¤§ä½“ä¸Šå¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š</p><p>ï¼ˆ1ï¼‰ <strong>æ„ŸçŸ¥</strong>ï¼šæ¨¡æ‹Ÿäººçš„æ„ŸçŸ¥èƒ½åŠ›ï¼Œå¯¹å¤–éƒ¨åˆºæ¿€ä¿¡æ¯ï¼ˆè§†è§‰å’Œè¯­éŸ³ç­‰ï¼‰è¿›è¡Œæ„ŸçŸ¥å’ŒåŠ å·¥ï¼ä¸»è¦ç ”ç©¶é¢†åŸŸåŒ…æ‹¬è¯­éŸ³ä¿¡æ¯å¤„ç†å’Œè®¡ç®—æœºè§†è§‰ç­‰ï¼</p><p>ï¼ˆ2ï¼‰ <strong>å­¦ä¹ </strong>ï¼šæ¨¡æ‹Ÿäººçš„å­¦ä¹ èƒ½åŠ›ï¼Œä¸»è¦ç ”ç©¶å¦‚ä½•ä»æ ·ä¾‹æˆ–ä»ä¸ç¯å¢ƒçš„äº¤äº’ä¸­è¿›è¡Œå­¦ä¹ ï¼ä¸»è¦ç ”ç©¶é¢†åŸŸåŒ…æ‹¬ç›‘ç£å­¦ä¹ ã€æ— ç›‘ç£å­¦ä¹ å’Œå¼ºåŒ–å­¦ä¹ ç­‰ï¼</p><p>ï¼ˆ3ï¼‰ <strong>è®¤çŸ¥</strong>ï¼šæ¨¡æ‹Ÿäººçš„è®¤çŸ¥èƒ½åŠ›ï¼Œä¸»è¦ç ”ç©¶é¢†åŸŸåŒ…æ‹¬çŸ¥è¯†è¡¨ç¤ºã€è‡ªç„¶è¯­è¨€ç†è§£ã€æ¨ç†ã€è§„åˆ’ã€å†³ç­–ç­‰ï¼</p><h3 id="äººå·¥æ™ºèƒ½çš„å‘å±•å†å²"><a class="markdownIt-Anchor" href="#äººå·¥æ™ºèƒ½çš„å‘å±•å†å²"></a> äººå·¥æ™ºèƒ½çš„å‘å±•å†å²</h3><p>äººå·¥æ™ºèƒ½ä»è¯ç”Ÿè‡³ä»Šï¼Œç»å†äº†ä¸€æ¬¡åˆä¸€æ¬¡çš„ç¹è£ä¸ä½è°·ï¼Œå…¶å‘å±•å†ç¨‹å¤§ä½“ä¸Šå¯ä»¥åˆ†ä¸ºæ¨ç†æœŸã€çŸ¥è¯†æœŸå’Œå­¦ä¹ æœŸï¼š</p><img src="https://picbed.octalzhihao.top/img/20250326153418537.png" alt="image-20250227150434590" style="zoom:80%;" align="left"/><div style="clear: both;"></div><p><strong>æ¨ç†æœŸ</strong>ï¼š</p><p>1956 å¹´è¾¾ç‰¹èŒ…æ–¯ä¼šè®®ä¹‹åï¼Œç ”ç©¶è€…å¯¹äººå·¥æ™ºèƒ½çš„çƒ­æƒ…é«˜æ¶¨ï¼Œä¹‹åçš„åå‡ å¹´æ˜¯äººå·¥æ™ºèƒ½çš„é»„é‡‘æ—¶æœŸï¼å¤§éƒ¨åˆ†æ—©æœŸç ”ç©¶è€…éƒ½é€šè¿‡äººç±»çš„ç»éªŒï¼ŒåŸºäºé€»è¾‘æˆ–è€…äº‹å®å½’çº³å‡ºæ¥ä¸€äº›è§„åˆ™ï¼Œç„¶åé€šè¿‡ç¼–å†™ç¨‹åºæ¥è®©è®¡ç®—æœºå®Œæˆä¸€ä¸ªä»»åŠ¡ã€‚ä½†æ­¤åï¼Œäººå·¥æ™ºèƒ½ç»å†äº†ä¸€æ®µä½è°·æœŸã€‚</p><p><strong>çŸ¥è¯†æœŸ</strong>ï¼š</p><p>åˆ°äº† 20 ä¸–çºª 70 å¹´ä»£ï¼Œç ”ç©¶è€…æ„è¯†åˆ°çŸ¥è¯†å¯¹äºäººå·¥æ™ºèƒ½ç³»ç»Ÿçš„é‡è¦æ€§ï¼ç‰¹åˆ«æ˜¯å¯¹äºä¸€äº›å¤æ‚çš„ä»»åŠ¡ï¼Œéœ€è¦ä¸“å®¶æ¥æ„å»ºçŸ¥è¯†åº“ï¼åœ¨è¿™ä¸€æ—¶æœŸï¼Œå‡ºç°äº†å„ç§å„æ ·çš„ <strong>ä¸“å®¶ç³»ç»Ÿï¼ˆExpert Systemï¼‰</strong>ï¼Œå¹¶åœ¨ç‰¹å®šçš„ä¸“ä¸šé¢†åŸŸå–å¾—äº†å¾ˆå¤šæˆæœã€‚</p><blockquote><p>ä¸“å®¶ç³»ç»Ÿä¹Ÿè¢«ç§°ä¸º<strong>åŸºäºçŸ¥è¯†çš„ç³»ç»Ÿ</strong><br />å¯ä»¥ç®€å•ç†è§£ä¸ºâ€œçŸ¥è¯†åº“ + æ¨ç†æœºâ€ï¼Œæ˜¯ä¸€ç±»å…·æœ‰ä¸“é—¨çŸ¥è¯†å’Œç»éªŒçš„è®¡ç®—æœºæ™ºèƒ½ç¨‹åºç³»ç»Ÿï¼<br />ä¸€ä¸ªä¸“å®¶ç³»ç»Ÿå¿…é¡»å…·å¤‡ä¸‰è¦ç´ ï¼š<br />1ï¼‰é¢†åŸŸä¸“å®¶çº§çŸ¥è¯†ï¼›<br />2ï¼‰æ¨¡æ‹Ÿä¸“å®¶æ€ç»´ï¼›<br />3ï¼‰è¾¾åˆ°ä¸“å®¶çº§çš„æ°´å¹³ï¼</p><p>åœ¨è¿™ä¸€æ—¶æœŸï¼ŒPrologï¼ˆProgramming in Logicï¼‰è¯­è¨€æ˜¯ä¸»è¦çš„å¼€å‘å·¥å…·ï¼Œç”¨æ¥å»ºé€ ä¸“å®¶ç³»ç»Ÿã€æ™ºèƒ½çŸ¥è¯†åº“ä»¥åŠå¤„ç†è‡ªç„¶è¯­è¨€ç†è§£ç­‰.</p></blockquote><p><strong>å­¦ä¹ æœŸ</strong>ï¼š</p><p>æœºå™¨å­¦ä¹ å¼€å§‹æµè¡Œï¼šç ”ç©¶è€…å¼€å§‹å°†ç ”ç©¶é‡ç‚¹è½¬å‘è®©è®¡ç®—æœºä»æ•°æ®ä¸­è‡ªå·±å­¦ä¹ ï¼Œå³æœºå™¨å­¦ä¹ ã€‚<br />åœ¨äººå·¥æ™ºèƒ½é¢†åŸŸï¼Œæœºå™¨å­¦ä¹ ä»ä¸€å¼€å§‹å°±æ˜¯ä¸€ä¸ªé‡è¦çš„ç ”ç©¶æ–¹å‘ï¼ä½†ç›´åˆ°1980å¹´åï¼Œæœºå™¨å­¦ä¹ å› å…¶åœ¨å¾ˆå¤šé¢†åŸŸçš„å‡ºè‰²è¡¨ç°ï¼Œæ‰é€æ¸æˆä¸ºçƒ­é—¨å­¦ç§‘ã€‚</p><h3 id="äººå·¥æ™ºèƒ½çš„æµæ´¾"><a class="markdownIt-Anchor" href="#äººå·¥æ™ºèƒ½çš„æµæ´¾"></a> äººå·¥æ™ºèƒ½çš„æµæ´¾</h3><ol><li><p><strong>ç¬¦å·ä¸»ä¹‰ï¼ˆSymbolismï¼‰</strong>ï¼Œåˆç§°é€»è¾‘ä¸»ä¹‰ã€å¿ƒç†å­¦æ´¾æˆ–è®¡ç®—æœºå­¦æ´¾ï¼Œæ˜¯æŒ‡é€šè¿‡åˆ†æäººç±»æ™ºèƒ½çš„åŠŸèƒ½ï¼Œç„¶åç”¨è®¡ç®—æœºæ¥å®ç°è¿™äº›åŠŸèƒ½çš„ä¸€ç±»æ–¹æ³•ï¼</p></li><li><p><strong>è¿æ¥ä¸»ä¹‰ï¼ˆConnectionismï¼‰</strong>ï¼Œåˆç§°ä»¿ç”Ÿå­¦æ´¾æˆ–ç”Ÿç†å­¦æ´¾ï¼Œæ˜¯è®¤çŸ¥ç§‘å­¦é¢†åŸŸä¸­çš„ä¸€ç±»ä¿¡æ¯å¤„ç†çš„æ–¹æ³•å’Œç†è®ºï¼åœ¨è®¤çŸ¥ç§‘å­¦é¢†åŸŸï¼Œäººç±»çš„è®¤çŸ¥è¿‡ç¨‹å¯ä»¥çœ‹ä½œä¸€ç§ä¿¡æ¯å¤„ç†è¿‡ç¨‹</p></li></ol><blockquote><p>å…³äºäººå·¥æ™ºèƒ½çš„æµæ´¾å¹¶æ²¡æœ‰ä¸¥æ ¼çš„åˆ’åˆ†å®šä¹‰ï¼Œä¹Ÿä¸ä¸¥æ ¼å¯¹ç«‹ï¼æœ‰å¾ˆå¤šæ–‡çŒ®å°†äººå·¥æ™ºèƒ½æµæ´¾åˆ†ä¸ºç¬¦å·ä¸»ä¹‰ã€è¿æ¥ä¸»ä¹‰å’Œè¡Œä¸ºä¸»ä¹‰ä¸‰ ç§ï¼Œå…¶ä¸­è¡Œä¸ºä¸»ä¹‰ï¼ˆActionismï¼‰ä¸»è¦ä»ç”Ÿç‰©è¿›åŒ–çš„è§’åº¦è€ƒè™‘ï¼Œä¸»å¼ ä»å’Œå¤–ç•Œç¯å¢ƒçš„äº’åŠ¨ä¸­è·å–æ™ºèƒ½ï¼</p></blockquote><p><strong>ç¬¦å·ä¸»ä¹‰æ–¹æ³•çš„ä¸€ä¸ªä¼˜ç‚¹æ˜¯å¯è§£é‡Šæ€§ï¼Œè€Œè¿™ä¹Ÿæ­£æ˜¯è¿æ¥ä¸»ä¹‰æ–¹æ³•çš„å¼Šç«¯ï¼</strong></p><p>æ·±åº¦å­¦ä¹ çš„ä¸»è¦æ¨¡å‹ç¥ç»ç½‘ç»œå°±æ˜¯ä¸€ç§è¿æ¥ä¸»ä¹‰æ¨¡å‹ï¼</p><p>éšç€æ·±åº¦å­¦ä¹ çš„å‘å±•ï¼Œè¶Šæ¥è¶Šå¤šçš„ç ”ç©¶è€…å¼€å§‹å…³æ³¨å¦‚ä½•èåˆç¬¦å·ä¸»ä¹‰å’Œè¿æ¥ä¸»ä¹‰ï¼Œå»ºç«‹ä¸€ç§é«˜æ•ˆå¹¶ä¸”å…·æœ‰å¯è§£é‡Šæ€§çš„æ¨¡å‹.</p><h2 id="13-æœºå™¨å­¦ä¹ "><a class="markdownIt-Anchor" href="#13-æœºå™¨å­¦ä¹ "></a> 1.3 æœºå™¨å­¦ä¹ </h2><p>æœºå™¨å­¦ä¹  â‰ˆ æ„å»ºä¸€ä¸ªæ˜ å°„å‡½æ•°ï¼ˆè§„åˆ™ï¼‰</p><p>æœºå™¨å­¦ä¹ ï¼ˆMachine Learningï¼ŒMLï¼‰æ˜¯æŒ‡ä»æœ‰é™çš„è§‚æµ‹æ•°æ®ä¸­å­¦ä¹ ï¼ˆæˆ–â€œçŒœæµ‹â€ï¼‰å‡ºå…·æœ‰ä¸€èˆ¬æ€§çš„è§„å¾‹ï¼Œå¹¶åˆ©ç”¨è¿™äº›è§„å¾‹å¯¹æœªçŸ¥æ•°æ®è¿›è¡Œé¢„æµ‹çš„æ–¹æ³•ã€‚</p><p>ä¼ ç»Ÿçš„æœºå™¨å­¦ä¹ ä¸»è¦å…³æ³¨å¦‚ä½•å­¦ä¹ ä¸€ä¸ªé¢„æµ‹æ¨¡å‹ï¼ä¸€èˆ¬éœ€è¦é¦–å…ˆå°†æ•°æ®è¡¨ç¤ºä¸ºä¸€ç»„ç‰¹å¾ï¼ˆFeatureï¼‰ï¼Œç‰¹å¾çš„è¡¨ç¤ºå½¢å¼å¯ä»¥æ˜¯è¿ç»­çš„æ•°å€¼ã€ç¦»æ•£çš„ç¬¦å·æˆ–å…¶ä»–å½¢å¼ï¼ç„¶åå°†è¿™äº›ç‰¹å¾è¾“å…¥åˆ°é¢„æµ‹æ¨¡å‹ï¼Œå¹¶è¾“å‡ºé¢„æµ‹ç»“æœï¼è¿™ç±»æœºå™¨å­¦ä¹ å¯ä»¥çœ‹ä½œ<strong>æµ…å±‚å­¦ä¹ ï¼ˆShallow Learningï¼‰</strong>ï¼æµ…å±‚å­¦ä¹ çš„ä¸€ä¸ªé‡è¦ç‰¹ç‚¹æ˜¯ä¸æ¶‰åŠç‰¹å¾å­¦ä¹ ï¼Œå…¶ç‰¹å¾ä¸»è¦<strong>é äººå·¥ç»éªŒæˆ–ç‰¹å¾è½¬æ¢æ–¹æ³•æ¥æŠ½å–</strong>ï¼</p><ul><li><p>åœ¨å®é™…ä»»åŠ¡ä¸­ä½¿ç”¨æœºå™¨å­¦ä¹ æ¨¡å‹ä¸€èˆ¬ä¼šåŒ…å«ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š</p><img src="https://picbed.octalzhihao.top/img/20250326153418538.png" style="zoom:80%;" align="left"/></li></ul><div style="clear: both;"></div><p>ï¼ˆ1ï¼‰ <strong>æ•°æ®é¢„å¤„ç†</strong>ï¼šå¯¹æ•°æ®çš„åŸå§‹å½¢å¼è¿›è¡Œ<strong>åˆæ­¥çš„æ•°æ®æ¸…ç†</strong>ï¼ˆæ¯”å¦‚å»æ‰ä¸€äº›æœ‰ç¼ºå¤±ç‰¹å¾çš„æ ·æœ¬ï¼Œæˆ–å»æ‰ä¸€äº›å†—ä½™çš„æ•°æ®ç‰¹å¾ç­‰ï¼‰<strong>å’ŒåŠ å·¥</strong>ï¼ˆå¯¹æ•°å€¼ç‰¹å¾è¿›è¡Œç¼©æ”¾å’Œå½’ä¸€åŒ–ç­‰ï¼‰ï¼Œå¹¶<strong>æ„å»ºæˆå¯ç”¨äºè®­ç»ƒæœºå™¨å­¦ä¹ æ¨¡å‹çš„æ•°æ®é›†</strong>ï¼</p><p>ï¼ˆ2ï¼‰ <strong>ç‰¹å¾æå–</strong>ï¼šä»æ•°æ®çš„åŸå§‹ç‰¹å¾ä¸­<strong>æå–</strong>ä¸€äº›å¯¹ç‰¹å®šæœºå™¨å­¦ä¹ ä»»åŠ¡æœ‰ç”¨çš„<strong>é«˜è´¨é‡ç‰¹å¾</strong>ï¼æ¯”å¦‚åœ¨å›¾åƒåˆ†ç±»ä¸­æå–è¾¹ç¼˜ã€å°ºåº¦ä¸å˜ç‰¹å¾å˜æ¢ï¼ˆScale InvariantFeature Transformï¼ŒSIFTï¼‰ç‰¹å¾ï¼Œåœ¨æ–‡æœ¬åˆ†ç±»ä¸­å»é™¤åœç”¨è¯ç­‰ï¼</p><p>ï¼ˆ3ï¼‰ <strong>ç‰¹å¾è½¬æ¢</strong>ï¼šå¯¹ç‰¹å¾è¿›è¡Œè¿›ä¸€æ­¥çš„åŠ å·¥ï¼Œæ¯”å¦‚<strong>é™ç»´å’Œå‡ç»´</strong>ï¼ å¾ˆå¤šç‰¹å¾è½¬æ¢æ–¹æ³•ä¹Ÿéƒ½æ˜¯æœºå™¨å­¦ä¹ æ–¹æ³•ï¼<strong>é™ç»´åŒ…æ‹¬ç‰¹å¾æŠ½å–ï¼ˆFeature Extractionï¼‰å’Œç‰¹å¾é€‰æ‹©ï¼ˆFeature Selectionï¼‰ä¸¤ç§é€”å¾„</strong>ï¼å¸¸ç”¨çš„ç‰¹å¾è½¬æ¢æ–¹æ³•æœ‰<strong>ä¸»æˆåˆ†åˆ†æ</strong>ï¼ˆPrincipal Components Analysisï¼ŒPCAï¼‰ï¼Œ<strong>çº¿æ€§åˆ¤åˆ«åˆ†æ</strong>ï¼ˆLinear Discriminant Analysisï¼ŒLDAï¼‰ç­‰ï¼</p><p>ï¼ˆ4ï¼‰ <strong>é¢„æµ‹</strong>ï¼šæœºå™¨å­¦ä¹ çš„æ ¸å¿ƒéƒ¨åˆ†ï¼Œå­¦ä¹ ä¸€ä¸ªå‡½æ•°å¹¶è¿›è¡Œé¢„æµ‹.</p><blockquote><p>å¾ˆå¤šçš„æœºå™¨å­¦ä¹ é—®é¢˜å˜æˆäº†**ç‰¹å¾å·¥ç¨‹ï¼ˆFeature Engineeringï¼‰**é—®é¢˜ï¼å¼€å‘ä¸€ä¸ªæœºå™¨å­¦ä¹ ç³»ç»Ÿçš„ä¸»è¦å·¥ä½œé‡éƒ½æ¶ˆè€—åœ¨äº†é¢„å¤„ç†ã€ç‰¹å¾æå–ä»¥åŠç‰¹å¾è½¬æ¢ä¸Šï¼</p></blockquote><h2 id="14-è¡¨ç¤ºå­¦ä¹ "><a class="markdownIt-Anchor" href="#14-è¡¨ç¤ºå­¦ä¹ "></a> 1.4 è¡¨ç¤ºå­¦ä¹ </h2><p><strong>è¡¨ç¤ºå­¦ä¹ ï¼ˆRepresentation Learningï¼‰</strong>ï¼šå¯ä»¥è‡ªåŠ¨åœ°å­¦ä¹ å‡ºæœ‰æ•ˆçš„ç‰¹å¾ï¼Œå¹¶æé«˜æœ€ç»ˆæœºå™¨å­¦ä¹ æ¨¡å‹çš„æ€§èƒ½ã€‚è¡¨ç¤ºå­¦ä¹ çš„å…³é”®æ˜¯è§£å†³è¯­ä¹‰é¸¿æ²Ÿï¼ˆSemantic Gapï¼‰é—®é¢˜ã€‚</p><p><strong>è¯­ä¹‰é¸¿æ²Ÿ</strong>ï¼šè¾“å…¥æ•°æ®çš„åº•å±‚ç‰¹å¾å’Œé«˜å±‚è¯­ä¹‰ä¿¡æ¯ä¹‹é—´çš„ä¸ä¸€è‡´æ€§å’Œå·®å¼‚æ€§ã€‚</p><blockquote><p>å¦‚æœä¸€ä¸ªé¢„æµ‹æ¨¡å‹ç›´æ¥å»ºç«‹åœ¨åº•å±‚ç‰¹å¾ä¹‹ä¸Šï¼Œä¼šå¯¼è‡´å¯¹é¢„æµ‹æ¨¡å‹çš„èƒ½åŠ›è¦æ±‚è¿‡é«˜ï¼å¦‚æœå¯ä»¥æœ‰ä¸€ä¸ªå¥½çš„è¡¨ç¤ºåœ¨æŸç§ç¨‹åº¦ä¸Šèƒ½å¤Ÿåæ˜ å‡ºæ•°æ®çš„é«˜å±‚è¯­ä¹‰ç‰¹å¾ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±èƒ½ç›¸å¯¹å®¹æ˜“åœ°æ„å»ºåç»­çš„æœºå™¨å­¦ä¹ æ¨¡å‹.</p></blockquote><p>åœ¨æœºå™¨å­¦ä¹ ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä½¿ç”¨ä¸¤ç§æ–¹å¼æ¥è¡¨ç¤ºç‰¹å¾ï¼š<strong>å±€éƒ¨è¡¨ç¤º</strong>ï¼ˆLocal Representationï¼‰å’Œ<strong>åˆ†å¸ƒå¼è¡¨ç¤º</strong>ï¼ˆDistributed Representationï¼‰ï¼</p><blockquote><p>å±€éƒ¨è¡¨ç¤ºâ€“&gt;onehot</p><p>åˆ†å¸ƒå¼è¡¨ç¤ºâ€“&gt;åˆ†æ•£å¼è¡¨ç¤ºï¼Œä¸€ç§è¯­ä¹‰åˆ†æ•£åˆ°è¯­ä¹‰ç©ºé—´ä¸­çš„ä¸åŒåŸºå‘é‡ä¸Š</p></blockquote><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç¥ç»ç½‘ç»œæ¥å°†é«˜ç»´çš„å±€éƒ¨è¡¨ç¤ºç©ºé—´<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi mathvariant="normal">R</mi><mrow><mi mathvariant="normal">âˆ£</mi><mi>v</mi><mi mathvariant="normal">âˆ£</mi></mrow></msup></mrow><annotation encoding="application/x-tex">â„^{|v|}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8879999999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord amsrm">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8879999999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">âˆ£</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">v</span><span class="mord mtight">âˆ£</span></span></span></span></span></span></span></span></span></span></span></span> æ˜ å°„åˆ°ä¸€ä¸ªéå¸¸ä½ç»´çš„åˆ†å¸ƒå¼è¡¨ç¤ºç©ºé—´ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi mathvariant="normal">R</mi><mi>ğ·</mi></msup></mrow><annotation encoding="application/x-tex">â„^ğ·</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8413309999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord amsrm">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413309999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">D</span></span></span></span></span></span></span></span></span></span></span>, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ğ·</mi><mo>â‰ª</mo><mi mathvariant="normal">âˆ£</mi><mi>v</mi><mi mathvariant="normal">âˆ£</mi></mrow><annotation encoding="application/x-tex">ğ· â‰ª |v|</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72243em;vertical-align:-0.0391em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰ª</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">âˆ£</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mord">âˆ£</span></span></span></span>ã€‚</p><p>è¿™ä¸ªè¿‡ç¨‹ä¹Ÿç§°ä¸º<strong>åµŒå…¥ï¼ˆEmbeddingï¼‰</strong>ã€‚</p><p>è¦å­¦ä¹ åˆ°ä¸€ç§å¥½çš„é«˜å±‚è¯­ä¹‰è¡¨ç¤ºï¼ˆä¸€èˆ¬ä¸ºåˆ†å¸ƒå¼è¡¨ç¤ºï¼‰ï¼Œé€šå¸¸éœ€è¦ä»åº•å±‚ç‰¹å¾å¼€å§‹ï¼Œç»è¿‡å¤šæ­¥éçº¿æ€§è½¬æ¢æ‰èƒ½å¾—åˆ°ï¼æ·±å±‚ç»“æ„çš„ä¼˜ç‚¹æ˜¯å¯ä»¥å¢åŠ ç‰¹å¾çš„é‡ç”¨æ€§ï¼Œä»è€ŒæŒ‡æ•°çº§åœ°å¢åŠ è¡¨ç¤ºèƒ½åŠ›ï¼å› æ­¤ï¼Œè¡¨ç¤ºå­¦ä¹ çš„å…³é”®æ˜¯æ„å»ºå…·æœ‰ä¸€å®šæ·±åº¦çš„å¤šå±‚æ¬¡ç‰¹å¾è¡¨ç¤ºã€‚</p><h2 id="15-æ·±åº¦å­¦ä¹ "><a class="markdownIt-Anchor" href="#15-æ·±åº¦å­¦ä¹ "></a> 1.5 æ·±åº¦å­¦ä¹ </h2><img src="https://picbed.octalzhihao.top/img/20250326153418539.png" alt="image-20250228090533253" style="zoom:80%;" align="left"/><div style="clear: both;"></div>å›¾1.4ç»™å‡ºäº†æ·±åº¦å­¦ä¹ çš„æ•°æ®å¤„ç†æµç¨‹ï¼é€šè¿‡å¤šå±‚çš„ç‰¹å¾è½¬æ¢ï¼ŒæŠŠåŸå§‹æ•°æ®å˜æˆæ›´é«˜å±‚æ¬¡ã€æ›´æŠ½è±¡çš„è¡¨ç¤ºï¼è¿™äº›å­¦ä¹ åˆ°çš„è¡¨ç¤ºå¯ä»¥æ›¿ä»£äººå·¥è®¾è®¡çš„ç‰¹å¾ï¼Œä»è€Œé¿å…â€œç‰¹å¾å·¥ç¨‹â€ï¼<p><strong>æ·±åº¦å­¦ä¹ </strong>æ˜¯å°†åŸå§‹çš„æ•°æ®ç‰¹å¾é€šè¿‡å¤šæ­¥çš„ç‰¹å¾è½¬æ¢å¾—åˆ°ä¸€ç§ç‰¹å¾è¡¨ç¤ºï¼Œå¹¶è¿›ä¸€æ­¥è¾“å…¥åˆ°é¢„æµ‹å‡½æ•°å¾—åˆ°æœ€ç»ˆç»“æœï¼å’Œâ€œæµ…å±‚å­¦ä¹ â€ä¸åŒï¼Œæ·±åº¦å­¦ä¹ éœ€è¦è§£å†³çš„å…³é”®é—®é¢˜æ˜¯<strong>è´¡çŒ®åº¦åˆ†é…é—®é¢˜</strong>ï¼ˆCredit Assignment Problemï¼ŒCAPï¼‰,å³ä¸€ä¸ªç³»ç»Ÿä¸­ä¸åŒçš„<strong>ç»„ä»¶</strong>ï¼ˆcomponentï¼‰æˆ–å…¶å‚æ•°å¯¹æœ€ç»ˆç³»ç»Ÿè¾“å‡ºç»“æœçš„è´¡çŒ®æˆ–å½±å“.</p><blockquote><p>ä»¥ä¸‹å›´æ£‹ä¸ºä¾‹ï¼Œæ¯å½“ä¸‹å®Œä¸€ç›˜æ£‹ï¼Œæœ€åçš„ç»“æœè¦ä¹ˆèµ¢è¦ä¹ˆè¾“ï¼æˆ‘ä»¬ä¼šæ€è€ƒå“ªå‡ æ­¥æ£‹å¯¼è‡´äº†æœ€åçš„èƒœåˆ©ï¼Œæˆ–è€…åˆæ˜¯å“ªå‡ æ­¥æ£‹å¯¼è‡´äº†æœ€åçš„è´¥å±€ï¼å¦‚ä½•åˆ¤æ–­æ¯ä¸€æ­¥æ£‹çš„è´¡çŒ®å°±æ˜¯è´¡çŒ®åº¦åˆ†é…é—®é¢˜.</p></blockquote><ul><li>ä»æŸç§æ„ä¹‰ä¸Šè®²ï¼Œæ·±åº¦å­¦ä¹ å¯ä»¥çœ‹ä½œä¸€ç§å¼ºåŒ–å­¦ä¹ ï¼ˆReinforcement Learningï¼ŒRLï¼‰.</li></ul><h3 id="è´¡çŒ®åº¦åˆ†é…"><a class="markdownIt-Anchor" href="#è´¡çŒ®åº¦åˆ†é…"></a> è´¡çŒ®åº¦åˆ†é…</h3><p>è´¡çŒ®åº¦åˆ†é…é—®é¢˜ï¼ˆCredit Assignment Problemï¼‰æ˜¯æ·±åº¦å­¦ä¹ ä¸­ä¸€ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼Œå…¶æ ¸å¿ƒåœ¨äº<strong>ç¡®å®šç¥ç»ç½‘ç»œä¸­ä¸åŒå±‚ã€ä¸åŒå‚æ•°å¯¹æœ€ç»ˆè¾“å‡ºè¯¯å·®çš„å…·ä½“å½±å“ç¨‹åº¦</strong>ã€‚</p><p>ç›®å‰ï¼Œæ·±åº¦å­¦ä¹ é‡‡ç”¨çš„æ¨¡å‹ä¸»è¦æ˜¯ç¥ç»ç½‘ç»œæ¨¡å‹ï¼Œå…¶ä¸»è¦åŸå› æ˜¯ç¥ç»ç½‘ç»œæ¨¡å‹å¯ä»¥<strong>ä½¿ç”¨è¯¯å·®åå‘ä¼ æ’­ç®—æ³•</strong>ï¼Œä»è€Œå¯ä»¥æ¯”è¾ƒå¥½åœ°<strong>è§£å†³è´¡çŒ®åº¦åˆ†é…é—®é¢˜</strong>. åªè¦æ˜¯è¶…è¿‡ä¸€å±‚çš„ç¥ç»ç½‘ç»œéƒ½ä¼šå­˜åœ¨è´¡çŒ®åº¦åˆ†é…é—®é¢˜ã€‚</p><blockquote><p>ä¸ºä½•â€œè¶…è¿‡ä¸€å±‚çš„ç¥ç»ç½‘ç»œå­˜åœ¨è´¡çŒ®åº¦åˆ†é…é—®é¢˜â€ï¼Œè€Œå•å±‚ç½‘ç»œä¸å­˜åœ¨?</p><ul><li>å•å±‚ç½‘ç»œå› ç»“æ„ç®€å•ã€æ— ä¸­é—´å‚æ•°ä¾èµ–ï¼Œè¯¯å·®å¯ç›´æ¥æ˜ å°„åˆ°æƒé‡ï¼Œæ•…æ— è´¡çŒ®åº¦åˆ†é…é—®é¢˜ï¼›è€Œå¤šå±‚ç½‘ç»œé€šè¿‡åå‘ä¼ æ’­çš„é“¾å¼æ³•åˆ™æ›´æ–°å‚æ•°æ—¶ï¼Œæ¢¯åº¦éœ€è·¨è¶Šå¤šä¸ªéçº¿æ€§å˜æ¢å±‚ä¼ é€’ï¼Œå¯¼è‡´å„å±‚å‚æ•°çš„è´¡çŒ®åº¦éœ€è¦é€šè¿‡åŠ¨æ€è®¡ç®—åˆ†é…ï¼Œä¸”æ˜“å—æ¢¯åº¦ä¸ç¨³å®šæ€§çš„å¹²æ‰°ã€‚è¿™ä¸€é—®é¢˜çš„å­˜åœ¨ï¼Œæ—¢æ˜¯æ·±åº¦æ¨¡å‹å¼ºå¤§è¡¨ç¤ºèƒ½åŠ›çš„ä»£ä»·ï¼Œä¹Ÿæ˜¯æ¨åŠ¨ç®—æ³•æ”¹è¿›çš„æ ¸å¿ƒåŠ¨åŠ›ã€‚</li></ul></blockquote><h3 id="ç«¯åˆ°ç«¯å­¦ä¹ "><a class="markdownIt-Anchor" href="#ç«¯åˆ°ç«¯å­¦ä¹ "></a> ç«¯åˆ°ç«¯å­¦ä¹ </h3><p><strong>ç«¯åˆ°ç«¯å­¦ä¹ ï¼ˆEnd-to-End Learningï¼‰</strong>ï¼Œä¹Ÿç§°ç«¯åˆ°ç«¯è®­ç»ƒï¼Œæ˜¯æŒ‡åœ¨å­¦ä¹ è¿‡ç¨‹ä¸­ä¸è¿›è¡Œåˆ†æ¨¡å—æˆ–åˆ†é˜¶æ®µè®­ç»ƒï¼Œç›´æ¥ä¼˜åŒ–ä»»åŠ¡çš„æ€»ä½“ç›®æ ‡ï¼åœ¨ç«¯åˆ°ç«¯å­¦ä¹ ä¸­ï¼Œä¸€èˆ¬ä¸éœ€è¦æ˜ç¡®åœ°ç»™å‡ºä¸åŒæ¨¡å—æˆ–é˜¶æ®µçš„åŠŸèƒ½ï¼Œä¸­é—´è¿‡ç¨‹ä¸éœ€è¦äººä¸ºå¹²é¢„ï¼</p><p>ç«¯åˆ°ç«¯å­¦ä¹ çš„è®­ç»ƒæ•°æ®ä¸ºâ€œè¾“å…¥-è¾“å‡ºâ€å¯¹çš„å½¢å¼ï¼Œæ— é¡»æä¾›å…¶ä»–é¢å¤–ä¿¡æ¯</p><blockquote><p>å› æ­¤ï¼Œç«¯åˆ°ç«¯å­¦ä¹ å’Œæ·±åº¦å­¦ä¹ ä¸€æ ·ï¼Œéƒ½æ˜¯è¦è§£å†³è´¡çŒ®åº¦åˆ†é…é—®é¢˜ï¼ç›®å‰ï¼Œå¤§éƒ¨åˆ†é‡‡ç”¨ç¥ç»ç½‘ç»œæ¨¡å‹çš„æ·±åº¦å­¦ä¹ ä¹Ÿå¯ä»¥çœ‹ä½œä¸€ç§ç«¯åˆ°ç«¯çš„å­¦ä¹ ï¼</p></blockquote><h2 id="16-ç¥ç»ç½‘ç»œ"><a class="markdownIt-Anchor" href="#16-ç¥ç»ç½‘ç»œ"></a> 1.6 ç¥ç»ç½‘ç»œ</h2><blockquote><p>ç¥ç»ç½‘ç»œå¤©ç„¶ä¸æ˜¯æ·±åº¦å­¦ä¹ ï¼Œä½†æ·±åº¦å­¦ä¹ å¤©ç„¶æ˜¯ç¥ç»ç½‘ç»œã€‚</p></blockquote><h3 id="äººå·¥ç¥ç»ç½‘ç»œ"><a class="markdownIt-Anchor" href="#äººå·¥ç¥ç»ç½‘ç»œ"></a> äººå·¥ç¥ç»ç½‘ç»œ</h3><p>äººå·¥ç¥ç»ç½‘ç»œä¸»è¦ç”±å¤§é‡çš„ç¥ç»å…ƒä»¥åŠå®ƒä»¬ä¹‹é—´çš„æœ‰å‘è¿æ¥æ„æˆã€‚æ­å»ºä¸€ä¸ªç¥ç»ç½‘ç»œéœ€è¦è€ƒè™‘ä¸‰æ–¹é¢å› ç´ ï¼š</p><ul><li><strong>ç¥ç»å…ƒçš„æ¿€æ´»è§„åˆ™</strong></li></ul><p>â€‹ä¸»è¦æ˜¯æŒ‡ç¥ç»å…ƒè¾“å…¥åˆ°è¾“å‡ºä¹‹é—´çš„æ˜ å°„å…³ç³»ï¼Œä¸€èˆ¬ä¸ºéçº¿æ€§å‡½æ•°ã€‚</p><ul><li><strong>ç½‘ç»œçš„æ‹“æ‰‘ç»“æ„</strong></li></ul><p>â€‹ä¸åŒç¥ç»å…ƒä¹‹é—´çš„è¿æ¥å…³ç³»ã€‚</p><ul><li><p><strong>å­¦ä¹ ç®—æ³•</strong></p><p>é€šè¿‡è®­ç»ƒæ•°æ®æ¥å­¦ä¹ ç¥ç»ç½‘ç»œå‚æ•°ã€‚</p></li></ul><p><strong>ç›®å‰çš„ç¥ç»ç½‘ç»œå¯ä»¥åˆ†ä¸ºä¸‰ç§ç±»å‹ï¼š</strong></p><img src="https://picbed.octalzhihao.top/img/20250326153259468.png" alt="image-20250310140246489" style="zoom:50%;" align="left"/><div style="clear: both;"></div><h3 id="ç¥ç»ç½‘ç»œçš„å‘å±•å†å²"><a class="markdownIt-Anchor" href="#ç¥ç»ç½‘ç»œçš„å‘å±•å†å²"></a> <strong>ç¥ç»ç½‘ç»œçš„å‘å±•å†å²</strong></h3><p><strong>ç¬¬ä¸€é˜¶æ®µï¼šæ¨¡å‹æå‡º</strong></p><p>ç¬¬ä¸€é˜¶æ®µä¸º1943å¹´~1969å¹´ï¼Œæ˜¯ç¥ç»ç½‘ç»œå‘å±•çš„ç¬¬ä¸€ä¸ªé«˜æ½®æœŸã€‚åœ¨æ­¤æœŸé—´ï¼Œç§‘å­¦å®¶ä»¬æå‡ºäº†è®¸å¤šç¥ç»å…ƒæ¨¡å‹å’Œå­¦ä¹ è§„åˆ™ã€‚</p><p>æå‡ºæ¦‚å¿µï¼šMP æ¨¡å‹ã€Hebbian æ³•åˆ™ã€æ„ŸçŸ¥æœºã€‚</p><p><strong>ç¬¬äºŒé˜¶æ®µï¼šå†°æ²³æœŸ</strong></p><p>ç¬¬äºŒé˜¶æ®µä¸º1969å¹´~1983å¹´ï¼Œæ˜¯ç¥ç»ç½‘ç»œå‘å±•çš„ç¬¬ä¸€ä¸ªä½è°·æœŸã€‚åœ¨æ­¤æœŸé—´ï¼Œç¥ç»ç½‘ç»œçš„ç ”ç©¶å¤„äºé•¿å¹´åœæ»åŠä½æ½®çŠ¶æ€ã€‚<br />åå‘ä¼ æ’­ç®—æ³•è¢«æå‡ºï¼Œä½†æœªè¢«é‡è§†ã€‚<br />1980å¹´ï¼Œæ–°çŸ¥æœºè¢«æå‡ºï¼Œå¸¦å·ç§¯å’Œå­é‡‡æ ·çš„å¤šå±‚ç¥ç»ç½‘ç»œä½†æ²¡æœ‰åå‘ä¼ æ’­ã€‚</p><p><strong>ç¬¬ä¸‰é˜¶æ®µï¼šåå‘ä¼ æ’­ç®—æ³•å¼•èµ·çš„å¤å…´</strong></p><p>ç¬¬ä¸‰é˜¶æ®µä¸º1983å¹´~1995å¹´ï¼Œæ˜¯ç¥ç»ç½‘ç»œå‘å±•çš„ç¬¬äºŒä¸ªé«˜æ½®æœŸ.è¿™ä¸ªæ—¶æœŸä¸­ï¼Œåå‘ä¼ æ’­ç®—æ³•é‡æ–°æ¿€å‘äº†äººä»¬å¯¹ç¥ç»ç½‘ç»œçš„å…´è¶£.</p><p>ç”¨äºè”æƒ³è®°å¿†ï¼ˆAssociative Memoryï¼‰çš„ç¥ç»ç½‘ç»œï¼Œç§°ä¸º<strong>Hopfieldç½‘ç»œ</strong>ã€‚<br /><strong>ç»å°”å…¹æ›¼æœº</strong>ï¼šå°±æ˜¯ä¸€ç§éšæœºåŒ–ç‰ˆæœ¬çš„Hopfieldç½‘ç»œã€‚</p><p>çœŸæ­£å¼•èµ·ç¥ç»ç½‘ç»œç¬¬äºŒæ¬¡ç ”ç©¶é«˜æ½®çš„æ˜¯åå‘ä¼ æ’­ç®—æ³•ã€‚</p><p>ä¹æ˜†é¦–æ¬¡å°†åå‘ä¼ æ’­ç®—æ³•å¼•å…¥äº†å·ç§¯ç¥ç»ç½‘ç»œï¼Œå¹¶åœ¨æ‰‹å†™ä½“æ•°å­—è¯†åˆ«ä»»åŠ¡ä¸Šå–å¾—äº†å·¨å¤§æˆæœã€‚ç„¶è€Œ<strong>æ¢¯åº¦æ¶ˆå¤±é—®é¢˜</strong>ï¼Œæˆä¸ºäº†ç¥ç»ç½‘ç»œè¿›ä¸€æ­¥å‘å±•çš„é˜»ç¢ã€‚</p><p><strong>ç¬¬å››é˜¶æ®µ</strong>ï¼š<strong>æµè¡Œåº¦é™ä½</strong>ï¼ˆç»Ÿè®¡æœºå™¨å­¦ä¹ æ–¹æ³•ä¸ºä¸»æµï¼‰</p><p>ç¬¬å››é˜¶æ®µä¸º 1995 å¹´ï½2006 å¹´ï¼Œåœ¨æ­¤æœŸé—´ï¼Œæ”¯æŒå‘é‡æœºå’Œå…¶ä»–æ›´ç®€å•çš„æ–¹æ³•ï¼ˆä¾‹å¦‚çº¿æ€§åˆ†ç±»å™¨ï¼‰åœ¨æœºå™¨å­¦ä¹ é¢†åŸŸçš„æµè¡Œåº¦é€æ¸è¶…è¿‡äº†ç¥ç»ç½‘ç»œã€‚</p><p><strong>ç¬¬äº”é˜¶æ®µ</strong>ï¼š<strong>æ·±åº¦å­¦ä¹ çš„å´›èµ·</strong></p><p>ç¬¬äº”é˜¶æ®µä¸ºä» 2006 å¹´å¼€å§‹è‡³ä»Šï¼Œåœ¨è¿™ä¸€æ—¶æœŸç ”ç©¶è€…é€æ¸æŒæ¡äº†è®­ç»ƒæ·±å±‚ç¥ç»ç½‘ç»œçš„æ–¹æ³•ï¼Œä½¿å¾—ç¥ç»ç½‘ç»œé‡æ–°å´›èµ·ã€‚</p><p>Hintonå¼€å¯çš„æ—¶ä»£ï¼š</p><img src="https://picbed.octalzhihao.top/img/20250326153418540.png" alt="image-20250326152627300" style="zoom:80%;" align=left /><div style="clear: both;"></div><p>å®Œ</p>]]></content>
      
      
      <categories>
          
          <category> æ·±åº¦å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
            <tag> ç¥ç»ç½‘ç»œ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Windowsä¸­PDF, TXT, Excel, Word, PPTç­‰æ–‡ä»¶åœ¨é¢„è§ˆçª—å£æ— æ³•é¢„è§ˆçš„è§£å†³åŠæ³•(å…¨)</title>
      <link href="/posts/16752.html"/>
      <url>/posts/16752.html</url>
      
        <content type="html"><![CDATA[<p>ç³»ç»Ÿç¯å¢ƒï¼šWindows11</p><p>ğŸ¤ å‚è€ƒæ–‡ç« ï¼š<a href="https://blog.csdn.net/qq_58094000/article/details/144906747">https://blog.csdn.net/qq_58094000/article/details/144906747</a></p><p>âš ï¸<strong>æ³¨æ„ï¼šä»¥ä¸Šæ–¹æ³•å‡ä¼šå¯¹æ³¨å†Œè¡¨è¿›è¡Œä¿®æ”¹ï¼Œä¸€å®šè¦å…ˆå¤‡ä»½æ•´ä¸ªæ³¨å†Œè¡¨ï¼Œä»¥é˜²ä¸‡ä¸€ï¼Œé¿å…å¯¼è‡´ç³»ç»Ÿé”™è¯¯</strong>â—</p><h2 id="æƒ…å†µä¸€æ˜¾ç¤ºæ²¡æœ‰é¢„è§ˆ"><a class="markdownIt-Anchor" href="#æƒ…å†µä¸€æ˜¾ç¤ºæ²¡æœ‰é¢„è§ˆ"></a> æƒ…å†µä¸€ï¼šæ˜¾ç¤ºæ²¡æœ‰é¢„è§ˆ</h2><ol><li>æ‰“å¼€æ–‡ä»¶èµ„æºç®¡ç†å™¨-æ–‡ä»¶-æŸ¥çœ‹-é¢„è§ˆçª—æ ¼</li></ol><p><img src="https://picbed.octalzhihao.top/img/202503012331221.png" alt="alt text" /></p><ol start="2"><li>åœ¨æ–‡ä»¶èµ„æºç®¡ç†å™¨çš„å³è¾¹å°±ä¼šæ˜¾ç¤ºé¢„è§ˆçª—æ ¼ï¼Œæ­¤æ—¶å‘ç°Word ã€Excelã€ PPTç­‰Officeæ–‡ä»¶æ˜¯æ— æ³•æ­£å¸¸é¢„è§ˆçš„ï¼Œæ˜¾ç¤ºæ²¡æœ‰é¢„è§ˆã€‚</li></ol><p><img src="https://picbed.octalzhihao.top/img/202503012331222.png" alt="alt text" /></p><h3 id="æ–¹æ³•æ‰‹åŠ¨ä¿®æ”¹æ³¨å†Œè¡¨"><a class="markdownIt-Anchor" href="#æ–¹æ³•æ‰‹åŠ¨ä¿®æ”¹æ³¨å†Œè¡¨"></a> æ–¹æ³•ï¼šæ‰‹åŠ¨ä¿®æ”¹æ³¨å†Œè¡¨</h3><p>1.å‡†å¤‡å·¥ä½œï¼šå…ˆå°†æ‰€æœ‰Officeç›¸å…³çš„æ–‡ä»¶ç±»å‹é»˜è®¤åº”ç”¨æ”¹ä¸ºOfficeï¼ˆä¹‹å‰å¯èƒ½è¢«wpsæ”¹ä¸ºäº†ä½¿ç”¨wpsæ‰“å¼€ï¼‰ï¼Œæ‰“å¼€è®¾ç½®-åº”ç”¨-é»˜è®¤åº”ç”¨-æŒ‰æ–‡ä»¶ç±»å‹æŒ‡å®šé»˜è®¤åº”ç”¨ã€‚è‹¥é¢„è§ˆè¿˜æ˜¯ä¸èƒ½æ­£å¸¸æ˜¾ç¤ºï¼Œç›´æ¥è¿›è¡Œæ­¥éª¤2.</p><p>2.ä¿®æ”¹ä¸Officeæ–‡ä»¶é¢„è§ˆç›¸å…³çš„æ³¨å†Œè¡¨ 2ä¸ªé¡¹ç›®çš„å€¼ï¼ŒOfficeæ–‡ä»¶ä¿®æ”¹æ³¨å†Œè¡¨çš„æ–¹å¼å·®ä¸å¤šï¼Œæˆ‘ä»¬å°±ä»¥Wordæ–‡ä»¶Docxä¸ºä¾‹ã€‚</p><p><strong>(1) ä½¿ç”¨å¿«æ·é”® Windows +R è¿è¡Œï¼Œç„¶åè¾“å…¥ â€œregeditâ€ å‘½ä»¤ï¼Œæ‰“å¼€æ³¨å†Œè¡¨ç¼–è¾‘å™¨</strong></p><p><strong>(2) æ‰¾åˆ°è¿™ä¸€é¡¹ï¼š</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">è®¡ç®—æœº\HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\PreviewHandlers</span><br></pre></td></tr></table></figure><p><img src="https://picbed.octalzhihao.top/img/202503012331223.png" alt="alt text" /></p><p>ï¼ˆ3ï¼‰æ‰¾åˆ°Microsoft Word previewer è¿™ä¸ªå€¼ å¯¹åº”çš„åç§° ï¼ŒæŠŠè¿™ä¸ªåç§°å¤åˆ¶ï¼Œä½œè€…çš„å€¼æ˜¯ï¼š<code>&#123;84F66100-FF7C-4fb4-B0C0-02CD7FB668FE&#125;</code></p><p><font color="red">æ³¨æ„ä¸€ï¼šè‹¥ä½ çš„è·¯å¾„åŠæ•°å€¼åç§°å’Œæ•°å€¼æ•°æ®æ˜¯æ­£ç¡®çš„â€”â€”å¯ç›´æ¥å¤åˆ¶{84F66100-FF7C-4fb4-B0C0-02CD7FB668FE}ï¼Œä¸ç”¨è¿›è¡Œä¸‹é¢çš„æ“ä½œã€‚</p><p>æ³¨æ„äºŒï¼šè‹¥ä½ çš„æ³¨å†Œè¡¨çš„wordæ–‡ä»¶ç±»å‹è¢«é”™è¯¯åœ°è®¾ç½®ä¸ºâ€œå¯æ‰©å……å­—ç¬¦ä¸²ï¼ˆREG_EXPAND_SZâ€ï¼Œéœ€è¦å…ˆåˆ é™¤ {84F66100-FF7C-4fb4-B0C0-02CD7FB668FE} è¿™ä¸€é¡¹ï¼Œå†é‡æ–°åˆ›å»º {84F66100-FF7C-4fb4-B0C0-02CD7FB668FE} ï¼Œç±»å‹è®¾ç½®ä¸º&quot;å­—ç¬¦ä¸²REG_SZ&quot;ï¼›ä¿®æ”¹å…¶å€¼ä¸º ä¿®æ”¹å…¶å€¼ä¸º Microsoft Word previewer</p><p>æ³¨æ„ä¸‰ï¼šè‹¥ä½ çš„æ³¨å†Œè¡¨ä¸­æ²¡æœ‰æ‰¾åˆ°è¿™ä¸ªé¡¹ç›®ï¼Œåˆ™æŒ‰ç…§ä¸Šé¢çš„æ–¹æ³•æ‰‹å·¥åˆ›å»ºï¼Œå¦å¤–&quot;Microsoft Word Previewer&quot;æˆ–è€…&quot;Microsoft Word é¢„è§ˆå™¨&quot; æœ€å¥½ä½¿ç”¨å‰é¢çš„å…¨è‹±æ–‡å€¼ï¼Œ â€œMicrosoft Excel Previewer&quot;æˆ–è€…&quot;Microsoft Excel é¢„è§ˆå™¨â€ ä¹Ÿæ˜¯å¦‚æ­¤ã€‚<br /></font><br /><img src="https://picbed.octalzhihao.top/img/202503012331224.png" alt="alt text" /></p><p>ï¼ˆ4ï¼‰åœ¨æ³¨å†Œè¡¨ä¸­æ‰¾åˆ°è¿™ä¸€é¡¹ ShellExï¼Œå…·ä½“è·¯å¾„ä¸º<code>HKEY_CLASSES_ROOT\.docx\ShellEx\&#123;8895b1c6-b41f-4c1c-a562-0d564250836f&#125;</code>ï¼Œå°†æ­¤å¤„çš„æ•°å€¼æ•°æ®æ”¹ä¸ºä¸Šè¿°æ­¥éª¤ï¼ˆ3ï¼‰é‡Œé¢å¤åˆ¶çš„å€¼<code>&#123;84F66100-FF7C-4fb4-B0C0-02CD7FB668FE&#125;</code>ï¼Œç‚¹å‡»ç¡®å®šå³å¯ã€‚</p><p><img src="https://picbed.octalzhihao.top/img/202503012331225.png" alt="alt text" /></p><p>ï¼ˆ5ï¼‰æ‰“å¼€æ–‡ä»¶èµ„æºç®¡ç†å™¨ï¼Œå†æ‰“å¼€é¢„è§ˆçª—æ ¼ï¼Œæ–‡ä»¶é¢„è§ˆå°±æ­£å¸¸äº†ã€‚</p><p><img src="https://picbed.octalzhihao.top/img/202503012331226.png" alt="alt text" /></p><p><strong>3.Excel ã€PPTã€ OUTLOOKç­‰å…¶å®ƒOfficeä¹Ÿæ˜¯æŒ‰ç…§ä¸Šè¿°æ–¹æ³•æ“ä½œçš„ï¼Œä»¥ä¸‹æ˜¯æŒ‰ç…§ä¸Šè¿°æ–¹æ³•æ“ä½œåçš„ç»“æœï¼š</strong></p><p><img src="https://picbed.octalzhihao.top/img/202503012331227.png" alt="alt text" /></p><h3 id="å¸¸ç”¨çš„ç›¸å…³çš„æ³¨å†Œé¡¹åç§°å¦‚ä¸‹"><a class="markdownIt-Anchor" href="#å¸¸ç”¨çš„ç›¸å…³çš„æ³¨å†Œé¡¹åç§°å¦‚ä¸‹"></a> å¸¸ç”¨çš„ç›¸å…³çš„æ³¨å†Œé¡¹åç§°å¦‚ä¸‹ï¼š</h3><table><thead><tr><th>æ•°å€¼åç§°</th><th>æ•°å€¼æ•°æ®</th></tr></thead><tbody><tr><td>{00020827-0000-0000-C000-000000000046}</td><td>Microsoft Excel previewer</td></tr><tr><td>{1531d583-8375-4d3f-b5fb-d23bbd169f22}</td><td>Windows TXT Previewer</td></tr><tr><td>{21E17C2F-AD3A-4b89-841F-09CFE02D16B7}</td><td>Microsoft Visio previewer</td></tr><tr><td>{3A84F9C2-6164-485C-A7D9-4B27F8AC009E}</td><td>Microsoft PDF Previewer</td></tr><tr><td>{65235197-874B-4A07-BDC5-E65EA825B718}</td><td>Microsoft PowerPoint previewer</td></tr><tr><td>{84F66100-FF7C-4fb4-B0C0-02CD7FB668FE}</td><td>Microsoft Word previewer</td></tr><tr><td>{DC6EFB56-9CFA-464D-8880-44885D7DC193}</td><td>Adobe PDF Preview Handler for Vista</td></tr></tbody></table><h2 id="æƒ…å†µäºŒç”±äºmicrosoft-wordé¢„è§ˆå™¨ä¸­å‡ºç°é”™è¯¯æ— æ³•é¢„è§ˆæ­¤æ–‡ä»¶"><a class="markdownIt-Anchor" href="#æƒ…å†µäºŒç”±äºmicrosoft-wordé¢„è§ˆå™¨ä¸­å‡ºç°é”™è¯¯æ— æ³•é¢„è§ˆæ­¤æ–‡ä»¶"></a> æƒ…å†µäºŒï¼šç”±äºMicrosoft Wordé¢„è§ˆå™¨ä¸­å‡ºç°é”™è¯¯ï¼Œæ— æ³•é¢„è§ˆæ­¤æ–‡ä»¶ã€‚</h2><p>å…·ä½“å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://picbed.octalzhihao.top/img/202503012331228.png" alt="alt text" /></p><p>äº§ç”ŸåŸå› æ˜¯ç”±äºè¯¥æ–‡ä»¶æ˜¯ä»äº’è”ç½‘ä¸Šè·å–çš„ï¼ŒWindowsè‡ªåŠ¨å¼€å¯äº†ä¿æŠ¤è§†å›¾ï¼Œå¯¼è‡´æ— æ³•é¢„è§ˆã€‚</p><p>ä¸æ­¤åŒæ—¶ï¼Œæ‰“å¼€è¿™ç§æ–‡ä»¶ä¹Ÿä¸€èˆ¬ä¼šå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://picbed.octalzhihao.top/img/202503012331229.png" alt="alt text" /></p><p>è¿™æ ·åªè¦**â€œå¯ç”¨ç¼–è¾‘â€åä¿å­˜**ï¼Œå°±ä¸å†æ˜¯å—ä¿æŠ¤è§†å›¾äº†ã€‚</p><p>ç„¶åå°±å¯ä»¥æ­£å¸¸åœ¨é¢„è§ˆçª—å£é¢„è§ˆäº†ã€‚</p><p>é™¤æ­¤ä¹‹å¤–ï¼Œä¹Ÿå¯ä»¥å³é”®-å±æ€§ï¼Œå‹¾é€‰<code>è§£é™¤é”å®š</code>ï¼Œåº”ç”¨ã€‚ç”¨æ­¤æ–¹æ³•ä¹Ÿå¯ä»¥è§£é™¤å—ä¿æŠ¤è§†å›¾ã€‚</p><p><img src="https://picbed.octalzhihao.top/img/202503012331230.png" alt="alt text" /></p>]]></content>
      
      
      <categories>
          
          <category> æ‚è°ˆ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Windowsç³»ç»Ÿé—®é¢˜ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€æ‰‹å†Œã€‘NLPè¯æ€§æ ‡æ³¨å¯¹ç…§è¡¨</title>
      <link href="/posts/55593.html"/>
      <url>/posts/55593.html</url>
      
        <content type="html"><![CDATA[<h2 id="jiebaè¯æ€§å¯¹ç…§è¡¨åŒ—å¤§è¯æ€§æ ‡æ³¨é›†"><a class="markdownIt-Anchor" href="#jiebaè¯æ€§å¯¹ç…§è¡¨åŒ—å¤§è¯æ€§æ ‡æ³¨é›†"></a> jiebaè¯æ€§å¯¹ç…§è¡¨ï¼ˆåŒ—å¤§è¯æ€§æ ‡æ³¨é›†ï¼‰</h2><table><thead><tr><th style="text-align:center">æ ‡ç­¾</th><th style="text-align:center">å«ä¹‰</th><th style="text-align:center">æ ‡ç­¾</th><th style="text-align:center">å«ä¹‰</th><th style="text-align:center">æ ‡ç­¾</th><th style="text-align:center">å«ä¹‰</th><th style="text-align:center">æ ‡ç­¾</th><th style="text-align:center">å«ä¹‰</th></tr></thead><tbody><tr><td style="text-align:center">a</td><td style="text-align:center">å½¢å®¹è¯</td><td style="text-align:center">ad</td><td style="text-align:center">å‰¯å½¢è¯</td><td style="text-align:center">ag</td><td style="text-align:center">å½¢å®¹è¯æ€§è¯­ç´ </td><td style="text-align:center">an</td><td style="text-align:center">åå½¢è¯</td></tr><tr><td style="text-align:center">b</td><td style="text-align:center">åŒºåˆ«è¯</td><td style="text-align:center">c</td><td style="text-align:center">è¿è¯</td><td style="text-align:center">d</td><td style="text-align:center">å‰¯è¯</td><td style="text-align:center">df</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">e</td><td style="text-align:center">å¹è¯</td><td style="text-align:center">f</td><td style="text-align:center">æ–¹ä½è¯</td><td style="text-align:center">g</td><td style="text-align:center">è¯­ç´ </td><td style="text-align:center">h</td><td style="text-align:center">å‰æ¥æˆåˆ†</td></tr><tr><td style="text-align:center">i</td><td style="text-align:center">æˆè¯­</td><td style="text-align:center">j</td><td style="text-align:center">ç®€ç§°ç•¥ç§°</td><td style="text-align:center">k</td><td style="text-align:center">åæ¥æˆåˆ†</td><td style="text-align:center">l</td><td style="text-align:center">ä¹ ç”¨è¯­</td></tr><tr><td style="text-align:center">m</td><td style="text-align:center">æ•°è¯</td><td style="text-align:center">mg</td><td style="text-align:center"></td><td style="text-align:center">mq</td><td style="text-align:center">æ•°é‡è¯</td><td style="text-align:center">n</td><td style="text-align:center">åè¯</td></tr><tr><td style="text-align:center">ng</td><td style="text-align:center">åè¯æ€§è¯­ç´ </td><td style="text-align:center">nr</td><td style="text-align:center">äººå</td><td style="text-align:center">nrfg</td><td style="text-align:center"></td><td style="text-align:center">nrt</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">ns</td><td style="text-align:center">åœ°å</td><td style="text-align:center">nt</td><td style="text-align:center">æœºæ„å›¢ä½“å</td><td style="text-align:center">nz</td><td style="text-align:center">å…¶ä»–ä¸“å</td><td style="text-align:center">o</td><td style="text-align:center">æ‹Ÿå£°è¯</td></tr><tr><td style="text-align:center">p</td><td style="text-align:center">ä»‹è¯</td><td style="text-align:center">q</td><td style="text-align:center">é‡è¯</td><td style="text-align:center">r</td><td style="text-align:center">ä»£è¯</td><td style="text-align:center">rg</td><td style="text-align:center">ä»£è¯æ€§è¯­ç´ </td></tr><tr><td style="text-align:center">rr</td><td style="text-align:center">äººç§°ä»£è¯</td><td style="text-align:center">rz</td><td style="text-align:center">æŒ‡ç¤ºä»£è¯</td><td style="text-align:center">s</td><td style="text-align:center">å¤„æ‰€è¯</td><td style="text-align:center">t</td><td style="text-align:center">æ—¶é—´è¯</td></tr><tr><td style="text-align:center">tg</td><td style="text-align:center">æ—¶è¯­ç´ </td><td style="text-align:center">u</td><td style="text-align:center">åŠ©è¯</td><td style="text-align:center">ud</td><td style="text-align:center">ç»“æ„åŠ©è¯ å¾—</td><td style="text-align:center">ug</td><td style="text-align:center">æ—¶æ€åŠ©è¯</td></tr><tr><td style="text-align:center">uj</td><td style="text-align:center">ç»“æ„åŠ©è¯ çš„</td><td style="text-align:center">ul</td><td style="text-align:center">æ—¶æ€åŠ©è¯ äº†</td><td style="text-align:center">uv</td><td style="text-align:center">ç»“æ„åŠ©è¯ åœ°</td><td style="text-align:center">uz</td><td style="text-align:center">æ—¶æ€åŠ©è¯ ç€</td></tr><tr><td style="text-align:center">v</td><td style="text-align:center">åŠ¨è¯</td><td style="text-align:center">vd</td><td style="text-align:center">å‰¯åŠ¨è¯</td><td style="text-align:center">vg</td><td style="text-align:center">åŠ¨è¯æ€§è¯­ç´ </td><td style="text-align:center">vi</td><td style="text-align:center">ä¸åŠç‰©åŠ¨è¯</td></tr><tr><td style="text-align:center">vn</td><td style="text-align:center">ååŠ¨è¯</td><td style="text-align:center">vq</td><td style="text-align:center"></td><td style="text-align:center">x</td><td style="text-align:center">éè¯­ç´ è¯</td><td style="text-align:center">y</td><td style="text-align:center">è¯­æ°”è¯</td></tr><tr><td style="text-align:center">z</td><td style="text-align:center">çŠ¶æ€è¯</td><td style="text-align:center">zg</td><td style="text-align:center"></td><td style="text-align:center">eng</td><td style="text-align:center">è‹±æ–‡</td><td style="text-align:center"></td><td style="text-align:center"></td></tr></tbody></table><h2 id="ltpè¯æ€§å¯¹ç…§è¡¨863è¯æ€§æ ‡æ³¨é›†"><a class="markdownIt-Anchor" href="#ltpè¯æ€§å¯¹ç…§è¡¨863è¯æ€§æ ‡æ³¨é›†"></a> LTPè¯æ€§å¯¹ç…§è¡¨ï¼ˆ863è¯æ€§æ ‡æ³¨é›†ï¼‰</h2><table><thead><tr><th style="text-align:center">Tag</th><th style="text-align:center">Description</th><th style="text-align:center">Example</th><th style="text-align:center">Tag</th><th style="text-align:center">Description</th><th style="text-align:center">Example</th></tr></thead><tbody><tr><td style="text-align:center">a</td><td style="text-align:center">adjective</td><td style="text-align:center">ç¾ä¸½</td><td style="text-align:center">ni</td><td style="text-align:center">organization name</td><td style="text-align:center">ä¿é™©å…¬å¸</td></tr><tr><td style="text-align:center">b</td><td style="text-align:center">other noun-modifier</td><td style="text-align:center">å¤§å‹, è¥¿å¼</td><td style="text-align:center">nl</td><td style="text-align:center">location noun</td><td style="text-align:center">åŸéƒŠ</td></tr><tr><td style="text-align:center">c</td><td style="text-align:center">conjunction</td><td style="text-align:center">å’Œ, è™½ç„¶</td><td style="text-align:center">ns</td><td style="text-align:center">geographical name</td><td style="text-align:center">åŒ—äº¬</td></tr><tr><td style="text-align:center">d</td><td style="text-align:center">adverb</td><td style="text-align:center">å¾ˆ</td><td style="text-align:center">nt</td><td style="text-align:center">temporal noun</td><td style="text-align:center">è¿‘æ—¥, æ˜ä»£</td></tr><tr><td style="text-align:center">e</td><td style="text-align:center">exclamation</td><td style="text-align:center">å“</td><td style="text-align:center">nz</td><td style="text-align:center">other proper noun</td><td style="text-align:center">è¯ºè´å°”å¥–</td></tr><tr><td style="text-align:center">g</td><td style="text-align:center">morpheme</td><td style="text-align:center">èŒ¨, ç”¥</td><td style="text-align:center">o</td><td style="text-align:center">onomatopoeia</td><td style="text-align:center">å“—å•¦</td></tr><tr><td style="text-align:center">h</td><td style="text-align:center">prefix</td><td style="text-align:center">é˜¿, ä¼ª</td><td style="text-align:center">p</td><td style="text-align:center">preposition</td><td style="text-align:center">åœ¨, æŠŠ</td></tr><tr><td style="text-align:center">i</td><td style="text-align:center">idiom</td><td style="text-align:center">ç™¾èŠ±é½æ”¾</td><td style="text-align:center">q</td><td style="text-align:center">quantity</td><td style="text-align:center">ä¸ª</td></tr><tr><td style="text-align:center">j</td><td style="text-align:center">abbreviation</td><td style="text-align:center">å…¬æ£€æ³•</td><td style="text-align:center">r</td><td style="text-align:center">pronoun</td><td style="text-align:center">æˆ‘ä»¬</td></tr><tr><td style="text-align:center">k</td><td style="text-align:center">suffix</td><td style="text-align:center">ç•Œ, ç‡</td><td style="text-align:center">u</td><td style="text-align:center">auxiliary</td><td style="text-align:center">çš„, åœ°</td></tr><tr><td style="text-align:center">m</td><td style="text-align:center">number</td><td style="text-align:center">ä¸€, ç¬¬ä¸€</td><td style="text-align:center">v</td><td style="text-align:center">verb</td><td style="text-align:center">è·‘, å­¦ä¹ </td></tr><tr><td style="text-align:center">n</td><td style="text-align:center">general noun</td><td style="text-align:center">è‹¹æœ</td><td style="text-align:center">wp</td><td style="text-align:center">punctuation</td><td style="text-align:center">ï¼Œã€‚ï¼</td></tr><tr><td style="text-align:center">nd</td><td style="text-align:center">direction noun</td><td style="text-align:center">å³ä¾§</td><td style="text-align:center">ws</td><td style="text-align:center">foreign words</td><td style="text-align:center">CPU</td></tr><tr><td style="text-align:center">nh</td><td style="text-align:center">person name</td><td style="text-align:center">æœç”«, æ±¤å§†</td><td style="text-align:center">x</td><td style="text-align:center">non-lexeme</td><td style="text-align:center">è„, ç¿±</td></tr><tr><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center">z</td><td style="text-align:center">descriptive words</td><td style="text-align:center">ç‘Ÿç‘Ÿï¼ŒåŒ†åŒ†</td></tr></tbody></table><p>ä¸­æ–‡ç¿»è¯‘ç‰ˆ</p><table><thead><tr><th style="text-align:center">Tag</th><th style="text-align:center">Description</th><th style="text-align:center">Description-zh</th><th style="text-align:center">Tag</th><th style="text-align:center">Description</th><th style="text-align:center">Description-zh</th></tr></thead><tbody><tr><td style="text-align:center">a</td><td style="text-align:center">adjective</td><td style="text-align:center">å½¢å®¹è¯</td><td style="text-align:center">ni</td><td style="text-align:center">organization name</td><td style="text-align:center">æœºæ„å</td></tr><tr><td style="text-align:center">b</td><td style="text-align:center">other noun-modifier</td><td style="text-align:center">å…¶ä»–åè¯ä¿®é¥°è¯</td><td style="text-align:center">nl</td><td style="text-align:center">location noun</td><td style="text-align:center">ä½ç½®åè¯</td></tr><tr><td style="text-align:center">c</td><td style="text-align:center">conjunction</td><td style="text-align:center">è¿è¯</td><td style="text-align:center">ns</td><td style="text-align:center">geographical name</td><td style="text-align:center">åœ°ç‚¹åè¯</td></tr><tr><td style="text-align:center">d</td><td style="text-align:center">adverb</td><td style="text-align:center">å‰¯è¯</td><td style="text-align:center">nt</td><td style="text-align:center">temporal noun</td><td style="text-align:center">æ—¶é—´åè¯</td></tr><tr><td style="text-align:center">e</td><td style="text-align:center">exclamation</td><td style="text-align:center">å¹è¯</td><td style="text-align:center">nz</td><td style="text-align:center">other proper noun</td><td style="text-align:center">å…¶ä»–ä¸“æœ‰åè¯</td></tr><tr><td style="text-align:center">g</td><td style="text-align:center">morpheme</td><td style="text-align:center">è¯­ç´ </td><td style="text-align:center">o</td><td style="text-align:center">onomatopoeia</td><td style="text-align:center">æ‹Ÿå£°è¯</td></tr><tr><td style="text-align:center">h</td><td style="text-align:center">prefix</td><td style="text-align:center">å‰ç¼€</td><td style="text-align:center">p</td><td style="text-align:center">preposition</td><td style="text-align:center">ä»‹è¯ï¼Œå‰ç½®è¯</td></tr><tr><td style="text-align:center">i</td><td style="text-align:center">idiom</td><td style="text-align:center">æˆè¯­ã€ä¹ è¯­</td><td style="text-align:center">q</td><td style="text-align:center">quantity</td><td style="text-align:center">é‡è¯</td></tr><tr><td style="text-align:center">j</td><td style="text-align:center">abbreviation</td><td style="text-align:center">ç¼©å†™</td><td style="text-align:center">r</td><td style="text-align:center">pronoun</td><td style="text-align:center">ä»£è¯</td></tr><tr><td style="text-align:center">k</td><td style="text-align:center">suffix</td><td style="text-align:center">åç¼€</td><td style="text-align:center">u</td><td style="text-align:center">auxiliary</td><td style="text-align:center">åŠ©è¯</td></tr><tr><td style="text-align:center">m</td><td style="text-align:center">number</td><td style="text-align:center">æ•°å­—</td><td style="text-align:center">v</td><td style="text-align:center">verb</td><td style="text-align:center">åŠ¨è¯</td></tr><tr><td style="text-align:center">n</td><td style="text-align:center">general noun</td><td style="text-align:center">ä¸€èˆ¬åè¯</td><td style="text-align:center">wp</td><td style="text-align:center">punctuation</td><td style="text-align:center">æ ‡ç‚¹</td></tr><tr><td style="text-align:center">nd</td><td style="text-align:center">direction noun</td><td style="text-align:center">æ–¹ä½åè¯</td><td style="text-align:center">ws</td><td style="text-align:center">foreign words</td><td style="text-align:center">å¤–æ–‡è¯</td></tr><tr><td style="text-align:center">nh</td><td style="text-align:center">person name</td><td style="text-align:center">äººå</td><td style="text-align:center">x</td><td style="text-align:center">non-lexeme</td><td style="text-align:center">éè¯æ ¹</td></tr><tr><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center">z</td><td style="text-align:center">descriptive words</td><td style="text-align:center">ç‘Ÿç‘Ÿï¼ŒåŒ†åŒ†</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> è‡ªç„¶è¯­è¨€å¤„ç† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> NLP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2024å¹´äº‘å—å¤§å­¦è¿æ–°æ¯ç¨‹åºè®¾è®¡å¤§èµ›ã®é¢˜è§£</title>
      <link href="/posts/61220.html"/>
      <url>/posts/61220.html</url>
      
        <content type="html"><![CDATA[<h2 id="å‰è¨€"><a class="markdownIt-Anchor" href="#å‰è¨€"></a> å‰è¨€</h2><p>æœ¬åœºæ¯”èµ›å‡ºé¢˜å‘¨æœŸé‡Œï¼Œç”±äºåœ¨å¤‡èµ›å†²å‡»å¥–ç‰Œï¼Œå°±æŠŠè¿™åœºç¬¬äºŒå±Šè¿æ–°æ¯çš„å‡ºé¢˜å·¥ä½œåŸºæœ¬å…¨äº¤ç»™æ ¡é˜Ÿæœªæ¥çš„æ ‹æ¢ä»¬äº†ã€‚æ•´ä¸ªå‡ºé¢˜è¿‡ç¨‹ä¸­ï¼Œå‡ ä½å­¦å¼Ÿä»¬è®¤çœŸè´Ÿè´£çš„æ€åº¦è®©æˆ‘éå¸¸æ”¾å¿ƒï¼Œäº‹å®è¯æ˜ä¹Ÿç¡®å®å¸¦æ¥äº†ä¸€å¥—ä¸é”™çš„é¢˜ğŸ‘ä»å»å¹´å±å’¤èµ›åœºçš„é€‰æ‰‹èº«ä»½è½¬å˜ä¸ºå°½èŒå°½è´£çš„å‡ºé¢˜äººï¼Œä»–ä»¬åšå¾—å¾ˆæ£’ï¼<br />è¿™åœºå‡ºé¢˜äººæ¯”å»å¹´è¿˜æ˜¯å¾ˆå–„è‰¯çš„ï¼ˆï¼‰ï¼Œèµ›å‰ä¸æ–­åœ°åœ¨é™éš¾åº¦ã€‚ï¼ˆè€Œä¸”åŸæœ¬Lihgç»™çš„ä¸¤ä¸ªç–‘ä¼¼è“é¢˜+ç´«é¢˜éƒ½è¢«banäº†<br />æœ€éš¾çš„åº”è¯¥ç®—æ˜¯å¤©é™…çº¿é‚£é“é¢˜ï¼Œæ€ç»´ä¸Šæœ‰ä¸€å®šçš„é—¨æ§›ï¼Œä½†ä¹Ÿä¸éš¾æƒ³ã€‚æˆ‘å‹‰å¼ºç®—å‡ºäº†è¿™ä¸€é“é¢˜ï¼Œç›®çš„å°±æ˜¯æƒ³ç»™èµ›æœ‰ä½™åŠ›oierä»¬å¼ºè°ƒä¸€ä¸‹STLçš„é‡è¦æ€§ã€‚<br />åº”è¯¥è¯´ï¼Œå–„è‰¯çš„å‡ºé¢˜äººè¿™å›æ˜¯æ²¡æœ‰é˜²AKçš„ï¼Œå…¶å®éƒ½æ˜¯å¯åšé¢˜ã€‚<br />éè¦ç»†åˆ†çš„è¯ï¼Œæˆ‘èµ›å‰é¢„ä¼°å¤§æ¦‚4 3 2çš„æ¢¯åº¦ï¼ˆ4ç­¾åˆ°+3ç®€å•+2ä¸­ç­‰ï¼Œoctalçš„ä¸ªäººçœ‹æ³•ï¼‰</p><table><thead><tr><th style="text-align:center">é¢˜å·</th><th style="text-align:center">é¢„ä¼°éš¾åº¦</th><th style="text-align:center">çŸ¥è¯†ç‚¹</th><th style="text-align:center">FirstBlood</th></tr></thead><tbody><tr><td style="text-align:center">A</td><td style="text-align:center">1 â˜…</td><td style="text-align:center">ç®€å•æ•°å­¦ã€å®¹æ–¥åŸç†</td><td style="text-align:center"><strong>ã‚§ãƒ¡</strong></td></tr><tr><td style="text-align:center">B</td><td style="text-align:center">2 â˜…</td><td style="text-align:center">äºŒåˆ†ã€æ•°å­¦</td><td style="text-align:center"><strong>clhdlg</strong></td></tr><tr><td style="text-align:center">C</td><td style="text-align:center">2 â˜…</td><td style="text-align:center">DPåŠ¨æ€è§„åˆ’</td><td style="text-align:center"><strong>Ovine</strong></td></tr><tr><td style="text-align:center">D</td><td style="text-align:center">3 â˜…</td><td style="text-align:center">è´ªå¿ƒã€ä¼˜å…ˆé˜Ÿåˆ—</td><td style="text-align:center">/</td></tr><tr><td style="text-align:center">E</td><td style="text-align:center">2 â˜…</td><td style="text-align:center">è´ªå¿ƒ</td><td style="text-align:center"><strong>ã‚§ãƒ¡</strong></td></tr><tr><td style="text-align:center">F</td><td style="text-align:center">1 â˜…</td><td style="text-align:center">æ€ç»´é¢˜</td><td style="text-align:center"><strong>ç¿Šï¼Œ</strong></td></tr><tr><td style="text-align:center">G</td><td style="text-align:center">1 â˜…</td><td style="text-align:center">è´ªå¿ƒã€ç®€å•æ¨¡æ‹Ÿ</td><td style="text-align:center"><strong>ç¿Šï¼Œ</strong></td></tr><tr><td style="text-align:center">H</td><td style="text-align:center">1 â˜…ï¼ˆç­¾åˆ°é¢˜ï¼‰</td><td style="text-align:center">ç®€å•æ•°å­¦</td><td style="text-align:center"><strong>learner_164</strong></td></tr><tr><td style="text-align:center">I</td><td style="text-align:center">3 â˜…</td><td style="text-align:center">ç»„åˆæ•°å­¦ã€æ¨å¼å­<br />æ‰“è¡¨æ‰¾è§„å¾‹</td><td style="text-align:center"><strong>ç¿Šï¼Œ</strong></td></tr></tbody></table><p>èµ›åçœ‹äº†ä¸€ä¸‹ï¼Œè™½ç„¶ç®€å•äº†ï¼Œä½†ä¹Ÿæ˜¯æœ‰åŒºåˆ†åº¦çš„ï¼Œå„ä¸ªæ°´å¹³çš„é€‰æ‰‹ä¹Ÿéƒ½æœ‰é¢˜å¯åšï¼Œä¸ºå‡ºé¢˜äººä»¬ç‚¹èµï¼ğŸ‘<br />å¦å¤–é¢„å‘Šä¸€ä¸‹ï¼š<br />ä¸‹å­¦æœŸçš„æ ¡èµ›å°†ä¼šç”±YNUç°å½¹å•ä½“æœ€å¼ºã€åˆ·é¢˜é‡3000+çš„Lihgä¸»å¯¼å‡ºé¢˜ï¼Œå¤§å®¶æ•¬è¯·æœŸå¾…ä¸€ä¸‹ï¼</p><hr /><blockquote><p>è¯´æ˜ï¼šä»¥ä¸‹æ‰€æœ‰é¢˜è§£ä»£ç ï¼Œå¤§å®¶å…³æ³¨mainå‡½æ•°å°±è¡Œäº†ï¼Œä»£ç å¤´éƒ¨çº¯å±ä¸ªäººä¹ æƒ¯ï¼Œä¸ç”¨æ·±ç©¶ã€‚</p></blockquote><h2 id="a-ç©¿è¶Šä¹‹çˆ†è£‚é­”æ³•ä¸ç‰¹æ®Šæ•°å­—"><a class="markdownIt-Anchor" href="#a-ç©¿è¶Šä¹‹çˆ†è£‚é­”æ³•ä¸ç‰¹æ®Šæ•°å­—"></a> A ç©¿è¶Šä¹‹çˆ†è£‚é­”æ³•ä¸ç‰¹æ®Šæ•°å­—</h2><p>ã€å®¹æ–¥åŸç†ã€‘</p><p>é¦–å…ˆï¼Œæˆ‘æƒ³å¯¹äºåˆšé«˜è€ƒå®Œçš„åŒå­¦æ¥è¯´ï¼Œ<code>æ•´é™¤</code> è¿™ä¸ªæ¦‚å¿µå¯èƒ½æœ‰ç‚¹é™Œç”Ÿäº†ã€‚å› ä¸ºå¤§å®¶ç¬¬ä¸€æ¬¡æ¥è§¦è¿™ä¸ªè¯åº”è¯¥æ˜¯å°å­¦åˆä¸­ï¼Œé«˜è€ƒæ•°å­¦åº”è¯¥æ˜¯ä¸æ¶‰åŠã€‚<br />ä¸è¿‡å¤§å®¶çœ‹æ ·ä¾‹è§£é‡Šåº”è¯¥å°±èƒ½getåˆ°ï¼š</p><blockquote><p>a è¢« b æ•´é™¤ &lt;=&gt; a é™¤ b ä½™æ•°ä¸º0 &lt;=&gt; a æ˜¯ b çš„å€æ•°</p></blockquote><p>è¿™é“é¢˜å°±æ˜¯ç›¸å½“äºæ±‚ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>âˆ’</mo><mi>n</mi></mrow><annotation encoding="application/x-tex">1-n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span> ä¸­ï¼Œæœ‰å¤šå°‘ä¸ªæ•°æ˜¯ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo separator="true">,</mo><mi>c</mi></mrow><annotation encoding="application/x-tex">a, b, c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">b</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">c</span></span></span></span> ä¸­è‡³å°‘ä¸€ä¸ªæ•°çš„å€æ•°ã€‚<br />å¦‚æœæ˜¯æ±‚ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>âˆ’</mo><mi>n</mi></mrow><annotation encoding="application/x-tex">1-n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span> ä¸­ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">x</span></span></span></span> çš„å€æ•°ï¼Œè¦æ€ä¹ˆæ±‚ï¼Ÿ<br />æ˜¯ä¸æ˜¯åªéœ€è¦ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mi mathvariant="normal">/</mi><mi>x</mi></mrow><annotation encoding="application/x-tex">n / x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">n</span><span class="mord">/</span><span class="mord mathnormal">x</span></span></span></span> (æ•´é™¤) å°±è¡Œã€‚<br />é‚£æ˜¯ä¸æ˜¯ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mi mathvariant="normal">/</mi><mi>a</mi><mo>+</mo><mi>n</mi><mi mathvariant="normal">/</mi><mi>b</mi><mo>+</mo><mi>n</mi><mi mathvariant="normal">/</mi><mi>c</mi></mrow><annotation encoding="application/x-tex">n / a + n / b + n / c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">n</span><span class="mord">/</span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">n</span><span class="mord">/</span><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">n</span><span class="mord">/</span><span class="mord mathnormal">c</span></span></span></span> ï¼Ÿ<br />noï¼Œnoï¼Œnoã€‚å› ä¸ºä¼šæœ‰é‡å¤çš„ã€‚<br />æ‰€ä»¥å°±éœ€è¦ç”¨åˆ°å®¹æ–¥åŸç†ï¼Œçœ‹å¼ å›¾å°±ç†è§£äº†<br /><img src="https://picbed.octalzhihao.top/img/202412061648830.png" alt="image-20241206164835518" /><br />ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pii pair<span class="string">&lt;int, int&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pdd pair<span class="string">&lt;double, double&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pll pair<span class="string">&lt;ll, ll&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> debug(x) cerr &lt;&lt; #x &lt;&lt; <span class="string">&quot;: &quot;</span> &lt;&lt; x &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> endl <span class="string">&#x27;\n&#x27;</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">unsigned</span> <span class="type">long</span> <span class="type">long</span> ull;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> n, a, b, c;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; a &gt;&gt; b &gt;&gt; c;</span><br><span class="line">    ll res = <span class="number">0</span>;</span><br><span class="line">    res += n/a + n/b + n/c;</span><br><span class="line">    res -= n/(a*b) + n/(a*c) + n/(b*c);</span><br><span class="line">    res += n / (a*b*c);</span><br><span class="line">    cout &lt;&lt; res &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cout &lt;&lt; fixed &lt;&lt; <span class="built_in">setprecision</span>(<span class="number">10</span>);</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="number">0</span>);cout.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">    <span class="type">int</span> t;</span><br><span class="line">    cin &gt;&gt; t;</span><br><span class="line">    <span class="keyword">while</span>(t --)</span><br><span class="line">        <span class="built_in">solve</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="b-æœºæˆ¿çš„ç¥ç§˜ç¯å…‰"><a class="markdownIt-Anchor" href="#b-æœºæˆ¿çš„ç¥ç§˜ç¯å…‰"></a> B æœºæˆ¿çš„ç¥ç§˜ç¯å…‰</h2><p>ã€äºŒåˆ†ã€‘<br />å…¶å®æœ‰ç»éªŒçš„é€‰æ‰‹è¿™é“é¢˜å°±æ˜¯ä¼šæ¯”è¾ƒç§’æ€ï¼Œå› ä¸ºäºŒåˆ†çš„é¢˜åŸºæœ¬éƒ½æ¯”è¾ƒå¥—è·¯ã€‚<br /><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span> çš„èŒƒå›´æ˜¯ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mi>e</mi><mn>18</mn></mrow><annotation encoding="application/x-tex">1e18</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord mathnormal">e</span><span class="mord">1</span><span class="mord">8</span></span></span></span> ï¼Œè¿™ä¹Ÿä¸åƒæ˜¯æœ‰è§„å¾‹çš„æ•°å­¦æ¨¡å‹ï¼Œæ‰€ä»¥ç¬¬ä¸€ååº”å°±åº”è¯¥æƒ³åˆ°äºŒåˆ†ã€‚<br />è¦è®²æ¸…æ¥šè¿™é“é¢˜ï¼Œå¤§æ¦‚æœ‰ä¸¤ä¸ªè¦ç‚¹ï¼š<br />â‘  ç¬¬ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathnormal">i</span></span></span></span> ç›ç¯åªä¼šè¢« <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathnormal">i</span></span></span></span> çš„å› æ•°æ”¹å˜çŠ¶æ€ã€‚ï¼ˆå¹¶ä¸” <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathnormal">i</span></span></span></span> çš„å› æ•°æ˜¯å°äºç­‰äº <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathnormal">i</span></span></span></span> çš„ï¼Œå³ä¸€å®šéƒ½ä¼šè¢«é€‰æ‹©ï¼‰<br />â‘¡ æŒ‰å¥‡æ•°æ¬¡å¼€å…³ï¼Œç¯å…³ï¼›æŒ‰å¶æ•°æ¬¡å¼€å…³ï¼Œç¯æ‰ä¼šä¾ç„¶å¼€ã€‚<br />â‘¢ åªæœ‰å¹³æ–¹æ•°çš„å› å­ä¸ªæ•°æ˜¯å¥‡æ•°ï¼Œå…¶ä»–æ•°çš„å› å­ä¸€å®šæ˜¯ä¸¤ä¸¤ä¸ç›¸åŒçš„æ•°ä¸€ç»„ã€‚<br />é‚£ä¹ˆï¼Œå®é™…ä¸Šå°±æ˜¯æ±‚æ»¡è¶³ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>1</mn><mo separator="true">,</mo><mi>n</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[1, n]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">n</span><span class="mclose">]</span></span></span></span> ä¸­éå¹³æ–¹æ•°çš„ä¸ªæ•°æ°å¥½ä¸º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span> çš„æœ€å°çš„ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span> æ˜¯å¤šå°‘ã€‚è€ƒè™‘åˆ° <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span> èŒƒå›´æ˜¯ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mi>e</mi><mn>18</mn></mrow><annotation encoding="application/x-tex">1e18</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord mathnormal">e</span><span class="mord">1</span><span class="mord">8</span></span></span></span> äºŒåˆ†æ±‚è§£å³å¯ï¼Œå¤æ‚åº¦ä¸º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>l</mi><mi>o</mi><msub><mi>g</mi><mn>2</mn></msub><mi>k</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(log_2{k})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span><span class="mclose">)</span></span></span></span>ï¼Œå¤§æ¦‚åœ¨64è¿™ä¸ªæ•°é‡çº§ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pii pair<span class="string">&lt;int, int&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pdd pair<span class="string">&lt;double, double&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pll pair<span class="string">&lt;ll, ll&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> debug(x) cerr &lt;&lt; #x &lt;&lt; <span class="string">&quot;: &quot;</span> &lt;&lt; x &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> endl <span class="string">&#x27;\n&#x27;</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">unsigned</span> <span class="type">long</span> <span class="type">long</span> ull;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll k;</span><br><span class="line">    cin &gt;&gt; k;</span><br><span class="line">    <span class="comment">// checkå‡½æ•°ï¼Œä¸ªäººä¹ æƒ¯ä½¿ç”¨çš„æ˜¯Lambdaè¡¨è¾¾å¼ï¼Œå…¶å®å°±ç†è§£ä¸ºå‡½æ•°å°±è¡Œ</span></span><br><span class="line">    <span class="keyword">auto</span> check = [&amp;](ll x) &#123;</span><br><span class="line">        ll t = <span class="built_in">sqrt</span>(x);</span><br><span class="line">        <span class="keyword">return</span> x - t &gt;= k;</span><br><span class="line">    &#125;;</span><br><span class="line">    ll l = <span class="number">1</span>, r = <span class="number">4e18</span>; <span class="comment">// long longæœ€å¤§å¤§æ¦‚4e18ï¼Œä¸å¦‚å¼€å¤§ç‚¹</span></span><br><span class="line">    <span class="comment">// äºŒåˆ†æ‰¾ä¸€ä¸ªæ»¡è¶³æ¡ä»¶çš„æœ€å°å€¼</span></span><br><span class="line">    <span class="keyword">while</span>(l &lt; r) &#123;</span><br><span class="line">        ll mid = l+r &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">check</span>(mid)) r = mid;</span><br><span class="line">        <span class="keyword">else</span> l = mid + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; l &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cout &lt;&lt; fixed &lt;&lt; <span class="built_in">setprecision</span>(<span class="number">10</span>);</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="number">0</span>);cout.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">    <span class="type">int</span> t;</span><br><span class="line">    cin &gt;&gt; t;</span><br><span class="line">    <span class="keyword">while</span>(t --)</span><br><span class="line">        <span class="built_in">solve</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="c-äº‘å±±æ¢é™©è®°2"><a class="markdownIt-Anchor" href="#c-äº‘å±±æ¢é™©è®°2"></a> C äº‘å±±æ¢é™©è®°2</h2><p>ã€DPã€‘</p><blockquote><p>å‰è¨€ï¼šå»å¹´æ ¡èµ›çš„äº‘å±±æ¢é™©è®°1ä¹Ÿæ˜¯ä¸€ä¸ªæ¯”è¾ƒå…¸çš„DPï¼Œä¸è¿‡æ€ç»´éš¾åº¦æ¯”æœ¬é¢˜é«˜ä¸€äº›ï¼Œæ¬¢è¿æœ‰å…´è¶£çš„åŒå­¦å»é’»ç ”ä¸€ä¸‹ï¼ˆPSï¼šå»å¹´é‚£é¢˜çš„å®šä½æ˜¯é˜²AKï¼Œæ‰€ä»¥ä¸€æ—¶åŠä¼šå„¿æ²¡æƒ³é€šä¹Ÿåˆ«ç€æ€¥ï¼‰ã€‚</p></blockquote><p>é¢˜æ„å°±æ˜¯æœ‰ä¸€ä¸ª <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span> ä¸ªæ•°çš„åºåˆ—ï¼Œæ¯ä¸ªæ•°å¯ä»¥é€‰æˆ–ä¸é€‰ã€‚<br />é€‰åˆ°ç¬¬å¶æ•°ä¸ªæ•°æ—¶ï¼Œå¯ä»¥æ”¶è·ç¿»å€ã€‚é—®é€‰å®Œnä¸ªæ•°åï¼Œæœ€å¤§æ”¶è·æ˜¯å¤šå°‘ã€‚</p><p>è¿™é“é¢˜ä¹‹æ‰€ä»¥ä¸èƒ½ç›´æ¥è´ªå¿ƒï¼Œæ˜¯å› ä¸ºæˆ‘ä¸­é€”å¯ä»¥æ”¾å¼ƒé€‰ä¸€ä¸ªæ•°ï¼Œä»è€Œä½¿å¾—åç»­æœ‰ä¸ªåŸæœ¬æ˜¯ç¬¬å¥‡æ•°ä¸ªé€‰ä¸­çš„æ•°ï¼Œå˜ä¸ºç¬¬å¶æ•°ä¸ªæ•°ï¼Œè¿™ä¸ªæ•°å¾ˆå¤§çš„è¯<code>æ”¶è·ç¿»å€</code>å°±èƒ½å¼¥è¡¥æ”¾å¼ƒçš„æŸå¤±ã€‚</p><p>è¿˜æœ‰ä¸ªå€¼å¾—æ³¨æ„çš„ç‚¹æ˜¯ï¼Œä¸ä¼šæœ‰è¿ç»­çš„ä¸¤ä¸ªæ•°éƒ½ä¸è¢«é€‰ä¸­ã€‚ï¼ˆä»è´ªå¿ƒçš„è§’åº¦ä¸Šï¼Œè¿™ä¸ªè¡Œä¸ºæ˜¯è‡ªæŸè€Œæ— åˆ©çš„ï¼‰</p><h3 id="dpæ€è·¯ä¸€"><a class="markdownIt-Anchor" href="#dpæ€è·¯ä¸€"></a> DPæ€è·¯ä¸€</h3><p>è§£æç›´æ¥çœ‹ä»£ç é‡Œçš„æ³¨é‡Š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pii pair<span class="string">&lt;int, int&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pdd pair<span class="string">&lt;double, double&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pll pair<span class="string">&lt;ll, ll&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> debug(x) cerr &lt;&lt; #x &lt;&lt; <span class="string">&quot;: &quot;</span> &lt;&lt; x &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> endl <span class="string">&#x27;\n&#x27;</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">unsigned</span> <span class="type">long</span> <span class="type">long</span> ull;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    vector&lt;vector&lt;ll&gt;&gt; <span class="built_in">dp</span>(n<span class="number">+5</span>, <span class="built_in">vector</span>&lt;ll&gt;(<span class="number">2</span>));</span><br><span class="line">    <span class="comment">// dp[i][0] é€‰äº†ç¬¬iä½åæœ‰å¶æ•°ä¸ªæ•°æ—¶çš„æœ€å¤§æ”¶è·</span></span><br><span class="line">    <span class="comment">// dp[i][1] é€‰äº†ç¬¬iä½åæœ‰å¥‡æ•°ä¸ªæ•°æ—¶çš„æœ€å¤§æ”¶è·</span></span><br><span class="line">    <span class="comment">// ç”±äºç¬¬nä¸ªæ•°ä¸é€‰ä¸ä¼šæœ‰ä»»ä½•å¥½å¤„ï¼Œé‚£æœ€ä¼˜è§£è‚¯å®šæ˜¯å¿…é€‰ç¬¬nä¸ªæ•°çš„</span></span><br><span class="line">    <span class="comment">// æ‰€ä»¥ç­”æ¡ˆæ˜¯max(dp[n][0], dp[n][1])</span></span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">a</span><span class="params">(n<span class="number">+1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>; i&lt;=n; i++)</span><br><span class="line">        cin &gt;&gt; a[i];</span><br><span class="line">    dp[<span class="number">1</span>][<span class="number">1</span>] = a[<span class="number">1</span>];</span><br><span class="line">    dp[<span class="number">1</span>][<span class="number">0</span>] = <span class="number">-2e18</span>; <span class="comment">//é€‰äº†ç¬¬1ä½åå°±åªèƒ½æ˜¯å¥‡æ•°ä¸ªæ•°</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">2</span>; i&lt;=n; i++) &#123;</span><br><span class="line">        dp[i][<span class="number">0</span>] = <span class="built_in">max</span>(dp[i<span class="number">-1</span>][<span class="number">1</span>] + a[i]*<span class="number">2</span>, dp[i<span class="number">-2</span>][<span class="number">1</span>] + a[i]*<span class="number">2</span>); <span class="comment">// åˆ†åˆ«å¯¹åº”é€‰i-1å’Œä¸é€‰i-1</span></span><br><span class="line">        dp[i][<span class="number">1</span>] = <span class="built_in">max</span>(dp[i<span class="number">-1</span>][<span class="number">0</span>] + a[i], dp[i<span class="number">-2</span>][<span class="number">0</span>] + a[i]); <span class="comment">// åˆ†åˆ«å¯¹åº”é€‰i-1å’Œä¸é€‰i-1</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ç¬¬nä½æ˜¯å¿…é€‰çš„ï¼Œå‰n-1ä½é€‰ä¸ä¸é€‰çš„çŠ¶æ€é€’æ¨è¿‡æ¥ï¼Œä¸€å®šæ˜¯æ²¡æœ‰ç–æ¼çš„</span></span><br><span class="line">    cout &lt;&lt; <span class="built_in">max</span>(dp[n][<span class="number">0</span>], dp[n][<span class="number">1</span>]) &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="dpæ€è·¯äºŒ"><a class="markdownIt-Anchor" href="#dpæ€è·¯äºŒ"></a> DPæ€è·¯äºŒ</h3><p>è§£æç›´æ¥çœ‹ä»£ç é‡Œçš„æ³¨é‡Š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    vector&lt;vector&lt;ll&gt;&gt; <span class="built_in">dp</span>(n<span class="number">+5</span>, <span class="built_in">vector</span>&lt;ll&gt;(<span class="number">2</span>));</span><br><span class="line">    <span class="comment">// dp[i][0] èµ°åˆ°ç¬¬iä½ä¸ºæ­¢ï¼Œé€‰äº†å¶æ•°ä¸ªæ•°æ—¶çš„æœ€å¤§æ”¶è·ï¼ˆç¬¬iä½ä¸ä¸€å®šé€‰ï¼‰</span></span><br><span class="line">    <span class="comment">// dp[i][1] èµ°åˆ°ç¬¬iä½ä¸ºæ­¢ï¼Œé€‰äº†å¥‡æ•°ä¸ªæ•°æ—¶çš„æœ€å¤§æ”¶è·ï¼ˆç¬¬iä½ä¸ä¸€å®šé€‰ï¼‰</span></span><br><span class="line">    <span class="comment">// æœ€ç»ˆé€‰åˆ°çš„æ•°çš„ä¸ªæ•°è¦ä¹ˆæ˜¯å¥‡æ•°è¦ä¹ˆæ˜¯å¶æ•°</span></span><br><span class="line">    <span class="comment">// æ‰€ä»¥ç­”æ¡ˆæ˜¯max(dp[n][0], dp[n][1])</span></span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">a</span><span class="params">(n<span class="number">+1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>; i&lt;=n; i++)</span><br><span class="line">        cin &gt;&gt; a[i];</span><br><span class="line">    dp[<span class="number">1</span>][<span class="number">1</span>] = a[<span class="number">1</span>];</span><br><span class="line">    dp[<span class="number">1</span>][<span class="number">0</span>] = <span class="number">-2e18</span>; <span class="comment">// é€‰äº†ç¬¬1ä½åå°±åªèƒ½æ˜¯å¥‡æ•°ä¸ªæ•°</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">2</span>; i&lt;=n; i++) &#123;</span><br><span class="line">        <span class="comment">// åˆ†åˆ«å¯¹åº”é€‰ä¸ä¸é€‰ç¬¬iä½</span></span><br><span class="line">        dp[i][<span class="number">0</span>] = <span class="built_in">max</span>(dp[i<span class="number">-1</span>][<span class="number">0</span>], dp[i<span class="number">-1</span>][<span class="number">1</span>] + a[i]*<span class="number">2</span>);</span><br><span class="line">        dp[i][<span class="number">1</span>] = <span class="built_in">max</span>(dp[i<span class="number">-1</span>][<span class="number">1</span>], dp[i<span class="number">-1</span>][<span class="number">0</span>] + a[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; <span class="built_in">max</span>(dp[n][<span class="number">0</span>], dp[n][<span class="number">1</span>]) &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="d-ç©¿è¶Šä¹‹æˆ‘åœ¨éƒ½å¸‚å¤©é™…çº¿é‡Œä¿®è·¯"><a class="markdownIt-Anchor" href="#d-ç©¿è¶Šä¹‹æˆ‘åœ¨éƒ½å¸‚å¤©é™…çº¿é‡Œä¿®è·¯"></a> D ç©¿è¶Šä¹‹æˆ‘åœ¨ã€Šéƒ½å¸‚ï¼šå¤©é™…çº¿ã€‹é‡Œä¿®è·¯</h2><p>ã€è´ªå¿ƒã€‘ã€ä¼˜å…ˆé˜Ÿåˆ—ã€‘<br />å‰æ®µæ—¶é—´çœ‹æœ‹å‹åœ¨ç©è¿™ä¸ªæ¸¸æˆï¼Œé¡ºæ‰‹æƒ³äº†ä¸ªæ•…äº‹ã€‚<br />æŠ›å¼€é¢˜ç›®èƒŒæ™¯ï¼Œä¸€å¥è¯é¢˜æ„å…¶å®å°±æ˜¯ï¼š<br />æœ‰ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span> ä¸ªç‚¹ï¼Œæ¯ä¸ªç‚¹æœ‰ä¸€ä¸ªæƒå€¼ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">a_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> ï¼Œæ¯ä¸ªç‚¹çš„åº¦ä¸º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">d_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> ã€‚æ„é€ ä¸€é¢—æ ‘ä½¿å¾— $ \sum_{i=1}^N a_i\times{d_i}^2$ çš„å€¼æœ€å°ã€‚</p><blockquote><p>ä¸çŸ¥é“æœ‰æ²¡æœ‰åŒå­¦çœ‹åˆ°è¿™é“é¢˜çš„æ—¶å€™ï¼Œæƒ³åˆ°äº†æœ€å°ç”Ÿæˆæ ‘ğŸ¤”<br />è¿™é“é¢˜çš„æ€æƒ³å’Œæœ€å°ç”Ÿæˆæ ‘çš„primç®—æ³•å¾ˆç±»ä¼¼å“ˆã€‚<br />ä¸è¿‡åªèƒ½è¯´å­¦è¿‡primæœ‰åŠ©äºæƒ³åˆ°æ­£è§£ï¼Œå…¶å®å®Œå…¨ä¸ä¼šprimä¹Ÿæ˜¯èƒ½å†™çš„å“ˆã€‚primç®—æ³•è™½ç„¶æœ‰åæœ‰å§“çš„ï¼Œä½†ä¹Ÿå°±æ˜¯ä¸ªè´ªå¿ƒè€Œå·²ï¼Œæ²¡é‚£ä¹ˆå‰å®³ã€‚</p></blockquote><p>è¿™é“é¢˜æ€ä¹ˆè´ªå‘¢ï¼Ÿ<br />å¦‚æœä¸€ä¸Šæ¥å°±ä»æ•´ä½“ï¼ˆå®Œå…¨ä½“çš„æ ‘ï¼‰è€ƒè™‘ï¼Œæ ¹æœ¬æ— ä»ä¸‹æ‰‹ã€‚<br />æˆ‘ä»¬ä¸å¦¨ä¸è¦é‚£ä¹ˆèªæ˜ï¼Œåˆ«ä¸€ä¸Šæ¥å°±å»ºæ¨¡æˆ &quot;æ„é€ ä¸€é¢—æ ‘ä½¿å¾— $ \sum_{i=1}^N a_i\times{d_i}^2$ çš„å€¼æœ€å°â€œè¿™ä¸ªé—®é¢˜å“ˆã€‚<br />ä¸å¦‚é¡ºç€é¢˜ç›®æè¿°ï¼Œè·¯æ˜¯ä¸€æ¡ä¸€æ¡ä¿®çš„ï¼Œæˆ‘ä»¬å°±ä¸€æ­¥æ­¥è€ƒè™‘ã€‚<br />æˆ‘ä»¬è€ƒè™‘ä¸€ä¸ªä¸€ä¸ªåŸå¸‚åœ°æ‰©å¼ è¿é€šå—ï¼Œç›´åˆ°å…¨éƒ¨åŸå¸‚éƒ½è¿è¿›æ¥ã€‚<br />å¯¹äºé¢˜ç»™èƒŒæ™¯ï¼Œæ¯ä¿®ä¸€æ¡è·¯å…¶å®å°±å¯¹åº”ç€æŠŠä¸€ä¸ªæ–°åŸå¸‚è¿åˆ°å½“å‰çš„è¿é€šå—é‡Œã€‚ï¼ˆä¸€å®šæ˜¯è¿™æ ·çš„ï¼Œå› ä¸ºæ˜¯æ ‘ï¼‰<br />é‚£ä¹ˆæ–°å¢çš„åŸå¸‚ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathnormal">i</span></span></span></span> å½“å‰åªä¼šè¿ç€ä¸€æ¡å…¬è·¯ï¼Œå³åŠ è¿›æ¥çš„ä»£ä»·ä¸º $a_i Ã— 1 $ ï¼Œæ˜¯ä¸ªå›ºå®šå€¼ã€‚<br />è€Œä¸åŸå¸‚ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathnormal">i</span></span></span></span> æ‰€è¿æ¥çš„é‚£ä¸ªç‚¹ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>j</mi></mrow><annotation encoding="application/x-tex">j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.85396em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span></span></span></span> æ‰€æ–°å¢çš„ä»£ä»·æ˜¯ä¸å›ºå®šçš„ï¼Œè¿™ä¹Ÿå°±æ˜¯æˆ‘ä»¬è¦è´ªçš„å¯¹è±¡ã€‚<br />åŸæœ¬ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>j</mi></mrow><annotation encoding="application/x-tex">j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.85396em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span></span></span></span> çš„ä»£ä»·æ˜¯ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mi>j</mi></msub><mo>Ã—</mo><msubsup><mi>d</mi><mi>j</mi><mn>2</mn></msubsup></mrow><annotation encoding="application/x-tex">a_j Ã— d_j^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8694379999999999em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.20888em;vertical-align:-0.394772em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-2.441336em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.394772em;"><span></span></span></span></span></span></span></span></span></span> ï¼Œç°åœ¨è¦å˜ä¸º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mi>j</mi></msub><mo>Ã—</mo><mo stretchy="false">(</mo><msub><mi>d</mi><mi>j</mi></msub><mo>+</mo><mn>1</mn><msup><mo stretchy="false">)</mo><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">a_j Ã— (d_j+1)^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8694379999999999em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.036108em;vertical-align:-0.286108em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span>ã€‚<br />æˆ‘ä»¬è¦æœ€å°åŒ–æ€»çš„ä»£ä»·ï¼Œå…¶å®åªéœ€è¦æœ€å°åŒ–æ¯ä¸€æ­¥çš„ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mi>j</mi></msub><mo>Ã—</mo><mo stretchy="false">(</mo><msub><mi>d</mi><mi>j</mi></msub><mo>+</mo><mn>1</mn><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo>âˆ’</mo><msub><mi>a</mi><mi>j</mi></msub><mo>Ã—</mo><msubsup><mi>d</mi><mi>j</mi><mn>2</mn></msubsup></mrow><annotation encoding="application/x-tex">a_j Ã— (d_j+1)^2 - a_j Ã— d_j^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8694379999999999em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.036108em;vertical-align:-0.286108em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8694379999999999em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.20888em;vertical-align:-0.394772em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-2.441336em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.394772em;"><span></span></span></span></span></span></span></span></span></span>ã€‚<br />è‡³äºæ€ä¹ˆç»´æŠ¤æ¯ä¸ª <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>j</mi></mrow><annotation encoding="application/x-tex">j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.85396em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span></span></span></span> å¯¹åº”çš„ä»£ä»·ï¼Œå¯èƒ½éœ€è¦ç”¨åˆ°ä¼˜å…ˆé˜Ÿåˆ— + é‡è½½è¿ç®—ç¬¦ã€‚ï¼ˆä¸é‡è½½çš„è¯ä¹Ÿèƒ½å†™ï¼Œå°±æ˜¯éº»çƒ¦ç‚¹ï¼‰<br />å…³äºé‡è½½è¿ç®—ç¬¦çš„æ–¹æ³•ï¼Œå¯ä»¥çœ‹ä¸€ä¸‹æˆ‘ä»¥å‰å†™è¿‡çš„è¿™ç¯‡æ–‡ç« ï¼š<a href="https://www.cnblogs.com/zhouzhihao/p/10974594.html">ä¼˜å…ˆé˜Ÿåˆ—çš„é‡è½½è¿ç®—ç¬¦ - octal_zhihao - åšå®¢å›­</a><br />ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pii pair<span class="string">&lt;int, int&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pdd pair<span class="string">&lt;double, double&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pll pair<span class="string">&lt;ll, ll&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> endl <span class="string">&#x27;\n&#x27;</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">unsigned</span> <span class="type">long</span> <span class="type">long</span> ull;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">node</span>&#123;</span><br><span class="line">    ll x;</span><br><span class="line">    ll y;</span><br><span class="line">    <span class="keyword">friend</span> <span class="type">bool</span> <span class="keyword">operator</span>&lt;(node a,node b) &#123;</span><br><span class="line">        ll ta = a.x * ((a.y<span class="number">+1</span>)*(a.y<span class="number">+1</span>) - a.y*a.y);</span><br><span class="line">        ll tb = b.x * ((b.y<span class="number">+1</span>)*(b.y<span class="number">+1</span>) - b.y*b.y);</span><br><span class="line">        <span class="keyword">return</span> ta &gt; tb;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">priority_queue&lt;node&gt; q;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="function">vector&lt;ll&gt; <span class="title">a</span><span class="params">(n<span class="number">+1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>; i&lt;=n; i++)</span><br><span class="line">        cin &gt;&gt; a[i];</span><br><span class="line">    <span class="built_in">sort</span>(a.<span class="built_in">begin</span>()<span class="number">+1</span>, a.<span class="built_in">end</span>());</span><br><span class="line">    q.<span class="built_in">push</span>(&#123;a[<span class="number">1</span>], <span class="number">1</span>&#125;);</span><br><span class="line">    q.<span class="built_in">push</span>(&#123;a[<span class="number">2</span>], <span class="number">1</span>&#125;);</span><br><span class="line">    ll res = <span class="number">0</span>;</span><br><span class="line">    res += a[<span class="number">1</span>] + a[<span class="number">2</span>];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">3</span>; i&lt;=n; i++) &#123;</span><br><span class="line">        <span class="keyword">auto</span> [w, d] = q.<span class="built_in">top</span>();</span><br><span class="line">        q.<span class="built_in">pop</span>();</span><br><span class="line">        res += w * ((d<span class="number">+1</span>)*(d<span class="number">+1</span>) - d*d);</span><br><span class="line">        res += a[i];</span><br><span class="line">        q.<span class="built_in">push</span>(&#123;a[i], <span class="number">1</span>&#125;);</span><br><span class="line">        q.<span class="built_in">push</span>(&#123;w, d<span class="number">+1</span>&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; res &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cout &lt;&lt; fixed &lt;&lt; <span class="built_in">setprecision</span>(<span class="number">10</span>);</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="number">0</span>);cout.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">    <span class="built_in">solve</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="e-é¥¥é¥¿ä¹‹å¢™"><a class="markdownIt-Anchor" href="#e-é¥¥é¥¿ä¹‹å¢™"></a> E é¥¥é¥¿ä¹‹å¢™</h2><p>ã€è´ªå¿ƒã€‘<br />è´ªå¿ƒç­–ç•¥ï¼šæ¯æ¬¡æ‘§æ¯ä»æœ€å·¦è¾¹çš„å°šæœªè¢«ç ´åçš„å¢™çš„å³ç«¯ç‚¹ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>R</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">R_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> å¼€å§‹ç ´åï¼Œå°±èƒ½ä¿è¯æ¯æ¬¡æ‘§æ¯çš„Dåˆ—å°½å¯èƒ½å¾—é å³ï¼Œä¹Ÿå°±èƒ½å°½å¯èƒ½å¤šåœ°è¦†ç›–å³ä¾§çš„å¢™ã€‚<br />æ¢å¥è¯è¯´ï¼Œæ¯æ¬¡åœ¨æœªæ‘§æ¯çš„ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>L</mi><mo separator="true">,</mo><mi>R</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(L, R)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">L</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mclose">)</span></span></span></span> å¯¹ä¸­æ‰¾ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span></span></span></span> æœ€å°çš„æ¥æ‰“ã€‚<br />é‚£ä¹ˆåªéœ€è¦ï¼Œæœ€å¼€å§‹å°±æŒ‰ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span></span></span></span> æ¥æ’åºï¼Œç„¶åä»å‰å¾€åéå†å°±è¡Œã€‚<br />ä»£ç å¦‚ä¸‹ï¼Œè¯¦ç»†è¿‡ç¨‹å¯çœ‹æ³¨é‡Šï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pii pair<span class="string">&lt;int, int&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pdd pair<span class="string">&lt;double, double&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pll pair<span class="string">&lt;ll, ll&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> debug(x) cerr &lt;&lt; #x &lt;&lt; <span class="string">&quot;: &quot;</span> &lt;&lt; x &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> endl <span class="string">&#x27;\n&#x27;</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">unsigned</span> <span class="type">long</span> <span class="type">long</span> ull;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> n, d;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; d;</span><br><span class="line">    vector&lt;pii&gt; a;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>; i&lt;=n; i++) &#123;</span><br><span class="line">        <span class="type">int</span> l, r;</span><br><span class="line">        cin &gt;&gt; l &gt;&gt; r;</span><br><span class="line">        a.<span class="built_in">push_back</span>(&#123;l, r&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æ ¹æ®å³è¾¹ç•Œä»å°åˆ°å¤§æ’åº</span></span><br><span class="line">    <span class="built_in">sort</span>(a.<span class="built_in">begin</span>(), a.<span class="built_in">end</span>(), [&amp;](pii x, pii y) &#123;</span><br><span class="line">        <span class="keyword">return</span> x.second &lt; y.second;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="type">int</span> R = <span class="number">0</span>, res = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">// Rä»£è¡¨å½“å‰æ‹³å¤´å·²ç»è¦†ç›–åŒºåŸŸçš„æœ€å³è¾¹çš„ä½ç½®</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> [l, r]: a) &#123;</span><br><span class="line">        <span class="keyword">if</span>(l &lt;= R) <span class="keyword">continue</span>; <span class="comment">// l&lt;=R æ„å‘³ç€å·²ç»è¢«æ‰“å€’äº†</span></span><br><span class="line">        <span class="comment">// å¦åˆ™å°±æ˜¯æ²¡è¢«æ‰“å€’</span></span><br><span class="line">        <span class="comment">// é‚£ä¹ˆæ­¤æ—¶çš„rå°±æ˜¯æˆ‘ä»¬è¦é€‰çš„æœªæ‘§æ¯çš„å¢™é‡Œæœ€å°çš„r</span></span><br><span class="line">        res ++; <span class="comment">// ä»rå¼€å§‹æ‰“ä¸€æ‹³ï¼</span></span><br><span class="line">        R = r + d - <span class="number">1</span>; <span class="comment">// å½“å‰è¦†ç›–åŒºåŸŸæ‰©å±•åˆ°råé¢dä½ </span></span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; res &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cout &lt;&lt; fixed &lt;&lt; <span class="built_in">setprecision</span>(<span class="number">10</span>);</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="number">0</span>);cout.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">    <span class="built_in">solve</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="f-fire_limeçš„3-or-2é—®é¢˜"><a class="markdownIt-Anchor" href="#f-fire_limeçš„3-or-2é—®é¢˜"></a> F Fire_Limeçš„*3 or /2é—®é¢˜</h2><p>ã€æ€ç»´ã€‘ã€æ•°å­¦ã€‘<br />è¿™ç§é¢˜å…¶å®ä¹Ÿç®—åˆé˜¶çš„è¯ˆéª—é¢˜ï¼ŒICPCå…¶å®è¿˜æœ‰å¾ˆå¤šå¾ˆæ™ºæ…§çš„è¯ˆéª—é¢˜ï¼ˆä¹Ÿéå¸¸æœ‰æ„æ€ï¼‰ã€‚</p><p>è¿‡ç¨‹æè¿™ä¹ˆå¤æ‚ï¼Œå…¶å®*3æ˜¯ä¸ä¼šå¢åŠ å› æ•°åˆ†è§£å2çš„ä¸ªæ•°çš„ã€‚<br />æ‰€ä»¥æˆ‘ä»¬åªéœ€è¦æ±‚å‡ºï¼Œè¿™äº›æ•°é‡Œä¸€å…±æœ‰å¤šå°‘ä¸ªå› å­2å¯ä»¥æ¥é™¤å°±okäº†ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pii pair<span class="string">&lt;int, int&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pdd pair<span class="string">&lt;double, double&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pll pair<span class="string">&lt;ll, ll&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> debug(x) cerr &lt;&lt; #x &lt;&lt; <span class="string">&quot;: &quot;</span> &lt;&lt; x &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> endl <span class="string">&#x27;\n&#x27;</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">unsigned</span> <span class="type">long</span> <span class="type">long</span> ull;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>; i&lt;=n; i++) &#123;</span><br><span class="line">        <span class="type">int</span> a;</span><br><span class="line">        cin &gt;&gt; a;</span><br><span class="line">        <span class="keyword">while</span>(a % <span class="number">2</span> == <span class="number">0</span>) &#123; <span class="comment">// è¿˜æœ‰å› æ•°2å°±é™¤</span></span><br><span class="line">            a /= <span class="number">2</span>;</span><br><span class="line">            res ++;</span><br><span class="line">        &#125; </span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; res &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="g-fire_limeçš„æ‰“å°æœº"><a class="markdownIt-Anchor" href="#g-fire_limeçš„æ‰“å°æœº"></a> G Fire_Limeçš„æ‰“å°æœº</h2><p>ã€è´ªå¿ƒã€‘ã€æ¨¡æ‹Ÿã€‘<br />éªŒé¢˜çš„æ—¶å€™ç›®æµ‹Gçš„åšæ³•åº”è¯¥æ˜¯æ¯”è¾ƒå¤šçš„ï¼Œä½†æœ¬è´¨å…¶å®å·®ä¸å¤šã€‚æˆ‘ä¹Ÿæ²¡è€ƒè™‘å…¶ä»–åšæ³•ï¼Œè¿™é‡Œå°±ç»™ä¸€ç§å¥½ç†è§£çš„åšæ³•å§ï¼š<br />é¦–å…ˆï¼Œæˆ‘ä»¬æƒ³<strong>å°½å¯èƒ½åœ°çœæ—¶</strong>ï¼Œé‚£å°±è¦å°½å¯èƒ½<strong>æœ€å¤§åŒ–æ¯æ¬¡å³ç§»æ‰€æ‰“å°çš„æ•°</strong>ã€‚</p><p>ç„¶åè§„åˆ™ä¸Šï¼Œæ‰“å°æœºæ‰“å°äº† <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi></mrow><annotation encoding="application/x-tex">a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">a</span></span></span></span> ï¼Œé‚£ä¹ˆä¸‹ä¸€æ¬¡å°±åªèƒ½æ‰“å° <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">a + 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>ï¼Œéƒ½æ²¡æœ‰å…¶ä»–æ–¹æ¡ˆå¯é€‰ã€‚é‚£å…¶å®æœ€å¤§åŒ–æ¯æ¬¡æ‰“å°çš„æ–¹æ¡ˆæ˜¯æ˜¾ç„¶ä¸”å›ºå®šçš„ï¼Œå°±æ˜¯<strong>æ¯æ¬¡é‡åˆ°ä¸Šä¸€ä¸ªæ•° <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">+</span><span class="mord">1</span></span></span></span> å°±æ‰“å°</strong>ï¼Œç›´åˆ°æ— æ•°å¯å°è€Œè¿”å›ã€‚</p><blockquote><p>è¿™é‡Œæœ‰ä¸ªè¯¯åŒºå°±æ˜¯è€ƒè™‘åˆ°DPï¼Œä½†å…¶å®æ¯æ¬¡è½¬ç§»åªèƒ½åˆ° <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">a+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span> ï¼Œè½¬ç§»ç»“æœæ˜¯å›ºå®šçš„ï¼Œæ²¡å¿…è¦DPã€‚<br />æ‹“å±•ï¼šè¿™é¢˜å†åŠ ç‚¹éš¾åº¦å¯ä»¥æ”¹ä¸ºï¼šâ€œæ¯æ¬¡æ‰“å°èƒ½æ‰“å°æ¯”ä¸Šä¸€ä¸ªæ•°å­—æ›´å¤§çš„æ•°â€ï¼Œä¾‹å¦‚æ‰“å°å‡ºæ•°å­— &quot;1&quot;ä¹‹åï¼Œå¯ä»¥æ‰“å°2,3,4â€¦,nã€‚<br />è¿™æ ·å°±æ˜¯ä¸€é“å®¶å–»æˆ·æ™“çš„ç»å…¸DPæ¨¡å‹äº†ã€‚</p></blockquote><p>é‚£ä¹ˆå›è¿‡æ¥ï¼Œè¿™ä¸ªé€»è¾‘ç”¨ä»£ç è¦æ€ä¹ˆå®ç°å‘¢ï¼Ÿ<br />å¯¹äºä¸€ä¸ªæ•° <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi></mrow><annotation encoding="application/x-tex">a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">a</span></span></span></span> è€Œè¨€ï¼Œåªè¦ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>âˆ’</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">a - 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span> åœ¨å‰é¢å‡ºç°è¿‡ï¼Œæˆ‘ä»¬åœ¨ æ‰“å° <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>âˆ’</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">a - 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span> çš„é‚£ä¸€è½®å°±å¯ä»¥æŠŠ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi></mrow><annotation encoding="application/x-tex">a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">a</span></span></span></span> æ‰“å°äº†ï¼Œä¸éœ€è¦ä»˜å‡ºé¢å¤–çš„ä»£ä»·ã€‚åä¹‹ï¼Œå°±åªèƒ½æ–°å¼€ä¸€è½®ï¼Œä» <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi></mrow><annotation encoding="application/x-tex">a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">a</span></span></span></span> å¼€å§‹æ‰“å°ã€‚</p><p>æ€ä¹ˆè®°å½• <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>âˆ’</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">a-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span> æ˜¯å¦åœ¨ $ a $ ä¹‹å‰å‘¢ï¼Ÿä¸€ä¸ªç®€å•çš„åšæ³•æ˜¯ç”¨ <code>STL</code> åº“çš„ set å®¹å™¨ï¼ˆä¸ç”¨ä¸‡èƒ½å¤´çš„è¯ï¼Œéœ€è¦å¼•å…¥setå¤´æ–‡ä»¶ï¼‰ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pii pair<span class="string">&lt;int, int&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pdd pair<span class="string">&lt;double, double&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pll pair<span class="string">&lt;ll, ll&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> debug(x) cerr &lt;&lt; #x &lt;&lt; <span class="string">&quot;: &quot;</span> &lt;&lt; x &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> endl <span class="string">&#x27;\n&#x27;</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">unsigned</span> <span class="type">long</span> <span class="type">long</span> ull;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    set&lt;<span class="type">int</span>&gt; st;</span><br><span class="line">    <span class="type">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>; i&lt;=n; i++) &#123;</span><br><span class="line">        <span class="type">int</span> ai;</span><br><span class="line">        cin &gt;&gt; ai;</span><br><span class="line">        <span class="keyword">if</span>(!st.<span class="built_in">count</span>(ai<span class="number">-1</span>)) res ++;</span><br><span class="line">        st.<span class="built_in">insert</span>(ai);</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; res<span class="number">-1</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸ç”¨setå…¶å®ä¹Ÿå¾ˆç®€å•ï¼Œç”¨ä¸€ä¸ªboolç±»å‹çš„æ•°ç»„ä»£æ›¿å°±è¡Œã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="function">vector&lt;<span class="type">bool</span>&gt; <span class="title">p</span><span class="params">(n<span class="number">+1</span>, <span class="literal">false</span>)</span></span>;</span><br><span class="line">    <span class="type">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>; i&lt;=n; i++) &#123;</span><br><span class="line">        <span class="type">int</span> ai;</span><br><span class="line">        cin &gt;&gt; ai;</span><br><span class="line">        <span class="keyword">if</span>(!p[ai<span class="number">-1</span>]) res ++;</span><br><span class="line">        p[ai] = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; res<span class="number">-1</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="h-æˆ‘çˆ±ynu-icpcæ ¡é˜Ÿ"><a class="markdownIt-Anchor" href="#h-æˆ‘çˆ±ynu-icpcæ ¡é˜Ÿ"></a> H æˆ‘çˆ±YNU-ICPCæ ¡é˜Ÿ</h2><p>ã€ç­¾åˆ°ã€‘ã€æ¨¡æ‹Ÿã€‘orã€æ•°å­¦ã€‘<br />è¿™é“é¢˜çš„éš¾ç‚¹å…¶å®å°±åœ¨äºæœ‰éš”å¤©çš„ï¼Œå¦‚æœè¦æ¯”å¤§å°ï¼Œé‚£åº”è¯¥ç»Ÿä¸€å‚è€ƒç³»ã€‚<br />åšæ³•å¾ˆå¤šå“ˆï¼Œä¸ºäº†ä¿è¯æ­£ç¡®æ€§å…¶å®å¯ä»¥å¤šå†™å‡ ä¸ªifæ¥æ¨¡æ‹Ÿä¸€ä¸‹æ—¶é—´ã€‚èŠ±ç‚¹æ—¶é—´æ€»èƒ½åšå‡ºæ¥çš„ï¼Œæ‰€ä»¥å®šä½æ˜¯ç­¾åˆ°ã€‚<br />ä»‹ç»ä¸€ä¸‹æˆ‘çš„åšæ³•ï¼š<br />é¦–å…ˆéœ€è¦æ˜ç¡®ä¸€ç‚¹ï¼Œå¯¹ä¸€ä¸ªæ—¶é—´+24æ˜¯ä¸ä¼šæ”¹å˜å®ƒæœ¬æ¥çš„æ„ä¹‰çš„ã€‚<br />æˆ‘ä»¬ä¸å¦¨å°±æŠŠ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>b</mi></mrow><annotation encoding="application/x-tex">b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal">b</span></span></span></span> ä½œä¸ºæœ€æ—©çš„æ—¶é—´ï¼Œå‡¡æ˜¯æ¯”bå°çš„éƒ½åŠ 24.<br />ç„¶åçœ‹çœ‹ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi></mrow><annotation encoding="application/x-tex">a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">a</span></span></span></span> æ˜¯å¦åœ¨ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mi>b</mi><mo separator="true">,</mo><mi>c</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[b, c]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathnormal">b</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">c</span><span class="mclose">]</span></span></span></span> èŒƒå›´å†…å³å¯ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> a, b, c;</span><br><span class="line">    cin &gt;&gt; a &gt;&gt; b &gt;&gt; c;</span><br><span class="line">    <span class="keyword">if</span>(c &lt; b) c += <span class="number">24</span>;</span><br><span class="line">    <span class="keyword">if</span>(a &lt; b) a += <span class="number">24</span>;</span><br><span class="line">    <span class="keyword">if</span>(a &gt;= b &amp;&amp; a &lt;= c) cout &lt;&lt; <span class="string">&quot;No&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">else</span> cout &lt;&lt; <span class="string">&quot;I love YNU-ICPC team&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="i-é‡å­å®‡å®™çš„è¿æ–°èµ›"><a class="markdownIt-Anchor" href="#i-é‡å­å®‡å®™çš„è¿æ–°èµ›"></a> I é‡å­å®‡å®™çš„è¿æ–°èµ›</h2><p>ã€ç»„åˆæ•°å­¦ã€‘ã€æ¨å¼å­ã€‘</p><p>è€ƒäº†è€ƒé«˜ä¸­æ•°å­¦çš„çŸ¥è¯†ï¼Œæ•°ç«ç”Ÿåº”è¯¥æ˜¯èƒ½æ‹¿æçš„<br />ä»é«˜ä¸­è¯¾æœ¬ä¸Šæœ‰çš„ä¸¤ä¸ªå…¬å¼å…¥æ‰‹<br />æ€§è´¨1: $ C_{n}^{m} =\frac{n!}{m!(n-m)!} $</p><p>æ€§è´¨2: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>C</mi><mi>n</mi><mn>1</mn></msubsup><mo>+</mo><msubsup><mi>C</mi><mi>n</mi><mn>2</mn></msubsup><mo>+</mo><msubsup><mi>C</mi><mi>n</mi><mn>3</mn></msubsup><mo>+</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo>+</mo><msubsup><mi>C</mi><mi>n</mi><mi>n</mi></msubsup><mo>=</mo><msup><mn>2</mn><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">C_{n}^{1}+C_{n}^{2}+ C_{n}^{3}+ ... +C_{n}^{n}= 2^{n}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.061108em;vertical-align:-0.247em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.061108em;vertical-align:-0.247em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.061108em;vertical-align:-0.247em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.93033em;vertical-align:-0.247em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-2.4530000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.664392em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span></span></span></span>   <strong>â‘ </strong></p><p>ç”±æ€§è´¨1 å¯ä»¥æ¨å‡ºï¼š$m Ã— C_{n}^{m} = n Ã— C_{n-1}^{m-1} $ ï¼ˆå±•å¼€äº†çº¦åˆ†ä¸€ä¸‹å°±è¡Œï¼‰</p><p>é‚£ä¹ˆç»“åˆæ€§è´¨2å¯å¾—ï¼š<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><msubsup><mi>C</mi><mi>n</mi><mn>1</mn></msubsup><mo>+</mo><mn>2</mn><msubsup><mi>C</mi><mi>n</mi><mn>2</mn></msubsup><mo>+</mo><mn>3</mn><msubsup><mi>C</mi><mi>n</mi><mn>3</mn></msubsup><mo>+</mo><mo>â‹¯</mo><mo>+</mo><mi>n</mi><msubsup><mi>C</mi><mi>n</mi><mi>n</mi></msubsup><mo>=</mo><mi>n</mi><msup><mn>2</mn><mrow><mi>n</mi><mo>âˆ’</mo><mn>1</mn></mrow></msup></mrow><annotation encoding="application/x-tex">1 C_{n}^{1}+2 C_{n}^{2}+3 C_{n}^{3}+\cdots+n C_{n}^{n}=n 2^{n-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.061108em;vertical-align:-0.247em;"></span><span class="mord">1</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.061108em;vertical-align:-0.247em;"></span><span class="mord">2</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.061108em;vertical-align:-0.247em;"></span><span class="mord">3</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="minner">â‹¯</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.93033em;vertical-align:-0.247em;"></span><span class="mord mathnormal">n</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-2.4530000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord mathnormal">n</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span></span></span> ï¼ˆä¸è¿‡è¿™ä¸ªå¼å­æœ¬é¢˜ç”¨ä¸åˆ°ï¼‰</p><p>åˆå› ä¸º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>m</mi><mn>2</mn></msup><mo>Ã—</mo><msubsup><mi>C</mi><mi>n</mi><mi>m</mi></msubsup><mo>=</mo><mi>m</mi><mo>Ã—</mo><mi>n</mi><mo>Ã—</mo><msubsup><mi>C</mi><mrow><mi>n</mi><mo>âˆ’</mo><mn>1</mn></mrow><mrow><mi>m</mi><mo>âˆ’</mo><mn>1</mn></mrow></msubsup><mo>=</mo><mi>n</mi><mo>Ã—</mo><msubsup><mi>C</mi><mrow><mi>n</mi><mo>âˆ’</mo><mn>1</mn></mrow><mrow><mi>m</mi><mo>âˆ’</mo><mn>1</mn></mrow></msubsup><mo>+</mo><mi>n</mi><mo>Ã—</mo><mo stretchy="false">(</mo><mi>m</mi><mo>âˆ’</mo><mn>1</mn><mo stretchy="false">)</mo><mo>Ã—</mo><msubsup><mi>C</mi><mrow><mi>n</mi><mo>âˆ’</mo><mn>1</mn></mrow><mrow><mi>m</mi><mo>âˆ’</mo><mn>1</mn></mrow></msubsup></mrow><annotation encoding="application/x-tex">m^2 Ã— C_{n}^{m} = m Ã— n Ã— C_{n-1}^{m-1} =  n Ã— C_{n-1}^{m-1}  + n Ã— (m-1) Ã— C_{n-1}^{m-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.93033em;vertical-align:-0.247em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-2.4530000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.178878em;vertical-align:-0.324639em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.854239em;"><span style="top:-2.433692em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.1031310000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.324639em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.178878em;vertical-align:-0.324639em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.854239em;"><span style="top:-2.433692em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.1031310000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.324639em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.178878em;vertical-align:-0.324639em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.854239em;"><span style="top:-2.433692em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.1031310000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.324639em;"><span></span></span></span></span></span></span></span></span></span></p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>1</mn><mn>2</mn></msup><msubsup><mi>C</mi><mi>n</mi><mn>1</mn></msubsup><mo>+</mo><msup><mn>2</mn><mn>2</mn></msup><msubsup><mi>C</mi><mi>n</mi><mn>2</mn></msubsup><mo>+</mo><msup><mn>3</mn><mn>2</mn></msup><msubsup><mi>C</mi><mi>n</mi><mn>3</mn></msubsup><mo>+</mo><mo>â‹¯</mo><mo>+</mo><msup><mi>n</mi><mn>2</mn></msup><msubsup><mi>C</mi><mi>n</mi><mi>n</mi></msubsup><mo>=</mo><mi>n</mi><msup><mn>2</mn><mrow><mi>n</mi><mo>âˆ’</mo><mn>1</mn></mrow></msup><mo>+</mo><mi>n</mi><mo>Ã—</mo><mo stretchy="false">(</mo><mi>n</mi><mo>âˆ’</mo><mn>1</mn><mo stretchy="false">)</mo><mo>Ã—</mo><msup><mn>2</mn><mrow><mi>n</mi><mo>âˆ’</mo><mn>2</mn></mrow></msup><mo>=</mo><mi>n</mi><mo stretchy="false">(</mo><mi>n</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo><msup><mn>2</mn><mrow><mi>n</mi><mo>âˆ’</mo><mn>2</mn></mrow></msup></mrow><annotation encoding="application/x-tex">1^{2} C_{n}^{1}+2^{2} C_{n}^{2}+3^{2} C_{n}^{3}+\cdots+n^{2} C_{n}^{n}= n 2^{n-1} +n Ã—(n-1)Ã—2^{n-2} =n(n+1) 2^{n-2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.061108em;vertical-align:-0.247em;"></span><span class="mord"><span class="mord">1</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.061108em;vertical-align:-0.247em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.061108em;vertical-align:-0.247em;"></span><span class="mord"><span class="mord">3</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="minner">â‹¯</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.061108em;vertical-align:-0.247em;"></span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-2.4530000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord mathnormal">n</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">2</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">n</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span> <strong>â‘¡</strong></p><hr /><p>ä»¥ä¸Šæ˜¯ç»“è®ºæ¨å¯¼éƒ¨åˆ†</p><p>è¿™é“é¢˜ï¼Œæˆ‘ä»¬å®é™…éœ€è¦æ±‚çš„æ˜¯:</p><p><img src="https://picbed.octalzhihao.top/img/202412062129263.png" alt="" /></p><p>å°†â‘ â‘¡å¼ä»£å…¥ï¼šç®€åŒ–ç­”æ¡ˆä¸º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>n</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo><mo>Ã—</mo><mi>n</mi><mi mathvariant="normal">/</mi><mn>4</mn></mrow><annotation encoding="application/x-tex">(n+1)Ã—n / 4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">n</span><span class="mord">/</span><span class="mord">4</span></span></span></span>ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span> å¯æ±‚å¾—ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pii pair<span class="string">&lt;int, int&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pdd pair<span class="string">&lt;double, double&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pll pair<span class="string">&lt;ll, ll&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> debug(x) cerr &lt;&lt; #x &lt;&lt; <span class="string">&quot;: &quot;</span> &lt;&lt; x &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> endl <span class="string">&#x27;\n&#x27;</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">unsigned</span> <span class="type">long</span> <span class="type">long</span> ull;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    ll res = (n<span class="number">+1</span>)*n / <span class="number">4</span>;</span><br><span class="line">    cout &lt;&lt; res &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³•é¢˜è§£ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ¯”èµ›é¢˜è§£ </tag>
            
            <tag> ç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Šæ•°æ®åº“è®¾è®¡ä¸å¼€å‘ã€‹é˜…è¯»ç¬”è®°</title>
      <link href="/posts/16532.html"/>
      <url>/posts/16532.html</url>
      
        <content type="html"><![CDATA[<h1 id="chp1-æ•°æ®åº“åœ¨ç”µå­å•†åŠ¡ä¸­çš„è§’è‰²"><a class="markdownIt-Anchor" href="#chp1-æ•°æ®åº“åœ¨ç”µå­å•†åŠ¡ä¸­çš„è§’è‰²"></a> $chp1 æ•°æ®åº“åœ¨ç”µå­å•†åŠ¡ä¸­çš„è§’è‰²</h1><h2 id="æœ¬ä¹¦çš„ç»„ç»‡"><a class="markdownIt-Anchor" href="#æœ¬ä¹¦çš„ç»„ç»‡"></a> æœ¬ä¹¦çš„ç»„ç»‡</h2><p>ç¬¬2ç« åˆ°ç¬¬5ç« è®¨è®ºæ•°æ®åº“è®¾è®¡ã€‚</p><p>ä½†æ˜¯ï¼Œåœ¨æ·±å…¥æ•°æ®åº“è®¾è®¡ä¹‹å‰ï¼Œæœ‰å¿…è¦äº†è§£æ•°æ®åº“çš„å¼€å‘ç¯å¢ƒå’Œå…³ç³»æ•°æ®åº“è®¾è®¡çš„ä¸€äº›ç†è®ºçŸ¥è¯†ã€‚</p><ul><li>ç¬¬2ç« ä»‹ç»æ•°æ®åº“ç¯å¢ƒï¼Œå®šä¹‰äº†ä¸€äº›é‡è¦çš„æœ¯è¯­å¹¶æ¦‚æ‹¬è®ºè¿°äº†å…³ç³»æ•°æ®åº“ç†è®ºã€‚</li></ul><p>æˆ‘ä»¬å¯å°†æ•°æ®åº“è®¾è®¡åˆ†ä¸ºä¸¤å¤§ç±»ï¼Œ<strong>æ¦‚å¿µè®¾è®¡å’Œé€»è¾‘è®¾è®¡</strong>ã€‚å½“è¿›è¡Œæ¦‚å¿µè®¾è®¡æ—¶ï¼Œæ‚¨ä¸å¿…è€ƒè™‘å‰é¢æåˆ°çš„å…³ç³»æ•°æ®åº“çš„è§„åˆ™ã€‚</p><p>æ¦‚å¿µè®¾è®¡çš„å®ç°æ˜¯è‡ªç”±çš„ï¼Œè¿™æ„å‘³ç€å®ç°çš„ç²¾ç¡®æ„ä¹‰æ˜¯æ— å…³ç´§è¦çš„ã€‚</p><p>åœ¨<strong>æ¦‚å¿µè®¾è®¡æœŸé—´æ‚¨æ‰€è¦è€ƒè™‘çš„ä»…ä»…æ˜¯æ•°æ®åº“å¿…é¡»å­˜å‚¨æ•°æ®çš„å®ä½“</strong>ï¼Œå¿…é¡»å­˜å‚¨ä»€ä¹ˆæ•°æ®ï¼Œä»¥åŠå®ä½“ä¹‹é—´æ˜¯å¦‚ä½•ç›¸äº’å…³è”çš„ã€‚</p><ul><li><p>ç¬¬3ç« å’Œç¬¬5ç« ä»‹ç»çš„æ˜¯æ¦‚å¿µè®¾è®¡ã€‚</p></li><li><p>ç¬¬4ç« è®¨è®ºçš„é‡è¦ä¸»é¢˜æ˜¯è§„èŒƒåŒ–ï¼Œå®ƒæ˜¯ç”¨æ¥ç¡®ä¿æ•°æ®åº“çš„è®¾è®¡ç¬¦åˆå…³ç³»è§„åˆ™ã€‚è¿èƒŒè¿™äº›è§„åˆ™ä¼šå¯¼è‡´æ•°æ®çš„ä¸ä¸€è‡´ã€‚</p></li></ul><p>ä»‹ç»æ•°æ®åº“å®ç°å’Œä½¿ç”¨çš„ç« èŠ‚æ˜¯æˆå¯¹å‡ºç°çš„ï¼Œè¿™æ˜¯æ ¹æ®å®ç°æ•°æ®åº“è®¾è®¡æ‰€ä½¿ç”¨çš„æ•°æ®åº“ç®¡ç†ç³»ç»Ÿç»„ç»‡çš„ã€‚</p><ul><li>ç¬¬6ç« è®¨è®ºå¦‚ä½•ç”¨ Oracleåˆ›å»ºæ•°æ®åº“è¡¨ã€‚ç¬¬6ç« è¿˜åŒ…æ‹¬å¯¹ Oracle è¡¨ä¸­æ•°æ®çš„æ’å…¥ã€åˆ é™¤å’Œæ›´æ–°ã€‚</li><li>ç¬¬7ç« æè¿°å¦‚ä½•ç”¨ Oracleç‰ˆæœ¬çš„ç»“æ„æŸ¥è¯¢è¯­è¨€ï¼ˆstructured querylanguageï¼ŒSQLï¼‰ä»æ•°æ®åº“ä¸­æ£€ç´¢æ•°æ®ã€‚</li><li>ç¬¬8ç« å’Œç¬¬9ç« çš„å†…å®¹ä¸æ­¤ç›¸ä¼¼ï¼Œä½†ä½¿ç”¨çš„æ˜¯Microsoft Accessä½œä¸ºæ•°æ®åº“ç®¡ç†ç³»ç»Ÿã€‚</li><li>ç¬¬10å’Œç¬¬11ç« ä»‹ç»çš„æ˜¯ä½¿ç”¨ Microsoft SQL Serveråˆ›å»ºå’Œä½¿ç”¨æ•°æ®åº“ã€‚æ‚¨çš„è€å¸ˆå¯èƒ½ä»…è¦æ±‚å…¶ä¸­çš„ä¸€å¯¹ç« èŠ‚ï¼Œä½†æ‚¨è‡ªå·±ä¹Ÿè®¸æ„¿æ„æµè§ˆä»‹ç»å…¶ä»–æ•°æ®åº“ç®¡ç†ç³»ç»Ÿçš„ç« èŠ‚ã€‚</li></ul><p>é€šè¿‡ Webå‰ç«¯ï¼ˆWebfront endsï¼‰å¯¹æ•°æ®åº“çš„è®¿é—®é€æ¸å¢å¤šã€‚æ¢è¨€ä¹‹ï¼Œæ›´å¤šçš„ä¼ä¸šå…è®¸ç”¨æˆ·é€šè¿‡ Web ç½‘é¡µæ£€ç´¢å’Œæ“çºµæ•°æ®ï¼Œè€Œä¸æ˜¯é€šè¿‡ä½¿ç”¨ SQL ç›´æ¥ä¸æ•°æ®åº“ç®¡ç†ç³»ç»Ÿè¿›è¡Œäº¤äº’ã€‚</p><ul><li>ç¬¬12ç« æè¿°ä½¿ç”¨ Web ç½‘é¡µè®¿é—®æ•°æ®ã€‚</li><li>ç¬¬13ç« è®¨è®ºé€šè¿‡Webé¡µé¢æ›´æ–°æ•°æ®åº“ä¸­çš„æ•°æ®ã€‚</li></ul><h2 id="åŸºç¡€æœ¯è¯­å’Œæ¦‚å¿µ"><a class="markdownIt-Anchor" href="#åŸºç¡€æœ¯è¯­å’Œæ¦‚å¿µ"></a> åŸºç¡€æœ¯è¯­å’Œæ¦‚å¿µ</h2><blockquote><p>ä¼ä¸šç³»ç»Ÿçš„å››ä¸ªç»„æˆéƒ¨åˆ†ï¼šç½‘ç»œã€ç¡¬ä»¶ã€è½¯ä»¶å’Œå†…å®¹ã€‚</p></blockquote><p><img src="https://picbed.octalzhihao.top/img/202410142006570.png" alt="" /></p><p><strong>Database system</strong> <strong>with</strong> <strong>multiple user views</strong></p><img src="https://picbed.octalzhihao.top/img/202410142006571.png" height=300 align=left><div style="clear: both;"></div><h1 id="chp2-å…³ç³»ç†è®º"><a class="markdownIt-Anchor" href="#chp2-å…³ç³»ç†è®º"></a> $chp2 å…³ç³»ç†è®º</h1><ul><li>æè¿°å…³ç³»æ¨¡å‹ã€‚</li><li>è¯†åˆ«å®ä½“å…³ç³»å›¾ï¼ˆERDï¼‰ä¸­ä½¿ç”¨çš„ç¬¦å·ã€‚</li><li>å®šä¹‰å’Œé€‰æ‹©ä¸»é”®ã€‚</li><li>è¯´æ˜å¤–é”®çš„èŒè´£ã€‚</li><li>è¯†åˆ«å’Œåº”ç”¨å®Œæ•´æ€§è§„åˆ™ã€‚</li><li>è¯´æ˜å…³ç³»æ•°æ®åº“çš„ä¼˜ç‚¹ã€‚</li></ul><h2 id="22-å…³ç³»æ¨¡å‹"><a class="markdownIt-Anchor" href="#22-å…³ç³»æ¨¡å‹"></a> 2.2 å…³ç³»æ¨¡å‹</h2><h3 id="221-å…³ç³»æ•°æ®åº“ç®¡ç†ç³»ç»Ÿrdbms"><a class="markdownIt-Anchor" href="#221-å…³ç³»æ•°æ®åº“ç®¡ç†ç³»ç»Ÿrdbms"></a> 2.2.1 å…³ç³»æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼ˆRDBMSï¼‰</h3><p><img src="https://picbed.octalzhihao.top/img/202410142006572.png" alt="image-20241014114048937" /></p><h3 id="222-æ•°æ®åº“ç®¡ç†å‘˜dba"><a class="markdownIt-Anchor" href="#222-æ•°æ®åº“ç®¡ç†å‘˜dba"></a> 2.2.2 æ•°æ®åº“ç®¡ç†å‘˜ï¼ˆDBAï¼‰</h3><p><img src="https://picbed.octalzhihao.top/img/202410142006573.png" alt="image-20241014114200375" /></p><h2 id="23-å®ä½“å…³ç³»å›¾erå›¾"><a class="markdownIt-Anchor" href="#23-å®ä½“å…³ç³»å›¾erå›¾"></a> 2.3 å®ä½“å…³ç³»å›¾ï¼ˆERå›¾ï¼‰</h2><p>å±æ€§åœ¨æ¯ä¸ªè¡¨ä¸­è¢«å»ºæ¨¡ä¸ºå­—æ®µï¼Œå­—æ®µåœ¨è¡¨ä¸­åˆ—å‡ºã€‚</p><h3 id="ä¸€å¯¹å¤šå…³ç³»"><a class="markdownIt-Anchor" href="#ä¸€å¯¹å¤šå…³ç³»"></a> ä¸€å¯¹å¤šå…³ç³»</h3><p><img src="https://picbed.octalzhihao.top/img/202410142006574.png" alt="image-20241014114320769" /></p><h3 id="å¤šå¯¹å¤šå…³ç³»"><a class="markdownIt-Anchor" href="#å¤šå¯¹å¤šå…³ç³»"></a> å¤šå¯¹å¤šå…³ç³»</h3><p><img src="https://picbed.octalzhihao.top/img/202410142006575.png" alt="image-20241014114424107" /></p><h3 id="231-ä¸»é”®"><a class="markdownIt-Anchor" href="#231-ä¸»é”®"></a> 2.3.1 ä¸»é”®</h3><blockquote><p>ä¸»é”®çš„ç‰¹å¾ï¼šå”¯ä¸€çš„ã€æœ€å°çš„ã€éç©ºã€ä¸å¯æ›´æ–°çš„<br />â˜†åœ¨ä¸»é”®çš„å”¯ä¸€æ€§å’Œæœ€å°åŒ–ç‰¹æ€§ä¹‹é—´å­˜åœ¨å¯¹ç«‹å…³ç³»ã€‚åœ¨ä¸»é”®ä¸­åŒ…å«è¶Šå¤šçš„å­—æ®µï¼Œå”¯ä¸€çš„æœºä¼šå°±æ›´å¤§ã€‚<br />ä½†æ˜¯ï¼Œæœ€å°åŒ–ç‰¹æ€§è¦æ±‚è®¾è®¡è€…æ‰¾åˆ°æœ€å°çš„å­—æ®µé›†åˆæ¥å½¢æˆä¸€ä¸ªå”¯ä¸€é”®ã€‚</p></blockquote><p>æˆ‘ä»¬æ›´æ„¿æ„ä½¿ç”¨ç”±ä¸€ä¸ªå­—æ®µæ„æˆçš„ä¸»é”®ï¼Œè¿™æ˜¯ç”±äºå®ƒçš„ç®€å•æ€§ã€‚ä½†æ˜¯ï¼Œæœ‰æ—¶éœ€è¦è¶…è¿‡ä¸€ä¸ªå­—æ®µæ„æˆä¸»é”®ã€‚</p><p>ç°æœ‰å­—æ®µ or è®¡ç®—æœºç”Ÿæˆï¼š</p><p><img src="https://picbed.octalzhihao.top/img/202410142006576.png" alt="image-20241014114820991" /></p><h3 id="232-å¤–é”®"><a class="markdownIt-Anchor" href="#232-å¤–é”®"></a> 2.3.2 å¤–é”®</h3><p><strong>ä¾èµ–è¡¨</strong>ï¼ˆdependent tableï¼Œä¹Ÿè¢«ç§°ä¸º<strong>å¼±å®ä½“</strong>ï¼ˆweak entity) ï¼‰ï¼Œæ˜¯éœ€è¦ç”¨çˆ¶è¡¨æ ‡è¯†çš„å­è¡¨ã€‚</p><p>ä¾èµ–è¡¨å¸¸å¸¸å°†æºäºçˆ¶è¡¨çš„å¤–é”®ä½œä¸ºä¸»é”®çš„ä¸€éƒ¨åˆ†åˆå¹¶è¿›æ¥ã€‚æ²¡æœ‰çˆ¶è¡¨ï¼Œä¾èµ–è¡¨åœ¨æ•°æ®åº“ä¸­å°±ä¸èƒ½å­˜åœ¨ã€‚</p><p><img src="https://picbed.octalzhihao.top/img/202410142006577.png" alt="image-20241014114938101" /></p><p><strong>å…³è”è¡¨</strong>ï¼ˆassociative tableï¼‰æ˜¯å¤šå¯¹å¤šå…³ç³»ä¸­ä¸¤ä¸ªçˆ¶è¡¨çš„å­è¡¨ã€‚</p><p><img src="https://picbed.octalzhihao.top/img/202410142006578.png" alt="image-20241014115305559" /></p><h3 id="233-æ•°æ®å®Œæ•´æ€§"><a class="markdownIt-Anchor" href="#233-æ•°æ®å®Œæ•´æ€§"></a> 2.3.3 æ•°æ®å®Œæ•´æ€§</h3><p>ç”±äºå…³ç³»æ¨¡å‹ä¾èµ–ä¸»é”®è¯†åˆ«å®ä½“ï¼Œä¾èµ–å¤–é”®åˆ›å»ºå…³ç³»ï¼Œå¿…é¡»ä¿æŒé”®çš„å®Œæ•´æ€§ï¼ˆæœ‰æ•ˆæ€§ï¼‰ã€‚<br />ç¡®ä¿é”®çš„å®Œæ•´æ€§çš„è§„åˆ™æœ‰ä¸¤æ¡ï¼š<br /><strong>å®ä½“å®Œæ•´æ€§</strong>ï¼šæ¯ä¸ªè¡¨å¿…é¡»æœ‰ä¸€ä¸ªæœ‰æ•ˆçš„ä¸»é”®ã€‚å®ä½“å®Œæ•´æ€§è¦æ±‚è®¾è®¡è€…åœ¨åˆ›å»ºè¡¨æ—¶æŒ‡å®šä¸»é”®ã€‚ä¸å·§çš„æ˜¯ï¼Œå¤§å¤šæ•°æ•°æ®åº“äº§å“ä¸èƒ½éµå®ˆå®ä½“å®Œæ•´æ€§ä¸€ä¸€åªèƒ½è¦æ±‚è®¾è®¡è€…ä¸è¦å¿˜è®°æŒ‡å®šä¸»é”®ã€‚<br /><strong>å‚ç…§å®Œæ•´æ€§</strong>ï¼šæ²¡æœ‰ä¸ç›¸åŒ¹é…çš„å¤–é”®å€¼ã€‚å‚ç…§å®Œæ•´æ€§è¦æ±‚å¤–é”®å€¼ä¸å®ƒä»¬å‚ç…§çš„è¡¨ä¸­çš„å·²æœ‰ä¸»é”®å€¼ç›¸åŒ¹é…ã€‚</p><p>exampleï¼š</p><p><img src="https://picbed.octalzhihao.top/img/202410142006580.png" alt="image-20241014120245510" /></p><blockquote><p>Normalizationçš„å†…å®¹è§chp4</p></blockquote><h2 id="24-æ•°æ®åº“ç±»å‹"><a class="markdownIt-Anchor" href="#24-æ•°æ®åº“ç±»å‹"></a> 2.4 æ•°æ®åº“ç±»å‹</h2><ul><li>å±‚æ¬¡çš„ï¼šIBMåˆ›é€ çš„ä¿¡æ¯ç®¡ç†ç³»ç»Ÿï¼ˆInformation Management Systemï¼ŒIMSï¼‰</li><li>ç½‘çŠ¶çš„ï¼šIDMS</li><li>å…³ç³»çš„ï¼šSQL</li><li>é¢å‘å¯¹è±¡çš„ï¼šç›®å‰ä¸ä¸»æµ</li></ul><h3 id="241-å…³ç³»çš„ä¼˜ç‚¹"><a class="markdownIt-Anchor" href="#241-å…³ç³»çš„ä¼˜ç‚¹"></a> 2.4.1 å…³ç³»çš„ä¼˜ç‚¹</h3><p>å·¥ä¸šä¸Šé‡‡ç”¨å…³ç³»æ•°æ®åº“æ¨¡å‹æ˜¯ç”±äºå®ƒèƒ½ç›¸å½“æœ‰æ•ˆåœ°å¢å¼ºç”Ÿäº§åŠ›ã€‚æˆ‘ä»¬å°†ä¾æ¬¡æ£€éªŒå…³ç³»æ¨¡å‹çš„ä¸‹åˆ—ä¼˜ç‚¹ï¼š</p><ul><li><p>ä¾èµ–äºç›¸å…³è®°å½•ä¹‹é—´çš„é€»è¾‘é“¾æ¥è€Œä¸æ˜¯ç‰©ç†é“¾æ¥ã€‚</p></li><li><p>ä½¿ç”¨çš„æ˜¯ç¬¬å››ä»£è¯­è¨€ã€‚</p></li><li><p>å…è®¸é«˜çº§åˆ«çš„æ•°æ®ç‹¬ç«‹æ€§ã€‚</p></li></ul><h3 id="242-é€»è¾‘é“¾æ¥ä¼˜äºç‰©ç†é“¾æ¥"><a class="markdownIt-Anchor" href="#242-é€»è¾‘é“¾æ¥ä¼˜äºç‰©ç†é“¾æ¥"></a> 2.4.2 é€»è¾‘é“¾æ¥ä¼˜äºç‰©ç†é“¾æ¥</h3><p><strong>åªæœ‰å…³ç³»æ¨¡å‹æ‰ä¸ä¾èµ–ç‰©ç†æŒ‡é’ˆæ¥é“¾æ¥æ•°æ®é¡¹</strong>ã€‚</p><p><strong>æŒ‡é’ˆé“¾æ¥ç›¸å…³çš„è®°å½•</strong>ï¼Œä¾‹å¦‚ï¼Œä¸€ä¸ªæ¼”å‘˜å’Œä¸€ä¸ªæ¼”å‡ºé˜Ÿã€‚</p><p>åœ¨<strong>åŸºäºç‰©ç†æŒ‡é’ˆçš„ç³»ç»Ÿ</strong>ä¸­ï¼Œç¨‹åºå‘˜å¿…é¡»ç¼–å†™è¿‡ç¨‹æ¥è·Ÿè¸ªé“¾æ¥ä»¥æ£€ç´¢ä¿¡æ¯ã€‚</p><p>ç›¸åï¼Œå…³ç³»æ¨¡å‹ä½¿ç”¨çš„æ˜¯é€»è¾‘æŒ‡é’ˆã€‚</p><p>åœ¨<strong>å…³ç³»ç³»ç»Ÿ</strong>ä¸­è¦å°†ä¸€ä¸ªæ¼”å‘˜ä¸ä¸€ä¸ªæ¼”å‡ºé˜Ÿé“¾æ¥èµ·æ¥ï¼Œåªéœ€ç®€å•åœ°å°†å¤–é”®è®°å½•ä¸ç›¸å¯¹åº”çš„ä¸»é”®è¿›è¡ŒåŒ¹é…å°±å¯ä»¥äº†ã€‚</p><h3 id="243-ç¬¬å››ä»£ç¼–ç¨‹è¯­è¨€4gl"><a class="markdownIt-Anchor" href="#243-ç¬¬å››ä»£ç¼–ç¨‹è¯­è¨€4gl"></a> 2.4.3 ç¬¬å››ä»£ç¼–ç¨‹è¯­è¨€ï¼ˆ4GLï¼‰</h3><p>ç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€ï¼ˆSQLï¼‰æ˜¯å…³ç³»æ•°æ®åº“ç®¡ç†ç³»ç»Ÿç”¨äºæ“çºµæ•°æ®çš„è¯­è¨€ã€‚</p><p><strong>ç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€æ˜¯ç¬¬å››ä»£è¯­è¨€</strong>ã€‚</p><p>ç¬¬ä¸€ä»£è®¡ç®—æœºè¯­è¨€æ˜¯äºŒè¿›åˆ¶ä»£ç ã€‚</p><p>åœ¨ç¬¬äºŒä»£è¯­è¨€ä¸­é€šè¿‡æ±‡ç¼–è¯­è¨€å¯å¾—åˆ°äºŒè¿›åˆ¶ä»£ç ï¼Œæ±‡ç¼–è¯­è¨€æ˜¯äºŒè¿›åˆ¶ä»£ç çš„æ–‡æœ¬ç¼©å†™ã€‚</p><p>ç¬¬ä¸‰ä»£è¯­è¨€åŒ…æ‹¬ç¼–ç¨‹è¯­è¨€ï¼Œä¾‹å¦‚COBOLã€Cã€Fortranã€Pascalã€Javaã€JavaScript å’ŒVBScriptã€‚</p><p>ç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€å…‹æœäº†3GLçš„ä¸¤ä¸ªçº¦æŸã€‚å®ƒæ˜¯<strong>éè¿‡ç¨‹æ€§çš„</strong>ï¼ˆnonproceduralï¼‰å’Œ <strong>é¢å‘è¡¨çš„</strong>ï¼ˆtable orientedï¼‰ã€‚</p><blockquote><p><strong>â€œéè¿‡ç¨‹æ€§çš„â€</strong> æ˜¯æŒ‡ç¼–ç¨‹äººå‘˜åªéœ€æŒ‡å®šæœŸæœ›çš„ç»“æœï¼Œè€Œä¸éœ€æŒ‡å®šç¨‹åºæ‰§è¡Œçš„æ¯ä¸ªæ­¥éª¤ã€‚æ­¤æ–¹æ³•å¯å¾—åˆ°éå¸¸ç®€æ´çš„ç¨‹åºã€‚</p><p><strong>â€œé¢å‘è¡¨çš„â€</strong> æ˜¯æŒ‡å…è®¸SQLæ¯æ¬¡åœ¨ä¸€ä¸ªå®Œæ•´çš„è¡¨ä¸Šè¿›è¡Œæ“ä½œã€‚SQLç¨‹åºçš„è¾“å…¥æ˜¯ä¸€ä¸ªè¡¨æˆ–å¤šä¸ªè¡¨ï¼Œè¾“å‡ºæ˜¯ä¸€ä¸ªè¡¨ã€‚å› æ­¤ï¼ŒSQLä¸éœ€è¦ä»»ä½•å¾ªç¯ã€‚ç›¸åï¼Œåœ¨3GLä¸­ï¼Œä¸€ä¸ªæ“ä½œé€šå¸¸ä»…å½±å“ä¸€ä¸ªè®°å½•ä¸­çš„ä¸€ä¸ªå­—æ®µã€‚éå†å‰©ä½™çš„å­—æ®µå’Œè®°å½•éœ€è¦ä½¿ç”¨å¾ªç¯ã€‚ç›¸æ¯”è¾ƒè€Œè¨€ï¼Œå¾ªç¯ä¼šå¢åŠ å¾ˆå¤šè¡Œçš„ä»£ç ä»è€Œä½¿å¾—3GLç›¸å½“å†—é•¿ã€‚</p></blockquote><h3 id="224-æ•°æ®ç‹¬ç«‹æ€§"><a class="markdownIt-Anchor" href="#224-æ•°æ®ç‹¬ç«‹æ€§"></a> 2.2.4 æ•°æ®ç‹¬ç«‹æ€§</h3><p>å…³ç³»ç³»ç»Ÿå¸Œæœ›èƒ½æœ‰é«˜çº§åˆ«çš„æ•°æ®ç‹¬ç«‹æ€§ã€‚æ•°æ®ç‹¬ç«‹æ€§ä½¿å¾— <strong>DBAå¯ä»¥é‡æ–°ç»„ç»‡æ•°æ®çš„åº•å±‚ç»“æ„è€Œä¸ä¼šå¼•èµ·åº”ç”¨æœåŠ¡å™¨ä¸Šçš„ç¨‹åºå´©æºƒ</strong>ã€‚DBAåº”è¯¥èƒ½å¤Ÿæ”¹å˜åˆ—åï¼Œå¹¶åœ¨è¡¨ä¸­ç§»åŠ¨åˆ—è€Œä¸ä¼šå½±å“åº”ç”¨ã€‚è‹¥è¿™äº›æ”¹å˜æ˜¯å¯èƒ½çš„ï¼Œå®ƒä»¬å¯¹äºåº”ç”¨æ˜¯é€æ˜çš„ã€‚<strong>æ•°æ®ç‹¬ç«‹æ€§å¯ä½¿ç”¨è§†å›¾è·å¾—</strong>ã€‚</p><p>å¼€å‘è€…åœ¨æ•°æ®åº“ä¸­åˆ›å»ºçš„è¡¨è¢«ç§°ä¸ºåŸºç¡€è¡¨ï¼ˆbase tablesï¼‰ã€‚è¿™äº›è¡¨æ˜¯æˆ‘ä»¬è‡ªå§‹è‡³ç»ˆéƒ½è¦ä½¿ç”¨çš„è¡¨ã€‚</p><p>ç›¸åï¼Œ<strong>ä¸€ä¸ªè§†å›¾ï¼ˆviewï¼‰æ˜¯ä»è¿™äº›è¡¨ä¸­å¯¼å‡ºçš„ä¸€ä¸ªå­é›†ã€‚</strong></p><p><strong>è§†å›¾ä½¿å¾—DBAå¯ä»¥é™åˆ¶æ¯ä¸ªç”¨æˆ·å¯çœ‹åˆ°çš„æ•°æ®åº“çš„åŒºåŸŸã€‚</strong></p><p>ä¸‹å›¾æ˜¾ç¤ºäº†åŒä¸€ä¸ªåŸºç¡€è¡¨MEMBER ä¸Šçš„ä¸¤ä¸ªä¸åŒè§†å›¾ã€‚Member_email_view ä»…åŒ…å«addressã€first_nameå’Œlast_nameå­—æ®µï¼Œè€Œ member_phone_viewä»…åŒ…å«first_nameã€last_name å’Œ telephoneå­—æ®µã€‚æ³¨æ„åœ¨åˆ›å»ºè§†å›¾æ—¶å¯¹å­—æ®µè¿›è¡Œäº†é‡å‘½åã€‚Emailè¢«é‡å‘½åä¸ºaddressï¼Œfname è¢«é‡å‘½åä¸ºfirst_nameï¼ŒIname è¢«é‡å‘½åä¸ºlast_nameï¼Œphoneè¢«é‡å‘½åä¸ºtelephoneã€‚</p><p><img src="https://picbed.octalzhihao.top/img/202410142006581.png" alt="image-20241014125343403" /></p><h1 id="chp3-æ¦‚å¿µè®¾è®¡"><a class="markdownIt-Anchor" href="#chp3-æ¦‚å¿µè®¾è®¡"></a> $chp3 æ¦‚å¿µè®¾è®¡</h1><ul><li>ä»¥ç³»ç»Ÿçš„æ–¹æ³•è®¾è®¡ä¸€ä¸ªERDã€‚</li><li>ç¡®å®šè¡¨ä¹‹é—´çš„åŸºæ•°ã€‚</li><li>æ­£ç¡®åœ°é€‰æ‹©è¡¨çš„ä¸»é”®ã€‚</li><li>è¯†åˆ«å­è¡¨çš„å¤–é”®ã€‚</li><li>æ­£ç¡®åœ°ä¸ºå±æ€§ç¡®å®šæ•°æ®ç±»å‹ã€‚</li></ul><h2 id="31-æ„å»ºerdçš„äº”ä¸ªæ­¥éª¤"><a class="markdownIt-Anchor" href="#31-æ„å»ºerdçš„äº”ä¸ªæ­¥éª¤"></a> 3.1 æ„å»ºERDçš„äº”ä¸ªæ­¥éª¤</h2><ol><li><ul><li><strong>Step1ï¼šå°†å®ä½“è¡¨ç¤ºä¸ºè¡¨</strong></li><li>æœ‰ä¸æ­¢ä¸€ä¸ªå—ï¼Ÿæ‚¨èƒ½è®¾æƒ³è¯¥å®ä½“çš„å¤šä¸ªå®ä¾‹å—ï¼Ÿ</li><li>éšç€æ—¶é—´çš„æ¨ç§»æœ‰å˜åŒ–å—ï¼Ÿå®ä¾‹æ•°é‡éšæ—¶é—´å˜åŒ–å—ï¼Ÿ</li></ul></li><li><ul><li><strong>Step2ï¼šç¡®å®šå…³ç³»</strong></li><li>å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä¸€ä¸ªè¡¨ä¸­çš„ä¸€æ¡è®°å½•å°†å¯¹åº”äºå¦ä¸€è¡¨ä¸­çš„å¤šæ¡è®°å½•ã€‚</li><li>å¯¹äºå¤šå¯¹å¤šå…³ç³»ï¼Œå¿…é¡»åœ¨ä¸¤ä¸ªè¡¨ä¹‹é—´åˆ›å»ºä¸€ä¸ªæ–°çš„å…³è”è¡¨ã€‚</li></ul></li><li><ul><li><strong>Step3ï¼šåˆ—å‡ºå­—æ®µ</strong></li><li>å¦‚æœæ­¥éª¤ 1 ä¸­çš„è¡¨åªæœ‰ä¸€ä¸ªå­—æ®µï¼Œé‚£ä¹ˆå®ƒå¯èƒ½åªæ˜¯å¦ä¸€ä¸ªè¡¨çš„å­—æ®µã€‚</li></ul></li><li><ul><li><strong>Step4ï¼šè¯†åˆ«é”®</strong></li><li>æ‰€æœ‰è¡¨éƒ½å¿…é¡»æœ‰ä¸€ä¸ªä¸»é”®ï¼ˆå”¯ä¸€ã€æœ€å°ã€éç©ºå’Œä¸å¯æ›´æ–°ï¼‰æ¥å”¯ä¸€æ ‡è¯†æ¯æ¡è®°å½•ã€‚</li></ul></li><li><ul><li><strong>Step5ï¼šç¡®å®šæ•°æ®ç±»å‹</strong></li><li>å­—æ®µçš„æ•°æ®ç±»å‹å’Œå¤§å°å¿…é¡»åŒ¹é…ã€‚</li></ul></li></ol><blockquote><p>æœ¬ç« å†…å®¹ä¸»è¦ä»‹ç»æ•°æ®åº“çš„å®ä¾‹ï¼Œæš‚æ—¶ç•¥è¿‡</p></blockquote><h1 id="chp4-è§„èŒƒåŒ–"><a class="markdownIt-Anchor" href="#chp4-è§„èŒƒåŒ–"></a> $chp4 è§„èŒƒåŒ–</h1><p>objectiveï¼š</p><ul><li>è§£é‡Šä¸»é”®çš„æ­£ç¡®åŠŸèƒ½ã€‚</li><li>è§£é‡Šä¸»é”®å’Œè§„èŒƒåŒ–ä¹‹é—´çš„å…³ç³»ã€‚</li><li>æ£€æµ‹ä¸€ä¸ªéè§„èŒƒåŒ–çš„è®¾è®¡ã€‚</li><li>ä½¿ç”¨åˆ†æ­¥éª¤è¿‡ç¨‹é€šè¿‡ç¬¬å››èŒƒå¼ï¼ˆ4NFï¼‰å¯¹è®¾è®¡è§„èŒƒåŒ–ã€‚</li></ul><h2 id="42-è§„èŒƒåŒ–è®¾è®¡"><a class="markdownIt-Anchor" href="#42-è§„èŒƒåŒ–è®¾è®¡"></a> 4.2 è§„èŒƒåŒ–è®¾è®¡</h2><p>åªæœ‰å½“æ¯ä¸ªå­—æ®µåªæœ‰ä¸€ä¸ªå€¼ä¸”æ¯ä¸ªè¡¨æœ‰æ­£ç¡®çš„å­—æ®µé›†ï¼Œè¿™ä¸ªæ•°æ®åº“æ‰æ˜¯è§„èŒƒçš„ã€‚</p><img src="https://picbed.octalzhihao.top/img/202410142006582.png" align=left><div style="clear: both;"></div><blockquote><p>BCNFæ˜¯åœ¨å¼€å‘4NFä¹‹åå‘ç°çš„ã€‚BCNFæ˜¯å¯¹3NFçš„æ”¹è¿›ï¼Œå¯ä»¥å¤„ç†ä¸é€‚ç”¨äº 3NFçš„ç‰¹æ®Šæƒ…å†µã€‚</p></blockquote><h3 id="421-éè§„èŒƒåŒ–è®¾è®¡"><a class="markdownIt-Anchor" href="#421-éè§„èŒƒåŒ–è®¾è®¡"></a> 4.2.1 éè§„èŒƒåŒ–è®¾è®¡</h3><ul><li><p>è§„èŒƒåŒ–çš„è®¾è®¡å°†å®ä½“æ”¾åœ¨åˆ†ç¦»çš„è¡¨ä¸­ã€‚å¯¹äºè¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬çš„è®¾è®¡éƒ½æ˜¯è§„èŒƒçš„ã€‚è§„èŒƒåŒ–è®¾è®¡é¿å…äº†é‡å¤æ•°æ®ï¼Œæˆ–å°†ç›¸åŒä¿¡æ¯å­˜å‚¨å¤šæ¬¡ã€‚</p></li><li><p>ç›¸åï¼Œéè§„èŒƒåŒ–è®¾è®¡å´ä¿ç•™äº†é‡å¤æ•°æ®ï¼Œæœ‰äº›æ—¶å€™å¯ä»¥æé«˜æŸ¥è¯¢æ•ˆç‡ã€‚</p></li></ul><h2 id="43-arcadeæ•°æ®åº“çš„è§„èŒƒåŒ–"><a class="markdownIt-Anchor" href="#43-arcadeæ•°æ®åº“çš„è§„èŒƒåŒ–"></a> 4.3 Arcadeæ•°æ®åº“çš„è§„èŒƒåŒ–</h2><img src="https://picbed.octalzhihao.top/img/202410142006583.png" align=left><img src="https://picbed.octalzhihao.top/img/202410142006584.png" align=left><div style="clear: both;"></div><h3 id="431-æ›´æ–°é—®é¢˜"><a class="markdownIt-Anchor" href="#431-æ›´æ–°é—®é¢˜"></a> 4.3.1 æ›´æ–°é—®é¢˜</h3><p><img src="https://picbed.octalzhihao.top/img/202410142006585.png" alt="image-20241014133654183" /></p><h3 id="432-æ’å…¥é—®é¢˜"><a class="markdownIt-Anchor" href="#432-æ’å…¥é—®é¢˜"></a> 4.3.2 æ’å…¥é—®é¢˜</h3><p><img src="https://picbed.octalzhihao.top/img/202410142006586.png" alt="image-20241014133717823" /></p><p><img src="https://picbed.octalzhihao.top/img/202410142006587.png" alt="image-20241014133909076" /></p><p><img src="https://picbed.octalzhihao.top/img/202410142006588.png" alt="image-20241014133917998" /></p><h2 id="44-èŒƒå¼"><a class="markdownIt-Anchor" href="#44-èŒƒå¼"></a> 4.4 èŒƒå¼</h2><h3 id="441-ç¬¬ä¸€èŒƒå¼1fn"><a class="markdownIt-Anchor" href="#441-ç¬¬ä¸€èŒƒå¼1fn"></a> 4.4.1 ç¬¬ä¸€èŒƒå¼ï¼ˆ1FNï¼‰</h3><ul><li><p><strong>å®šä¹‰</strong>ï¼šè¡¨ä¸­æ‰€æœ‰å­—æ®µä»…åŒ…å«å•å€¼ã€‚</p></li><li><p>è¯Šæ–­å‡º1NFè¿ä¾‹çš„ç®€å•æ–¹æ³•æ˜¯æ‰¾å‡ºåŒ…å«è¶…è¿‡ä¸€ä¸ªå•å€¼çš„å­—æ®µã€‚</p></li></ul><p><strong>æ¢å¥è¯è¯´ï¼Œç¬¬ä¸€èŒƒå¼å°±æ˜¯è¦æ±‚æ•°æ®åº“ä¸­çš„è¡¨éƒ½æ˜¯äºŒç»´è¡¨ã€‚</strong></p><h3 id="442-ç¡®å®šå› å­"><a class="markdownIt-Anchor" href="#442-ç¡®å®šå› å­"></a> 4.4.2 ç¡®å®šå› å­</h3><img src="https://picbed.octalzhihao.top/img/202410142006589.png" align=left><img src="https://picbed.octalzhihao.top/img/202410142006590.png" align=left><div style="clear: both;"></div><h3 id="442-ç¬¬äºŒèŒƒå¼2fn"><a class="markdownIt-Anchor" href="#442-ç¬¬äºŒèŒƒå¼2fn"></a> 4.4.2 ç¬¬äºŒèŒƒå¼ï¼ˆ2FNï¼‰</h3><ul><li><strong>å®šä¹‰</strong>ï¼šè¡¨ä¸­çš„æ¯ä¸ªéé”®å­—æ®µç”±æ•´ä¸ªä¸»é”®ç¡®å®šï¼Œä¸”ä¸èƒ½ç”±ä¸»é”®è‡ªèº«çš„ä¸€éƒ¨åˆ†ç¡®å®šã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°æ®åº“ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ•°æ®åº“è®¾è®¡â€”â€”ç³»ç»Ÿè¾¹ç•Œå›¾</title>
      <link href="/posts/16493.html"/>
      <url>/posts/16493.html</url>
      
        <content type="html"><![CDATA[<h2 id="ç³»ç»Ÿè¾¹ç•Œçš„å®šä¹‰"><a class="markdownIt-Anchor" href="#ç³»ç»Ÿè¾¹ç•Œçš„å®šä¹‰"></a> ç³»ç»Ÿè¾¹ç•Œçš„å®šä¹‰</h2><p><strong>ç³»ç»Ÿè¾¹ç•Œ</strong>ï¼Œå³ç³»ç»ŸåŒ…å«çš„åŠŸèƒ½ä¸ç³»ç»Ÿä¸åŒ…å«çš„åŠŸèƒ½ä¹‹é—´çš„ç•Œé™ã€‚ä¸€èˆ¬åœ¨ç³»ç»Ÿåˆ†æé˜¶æ®µå®šä¹‰ï¼Œåªæœ‰æ˜ç¡®äº†ç³»ç»Ÿè¾¹ç•Œï¼Œæ‰èƒ½ç»§ç»­è¿›è¡Œä¸‹é¢çš„åˆ†æã€è®¾è®¡ç­‰å·¥ä½œã€‚</p><p>ä¸è®ºè¿™ä¸ªç³»ç»Ÿæ˜¯äº§å“è¿˜æ˜¯é¡¹ç›®ã€‚æ‰€è°“è¾¹ç•Œï¼Œä¹Ÿå°±æ˜¯å°†è¿™ä¸ªç³»ç»Ÿçœ‹æˆä¸€ä¸ªé»‘ç›’å­ï¼Œå’Œå¤–ç•Œçš„äº¤äº’ã€‚</p><blockquote><p>â€œè¿™ï¼Œæ˜¯ä¸€ä¸ªé»‘è‰²çš„ç«‹æ–¹ä½“ï¼Œé•¿45å˜ç±³ï¼Œå®½23å˜ç±³ï¼Œé«˜3å˜ç±³ï¼Œç›’å­çš„æ¯ä¸ªè§’éƒ½ä¸å°–é”ï¼Œä¸Šæ–¹å¹³å¦ï¼Œå¹¶æœ‰æŸ”è½¯è´¨æ„Ÿï¼›ä¸‹æ–¹åœ¨å››è§’ä¹‹å¤„éƒ½æœ‰å‡¹è¿›å»çš„èºä¸å£ï¼Œå¯ä»¥æ¥æ†å­ï¼Œä»¥ä½œå‡³å­ç”¨ã€‚â€</p></blockquote><p><strong>ä¸æ¸…æ¥šç³»ç»Ÿè¾¹ç•Œçš„åæœ</strong>ï¼šä¸€æ˜¯æ²¡æœ‰å†…å¤–çš„æ¦‚å¿µï¼Œä¸çŸ¥é“éœ€æ±‚æè¿°çš„æ˜¯ä»€ä¹ˆï¼›äºŒæ˜¯çŸ¥é“å†…å¤–ï¼Œç„¶è€Œå¯¹äºè¾¹ç•Œçš„å®šä¹‰ï¼Œæ²¡æœ‰è¶³å¤Ÿçš„è¯è¯­æè¿°æ¸…æ¥šï¼Œåªèƒ½ç”¨å¯¹ç³»ç»Ÿå†…éƒ¨è®¾è®¡æ¥ä»£æ›¿ã€‚</p><h2 id="ç³»ç»Ÿè¾¹ç•Œçš„ç¡®å®š"><a class="markdownIt-Anchor" href="#ç³»ç»Ÿè¾¹ç•Œçš„ç¡®å®š"></a> ç³»ç»Ÿè¾¹ç•Œçš„ç¡®å®š</h2><p>å…ˆè¯´è¯´ç³»ç»Ÿè¾¹ç•Œçš„ç¡®å®šã€‚è¿™æ˜¯åœ¨å·¥ç¨‹å¼€å‘ä¸­ç´§æ¥ç€éœ€æ±‚åˆ†æçš„ç¬¬äºŒæ­¥ã€‚</p><p>é¡¾åæ€æ„ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±æ˜¯è¦ç¡®å®šæˆ‘ä»¬è¦å¼€å‘çš„ç³»ç»Ÿå’Œå¤–éƒ¨ç¯å¢ƒä¹‹é—´çš„ç•Œé™ï¼Œä¹Ÿå°±æ˜¯è¦åŒºåˆ†ç³»ç»Ÿæœ¬èº«å’Œå®ƒçš„å¤–éƒ¨ç¯å¢ƒã€‚å…¶ä¸­çš„å¤–éƒ¨ç¯å¢ƒå¯èƒ½åŒ…æ‹¬ç”¨æˆ·,å…¶å®ƒç³»ç»Ÿ,è½¯ç¡¬ä»¶æ¡ä»¶ç­‰ã€‚</p><blockquote><p><strong>ä¸¾ä¸ªä¾‹å­ï¼Œä¸€ä¸ªé“¶è¡Œç³»ç»Ÿï¼Œå®ƒçš„ç³»ç»Ÿè¾¹ç•Œå¦‚ä½•ç¡®å®šå‘¢ï¼Ÿ</strong></p><p>é¦–å…ˆï¼Œé“¶è¡Œç³»ç»Ÿçš„å¤–éƒ¨æ´»åŠ¨è€…æœ‰å‚¨æˆ·,å‰å°å‡ºçº³å‘˜,é“¶è¡Œç®¡ç†å‘˜,è¿™äº›éƒ½ä¸å±äºé“¶è¡Œç³»ç»Ÿæœ¬èº«ï¼Œä»–ä»¬æ˜¯æ­¤ç³»ç»Ÿçš„å¤–éƒ¨ç¯å¢ƒï¼›</p><p>å…¶æ¬¡ï¼Œé“¶è¡Œç³»ç»Ÿæ˜¯è¿è¡Œåœ¨æ“ä½œç³»ç»Ÿä¸Šçš„è½¯ä»¶ï¼Œå®ƒåœ¨è¿è¡Œè¿‡ç¨‹ä¸­å¯èƒ½è¦è¿›è¡Œç”Ÿæˆæ–‡ä»¶,è·å–æ—¶é—´ç­‰æ“ä½œï¼Œè¿™æ¶‰åŠåˆ°æ“ä½œç³»ç»Ÿçš„APIï¼Œæ‰€ä»¥æ“ä½œç³»ç»Ÿå¯¹äºé“¶è¡Œç³»ç»Ÿæ¥è¯´æ˜¯å¤–éƒ¨ç¯å¢ƒï¼›</p><p>å†æ¬¡ï¼Œé“¶è¡Œç³»ç»Ÿè¦æ‰“å°äº¤æ˜“å‡­æ¡ï¼Œæ‰“å°æœºå¯¹äºç³»ç»Ÿæ¥è¯´æ˜¯å¤–éƒ¨ç¯å¢ƒï¼›</p><p>ç¬¬å››ï¼Œé“¶è¡Œç³»ç»Ÿå¯èƒ½ä¸å®¢æˆ·çš„å·¥ä½œå•ä½çš„å·¥èµ„å‘æ”¾ç³»ç»Ÿæœ‰äº¤äº’ï¼Œé‚£ä¹ˆå®¢æˆ·å·¥ä½œå•ä½çš„å·¥èµ„å‘æ”¾ç³»ç»Ÿä¹Ÿæ˜¯å¤–éƒ¨ç¯å¢ƒã€‚</p><p>è€Œå¯¹äºé“¶è¡Œç³»ç»Ÿæ¥è¯´ï¼Œä½¿ç”¨æ­¤ç³»ç»Ÿçš„é“¶è¡Œçš„å»ºç­‘æ ¼å±€,äººå‘˜æ„æˆ,æ‰€å¤„åœ°åŸŸç­‰å°±ä¸æ˜¯æ­¤ç³»ç»Ÿçš„å¤–éƒ¨ç¯å¢ƒã€‚</p></blockquote><p><strong>ç¡®å®šäº†ç³»ç»Ÿçš„è¾¹ç•Œæœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿ</strong></p><p>ç³»ç»Ÿè¾¹ç•Œä¸€ç¡®å®šï¼Œæˆ‘ä»¬å°±å·²ç»çŸ¥é“æœ‰å“ªäº›å¤–éƒ¨å¯¹è±¡åœ¨ä¸ç³»ç»Ÿè¿›è¡Œäº¤äº’ï¼Œäºæ˜¯æˆ‘ä»¬å°±å¯ä»¥åœ¨ç³»ç»Ÿä¸­ä¸ºè¯¥å¯¹è±¡è®¾è®¡ç›¸åº”çš„æ¥å£ï¼Œä»è€Œå®ç°è¿™äº›äº¤äº’ã€‚</p><p>ç”¨ä¸Šé¢çš„ä¾‹å­è¯´ï¼Œæˆ‘ä»¬åº”è¯¥ç»™å‚¨æˆ·,å‰å°å‡ºçº³,ç®¡ç†å‘˜è®¾è®¡ä¸åŒçš„æ¥å£ï¼Œè¿˜è¦ç»™å®¢æˆ·å·¥ä½œå•ä½çš„å·¥èµ„å‘æ”¾ç³»ç»Ÿè®¾è®¡æ¥å£ï¼Œä¸ºæ‰“å°æœºè®¾è®¡æ¥å£ã€‚</p><p>è¿™äº›æ˜¯æˆ‘ä»¬éœ€è¦å…³å¿ƒçš„ï¼Œå¦‚æœè¿™äº›å¤–éƒ¨ç¯å¢ƒæ”¹å˜äº†ï¼Œæˆ‘ä»¬å¯èƒ½è¦é‡æ–°è®¾è®¡æˆ‘ä»¬çš„æ¥å£ã€‚ä½†ä¸åœ¨ç³»ç»Ÿè¾¹ç•Œä¸Šçš„å› ç´ æˆ‘ä»¬å°±ä¸ç”¨è€ƒè™‘ï¼Œæ¯”å¦‚æˆ‘ä»¬ä¸å¿…ä¸ºé“¶è¡Œå»ºç­‘æ ¼å±€çš„æ”¹å˜è€Œæ”¹å˜æˆ‘ä»¬çš„ç³»ç»Ÿæ¥å£ï¼Œè¿™æ˜¯ä¸‹æ°´ç®¡é“è®¾è®¡å¸ˆåº”è¯¥å…³å¿ƒçš„é—®é¢˜ã€‚</p><ul><li>ç¡®å®šç³»ç»Ÿè¾¹ç•Œåœ¨é¡¹ç›®å¼€å‘ä¸­æ˜¯éå¸¸é‡è¦çš„ä¸€æ­¥ï¼Œå¦‚æœç³»ç»Ÿè¾¹ç•Œç¡®å®šå¾—ä¸å¥½ï¼Œä¼šç»™æ¥ä¸‹æ¥çš„åˆ†æè®¾è®¡å’Œç¼–ç å·¥ä½œå¸¦æ¥éšœç¢ï¼Œä¹Ÿä¼šç»™ç³»ç»Ÿçš„ç»´æŠ¤å¸¦æ¥éº»çƒ¦ã€‚</li></ul><h2 id="ç³»ç»Ÿè¾¹ç•Œå›¾çš„å®šä¹‰"><a class="markdownIt-Anchor" href="#ç³»ç»Ÿè¾¹ç•Œå›¾çš„å®šä¹‰"></a> ç³»ç»Ÿè¾¹ç•Œå›¾çš„å®šä¹‰</h2><p>â€‹ç³»ç»Ÿè¾¹ç•Œå›¾æ˜¯ç³»ç»Ÿå·¥ç¨‹å’Œè½¯ä»¶å·¥ç¨‹ä¸­çš„ä¸€ç§å›¾å½¢åŒ–å·¥å…·ï¼Œç”¨äºæè¿°ç³»ç»Ÿä¸å¤–éƒ¨ä¸–ç•Œä¹‹é—´çš„äº¤äº’å’Œç•Œé™ã€‚å®ƒå±•ç¤ºäº†<strong>ç³»ç»Ÿçš„ç»„æˆéƒ¨åˆ†ä»¥åŠè¿™äº›ç»„ä»¶å¦‚ä½•ä¸å¤–éƒ¨å®ä½“è¿›è¡Œé€šä¿¡å’Œäº¤äº’</strong>ã€‚**ç³»ç»Ÿè¾¹ç•Œå›¾é€šå¸¸åŒ…æ‹¬ç³»ç»Ÿå†…éƒ¨çš„å„ä¸ªç»„ä»¶ã€å¤–éƒ¨å®ä½“ä»¥åŠå®ƒä»¬ä¹‹é—´çš„é€šä¿¡è·¯å¾„å’Œæ•°æ®æµåŠ¨ã€‚**è¿™ç§å›¾å½¢åŒ–çš„è¡¨ç¤ºæ–¹å¼èƒ½å¤Ÿå¸®åŠ©å¼€å‘äººå‘˜å’Œåˆ©ç›Šç›¸å…³è€…æ›´æ¸…æ™°åœ°ç†è§£ç³»ç»Ÿçš„ç»“æ„å’ŒåŠŸèƒ½ï¼Œæœ‰åŠ©äºæŒ‡å¯¼ç³»ç»Ÿè®¾è®¡ã€å¼€å‘å’Œæµ‹è¯•å·¥ä½œã€‚</p><h2 id="ç³»ç»Ÿè¾¹ç•Œå›¾çš„è¦ç´ "><a class="markdownIt-Anchor" href="#ç³»ç»Ÿè¾¹ç•Œå›¾çš„è¦ç´ "></a> ç³»ç»Ÿè¾¹ç•Œå›¾çš„è¦ç´ </h2><p>ä¸€èˆ¬æ¥è¯´ï¼Œç³»ç»Ÿè¾¹ç•Œå›¾åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªè¦ç´ ï¼š</p><ol><li><strong>ç³»ç»Ÿç»„ä»¶</strong>ï¼šç³»ç»Ÿçš„å„ä¸ªç»„æˆéƒ¨åˆ†ï¼Œé€šå¸¸ä»¥æ–¹æ¡†æˆ–åœ†åœˆè¡¨ç¤ºã€‚è¿™äº›ç»„ä»¶å¯ä»¥æ˜¯è½¯ä»¶æ¨¡å—ã€ç¡¬ä»¶è®¾å¤‡æˆ–å…¶ä»–å®ä½“ã€‚</li><li><strong>å¤–éƒ¨å®ä½“</strong>ï¼šä¸ç³»ç»Ÿè¿›è¡Œäº¤äº’çš„å¤–éƒ¨å…ƒç´ ï¼Œæ¯”å¦‚ç”¨æˆ·ã€å…¶ä»–ç³»ç»Ÿã€è®¾å¤‡ç­‰ã€‚å¤–éƒ¨å®ä½“é€šå¸¸ç”¨ç®­å¤´è¡¨ç¤ºä¸ç³»ç»Ÿä¹‹é—´çš„äº¤äº’ã€‚</li><li><strong>ç•Œé™</strong>ï¼šè¡¨ç¤ºç³»ç»Ÿä¸å¤–éƒ¨å®ä½“ä¹‹é—´çš„è¾¹ç•Œï¼Œæ ‡å¿—ç€ç³»ç»Ÿçš„èŒƒå›´å’Œè´£ä»»ã€‚</li><li><strong>é€šä¿¡è·¯å¾„</strong>ï¼šæè¿°ç³»ç»Ÿç»„ä»¶ä¹‹é—´ä»¥åŠç³»ç»Ÿä¸å¤–éƒ¨å®ä½“ä¹‹é—´çš„é€šä¿¡è·¯å¾„ï¼Œé€šå¸¸ç”¨ç®­å¤´è¡¨ç¤ºã€‚</li><li><strong>æ•°æ®æµ</strong>ï¼šè¡¨ç¤ºä¿¡æ¯æˆ–æ•°æ®åœ¨ç³»ç»Ÿå†…éƒ¨å’Œå¤–éƒ¨å®ä½“ä¹‹é—´çš„æµåŠ¨è·¯å¾„ã€‚</li></ol><h2 id="ç³»ç»Ÿè¾¹ç•Œå›¾çš„åˆ›å»ºæ­¥éª¤"><a class="markdownIt-Anchor" href="#ç³»ç»Ÿè¾¹ç•Œå›¾çš„åˆ›å»ºæ­¥éª¤"></a> ç³»ç»Ÿè¾¹ç•Œå›¾çš„åˆ›å»ºæ­¥éª¤</h2><p>åˆ›å»ºç³»ç»Ÿè¾¹ç•Œå›¾çš„è¿‡ç¨‹é€šå¸¸æ¶‰åŠä»¥ä¸‹æ­¥éª¤ï¼š</p><ol><li><strong>ç¡®å®šç³»ç»ŸèŒƒå›´</strong>ï¼šæ˜ç¡®ç³»ç»Ÿçš„åŠŸèƒ½å’Œè¾¹ç•Œï¼Œç¡®å®šéœ€è¦åŒ…å«åœ¨ç³»ç»Ÿè¾¹ç•Œå›¾ä¸­çš„æ‰€æœ‰ç»„ä»¶å’Œå¤–éƒ¨å®ä½“ã€‚</li><li><strong>è¯†åˆ«ç»„ä»¶å’Œå®ä½“</strong>ï¼šè¯†åˆ«ç³»ç»Ÿå†…éƒ¨çš„å„ä¸ªç»„ä»¶ä»¥åŠä¸ç³»ç»Ÿäº¤äº’çš„å¤–éƒ¨å®ä½“ã€‚</li><li><strong>ç»˜åˆ¶è¾¹ç•Œ</strong>ï¼šç»˜åˆ¶ç³»ç»Ÿè¾¹ç•Œï¼Œæ ‡æ˜ç³»ç»Ÿçš„èŒƒå›´ã€‚</li><li><strong>è¿æ¥ç»„ä»¶å’Œå®ä½“</strong>ï¼šä½¿ç”¨ç®­å¤´è¡¨ç¤ºç»„ä»¶ä¹‹é—´çš„é€šä¿¡è·¯å¾„ï¼Œä»¥åŠç³»ç»Ÿä¸å¤–éƒ¨å®ä½“ä¹‹é—´çš„äº¤äº’ã€‚</li><li><strong>æ ‡æ³¨ä¿¡æ¯æµ</strong>ï¼šæ·»åŠ æ•°æ®æµä»¥æè¿°ä¿¡æ¯åœ¨ç³»ç»Ÿå†…éƒ¨å’Œå¤–éƒ¨å®ä½“ä¹‹é—´çš„ä¼ é€’è·¯å¾„ã€‚</li><li><strong>éªŒè¯å’Œå®Œå–„</strong>ï¼šæ£€æŸ¥ç³»ç»Ÿè¾¹ç•Œå›¾ï¼Œç¡®ä¿å®ƒæ¸…æ™°åœ°æè¿°äº†ç³»ç»Ÿçš„ç»“æ„å’Œäº¤äº’ï¼ŒåŒæ—¶å®Œå–„ä»»ä½•å¯èƒ½å­˜åœ¨çš„é—æ¼æˆ–é”™è¯¯ã€‚</li></ol><h2 id="ç³»ç»Ÿè¾¹ç•Œå›¾çš„æ¡ˆä¾‹"><a class="markdownIt-Anchor" href="#ç³»ç»Ÿè¾¹ç•Œå›¾çš„æ¡ˆä¾‹"></a> ç³»ç»Ÿè¾¹ç•Œå›¾çš„æ¡ˆä¾‹</h2><p><em>copy from <a href="http://www.processon.com">www.processon.com</a></em></p><img src="https://picbed.octalzhihao.top/img/202410141927634.png"/><img src="https://picbed.octalzhihao.top/img/202410141930211.png"/><img src="https://picbed.octalzhihao.top/img/202410141929380.png"/><img src="https://picbed.octalzhihao.top/img/202410141929950.png"/>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°æ®åº“ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Gitæäº¤è§„èŒƒ</title>
      <link href="/posts/9200.html"/>
      <url>/posts/9200.html</url>
      
        <content type="html"><![CDATA[<blockquote><p><strong>commit message = subject + : + ç©ºæ ¼ + messageä¸»ä½“</strong></p></blockquote><p>å¸¸è§çš„subjectç§ç±» å¦‚ä¸‹ï¼š</p><h2 id="featæ–°åŠŸèƒ½feature"><a class="markdownIt-Anchor" href="#featæ–°åŠŸèƒ½feature"></a> featï¼šæ–°åŠŸèƒ½ï¼ˆfeatureï¼‰</h2><ul><li>ç”¨äºæäº¤æ–°åŠŸèƒ½</li></ul><blockquote><p>ä¾‹å¦‚ï¼šfeat: å¢åŠ ç”¨æˆ·ç®¡ç†æ¨¡å—</p></blockquote><h2 id="fixä¿®å¤bug"><a class="markdownIt-Anchor" href="#fixä¿®å¤bug"></a> fixï¼šä¿®å¤bug</h2><ul><li>ç”¨äºæäº¤bugä¿®å¤</li></ul><blockquote><p>ä¾‹å¦‚ï¼šfix: ä¿®å¤åˆ·æ–°å‡ºç°ç©ºç™½é¡µé¢é—®é¢˜</p></blockquote><h2 id="docsæ–‡æ¡£å˜æ›´"><a class="markdownIt-Anchor" href="#docsæ–‡æ¡£å˜æ›´"></a> docsï¼šæ–‡æ¡£å˜æ›´</h2><ul><li>ç”¨äºæäº¤ä»…æ–‡æ¡£ç›¸å…³çš„ä¿®æ”¹</li></ul><blockquote><p>ä¾‹å¦‚ï¼šdocs: æ›´æ–°READMEæ–‡ä»¶</p></blockquote><h2 id="styleä»£ç é£æ ¼å˜åŠ¨ä¸å½±å“ä»£ç é€»è¾‘"><a class="markdownIt-Anchor" href="#styleä»£ç é£æ ¼å˜åŠ¨ä¸å½±å“ä»£ç é€»è¾‘"></a> styleï¼šä»£ç é£æ ¼å˜åŠ¨ï¼ˆä¸å½±å“ä»£ç é€»è¾‘ï¼‰</h2><ul><li>ç”¨äºæäº¤ä»…æ ¼å¼åŒ–ã€æ ‡ç‚¹ç¬¦å·ã€ç©ºç™½ç­‰ä¸å½±å“ä»£ç è¿è¡Œçš„å˜æ›´</li></ul><blockquote><p>ä¾‹å¦‚ï¼šstyle: åˆ é™¤å¤šä½™ç©ºè¡Œå’Œconsoleæ‰“å°</p></blockquote><h2 id="refactorä»£ç é‡æ„æ—¢ä¸æ˜¯æ–°å¢åŠŸèƒ½ä¹Ÿä¸æ˜¯ä¿®å¤bugçš„ä»£ç æ›´æ”¹"><a class="markdownIt-Anchor" href="#refactorä»£ç é‡æ„æ—¢ä¸æ˜¯æ–°å¢åŠŸèƒ½ä¹Ÿä¸æ˜¯ä¿®å¤bugçš„ä»£ç æ›´æ”¹"></a> refactorï¼šä»£ç é‡æ„ï¼ˆæ—¢ä¸æ˜¯æ–°å¢åŠŸèƒ½ä¹Ÿä¸æ˜¯ä¿®å¤bugçš„ä»£ç æ›´æ”¹ï¼‰</h2><ul><li>ç”¨äºæäº¤ä»£ç é‡æ„</li></ul><blockquote><p>ä¾‹å¦‚ï¼šrefactor: é‡æ„ç”¨æˆ·ç®¡ç†æ¨¡å—</p></blockquote><h2 id="perfæ€§èƒ½ä¼˜åŒ–"><a class="markdownIt-Anchor" href="#perfæ€§èƒ½ä¼˜åŒ–"></a> perfï¼šæ€§èƒ½ä¼˜åŒ–</h2><ul><li>ç”¨äºæäº¤æå‡æ€§èƒ½çš„ä»£ç ä¿®æ”¹</li></ul><blockquote><p>ä¾‹å¦‚ï¼šperf: ä¼˜åŒ–å›¾ç‰‡åŠ è½½é€Ÿåº¦</p></blockquote><h2 id="testæ·»åŠ æˆ–è€…ä¿®æ”¹æµ‹è¯•"><a class="markdownIt-Anchor" href="#testæ·»åŠ æˆ–è€…ä¿®æ”¹æµ‹è¯•"></a> testï¼šæ·»åŠ æˆ–è€…ä¿®æ”¹æµ‹è¯•</h2><ul><li>ç”¨äºæäº¤æµ‹è¯•ç›¸å…³çš„å†…å®¹</li></ul><blockquote><p>ä¾‹å¦‚ï¼štest: å¢åŠ ç”¨æˆ·æ¨¡å—çš„æµ‹è¯•å•å…ƒ</p></blockquote><h2 id="choreæ‚é¡¹æ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨"><a class="markdownIt-Anchor" href="#choreæ‚é¡¹æ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨"></a> choreï¼šæ‚é¡¹ï¼ˆæ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨ï¼‰</h2><ul><li>ç”¨äºæäº¤æ„å»ºè¿‡ç¨‹ã€è¾…åŠ©å·¥å…·ç­‰ç›¸å…³çš„å†…å®¹ä¿®æ”¹</li></ul><blockquote><p>ä¾‹å¦‚ï¼šchore: æ›´æ–°ä¾èµ–åº“</p></blockquote><h2 id="buildæ„å»ºç³»ç»Ÿæˆ–å¤–éƒ¨ä¾èµ–é¡¹çš„å˜æ›´"><a class="markdownIt-Anchor" href="#buildæ„å»ºç³»ç»Ÿæˆ–å¤–éƒ¨ä¾èµ–é¡¹çš„å˜æ›´"></a> buildï¼šæ„å»ºç³»ç»Ÿæˆ–å¤–éƒ¨ä¾èµ–é¡¹çš„å˜æ›´</h2><ul><li>ç”¨äºæäº¤å½±å“æ„å»ºç³»ç»Ÿçš„æ›´æ”¹</li></ul><blockquote><p>ä¾‹å¦‚ï¼šbuild: å‡çº§viteåˆ°ç‰ˆæœ¬4</p></blockquote><h2 id="ciæŒç»­é›†æˆé…ç½®çš„å˜æ›´"><a class="markdownIt-Anchor" href="#ciæŒç»­é›†æˆé…ç½®çš„å˜æ›´"></a> ciï¼šæŒç»­é›†æˆé…ç½®çš„å˜æ›´</h2><ul><li>ç”¨äºæäº¤CIé…ç½®æ–‡ä»¶å’Œè„šæœ¬çš„ä¿®æ”¹</li></ul><blockquote><p>ä¾‹å¦‚ï¼šci: ä¿®æ”¹GitHub Actionsé…ç½®æ–‡ä»¶</p></blockquote><h2 id="revertå›æ»š"><a class="markdownIt-Anchor" href="#revertå›æ»š"></a> revertï¼šå›æ»š</h2><ul><li>ç”¨äºæäº¤å›æ»šä¹‹å‰çš„æäº¤</li></ul><blockquote><p>ä¾‹å¦‚ï¼šrevert: å›æ»š feat: å¢åŠ ç”¨æˆ·ç®¡ç†æ¨¡å—</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> å®ç”¨æ‰‹å†Œ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€ŠçŸ¥è¯†å›¾è°±ï¼šæ–¹æ³•ã€å®è·µä¸åº”ç”¨ã€‹é˜…è¯»ç¬”è®°ï¼ˆ2ï¼‰çŸ¥è¯†å›¾è°±çš„å­˜å‚¨</title>
      <link href="/posts/9155.html"/>
      <url>/posts/9155.html</url>
      
        <content type="html"><![CDATA[<h1 id="ç¬¬ä¸‰ç« -çŸ¥è¯†å›¾è°±çš„å­˜å‚¨"><a class="markdownIt-Anchor" href="#ç¬¬ä¸‰ç« -çŸ¥è¯†å›¾è°±çš„å­˜å‚¨"></a> ç¬¬ä¸‰ç«  çŸ¥è¯†å›¾è°±çš„å­˜å‚¨</h1><blockquote><p>å¼•è¨€ï¼š<br />ä¸€æ–¹é¢ï¼Œä»¥æ–‡ä»¶å½¢å¼ä¿å­˜çš„çŸ¥è¯†å›¾è°±æ˜¾ç„¶æ— æ³•æ»¡è¶³ç”¨æˆ·çš„æŸ¥è¯¢ã€æ£€ç´¢ã€æ¨ç†ã€åˆ†æåŠå„ç§åº”ç”¨éœ€æ±‚ï¼›å¦ä¸€æ–¹é¢ï¼Œä¼ ç»Ÿæ•°æ®åº“çš„å…³ç³»æ¨¡å‹ä¸çŸ¥è¯†å›¾è°±çš„å›¾æ¨¡å‹ä¹‹é—´å­˜åœ¨æ˜¾è‘—å·®å¼‚ï¼Œå…³ç³»æ•°æ®åº“æ— æ³•æœ‰æ•ˆåœ°ç®¡ç†å¤§è§„æ¨¡çŸ¥è¯†å›¾è°±æ•°æ®ã€‚<br />ä¸ºäº†æ›´å¥½åœ°è¿›è¡Œä¸‰å…ƒç»„æ•°æ®çš„å­˜å‚¨ï¼Œè¯­ä¹‰ä¸‡ç»´ç½‘é¢†åŸŸå‘å±•å‡ºä¸“é—¨å­˜å‚¨RDF æ•°æ®çš„ä¸‰å…ƒç»„åº“ï¼›æ•°æ®åº“é¢†åŸŸå‘å±•å‡ºç”¨äºç®¡ç†å±æ€§å›¾çš„å›¾æ•°æ®åº“ã€‚</p></blockquote><h2 id="31-çŸ¥è¯†å›¾è°±æ•°æ®åº“åŸºæœ¬çŸ¥è¯†"><a class="markdownIt-Anchor" href="#31-çŸ¥è¯†å›¾è°±æ•°æ®åº“åŸºæœ¬çŸ¥è¯†"></a> 3.1 çŸ¥è¯†å›¾è°±æ•°æ®åº“åŸºæœ¬çŸ¥è¯†</h2><blockquote><p>ä¸¤ç§ä¸»è¦å›¾æ•°æ®æ¨¡å‹ï¼šRDF å›¾å’Œå±æ€§å›¾</p></blockquote><h3 id="311-çŸ¥è¯†å›¾è°±æ•°æ®æ¨¡å‹"><a class="markdownIt-Anchor" href="#311-çŸ¥è¯†å›¾è°±æ•°æ®æ¨¡å‹"></a> 3.1.1 çŸ¥è¯†å›¾è°±æ•°æ®æ¨¡å‹</h3><p>çŸ¥è¯†å›¾è°±æ•°æ®æ¨¡å‹çš„æ•°å­¦åŸºç¡€æºäºæœ‰ç€è¿‘ 300å¹´å†å²çš„æ•°å­¦åˆ†æ”¯â€”â€”å›¾è®ºã€‚</p><h4 id="1-rdfå›¾"><a class="markdownIt-Anchor" href="#1-rdfå›¾"></a> <strong>1. RDFå›¾</strong></h4><p>RDF æ˜¯ W3C åˆ¶å®šçš„åœ¨è¯­ä¹‰ä¸‡ç»´ç½‘ä¸Šè¡¨ç¤ºå’Œäº¤æ¢æœºå™¨å¯ç†è§£ä¿¡æ¯çš„æ ‡å‡†æ•°æ®æ¨¡å‹ã€‚åœ¨ RDF ä¸‰å…ƒç»„é›†åˆä¸­ï¼Œæ¯ä¸ª Web èµ„æºå…·æœ‰ä¸€ä¸ª HTTP URI ä½œä¸ºå…¶å”¯ä¸€çš„ idã€‚</p><blockquote><p>HTTP URIï¼ˆUniform Resource Identifierï¼‰æ˜¯ä¸€ç§ç”¨äºæ ‡è¯†Webèµ„æºçš„æ ‡å‡†åŒ–å­—ç¬¦ä¸²ã€‚URIæ˜¯ä¸€ç§é€šç”¨çš„èµ„æºæ ‡è¯†æ–¹æ¡ˆï¼Œå…¶ä¸­HTTP URIæ˜¯åŸºäºHTTPåè®®çš„ç‰¹å®šç±»å‹ã€‚å®ƒæœ‰ä¸¤ç§ä¸»è¦çš„æ ¼å¼ï¼š</p><ol><li><p>URLï¼ˆUniform Resource Locatorï¼‰ï¼š</p><p>å¸¸è§çš„Webåœ°å€ï¼Œè¡¨ç¤ºèµ„æºçš„ä½ç½®ã€‚</p><ul><li>ç¤ºä¾‹ï¼š<code>http://example.com/page</code> è¡¨ç¤ºæŸä¸ªç½‘ç«™ä¸Šçš„é¡µé¢ã€‚</li></ul></li><li><p>URNï¼ˆUniform Resource Nameï¼‰ï¼š ä»…ç”¨äºæ ‡è¯†èµ„æºçš„åç§°ï¼Œä½†ä¸æŒ‡ç¤ºå…·ä½“çš„è®¿é—®æ–¹å¼æˆ–ä½ç½®ï¼ˆåœ¨å®è·µä¸­è¾ƒå°‘ä½¿ç”¨ï¼‰ã€‚</p></li></ol></blockquote><p>ä¸€ä¸ª RDF å›¾å®šä¹‰ä¸ºä¸‰å…ƒç»„ (<em>s</em>, <em>p</em>, <em>o</em>) çš„æœ‰é™é›†åˆï¼›æ¯ä¸ªä¸‰å…ƒç»„ä»£è¡¨ä¸€ä¸ªé™ˆè¿°å¥ï¼Œå…¶ä¸­ <em>s</em> æ˜¯ä¸»è¯­ï¼Œ<em>p</em> æ˜¯è°“è¯­ï¼Œ<em>o</em> æ˜¯å®¾è¯­ï¼›(<em>s</em>, <em>p</em>, <em>o</em>) è¡¨ç¤ºèµ„æº <em>s</em> ä¸èµ„æº <em>o</em> ä¹‹é—´å…·æœ‰è”ç³» <em>p</em>ï¼Œæˆ–è¡¨ç¤ºèµ„æº <em>s</em> å…·æœ‰å±æ€§ <em>p</em> ä¸”å…¶å–å€¼ä¸º <em>o</em>ã€‚å®é™…ä¸Šï¼ŒRDF ä¸‰å…ƒç»„é›†åˆå³ä¸ºå›¾ä¸­çš„æœ‰å‘è¾¹é›†åˆã€‚</p><p><img src="https://picbed.octalzhihao.top/img/20250309140313683.png" alt="image-20241017194908803" /></p><p><strong>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼ŒRDF å›¾å¯¹äºèŠ‚ç‚¹å’Œè¾¹ä¸Šçš„å±æ€§æ²¡æœ‰å†…ç½®çš„æ”¯æŒã€‚</strong></p><p><strong>èŠ‚ç‚¹å±æ€§</strong>å¯ç”¨ä¸‰å…ƒç»„è¡¨ç¤ºï¼Œè¿™ç±»ä¸‰å…ƒç»„çš„å®¾è¯­ç§°ä¸ºå­—é¢é‡ï¼Œå³å›¾ä¸­çš„çŸ©å½¢ã€‚ä¾‹å¦‚ï¼Œï¼ˆex: zhangsan, å§“å, â€œå¼ ä¸‰â€ï¼‰ã€‚</p><p>è¾¹ä¸Šçš„å±æ€§å¸¸åˆ©ç”¨ä¸€ç§å«åš **â€œå…·ä½“åŒ–â€ï¼ˆreificationï¼‰**çš„æŠ€æœ¯ï¼Œé¢å¤–å¼•å…¥å…³ç³»èŠ‚ç‚¹è¡¨ç¤ºæ•´ä¸ªä¸‰å…ƒç»„ï¼Œå°†è¾¹å±æ€§è¡¨ç¤ºä¸ºä»¥è¯¥èŠ‚ç‚¹ä¸ºä¸»è¯­çš„ä¸‰å…ƒç»„ã€‚</p><p>ä¾‹å¦‚åœ¨å›¾ 3-2 ä¸­ï¼Œå¼•å…¥èŠ‚ç‚¹<code>ex:participate</code> ä»£è¡¨ä¸‰å…ƒç»„ <code>(ex:zhangsan, å‚åŠ , ex:graphdb)</code> ï¼Œè¯¥èŠ‚ç‚¹é€šè¿‡ RDF å†…ç½®å±æ€§ <code>rdf:subject</code>ã€<code>rdf:predicate</code> å’Œ <code>rdf:object</code> åˆ†åˆ«ä¸ä»£è¡¨çš„ä¸‰å…ƒç»„çš„ä¸»è¯­ã€è°“è¯­å’Œå®¾è¯­å»ºç«‹èµ·è”ç³»ï¼Œè¿™æ ·ä¸‰å…ƒç»„(ex:participate, æƒé‡, 0.4)å°±å®ç°äº†ä¸ºåŸä¸‰å…ƒç»„å¢åŠ è¾¹å±æ€§çš„æ•ˆæœã€‚</p><p><img src="https://picbed.octalzhihao.top/img/20250309140313685.png" alt="image-20241017195459046" /></p><h4 id="2-å±æ€§å›¾"><a class="markdownIt-Anchor" href="#2-å±æ€§å›¾"></a> 2. å±æ€§å›¾</h4><blockquote><p><strong>ä¸ªäººç†è§£ï¼šæ‰€æœ‰èŠ‚ç‚¹éƒ½æ˜¯ä¸€ä¸ªmapçš„æœ‰å‘å›¾</strong></p></blockquote><p>â€‹å±æ€§å›¾å¯ä»¥è¯´æ˜¯ç›®å‰è¢«å›¾æ•°æ®åº“ä¸šç•Œé‡‡çº³æœ€å¹¿çš„ä¸€ç§å›¾æ•°æ®æ¨¡å‹ã€‚å±æ€§å›¾ç”±èŠ‚ç‚¹é›†å’Œè¾¹é›†ç»„æˆï¼Œä¸”æ»¡è¶³å¦‚ä¸‹æ€§è´¨ï¼š</p><p>ï¼ˆ1ï¼‰æ¯ä¸ªèŠ‚ç‚¹å…·æœ‰å”¯ä¸€çš„ idï¼›</p><p>ï¼ˆ2ï¼‰æ¯ä¸ªèŠ‚ç‚¹å…·æœ‰è‹¥å¹²æ¡å‡ºè¾¹ï¼›</p><p>ï¼ˆ3ï¼‰æ¯ä¸ªèŠ‚ç‚¹å…·æœ‰è‹¥å¹²æ¡å…¥è¾¹ï¼›</p><p>ï¼ˆ4ï¼‰æ¯ä¸ªèŠ‚ç‚¹å…·æœ‰ä¸€ç»„å±æ€§ï¼Œæ¯ä¸ªå±æ€§æ˜¯ä¸€ä¸ªé”®å€¼å¯¹ï¼›</p><p>ï¼ˆ5ï¼‰æ¯æ¡è¾¹å…·æœ‰å”¯ä¸€çš„ idï¼›</p><p>ï¼ˆ6ï¼‰æ¯æ¡è¾¹å…·æœ‰ä¸€ä¸ªå¤´èŠ‚ç‚¹ï¼›</p><p>ï¼ˆ7ï¼‰æ¯æ¡è¾¹å…·æœ‰ä¸€ä¸ªå°¾èŠ‚ç‚¹ï¼›</p><p>ï¼ˆ8ï¼‰æ¯æ¡è¾¹å…·æœ‰ä¸€ä¸ªæ ‡ç­¾ï¼Œè¡¨ç¤ºè”ç³»ï¼›</p><p>ï¼ˆ9ï¼‰æ¯æ¡è¾¹å…·æœ‰ä¸€ç»„å±æ€§ï¼Œæ¯ä¸ªå±æ€§æ˜¯ä¸€ä¸ªé”®å€¼å¯¹ã€‚</p><p><img src="https://picbed.octalzhihao.top/img/20250309140313687.png" alt="image-20241017195932080" /></p><h3 id="312-çŸ¥è¯†å›¾è°±æŸ¥è¯¢è¯­è¨€"><a class="markdownIt-Anchor" href="#312-çŸ¥è¯†å›¾è°±æŸ¥è¯¢è¯­è¨€"></a> 3.1.2 çŸ¥è¯†å›¾è°±æŸ¥è¯¢è¯­è¨€</h3><p>ç›®å‰ï¼ŒRDF å›¾ä¸Šçš„æŸ¥è¯¢è¯­è¨€æ˜¯ SPARQLï¼›</p><p>å±æ€§å›¾ä¸Šçš„æŸ¥è¯¢è¯­è¨€å¸¸ç”¨çš„æ˜¯ Cypher å’Œ Gremlinã€‚</p><h4 id="1-sparql"><a class="markdownIt-Anchor" href="#1-sparql"></a> 1. SPARQL</h4><p>ä¸¾ä¸ªæ —å­ï¼š</p><p>ï¼ˆ1ï¼‰æŸ¥è¯¢ç¨‹åºå‘˜å¼ ä¸‰è®¤è¯†çš„å…¶ä»–ç¨‹åºå‘˜</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">PREFIX ex: &lt;http://www.example.com/&gt;</span><br><span class="line">SELECT ?p</span><br><span class="line">WHERE &#123; ex:zhangsan ex:knows ?p . &#125;</span><br></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ex:lisi</span><br><span class="line">ex:wangwu</span><br></pre></td></tr></table></figure><p>è¯´æ˜ï¼šPREFIX å…³é”®å­—å°† ex å®šä¹‰ä¸º URI <code>http://www.example.com/</code> çš„å‰ç¼€ç¼©å†™ï¼ŒWHERE å…³é”®å­—æŒ‡æ˜äº†æŸ¥è¯¢çš„ä¸‰å…ƒç»„æ¨¡å¼ï¼ˆTriple Patternï¼‰ï¼ŒSELECT å…³é”®å­—åˆ—å‡ºäº†è¦è¿”å›çš„ç»“æœå˜é‡ã€‚ä¸‰å…ƒç»„æ¨¡å¼æŸ¥è¯¢æ˜¯æœ€åŸºæœ¬çš„ SPARQL æŸ¥è¯¢ã€‚</p><h4 id="2cypher"><a class="markdownIt-Anchor" href="#2cypher"></a> 2ï¼Cypher</h4><p>Cypher æœ€åˆæ˜¯å›¾æ•°æ®åº“ Neo4j ä¸­å®ç°çš„å±æ€§å›¾æ•°æ®æŸ¥è¯¢è¯­è¨€ã€‚</p><p>ä¸ SPARQL ä¸€æ ·ï¼ŒCypher ä¹Ÿæ˜¯ä¸€ç§å£°æ˜å¼è¯­è¨€ï¼Œå³ç”¨æˆ·åªéœ€è¦å£°æ˜â€œæŸ¥ä»€ä¹ˆâ€ï¼Œè€Œæ— é¡»å…³å¿ƒâ€œæ€ä¹ˆæŸ¥â€ã€‚ï¼ˆå’ŒSQLä¸€æ ·ï¼‰</p><p>ä¸¾ä¸ªæ —å­ï¼š</p><p>ï¼ˆ1ï¼‰æŸ¥è¯¢å›¾ä¸­çš„æ‰€æœ‰ç¨‹åºå‘˜èŠ‚ç‚¹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">MATCH (p:ç¨‹åºå‘˜)</span><br><span class="line">RETURN p</span><br></pre></td></tr></table></figure><p>â€‹è¾“å‡ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;å§“å=å¼ ä¸‰, å¹´é¾„=29&#125;</span><br><span class="line">&#123;å§“å=æå››, å¹´é¾„=27&#125;</span><br><span class="line">&#123;å§“å=ç‹äº”, å¹´é¾„=32&#125;</span><br><span class="line">&#123;å§“å=èµµå…­, å¹´é¾„=35&#125;</span><br></pre></td></tr></table></figure><p>ï¼ˆ2ï¼‰æŸ¥è¯¢ç¨‹åºå‘˜ä¸â€œå›¾æ•°æ®åº“â€é¡¹ç›®ä¹‹é—´çš„è¾¹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">MATCH (:ç¨‹åºå‘˜)-[r]-&gt;(:é¡¹ç›®&#123;name:&#x27;å›¾æ•°æ®åº“&#x27;&#125;)</span><br><span class="line">RETURN r</span><br></pre></td></tr></table></figure><p>â€‹è¾“å‡ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(1)-[å‚åŠ &#123;æƒé‡=0.4&#125;]-&gt;(3)</span><br><span class="line">(4)-[å‚åŠ &#123;æƒé‡=0.4&#125;]-&gt;(3)</span><br><span class="line">(6)-[å‚åŠ &#123;æƒé‡=0.2&#125;]-&gt;(3)</span><br></pre></td></tr></table></figure><h4 id="3gremlin"><a class="markdownIt-Anchor" href="#3gremlin"></a> 3ï¼Gremlin</h4><p>Gremlin æ˜¯ Apache TinkerPop å›¾è®¡ç®—æ¡†æ¶æä¾›çš„å±æ€§å›¾æŸ¥è¯¢è¯­è¨€ã€‚</p><p>Gremlin çš„å®šä½æ˜¯<strong>å›¾éå†è¯­è¨€</strong>ï¼Œå…¶æ‰§è¡Œæœºåˆ¶å¥½æ¯”æ˜¯ä¸€ä¸ªäººç½®èº«äºå›¾ä¸­æ²¿ç€æœ‰å‘è¾¹ï¼Œä»ä¸€ä¸ªèŠ‚ç‚¹åˆ°å¦ä¸€ä¸ªèŠ‚ç‚¹è¿›è¡Œå¯¼èˆªå¼çš„æ¸¸èµ°ã€‚</p><p>è¿™ç±»è¯­è¨€çš„ä¼˜ç‚¹æ˜¯å¯ä»¥æ—¶åˆ»çŸ¥é“è‡ªå·±åœ¨å›¾ä¸­æ‰€å¤„çš„ä½ç½®ï¼Œä»¥åŠæ˜¯å¦‚ä½•åˆ°è¾¾è¯¥ä½ç½®çš„ï¼›ç¼ºç‚¹æ˜¯ç”¨æˆ·éœ€è¦â€œè®¤è¯†è·¯â€ï¼</p><p>ä¸å—åˆ°SQL å½±å“çš„å£°æ˜å¼è¯­è¨€ SPARQL å’Œ Cypher ä¸åŒï¼ŒGremlin æ›´åƒä¸€ç§å‡½æ•°å¼çš„ç¼–ç¨‹è¯­è¨€æ¥å£ã€‚</p><p>ä¸¾ä¸ªæ —å­ï¼š</p><p>ï¼ˆ1ï¼‰åˆ—å‡ºå›¾ä¸­æ‰€æœ‰èŠ‚ç‚¹çš„å±æ€§</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">g.V</span><br></pre></td></tr></table></figure><p>â€‹è¾“å‡ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;å§“å=å¼ ä¸‰, å¹´é¾„=29&#125;</span><br><span class="line">&#123;å§“å=æå››, å¹´é¾„=27&#125;</span><br><span class="line">&#123;é¡¹ç›®=å›¾æ•°æ®åº“, è¯­è¨€=Java&#125;</span><br><span class="line">&#123;å§“å=ç‹äº”, å¹´é¾„=32&#125;</span><br><span class="line">&#123;é¡¹ç›®=RDF ä¸‰å…ƒç»„åº“, è¯­è¨€=C++&#125;</span><br><span class="line">&#123;å§“å=èµµå…­, å¹´é¾„=35&#125;</span><br></pre></td></tr></table></figure><p>â€‹è¯´æ˜ï¼šV è¡¨ç¤ºèŠ‚ç‚¹é›†åˆã€‚</p><p>ï¼ˆ2ï¼‰åˆ—å‡ºå›¾ä¸­æ‰€æœ‰çš„è¾¹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">g.E</span><br></pre></td></tr></table></figure><p>â€‹è¾“å‡ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">e[7][1-è®¤è¯†-&gt;2]</span><br><span class="line">e[8][1-è®¤è¯†-&gt;4]</span><br><span class="line">e[9][1-å‚åŠ -&gt;3]</span><br><span class="line">e[10][4-å‚åŠ -&gt;5]</span><br><span class="line">e[11][4-å‚åŠ -&gt;3]</span><br><span class="line">e[12][6-å‚åŠ -&gt;3]</span><br></pre></td></tr></table></figure><p>â€‹è¯´æ˜ï¼šE è¡¨ç¤ºè¾¹é›†åˆã€‚</p><p>ï¼ˆ3ï¼‰æŸ¥è¯¢ä»èŠ‚ç‚¹ 1 å‡ºå‘çš„æ ‡ç­¾ä¸ºâ€œè®¤è¯†â€çš„è¾¹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">g.v(1).outE(&#x27;è®¤è¯†&#x27;)</span><br></pre></td></tr></table></figure><p>â€‹è¾“å‡ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">e[7][1-è®¤è¯†-&gt;2]</span><br><span class="line">e[8][1-è®¤è¯†-&gt;4]</span><br></pre></td></tr></table></figure><p>â€‹è¯´æ˜ï¼šv(1)é€‰å– id ä¸º 1 çš„èŠ‚ç‚¹ï¼›outE è¡¨ç¤ºèŠ‚ç‚¹çš„å‡ºè¾¹é›†åˆï¼ŒoutE(â€˜è®¤è¯†â€™)æ˜¯æ ‡ç­¾ä¸ºâ€œè®¤è¯†â€çš„å‡ºè¾¹é›†åˆã€‚</p><h2 id="32-å¸¸è§çŸ¥è¯†å›¾è°±å­˜å‚¨æ–¹å¼"><a class="markdownIt-Anchor" href="#32-å¸¸è§çŸ¥è¯†å›¾è°±å­˜å‚¨æ–¹å¼"></a> 3.2 å¸¸è§çŸ¥è¯†å›¾è°±å­˜å‚¨æ–¹å¼</h2><p>æœ¬èŠ‚ä»‹ç»ä¸‰ç±»çŸ¥è¯†å›¾è°±æ•°æ®åº“ï¼š</p><ol><li><p>åŸºäºå…³ç³»æ•°æ®åº“çš„å­˜å‚¨æ–¹æ¡ˆ</p></li><li><p>é¢å‘ RDF çš„ä¸‰å…ƒç»„æ•°æ®åº“</p></li><li><p>åŸç”Ÿå›¾æ•°æ®åº“</p></li></ol><h3 id="321-åŸºäºå…³ç³»æ•°æ®åº“çš„å­˜å‚¨æ–¹æ¡ˆ"><a class="markdownIt-Anchor" href="#321-åŸºäºå…³ç³»æ•°æ®åº“çš„å­˜å‚¨æ–¹æ¡ˆ"></a> 3.2.1 åŸºäºå…³ç³»æ•°æ®åº“çš„å­˜å‚¨æ–¹æ¡ˆ</h3><h4 id="1ä¸‰å…ƒç»„è¡¨"><a class="markdownIt-Anchor" href="#1ä¸‰å…ƒç»„è¡¨"></a> 1ï¼ä¸‰å…ƒç»„è¡¨</h4><p>ä¸‰å…ƒç»„è¡¨æ˜¯å°†çŸ¥è¯†å›¾è°±å­˜å‚¨åˆ°å…³ç³»æ•°æ®åº“çš„æœ€ç®€å•ã€æœ€ç›´æ¥çš„åŠæ³•ï¼Œå°±æ˜¯åœ¨å…³ç³»æ•°æ®åº“ä¸­å»ºç«‹ä¸€å¼ å…·æœ‰ 3 åˆ—çš„è¡¨ï¼Œè¯¥è¡¨çš„æ¨¡å¼ä¸º</p><p>ä¸‰å…ƒç»„è¡¨ (ä¸»è¯­, è°“è¯­, å®¾è¯­)</p><p><img src="https://picbed.octalzhihao.top/img/20250309140313688.png" alt="" /></p><p>ä¸‰å…ƒç»„è¡¨å­˜å‚¨æ–¹æ¡ˆè™½ç„¶ç®€å•æ˜äº†ï¼Œä½†ä¸‰å…ƒç»„è¡¨çš„è¡Œæ•°ä¸çŸ¥è¯†å›¾è°±çš„è¾¹æ•°ä¸€æ ·ï¼Œ<strong>å…¶æœ€å¤§é—®é¢˜åœ¨äºå°†çŸ¥è¯†å›¾è°±æŸ¥è¯¢ç¿»è¯‘ä¸º SQL æŸ¥è¯¢åçš„ä¸‰å…ƒç»„è¡¨è‡ªè¿æ¥</strong>ã€‚</p><p>æŸ¥æ‰¾ 1850 å¹´å‡ºç”Ÿä¸” 1934 å¹´é€ä¸–çš„åˆ›åŠäº†æŸå…¬å¸çš„äººï¼š</p><p><img src="https://picbed.octalzhihao.top/img/20250309140313689.png" alt="image-20241017202549628" /></p><h4 id="2æ°´å¹³è¡¨"><a class="markdownIt-Anchor" href="#2æ°´å¹³è¡¨"></a> 2ï¼æ°´å¹³è¡¨</h4><p>æ°´å¹³è¡¨æ¯è¡Œè®°å½•å­˜å‚¨ä¸€ä¸ªçŸ¥è¯†å›¾è°±ä¸­ä¸€ä¸ªä¸»è¯­çš„æ‰€æœ‰è°“è¯­å’Œå®¾è¯­ã€‚</p><p>å®é™…ä¸Šï¼Œæ°´å¹³è¡¨å°±ç›¸å½“äºçŸ¥è¯†å›¾è°±çš„é‚»æ¥è¡¨ã€‚</p><p><img src="https://picbed.octalzhihao.top/img/20250309140313690.png" alt="image-20241017202710419" /></p><p>ä¼˜ç‚¹ï¼š</p><p><img src="https://picbed.octalzhihao.top/img/20250309140313691.png" alt="image-20241017202750982" /></p><p>ç¼ºç‚¹ï¼šå­˜åœ¨å¤§é‡ç©ºå€¼ï¼Œæµªè´¹ç©ºé—´ã€‚</p><blockquote><p>ä½†æ˜¯æ°´å¹³è¡¨çš„ç¼ºç‚¹åœ¨äºï¼šæ‰€éœ€åˆ—çš„æ•°ç›®ç­‰äºçŸ¥è¯†å›¾è°±ä¸­ä¸åŒè°“è¯­æ•°é‡ï¼Œåœ¨çœŸå®çŸ¥è¯†å›¾è°±æ•°æ®é›†ä¸­ï¼Œä¸åŒè°“è¯­æ•°é‡å¯èƒ½ä¸ºå‡ åƒä¸ªåˆ°ä¸Šä¸‡ä¸ªï¼Œå¾ˆå¯èƒ½è¶…å‡ºå…³ç³»æ•°æ®åº“å…è®¸çš„è¡¨ä¸­åˆ—æ•°ç›®çš„ä¸Šé™ï¼›å¯¹äºä¸€è¡Œæ¥è¯´ï¼Œä»…åœ¨æå°‘æ•°åˆ—ä¸Šå…·æœ‰å€¼ï¼Œè¡¨ä¸­å­˜åœ¨å¤§é‡ç©ºå€¼ã€‚</p></blockquote><h4 id="3å±æ€§è¡¨"><a class="markdownIt-Anchor" href="#3å±æ€§è¡¨"></a> 3ï¼å±æ€§è¡¨</h4><p>å±æ€§è¡¨ï¼ˆProperty Tableï¼‰å­˜å‚¨æ–¹æ¡ˆæ˜¯å¯¹æ°´å¹³è¡¨çš„ç»†åŒ–ï¼Œå°†åŒç±»ä¸»è¯­åˆ†åˆ°ä¸€ä¸ªè¡¨ä¸­ï¼Œä¸åŒç±»ä¸»è¯­åˆ†åˆ°ä¸åŒè¡¨ä¸­ã€‚è¿™æ ·å°±è§£å†³äº†è¡¨ä¸­åˆ—çš„æ•°ç›®è¿‡å¤šçš„é—®é¢˜ã€‚</p><p><img src="https://picbed.octalzhihao.top/img/20250309140313692.png" alt="image-20241017203032601" /></p><p><img src="https://picbed.octalzhihao.top/img/20250309140313693.png" alt="image-20241017203045971" /></p><p><strong>å±æ€§è¡¨æ—¢å…‹æœäº†ä¸‰å…ƒç»„è¡¨çš„è‡ªè¿æ¥é—®é¢˜ï¼Œåˆè§£å†³äº†æ°´å¹³è¡¨ä¸­åˆ—æ•°ç›®è¿‡å¤šçš„é—®é¢˜ã€‚</strong></p><p>ä½†å±æ€§è¡¨æ–¹æ¡ˆä»æœ‰ç¼ºç‚¹ï¼š</p><ul><li>å¯¹äºè§„æ¨¡ç¨å¤§çš„çœŸå®çŸ¥è¯†å›¾è°±æ•°æ®ï¼Œä¸»è¯­çš„ç±»åˆ«å¯èƒ½æœ‰å‡ åƒä¸ªåˆ°ä¸Šä¸‡ä¸ªï¼ŒæŒ‰ç…§å±æ€§è¡¨æ–¹æ¡ˆï¼Œéœ€è¦<strong>å»ºç«‹å‡ åƒä¸ªåˆ°ä¸Šä¸‡ä¸ªè¡¨</strong>ï¼Œè¿™å¾€å¾€è¶…è¿‡äº†å…³ç³»æ•°æ®åº“çš„é™åˆ¶ã€‚</li><li>å¯¹äºçŸ¥è¯†å›¾è°±ä¸Šç¨å¤æ‚çš„æŸ¥è¯¢ï¼Œå±æ€§è¡¨æ–¹æ¡ˆä»ç„¶ä¼šè¿›è¡Œ<strong>å¤šä¸ªè¡¨ä¹‹é—´çš„è¿æ¥æ“ä½œ</strong>ï¼Œä»è€Œå½±å“æŸ¥è¯¢æ•ˆç‡ã€‚</li><li>å³ä½¿åœ¨åŒä¸€ç±»å‹ä¸­ï¼Œä¸åŒä¸»è¯­å…·æœ‰çš„<strong>è°“è¯­é›†åˆä¹Ÿå¯èƒ½å­˜åœ¨è¾ƒå¤§å·®å¼‚</strong>ï¼Œè¿™æ ·ä¼šé€ æˆä¸æ°´å¹³è¡¨ä¸­ç±»ä¼¼çš„ç©ºå€¼é—®é¢˜ã€‚</li></ul><blockquote><p>é‡‡ç”¨å±æ€§è¡¨å­˜å‚¨æ–¹æ¡ˆçš„ä»£è¡¨æ˜¯ RDF ä¸‰å…ƒç»„åº“ Jenaã€‚</p></blockquote><h4 id="4å‚ç›´åˆ’åˆ†"><a class="markdownIt-Anchor" href="#4å‚ç›´åˆ’åˆ†"></a> 4ï¼å‚ç›´åˆ’åˆ†</h4><p>å‚ç›´åˆ’åˆ†ï¼ˆVertical Partitioningï¼‰å­˜å‚¨æ–¹æ¡ˆæ˜¯ç”±ç¾å›½éº»çœç†å·¥å­¦é™¢çš„ Abadi ç­‰äººåœ¨ 2007 å¹´æå‡ºçš„ RDF æ•°æ®å­˜å‚¨æ–¹æ³•ã€‚</p><p>è¯¥æ–¹æ³•ä»¥ä¸‰å…ƒç»„çš„è°“è¯­ä½œä¸ºåˆ’åˆ†ç»´åº¦ï¼Œå°† RDF çŸ¥è¯†å›¾è°±åˆ’åˆ†ä¸ºè‹¥å¹²å¼ åªåŒ…å«(ä¸»è¯­, å®¾è¯­)ä¸¤åˆ—çš„è¡¨ï¼Œè¡¨çš„æ€»æ•°é‡å³çŸ¥è¯†å›¾è°±ä¸­ä¸åŒè°“è¯­çš„æ•°é‡ï¼›<strong>ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸ºæ¯ç§è°“è¯­å»ºç«‹ä¸€å¼ è¡¨</strong>ï¼Œè¡¨ä¸­å­˜æ”¾çŸ¥è¯†å›¾è°±ä¸­ç”±è¯¥è°“è¯­è¿æ¥çš„ä¸»è¯­å’Œå®¾è¯­å€¼ã€‚</p><p><img src="https://picbed.octalzhihao.top/img/20250309140313694.png" alt="image-20241017210221122" /></p><blockquote><p>æ¯ä¸ªè°“è¯­è¡¨éƒ½æŒ‰ä¸»è¯­åˆ—çš„å€¼è¿›è¡Œæ’åºï¼Œèƒ½å¤Ÿä½¿ç”¨å½’å¹¶æ’åºè¿æ¥ï¼ˆMerge-sort Joinï¼‰å¿«é€Ÿæ‰§è¡Œä¸åŒè°“è¯­è¡¨çš„è¿æ¥æŸ¥è¯¢æ“ä½œã€‚</p></blockquote><h4 id="5å…­é‡ç´¢å¼•"><a class="markdownIt-Anchor" href="#5å…­é‡ç´¢å¼•"></a> 5ï¼å…­é‡ç´¢å¼•</h4><p>å…­é‡ç´¢å¼•ï¼ˆSextuple Indexingï¼‰å­˜å‚¨æ–¹æ¡ˆæ˜¯å¯¹<strong>ä¸‰å…ƒç»„è¡¨çš„æ‰©å±•</strong>ï¼Œæ˜¯ä¸€ç§å…¸å‹çš„â€œç©ºé—´æ¢æ—¶é—´â€ç­–ç•¥ï¼Œå…¶å°†ä¸‰å…ƒç»„å…¨éƒ¨ 6 ç§æ’åˆ—å¯¹åº”åœ°å»ºç«‹ä¸º 6 å¼ è¡¨ã€‚</p><p>å…­é‡ç´¢å¼•å­˜å‚¨æ–¹æ¡ˆå­˜åœ¨çš„é—®é¢˜åŒ…æ‹¬ï¼šè™½ç„¶éƒ¨åˆ†ç¼“è§£äº†ä¸‰å…ƒç»„è¡¨çš„å•è¡¨è‡ªè¿æ¥é—®é¢˜ï¼Œä½†éœ€è¦èŠ±è´¹ 6 å€çš„å­˜å‚¨ç©ºé—´å¼€é”€ã€ç´¢å¼•ç»´æŠ¤ä»£ä»·å’Œæ•°æ®æ›´æ–°æ—¶çš„ä¸€è‡´æ€§ç»´æŠ¤ä»£ä»·ã€‚</p><p><img src="https://picbed.octalzhihao.top/img/20250309140313695.png" alt="image-20241017210456654" /></p><h4 id="6db2rdf"><a class="markdownIt-Anchor" href="#6db2rdf"></a> 6ï¼DB2RDF</h4><p>DB2RDF æ˜¯ç”± IBM ç ”ç©¶ä¸­å¿ƒäº 2013 å¹´æå‡ºçš„ä¸€ç§<strong>é¢å‘å®ä½“</strong>çš„ RDF çŸ¥è¯†å›¾è°±å­˜å‚¨æ–¹æ¡ˆï¼Œè¯¥æ–¹æ¡ˆæ˜¯ä»¥å¾€ RDF å…³ç³»å­˜å‚¨æ–¹æ¡ˆçš„ä¸€ç§æƒè¡¡æŠ˜ä¸­ï¼Œæ—¢å…·å¤‡äº†ä¸‰å…ƒç»„è¡¨ã€å±æ€§è¡¨å’Œå‚ç›´åˆ’åˆ†æ–¹æ¡ˆçš„éƒ¨åˆ†ä¼˜ç‚¹ï¼Œåˆå…‹æœäº†è¿™äº›æ–¹æ¡ˆçš„éƒ¨åˆ†ç¼ºç‚¹ã€‚</p><p>ä¸‰å…ƒç»„è¡¨çš„ä¼˜åŠ¿åœ¨äºâ€œè¡Œç»´åº¦â€ä¸Šçš„çµæ´»æ€§ï¼Œå³å­˜å‚¨æ¨¡å¼ä¸ä¼šéšè¡Œçš„å¢åŠ è€Œå˜åŒ–ï¼›DB2RDF æ–¹æ¡ˆå°†è¿™ç§çµæ´»æ€§æ‰©å±•åˆ°â€œåˆ—ç»´åº¦â€ä¸Šï¼Œå³<strong>å°†è¡¨çš„åˆ—ä½œä¸ºè°“è¯­å’Œå®¾è¯­çš„å­˜å‚¨ä½ç½®ï¼Œè€Œä¸å°†åˆ—ä¸è°“è¯­è¿›è¡Œç»‘å®š</strong>ã€‚</p><p>DB2RDF å­˜å‚¨æ–¹æ¡ˆç”± 4 å¼ è¡¨ç»„æˆï¼Œå³ dph è¡¨ã€rph è¡¨ã€ds è¡¨å’Œ rs è¡¨ï¼›å›¾ 3-13 ç»™å‡ºäº† å›¾ 3-4 ä¸­çŸ¥è¯†å›¾è°±å¯¹åº”çš„ DB2RDF å­˜å‚¨æ–¹æ¡ˆã€‚</p><ul><li><p>**dphï¼ˆdirect primary hashï¼‰**æ˜¯å­˜å‚¨æ–¹æ¡ˆçš„ä¸»è¡¨ï¼Œè¯¥è¡¨ä¸­ä¸€è¡Œå­˜å‚¨ä¸€ä¸ªä¸»è¯­ï¼ˆä¸»è¯­åˆ—ï¼‰åŠå…¶å…¨éƒ¨è°“è¯­ï¼ˆpred<em>i</em> åˆ—ï¼‰å’Œå®¾è¯­ï¼ˆval<em>i</em> åˆ—ï¼‰ã€‚</p></li><li><p>å¯¹äºå¤šå€¼è°“è¯­çš„å¤„ç†ï¼Œå¼•å…¥ <strong>dsï¼ˆdirect secondary hashï¼‰è¡¨</strong>ã€‚å½“ dph è¡¨ä¸­é‡åˆ°ä¸€ä¸ªå¤šå€¼è°“è¯­æ—¶ï¼Œåˆ™åœ¨ç›¸åº”çš„å®¾è¯­å¤„ç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„ id å€¼ï¼›å°†è¯¥ id å€¼å’Œæ¯ä¸ªå¯¹åº”çš„å®¾è¯­å­˜å‚¨ä¸º dsè¡¨çš„ä¸€è¡Œã€‚ä¾‹å¦‚ï¼Œåœ¨å›¾ 3-13 çš„ dph è¡¨ä¸­ï¼Œä¸»è¯­ Google çš„è°“è¯­ industryï¼ˆpred1 åˆ—ï¼‰æ˜¯å¤šå€¼è°“è¯­ï¼Œåˆ™åœ¨å…¶å®¾è¯­åˆ—ï¼ˆval1ï¼‰å­˜å‚¨ id å€¼ lid:1ï¼›åœ¨ ds è¡¨ä¸­å­˜å‚¨ lid:1 å…³è”çš„ä¸¤ä¸ªå®¾è¯­Software å’Œ Internetã€‚</p></li><li><p>ä¸ºäº†æé«˜æŸ¥è¯¢å¤„ç†æ•ˆç‡ï¼Œè¿˜éœ€è¦å­˜å‚¨å®ä½“èŠ‚ç‚¹çš„å…¥è¾¹ä¿¡æ¯ï¼ˆä»å®¾</p><p>è¯­ç»è°“è¯­åˆ°ä¸»è¯­ï¼‰ã€‚ä¸ºæ­¤ï¼ŒDB2RDF æ–¹æ¡ˆæä¾›äº† <strong>rphï¼ˆreverse primary hashï¼‰è¡¨å’Œ rsï¼ˆreverse secondary hashï¼‰è¡¨</strong>ã€‚</p></li></ul><p><img src="https://picbed.octalzhihao.top/img/20250309140313696.png" alt="image-20241017210819612" /></p><p><img src="https://picbed.octalzhihao.top/img/20250309140313697.png" alt="image-20241017210829010" /></p><h4 id="å°ç»“"><a class="markdownIt-Anchor" href="#å°ç»“"></a> å°ç»“</h4><p><img src="https://picbed.octalzhihao.top/img/20250309140313698.png" alt="image-20241017210329270" /></p><h3 id="323-åŸç”Ÿå›¾æ•°æ®åº“"><a class="markdownIt-Anchor" href="#323-åŸç”Ÿå›¾æ•°æ®åº“"></a> 3.2.3 åŸç”Ÿå›¾æ•°æ®åº“</h3>]]></content>
      
      
      <categories>
          
          <category> çŸ¥è¯†å›¾è°± </category>
          
      </categories>
      
      
        <tags>
            
            <tag> çŸ¥è¯†å›¾è°± </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€ŠçŸ¥è¯†å›¾è°±ï¼šæ–¹æ³•ã€å®è·µä¸åº”ç”¨ã€‹é˜…è¯»ç¬”è®°ï¼ˆ1ï¼‰çŸ¥è¯†å›¾è°±è¡¨ç¤ºä¸å»ºæ¨¡</title>
      <link href="/posts/56649.html"/>
      <url>/posts/56649.html</url>
      
        <content type="html"><![CDATA[<h1 id="ç¬¬äºŒç« -çŸ¥è¯†å›¾è°±è¡¨ç¤ºä¸å»ºæ¨¡"><a class="markdownIt-Anchor" href="#ç¬¬äºŒç« -çŸ¥è¯†å›¾è°±è¡¨ç¤ºä¸å»ºæ¨¡"></a> ç¬¬äºŒç«  çŸ¥è¯†å›¾è°±è¡¨ç¤ºä¸å»ºæ¨¡</h1><blockquote><p>çŸ¥è¯†å›¾è°±è¡¨ç¤ºï¼ˆKnowledge Graph Representationï¼‰æŒ‡çš„æ˜¯ç”¨ä»€ä¹ˆè¯­è¨€å¯¹çŸ¥è¯†å›¾è°±è¿›è¡Œå»ºæ¨¡ï¼Œä»è€Œå¯ä»¥æ–¹ä¾¿çŸ¥è¯†è®¡ç®—ã€‚ä»å›¾çš„è§’åº¦æ¥çœ‹ï¼ŒçŸ¥è¯†å›¾è°±æ˜¯ä¸€ä¸ªè¯­ä¹‰ç½‘ç»œï¼Œå³ä¸€ç§ç”¨äº’è”çš„èŠ‚ç‚¹å’Œå¼§è¡¨ç¤ºçŸ¥è¯†çš„ä¸€ä¸ªç»“æ„ã€‚</p></blockquote><h2 id="21-ä»€ä¹ˆæ˜¯çŸ¥è¯†è¡¨ç¤º"><a class="markdownIt-Anchor" href="#21-ä»€ä¹ˆæ˜¯çŸ¥è¯†è¡¨ç¤º"></a> 2.1 ä»€ä¹ˆæ˜¯çŸ¥è¯†è¡¨ç¤º</h2><p>æ— è®ºæ˜¯è¯­ä¹‰ç½‘ç»œï¼Œè¿˜æ˜¯æ¡†æ¶è¯­è¨€å’Œäº§ç”Ÿå¼è§„åˆ™ï¼Œéƒ½ç¼ºå°‘ä¸¥æ ¼çš„è¯­ä¹‰ç†è®ºæ¨¡å‹å’Œå½¢å¼åŒ–çš„è¯­ä¹‰å®šä¹‰ã€‚ä¸ºäº†è§£å†³è¿™ä¸€é—®é¢˜ï¼Œäººä»¬å¼€å§‹ç ”ç©¶å…·æœ‰è¾ƒå¥½çš„ç†è®ºæ¨¡å‹åŸºç¡€å’Œç®—æ³•å¤æ‚åº¦çš„çŸ¥è¯†è¡¨ç¤ºæ¡†æ¶ã€‚æ¯”è¾ƒæœ‰ä»£è¡¨æ€§çš„æ˜¯æè¿°é€»è¾‘è¯­è¨€ï¼ˆDescription Logicï¼‰ã€‚æè¿°é€»è¾‘æ˜¯ç›®å‰å¤§å¤šæ•°æœ¬ä½“è¯­è¨€ï¼ˆå¦‚ OWLï¼‰çš„ç†è®ºåŸºç¡€ã€‚</p><p><strong>è¯­ä¹‰ç½‘çš„åŸºç¡€æ•°æ®æ¨¡å‹ RDF</strong> å—åˆ°äº†å…ƒæ•°æ®æ¨¡å‹ã€æ¡†æ¶ç³»ç»Ÿå’Œé¢å‘å¯¹è±¡è¯­è¨€ç­‰å¤šæ–¹é¢çš„å½±å“ï¼Œå…¶æœ€åˆæ˜¯ä¸ºäººä»¬åœ¨ Web ä¸Šå‘å¸ƒç»“æ„åŒ–æ•°æ®æä¾›ä¸€ä¸ªæ ‡å‡†çš„æ•°æ®æè¿°æ¡†æ¶ã€‚</p><p>ä¸æ­¤åŒæ—¶ï¼Œè¯­ä¹‰ç½‘è¿›ä¸€æ­¥å¸æ”¶<strong>æè¿°é€»è¾‘çš„ç ”ç©¶æˆæœ</strong>ï¼Œå‘å±•å‡ºäº†ç”¨ <strong>OWL ç³»åˆ—</strong>æ ‡å‡†åŒ–æœ¬ä½“è¯­è¨€ã€‚</p><p>éšç€è¡¨ç¤ºå­¦ä¹ çš„å‘å±•ï¼Œä»¥åŠè‡ªç„¶è¯­è¨€å¤„ç†é¢†åŸŸè¯å‘é‡ç­‰åµŒå…¥ï¼ˆEmbeddingï¼‰æŠ€æœ¯æ‰‹æ®µçš„å‡ºç°ï¼Œå¯å‘äº†äººä»¬ç”¨<strong>ç±»ä¼¼äºè¯å‘é‡çš„ä½ç»´ç¨ å¯†å‘é‡çš„æ–¹å¼è¡¨ç¤ºçŸ¥è¯†</strong>ã€‚é€šè¿‡åµŒå…¥å°†çŸ¥è¯†å›¾è°±ä¸­çš„å®ä½“å’Œå…³ç³»æŠ•å°„åˆ°ä¸€ä¸ªä½ç»´çš„è¿ç»­å‘é‡ç©ºé—´ï¼Œå¯ä»¥ä¸ºæ¯ä¸€ä¸ªå®ä½“å’Œå…³ç³»å­¦ä¹ å‡ºä¸€ä¸ªä½ç»´åº¦çš„å‘é‡è¡¨ç¤ºã€‚</p><p><img src="https://picbed.octalzhihao.top/img/202503091240263.png" alt="image-20241019142826881" /></p><h2 id="22-äººå·¥æ™ºèƒ½æ—©æœŸçš„çŸ¥è¯†è¡¨ç¤ºæ–¹æ³•"><a class="markdownIt-Anchor" href="#22-äººå·¥æ™ºèƒ½æ—©æœŸçš„çŸ¥è¯†è¡¨ç¤ºæ–¹æ³•"></a> 2.2 äººå·¥æ™ºèƒ½æ—©æœŸçš„çŸ¥è¯†è¡¨ç¤ºæ–¹æ³•</h2><h3 id="221-ä¸€é˜¶è°“è¯é€»è¾‘"><a class="markdownIt-Anchor" href="#221-ä¸€é˜¶è°“è¯é€»è¾‘"></a> 2.2.1 ä¸€é˜¶è°“è¯é€»è¾‘</h3><p>ä¸€é˜¶è°“è¯é€»è¾‘ï¼ˆæˆ–ç®€ç§°ä¸€é˜¶é€»è¾‘ï¼‰ï¼ˆFirst Order Logicï¼‰æ˜¯å…¬ç†ç³»ç»Ÿçš„æ ‡å‡†å½¢å¼é€»è¾‘ã€‚</p><p><img src="https://picbed.octalzhihao.top/img/202503091240265.png" alt="image-20241019143006048" /></p><h3 id="222-éœæ©å­å¥å’Œéœæ©é€»è¾‘"><a class="markdownIt-Anchor" href="#222-éœæ©å­å¥å’Œéœæ©é€»è¾‘"></a> 2.2.2 éœæ©å­å¥å’Œéœæ©é€»è¾‘</h3><p><strong>éœæ©å­å¥</strong>ï¼ˆHorn Clauseï¼‰å¾—åäºé€»è¾‘å­¦å®¶ Alfred Horn[6]ã€‚ä¸€ä¸ªå­å¥æ˜¯æ–‡å­—çš„æå–ã€‚</p><p><strong>éœæ©é€»è¾‘</strong>ï¼ˆHorn Logicï¼‰æ˜¯ä¸€é˜¶é€»è¾‘çš„å­é›†ã€‚åŸºäºéœæ©é€»è¾‘çš„çŸ¥è¯†åº“æ˜¯ä¸€ä¸ªéœæ©è§„åˆ™çš„é›†åˆã€‚</p><p><img src="https://picbed.octalzhihao.top/img/202503091240266.png" alt="image-20241019143159251" /></p><h3 id="223-è¯­ä¹‰ç½‘ç»œ"><a class="markdownIt-Anchor" href="#223-è¯­ä¹‰ç½‘ç»œ"></a> 2.2.3 è¯­ä¹‰ç½‘ç»œ</h3><p><strong>è¯­ä¹‰ç½‘ç»œåˆç§°è”æƒ³ç½‘ç»œ</strong>ï¼Œå®ƒåœ¨å½¢å¼ä¸Šæ˜¯ä¸€ä¸ªå¸¦æ ‡è¯†çš„æœ‰å‘å›¾ã€‚</p><p>**å›¾ä¸­â€œèŠ‚ç‚¹â€**ç”¨ä»¥è¡¨ç¤ºå„ç§äº‹ç‰©ã€æ¦‚å¿µã€æƒ…å†µã€çŠ¶æ€ç­‰ã€‚æ¯ä¸ªèŠ‚ç‚¹å¯ä»¥å¸¦æœ‰è‹¥å¹²å±æ€§ã€‚</p><p><strong>èŠ‚ç‚¹ä¸èŠ‚ç‚¹é—´çš„â€œè¿æ¥å¼§â€</strong>ï¼ˆç§°ä¸ºè”æƒ³å¼§ï¼‰ç”¨ä»¥è¡¨ç¤ºå„ç§è¯­ä¹‰è”ç³»ã€åŠ¨ä½œã€‚</p><p>è¯­ä¹‰ç½‘ç»œçš„å•å…ƒæ˜¯ä¸‰å…ƒç»„ï¼šï¼ˆèŠ‚ç‚¹ 1, è”æƒ³å¼§, èŠ‚ç‚¹ 2ï¼‰ã€‚</p><blockquote><p>ä¾‹å¦‚ï¼ˆTim Berners-Lee, ç±»å‹, å›¾çµå¥–å¾—ä¸»ï¼‰å’Œï¼ˆTim Berners-Lee, å‘æ˜, äº’è”ç½‘ï¼‰æ˜¯ä¸‰å…ƒç»„ã€‚</p></blockquote><p>ç”±äºæ‰€æœ‰çš„èŠ‚ç‚¹å‡é€šè¿‡è”æƒ³å¼§å½¼æ­¤ç›¸è¿ï¼Œè¯­ä¹‰ç½‘ç»œå¯ä»¥é€šè¿‡å›¾ä¸Šçš„æ“ä½œè¿›è¡ŒçŸ¥è¯†æ¨ç†ã€‚</p><p><img src="https://picbed.octalzhihao.top/img/202503091240267.png" alt="image-20241019143402422" /></p><p><img src="https://picbed.octalzhihao.top/img/202503091240268.png" alt="image-20241019143435814" /></p><h3 id="224-æ¡†æ¶"><a class="markdownIt-Anchor" href="#224-æ¡†æ¶"></a> 2.2.4 æ¡†æ¶</h3><p>æ¡†æ¶ï¼ˆFrameï¼‰æœ€æ—©ç”± Marvin Minsky åœ¨ 1975 å¹´æå‡ºï¼Œç›®æ ‡æ˜¯æ›´å¥½åœ°ç†è§£è§†è§‰æ¨ç†å’Œè‡ªç„¶è¯­è¨€å¤„ç†ã€‚<strong>å…¶ç†è®ºçš„åŸºæœ¬æ€æƒ³æ˜¯</strong>ï¼šè®¤ä¸ºäººä»¬å¯¹ç°å®ä¸–ç•Œä¸­å„ç§äº‹ç‰©çš„è®¤è¯†éƒ½ä»¥ä¸€ç§ç±»ä¼¼äºæ¡†æ¶çš„ç»“æ„å­˜å‚¨åœ¨è®°å¿†ä¸­ã€‚å½“é¢ä¸´ä¸€ä¸ªæ–°äº‹ç‰©æ—¶ï¼Œå°±ä»è®°å¿†ä¸­æ‰¾å‡ºä¸€ä¸ªåˆé€‚çš„æ¡†æ¶ï¼Œå¹¶æ ¹æ®å®é™…æƒ…å†µå¯¹å…¶ç»†èŠ‚åŠ ä»¥ä¿®æ”¹ã€è¡¥å……ï¼Œä»è€Œå½¢æˆå¯¹å½“å‰äº‹ç‰©çš„è®¤è¯†ã€‚</p><p><img src="https://picbed.octalzhihao.top/img/202503091240269.png" alt="image-20241019143644855" /></p><p><img src="https://picbed.octalzhihao.top/img/202503091240270.png" alt="image-20241019143656145" /></p><h3 id="225-æè¿°é€»è¾‘"><a class="markdownIt-Anchor" href="#225-æè¿°é€»è¾‘"></a> 2.2.5 æè¿°é€»è¾‘</h3><p>æè¿°é€»è¾‘å¯ä»¥è¢«çœ‹æˆæ˜¯åˆ©ç”¨ä¸€é˜¶é€»è¾‘å¯¹è¯­ä¹‰ç½‘ç»œå’Œæ¡†æ¶è¿›è¡Œå½¢å¼åŒ–åçš„äº§ç‰©ã€‚</p><p>æè¿°é€»è¾‘ä¸€èˆ¬æ”¯æŒä¸€å…ƒè°“è¯å’ŒäºŒå…ƒè°“è¯ã€‚**ä¸€å…ƒè°“è¯ç§°ä¸ºç±»ï¼ŒäºŒå…ƒè°“è¯ç§°ä¸ºå…³ç³»ã€‚**æè¿°é€»è¾‘çš„é‡è¦ç‰¹å¾æ˜¯åŒæ—¶å…·æœ‰å¾ˆå¼ºçš„è¡¨è¾¾èƒ½åŠ›å’Œå¯åˆ¤å®šæ€§ã€‚æè¿°é€»è¾‘è¿‘å¹´æ¥å—åˆ°å¹¿æ³›å…³æ³¨ï¼Œè¢«é€‰ä¸º <strong>W3C äº’è”ç½‘æœ¬ä½“è¯­è¨€ï¼ˆOWLï¼‰çš„ç†è®ºåŸºç¡€</strong>ã€‚</p><p><img src="https://picbed.octalzhihao.top/img/202503091240271.png" alt="image-20241019143818526" /></p><h2 id="23-äº’è”ç½‘æ—¶ä»£çš„è¯­ä¹‰ç½‘çŸ¥è¯†è¡¨ç¤ºæ¡†æ¶"><a class="markdownIt-Anchor" href="#23-äº’è”ç½‘æ—¶ä»£çš„è¯­ä¹‰ç½‘çŸ¥è¯†è¡¨ç¤ºæ¡†æ¶"></a> 2.3 äº’è”ç½‘æ—¶ä»£çš„è¯­ä¹‰ç½‘çŸ¥è¯†è¡¨ç¤ºæ¡†æ¶</h2><p>ç€è¯­ä¹‰ç½‘çš„æå‡ºï¼ŒçŸ¥è¯†è¡¨ç¤ºè¿æ¥äº†æ–°çš„å¥‘æœºå’ŒæŒ‘æˆ˜ï¼Œ<strong>å¥‘æœºåœ¨äº</strong>è¯­ä¹‰ç½‘ä¸ºçŸ¥è¯†è¡¨ç¤ºæä¾›äº†ä¸€ä¸ªå¾ˆå¥½çš„åº”ç”¨åœºæ™¯ï¼Œ<strong>æŒ‘æˆ˜åœ¨äº</strong>é¢å‘è¯­ä¹‰ç½‘çš„çŸ¥è¯†è¡¨ç¤ºéœ€è¦æä¾›ä¸€å¥—æ ‡å‡†è¯­è¨€å¯ä»¥ç”¨æ¥æè¿° Web çš„å„ç§ä¿¡æ¯ã€‚</p><p>æ—©æœŸ Web çš„æ ‡å‡†è¯­è¨€ HTML å’Œ XML æ— æ³•é€‚åº”è¯­ä¹‰ç½‘å¯¹çŸ¥è¯†è¡¨ç¤ºçš„è¦æ±‚ï¼Œæ‰€ä»¥ W3C æå‡ºäº†<strong>æ–°çš„æ ‡å‡†è¯­è¨€ RDFã€RDFS å’Œ OWL</strong>ã€‚è¿™ä¸¤ç§è¯­è¨€çš„è¯­æ³•å¯ä»¥è·Ÿ XML å…¼å®¹ã€‚</p><h3 id="231-rdf-å’Œ-rdfs"><a class="markdownIt-Anchor" href="#231-rdf-å’Œ-rdfs"></a> 2.3.1 RDF å’Œ RDFS</h3><p>RDF æ˜¯ W3C çš„ RDF å·¥ä½œç»„åˆ¶å®šçš„å…³äºçŸ¥è¯†å›¾è°±çš„å›½é™…æ ‡å‡†ã€‚RDF æ˜¯ W3C ä¸€ç³»åˆ—è¯­ä¹‰ç½‘æ ‡å‡†çš„æ ¸å¿ƒï¼Œå¦‚å›¾ 2-4 æ‰€ç¤ºã€‚</p><ul><li>è¡¨ç¤ºç»„ï¼ˆRepresentationï¼‰åŒ…æ‹¬ URI/IRIã€XML å’Œ RDFã€‚å‰ä¸¤è€…ä¸»è¦æ˜¯ä¸º RDF æä¾›è¯­æ³•åŸºç¡€ã€‚</li><li>æ¨ç†ç»„ï¼ˆReasoningï¼‰åŒ…æ‹¬ RDF-Sã€æœ¬ä½“ OWLã€è§„åˆ™ RIF å’Œç»Ÿä¸€é€»è¾‘ã€‚ç»Ÿä¸€é€»è¾‘ç›®å‰è¿˜æ²¡æœ‰å®šè®ºã€‚</li><li>ä¿¡ä»»ç»„å’Œç”¨æˆ·äº’åŠ¨ç»„ã€‚</li></ul><p><img src="https://picbed.octalzhihao.top/img/202503091240272.png" alt="image-20241019144210782" /></p><p>2006 å¹´ï¼Œäººä»¬å¼€å§‹ç”¨ RDF å‘å¸ƒå’Œé“¾æ¥æ•°æ®ï¼Œä»è€Œç”ŸæˆçŸ¥è¯†å›¾è°±.</p><p><img src="https://picbed.octalzhihao.top/img/202503091240274.png" alt="image-20241019144532572" /></p><h4 id="1rdf-ç®€ä»‹"><a class="markdownIt-Anchor" href="#1rdf-ç®€ä»‹"></a> 1ï¼RDF ç®€ä»‹</h4><p>åœ¨ RDF ä¸­ï¼ŒçŸ¥è¯†æ€»æ˜¯ä»¥ä¸‰å…ƒç»„çš„å½¢å¼å‡ºç°ã€‚æ¯ä¸€ä»½çŸ¥è¯†å¯ä»¥è¢«åˆ†è§£ä¸ºå¦‚ä¸‹å½¢å¼ï¼š<code>(subject, predicate, object)</code>ã€‚</p><blockquote><p>ä¾‹å¦‚ï¼Œâ€œIBM é‚€è¯· Jeff Pan ä½œä¸ºè®²è€…ï¼Œæ¼”è®²ä¸»é¢˜æ˜¯çŸ¥è¯†å›¾è°±â€å¯ä»¥å†™æˆä»¥ä¸‹ RDF ä¸‰å…ƒç»„ï¼šï¼ˆIBM-Talk,speaker,Jeffï¼‰,ï¼ˆIBM-Talk,theme,KGï¼‰ã€‚</p></blockquote><p>RDF ä¸­çš„<strong>ä¸»è¯­</strong>æ˜¯ä¸€ä¸ªä¸ªä½“ï¼ˆIndividualï¼‰ï¼Œä¸ªä½“æ˜¯ç±»çš„å®ä¾‹ã€‚</p><p>RDF ä¸­çš„<strong>è°“è¯­</strong>æ˜¯ä¸€ä¸ªå±æ€§ã€‚å±æ€§å¯ä»¥è¿æ¥ä¸¤ä¸ªä¸ªä½“ï¼Œæˆ–è€…è¿æ¥ä¸€ä¸ªä¸ªä½“å’Œä¸€ä¸ªæ•°æ®ç±»å‹çš„å®ä¾‹ã€‚</p><p>æ¢è¨€ä¹‹ï¼ŒRDF ä¸­çš„<strong>å®¾è¯­</strong>å¯ä»¥æ˜¯ä¸€ä¸ªä¸ªä½“ï¼Œä¾‹å¦‚ï¼ˆIBM-Talk,speaker,Jeffï¼‰ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªæ•°æ®ç±»å‹çš„å®ä¾‹ï¼Œä¾‹å¦‚ï¼ˆIBMTalk,talkDate,â€œ05-10-2012â€^xsd:dateï¼‰ã€‚</p><ul><li>å¦‚æœæŠŠä¸‰å…ƒç»„çš„ä¸»è¯­å’Œå®¾è¯­çœ‹æˆå›¾çš„èŠ‚ç‚¹ï¼Œä¸‰å…ƒç»„çš„è°“è¯­çœ‹æˆè¾¹ï¼Œé‚£ä¹ˆä¸€ä¸ª RDF çŸ¥è¯†åº“åˆ™å¯ä»¥è¢«çœ‹æˆä¸€ä¸ªå›¾æˆ–ä¸€ä¸ªçŸ¥è¯†å›¾è°±</li></ul><p><img src="https://picbed.octalzhihao.top/img/202503091240275.png" alt="image-20241019144901316" /></p><ul><li><p>å…¨å±€æ ‡è¯† URI å¯ä»¥è¢«ç®€åŒ–æˆå‰ç¼€ URIã€‚</p></li><li><p>RDF å…è®¸æ²¡æœ‰å…¨å±€æ ‡è¯†çš„ç©ºç™½èŠ‚ç‚¹ï¼ˆBlank Nodeï¼‰ã€‚ç©ºç™½èŠ‚ç‚¹çš„å‰ç¼€ä¸ºâ€œ_â€ã€‚</p></li></ul><p><img src="https://picbed.octalzhihao.top/img/202503091240276.png" alt="image-20241019145014237" /></p><h4 id="2å¼€æ”¾ä¸–ç•Œå‡è®¾"><a class="markdownIt-Anchor" href="#2å¼€æ”¾ä¸–ç•Œå‡è®¾"></a> 2ï¼å¼€æ”¾ä¸–ç•Œå‡è®¾</h4><p>ä¸åŒäºç»å…¸æ•°æ®åº“é‡‡ç”¨å°é—­ä¸–ç•Œå‡è®¾ï¼ŒRDF é‡‡ç”¨çš„æ˜¯å¼€æ”¾ä¸–ç•Œå‡è®¾ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒRDFå›¾è°±é‡Œçš„çŸ¥è¯†æœ‰å¯èƒ½æ˜¯ä¸å®Œå¤‡çš„ï¼Œè¿™ç¬¦åˆ Web çš„ å¼€ æ”¾ æ€§ ç‰¹ ç‚¹ å’Œ è¦ æ±‚ ã€‚</p><h2 id="todo"><a class="markdownIt-Anchor" href="#todo"></a> TODO</h2><h2 id="25-çŸ¥è¯†å›¾è°±çš„å‘é‡è¡¨ç¤ºæ–¹æ³•"><a class="markdownIt-Anchor" href="#25-çŸ¥è¯†å›¾è°±çš„å‘é‡è¡¨ç¤ºæ–¹æ³•"></a> 2.5 çŸ¥è¯†å›¾è°±çš„å‘é‡è¡¨ç¤ºæ–¹æ³•</h2><p>æœ¬èŠ‚è¦æè¿°çš„æ–¹æ³•æ˜¯æŠŠçŸ¥è¯†å›¾è°±ä¸­çš„å®ä½“å’Œå…³ç³»<strong>æ˜ å°„åˆ°ä½ç»´è¿ç»­çš„å‘é‡ç©ºé—´</strong>ï¼Œè€Œä¸æ˜¯ä½¿ç”¨åŸºäºç¦»æ•£ç¬¦å·çš„è¡¨è¾¾æ–¹å¼ã€‚</p><h3 id="251-çŸ¥è¯†å›¾è°±è¡¨ç¤ºçš„æŒ‘æˆ˜"><a class="markdownIt-Anchor" href="#251-çŸ¥è¯†å›¾è°±è¡¨ç¤ºçš„æŒ‘æˆ˜"></a> 2.5.1 çŸ¥è¯†å›¾è°±è¡¨ç¤ºçš„æŒ‘æˆ˜</h3><p>åœ¨å‰é¢æåˆ°çš„ä¸€äº›çŸ¥è¯†å›¾è°±çš„è¡¨ç¤ºæ–¹æ³•ä¸­ï¼Œå…¶åŸºç¡€å¤§å¤šæ˜¯ä»¥ä¸‰å…ƒç»„çš„æ–¹æ³•å¯¹çŸ¥è¯†è¿›è¡Œç»„ç»‡ã€‚</p><p>çŸ¥è¯†<strong>ä»¥åŸºäºç¦»æ•£ç¬¦å·çš„æ–¹æ³•è¿›è¡Œè¡¨è¾¾</strong>ï¼Œä½†è¿™äº›ç¬¦å·å¹¶ä¸èƒ½åœ¨è®¡ç®—æœºä¸­è¡¨è¾¾ç›¸åº”è¯­ä¹‰å±‚é¢çš„ä¿¡æ¯ï¼Œä¹Ÿ<strong>ä¸èƒ½è¿›è¡Œè¯­ä¹‰è®¡ç®—</strong>ï¼Œå¯¹ä¸‹æ¸¸çš„ä¸€äº›åº”ç”¨å¹¶ä¸å‹å¥½ã€‚</p><p>åœ¨åŸºäºç½‘ç»œç»“æ„çš„çŸ¥è¯†å›¾è°±ä¸Šè¿›è¡Œç›¸å…³åº”ç”¨æ—¶ï¼Œå› ä¸ºå›¾ç»“æ„çš„ç‰¹æ®Šæ€§ï¼Œåº”ç”¨ç®—æ³•çš„ä½¿ç”¨<strong>ä¸å›¾ç®—æ³•æœ‰å…³ï¼Œç›¸å…³ç®—æ³•å…·æœ‰è¾ƒé«˜çš„å¤æ‚åº¦</strong>ï¼Œé¢å¯¹å¤§è§„æ¨¡çš„çŸ¥è¯†åº“å¾ˆéš¾æ‰©å±•ã€‚</p><p>å¯¹äºå½“å‰çš„æ•°æ®é‡è¾ƒå¤§çš„çŸ¥è¯†å›¾è°±ã€å˜åŒ–å„å¼‚çš„åº”ç”¨æ¥è¯´ï¼Œéœ€è¦æ”¹è¿›ä¼ ç»Ÿçš„è¡¨ç¤ºæ–¹æ³•ã€‚</p><h3 id="252-è¯çš„å‘é‡è¡¨ç¤ºæ–¹æ³•"><a class="markdownIt-Anchor" href="#252-è¯çš„å‘é‡è¡¨ç¤ºæ–¹æ³•"></a> 2.5.2 è¯çš„å‘é‡è¡¨ç¤ºæ–¹æ³•</h3><h4 id="1ç‹¬çƒ­ç¼–ç "><a class="markdownIt-Anchor" href="#1ç‹¬çƒ­ç¼–ç "></a> 1ï¼ç‹¬çƒ­ç¼–ç </h4><p>æ–¹æ³•ç®€å•ï¼Œä½†æ²¡æœ‰ç¼–ç è¯­ä¹‰å±‚é¢çš„ä¿¡æ¯ï¼Œç¨€ç–æ€§éå¸¸å¼ºï¼Œå½“æ•´ä¸ªè¯å…¸éå¸¸å¤§æ—¶ï¼Œç¼–ç å‡ºå‘é‡çš„ç»´åº¦ä¹Ÿä¼šå¾ˆå¤§ã€‚</p><h4 id="2è¯è¢‹æ¨¡å‹"><a class="markdownIt-Anchor" href="#2è¯è¢‹æ¨¡å‹"></a> 2ï¼è¯è¢‹æ¨¡å‹</h4><p>è¯è¢‹æ¨¡å‹ï¼ˆBag-of-Wordsï¼ŒBoWï¼‰æ˜¯ä¸€ç§å¯¹æ–‡æœ¬ä¸­è¯çš„è¡¨ç¤ºæ–¹æ³•ã€‚</p><blockquote><p>ç±»ä¼¼äºcntæ•°ç»„</p></blockquote><p>è¯¥æ–¹æ³•å°†æ–‡æœ¬æƒ³è±¡æˆä¸€ä¸ªè£…è¯çš„è¢‹å­ï¼Œä¸è€ƒè™‘è¯ä¹‹é—´çš„ä¸Šä¸‹æ–‡å…³ç³»ï¼Œä¸å…³å¿ƒè¯åœ¨è¢‹å­ä¸­å­˜æ”¾çš„é¡ºåºï¼Œä»…è®°å½•æ¯ä¸ªè¯åœ¨è¯¥æ–‡æœ¬ï¼ˆè¯è¢‹ï¼‰ä¸­å‡ºç°çš„æ¬¡æ•°ã€‚</p><h4 id="3è¯å‘é‡"><a class="markdownIt-Anchor" href="#3è¯å‘é‡"></a> 3ï¼è¯å‘é‡</h4><p>ä¸Šé¢å¯¹è¯çš„è¡¨ç¤ºæ–¹æ³•å¹¶æ²¡æœ‰è€ƒè™‘è¯­ä¹‰å±‚é¢çš„ä¿¡æ¯ï¼Œä¸ºäº†æ›´å¤šåœ°è¡¨ç¤º<strong>è¯ä¸è¯ä¹‹é—´çš„è¯­ä¹‰ç›¸ä¼¼ç¨‹åº¦</strong>ï¼Œæå‡ºè¯çš„åˆ†å¸ƒå¼è¡¨ç¤ºï¼Œä¹Ÿå°±æ˜¯åŸºäºä¸Šä¸‹æ–‡çš„ç¨ å¯†å‘é‡è¡¨ç¤ºæ³•ï¼Œé€šå¸¸ç§°ä¸º<strong>è¯å‘é‡æˆ–è¯åµŒå…¥ï¼ˆWord Embeddingï¼‰</strong>ã€‚äº§ç”Ÿè¯å‘é‡çš„æ‰‹æ®µä¸»è¦æœ‰ä¸‰ç§ï¼š</p><ul><li><p>Count-basedã€‚åŸºäºè®¡æ•°çš„æ–¹æ³•ï¼Œç®€å•è¯´å°±æ˜¯è®°å½•æ–‡æœ¬ä¸­è¯çš„å‡ºç°æ¬¡æ•°ã€‚</p></li><li><p>Predictiveã€‚åŸºäºé¢„æµ‹çš„æ–¹æ³•ï¼Œæ—¢å¯ä»¥é€šè¿‡ä¸Šä¸‹æ–‡é¢„æµ‹ä¸­å¿ƒè¯ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ä¸­å¿ƒè¯é¢„æµ‹ä¸Šä¸‹æ–‡ã€‚</p></li><li><p>Task-basedã€‚åŸºäºä»»åŠ¡çš„ï¼Œä¹Ÿå°±æ˜¯é€šè¿‡ä»»åŠ¡é©±åŠ¨çš„æ–¹æ³•ã€‚é€šè¿‡å¯¹è¯å‘é‡åœ¨å…·ä½“ä»»åŠ¡ä¸Šçš„è¡¨ç°æ•ˆæœå¯¹è¯å‘é‡è¿›è¡Œå­¦ä¹ </p></li></ul><p>ç»å…¸çš„å¼€æºå·¥å…· <code>word2vec</code> ä¸­åŒ…å«çš„ <code>CBoW</code> å’Œ <code>Skip-gram</code> ä¸¤ä¸ªæ¨¡å‹ã€‚</p><ul><li><p>CBoW ä¹Ÿå°±æ˜¯è¿ç»­è¯è¢‹æ¨¡å‹ï¼ˆContinuous Bag-of-Wordsï¼‰ï¼Œå’Œä¹‹å‰æåˆ°çš„ BoW ç›¸ä¼¼ä¹‹å¤„åœ¨äºè¯¥æ¨¡å‹ä¹Ÿä¸ç”¨è€ƒè™‘è¯åºçš„ä¿¡æ¯ã€‚<strong>å…¶ä¸»è¦æ€æƒ³æ˜¯ï¼Œç”¨ä¸Šä¸‹æ–‡é¢„æµ‹ä¸­å¿ƒè¯ï¼Œä»è€Œè®­ç»ƒå‡ºçš„è¯å‘é‡åŒ…å«äº†ä¸€å®šçš„ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚<strong>æ•´ä¸ªæ¨¡å‹åœ¨è®­ç»ƒçš„è¿‡ç¨‹å°±åƒæ˜¯ä¸€ä¸ªçª—å£åœ¨è®­ç»ƒè¯­æ–™ä¸Šè¿›è¡Œæ»‘åŠ¨ï¼Œæ‰€ä»¥è¢«ç§°ä¸º</strong>è¿ç»­è¯è¢‹æ¨¡å‹</strong>ã€‚</p></li><li><p>Skip-gram çš„æ€æƒ³ä¸ CBoW æ°æ°ç›¸åï¼Œ<strong>å…¶è€ƒè™‘ç”¨ä¸­å¿ƒè¯æ¥é¢„æµ‹ä¸Šä¸‹æ–‡è¯ã€‚</strong></p></li></ul><blockquote><p>CBoWï¼šå¦‚å›¾ 2-21ï¼ˆaï¼‰æ‰€ç¤ºï¼Œå…¶ä¸­ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>ğ’˜</mi><mi>ğ‘›</mi></msub></mrow><annotation encoding="application/x-tex">ğ’˜_ğ‘›</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.59444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord boldsymbol" style="margin-right:0.11111em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.11111em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> æ˜¯ä¸­å¿ƒè¯ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>ğ’˜</mi><mrow><mi>ğ‘›</mi><mtext>âˆ’</mtext><mn>2</mn></mrow></msub></mrow><annotation encoding="application/x-tex">ğ’˜_{ğ‘›âˆ’2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.652771em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord boldsymbol" style="margin-right:0.11111em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:-0.11111em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mord mtight">âˆ’</span><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span></span>ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>ğ’˜</mi><mrow><mi>ğ‘›</mi><mtext>âˆ’</mtext><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">ğ’˜_{ğ‘›âˆ’1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.652771em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord boldsymbol" style="margin-right:0.11111em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:-0.11111em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mord mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span></span>ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>ğ’˜</mi><mrow><mi>ğ‘›</mi><mo>+</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">ğ’˜_{ğ‘›+1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.652771em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord boldsymbol" style="margin-right:0.11111em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:-0.11111em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span></span>ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>ğ’˜</mi><mrow><mi>ğ‘›</mi><mo>+</mo><mn>2</mn></mrow></msub></mrow><annotation encoding="application/x-tex">ğ’˜_{ğ‘›+2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.652771em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord boldsymbol" style="margin-right:0.11111em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:-0.11111em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">+</span><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span></span> ä¸ºè¯¥ä¸­å¿ƒè¯çš„ä¸Šä¸‹æ–‡çš„è¯ã€‚å°†ä¸Šä¸‹æ–‡è¯çš„ç‹¬çƒ­è¡¨ç¤ºä¸è¯å‘é‡çŸ©é˜µ ğ‘¬ ç›¸ä¹˜ï¼Œæå–ç›¸åº”çš„è¯å‘é‡å¹¶æ±‚å’Œå¾—åˆ°æŠ•å½±å±‚ï¼Œç„¶åå†ç»è¿‡ä¸€ä¸ª Softmax å±‚æœ€ç»ˆå¾—åˆ°è¾“å‡ºï¼Œ<strong>è¾“å‡ºçš„æ¯ä¸€ç»´è¡¨è¾¾çš„å°±æ˜¯è¯è¡¨ä¸­æ¯ä¸ªè¯ä½œä¸ºè¯¥ä¸Šä¸‹æ–‡çš„ä¸­å¿ƒè¯çš„æ¦‚ç‡ã€‚</strong></p></blockquote><blockquote><p>Skip-gramï¼šå¦‚å›¾ 2-21ï¼ˆbï¼‰æ‰€ç¤ºï¼Œå…ˆé€šè¿‡ä¸­å¿ƒè¯çš„ç‹¬çƒ­è¡¨ç¤ºä»è¯å‘é‡çŸ©é˜µä¸­å¾—åˆ°ä¸­å¿ƒè¯çš„è¯å‘é‡å¾—åˆ°æŠ•å½±å±‚ï¼Œç„¶åç»è¿‡ä¸€å±‚Softmax å¾—åˆ°è¾“å‡ºï¼Œ<strong>è¾“å‡ºçš„æ¯ä¸€ç»´ä¸­ä»£è¡¨æŸä¸ªè¯ä½œä¸ºè¾“å…¥ä¸­å¿ƒè¯çš„ä¸Šä¸‹æ–‡å‡ºç°çš„æ¦‚ç‡ã€‚</strong></p></blockquote><p><img src="https://picbed.octalzhihao.top/img/202503091240277.png" alt="image-20241019151041810" /></p><p>åœ¨è®­ç»ƒå¥½çš„è¯å‘é‡ä¸­å¯ä»¥å‘ç°ä¸€äº›è¯çš„è¯å‘é‡åœ¨è¿ç»­ç©ºé—´ä¸­çš„ä¸€äº›å…³ç³»ã€‚</p><p><img src="https://picbed.octalzhihao.top/img/202503091240278.png" alt="image-20241019151110555" /></p><p>æ°å¥½å¯ä»¥ç®€å•åœ°ç†è§£æˆçŸ¥è¯†å›¾è°±ä¸­çš„å…³ç³»ï¼ˆrelationï¼‰ã€ï¼ˆRome, is-capital-of, Italyï¼‰å’Œï¼ˆParis, is-capital-of, Franceï¼‰ï¼Œå¯ä»¥çœ‹ä½œæ˜¯çŸ¥è¯†å›¾è°±ä¸­çš„ä¸‰å…ƒç»„ï¼ˆtripleï¼‰ï¼Œè¿™å¯¹çŸ¥è¯†å›¾è°±çš„å‘é‡è¡¨ç¤ºäº§ç”Ÿäº†ä¸€å®šçš„å¯å‘ã€‚</p><h3 id="253-çŸ¥è¯†å›¾è°±åµŒå…¥çš„æ¦‚å¿µ"><a class="markdownIt-Anchor" href="#253-çŸ¥è¯†å›¾è°±åµŒå…¥çš„æ¦‚å¿µ"></a> 2.5.3 çŸ¥è¯†å›¾è°±åµŒå…¥çš„æ¦‚å¿µ</h3><p>ä¸ºäº†è§£å†³å‰é¢æåˆ°çš„çŸ¥è¯†å›¾è°±è¡¨ç¤ºçš„æŒ‘æˆ˜ï¼Œåœ¨è¯å‘é‡çš„å¯å‘ä¸‹ï¼Œç ”ç©¶è€…è€ƒè™‘å¦‚ä½•å°†çŸ¥è¯†å›¾è°±ä¸­çš„å®ä½“å’Œå…³ç³»æ˜ å°„åˆ°è¿ç»­çš„å‘é‡ç©ºé—´ï¼Œå¹¶åŒ…å«ä¸€äº›è¯­ä¹‰å±‚é¢çš„ä¿¡æ¯ï¼Œå¯ä»¥ä½¿å¾—åœ¨ä¸‹æ¸¸ä»»åŠ¡ä¸­æ›´åŠ æ–¹ä¾¿åœ°æ“ä½œçŸ¥è¯†å›¾è°±ã€‚</p><p>æŠŠè¿™ç§å°†çŸ¥è¯†å›¾è°±ä¸­åŒ…æ‹¬å®ä½“å’Œå…³ç³»çš„å†…å®¹æ˜ å°„åˆ°è¿ç»­å‘é‡ç©ºé—´æ–¹æ³•çš„ç ”ç©¶é¢†åŸŸç§°ä¸ºçŸ¥è¯†å›¾è°±åµŒå…¥ï¼ˆ Knowledge Graph Embedding ï¼‰ã€ çŸ¥ è¯† å›¾ è°± çš„ å‘ é‡ è¡¨ ç¤º ã€ çŸ¥ è¯† å›¾ è°± çš„ è¡¨ ç¤º å­¦ ä¹ ï¼ˆRepresentation Learningï¼‰ã€çŸ¥è¯†è¡¨ç¤ºå­¦ä¹ ã€‚</p><p>ç±»ä¼¼äºè¯å‘é‡ï¼ŒçŸ¥è¯†å›¾è°±åµŒå…¥ä¹Ÿæ˜¯é€šè¿‡æœºå™¨å­¦ä¹ çš„æ–¹æ³•å¯¹æ¨¡å‹è¿›è¡Œå­¦ä¹ ï¼Œ<strong>ä¸ç‹¬çƒ­ç¼–ç ã€è¯è¢‹æ¨¡å‹çš„æœ€å¤§åŒºåˆ«åœ¨äºï¼ŒçŸ¥è¯†å›¾è°±åµŒå…¥æ–¹æ³•çš„è®­ç»ƒéœ€è¦åŸºäºç›‘ç£å­¦ä¹ </strong>ã€‚</p><p>ç±»ä¼¼äºè¯å‘é‡ï¼Œç»å…¸çš„çŸ¥è¯†å›¾è°±åµŒå…¥æ¨¡å‹ <strong>TransE</strong> çš„è®¾è®¡æ€æƒ³å°±æ˜¯ï¼Œå¦‚æœä¸€ä¸ªä¸‰å…ƒç»„ï¼ˆ<em>h</em>, <em>r</em>, <em>t</em>ï¼‰æˆç«‹ï¼Œé‚£ä¹ˆå®ƒä»¬éœ€è¦ç¬¦åˆ <em>h</em>+<em>r</em> â‰ˆ <em>t</em> å…³ç³»ï¼Œä¾‹å¦‚ï¼š</p>]]></content>
      
      
      <categories>
          
          <category> çŸ¥è¯†å›¾è°± </category>
          
      </categories>
      
      
        <tags>
            
            <tag> çŸ¥è¯†å›¾è°± </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è§£å†³ï¼šå®‰è£…äº†VMware Toolsï¼Œä½†æ— æ³•å®ç°æ–‡ä»¶çš„æ‹–æ‹½å’Œå¤åˆ¶ç²˜è´´</title>
      <link href="/posts/15406.html"/>
      <url>/posts/15406.html</url>
      
        <content type="html"><![CDATA[<blockquote><p>æœ¬æ–‡ä¸ºæ–°ç«™å»ºæˆåä»æ—§åšå®¢æ¬è¿ï¼ŒåŸæ–‡åœ°å€ï¼š<a href="https://www.cnblogs.com/zhouzhihao/p/16486787.html">https://www.cnblogs.com/zhouzhihao/p/16486787.html</a><br />åŸæ–‡å‘è¡¨äº2022-07-17 14:09<br />è¯·æ³¨æ„æ—¶æ•ˆæ€§</p></blockquote><p>ç¯å¢ƒï¼šWindows11ï¼ŒVMware16Proï¼ŒUbuntu20.04</p><p>æˆ‘ç»™è™šæ‹Ÿæœºè£…å¥½Ubuntuç³»ç»Ÿåï¼Œå®ƒé»˜è®¤æ˜¯å®‰è£…å¥½vmtoolsçš„ã€‚</p><p>è€Œä¸”è¿™äº›é€‰é¡¹é»˜è®¤æ˜¯å‹¾é€‰çš„ï¼Œä½†æ˜¯æˆ‘æ— æ³•å®ç°å®¿ä¸»æœºå’Œè™šæ‹Ÿæœºä¹‹é—´æ–‡ä»¶çš„æ‹–æ‹½å’Œå¤åˆ¶ç²˜è´´ã€‚</p><img src="https://picbed.octalzhihao.top/img/myblog/1591707071.png" width = "60%"><p>å¦‚æœä½ é‡åˆ°äº†å’Œæˆ‘ä¸€æ ·çš„é—®é¢˜ï¼Œä¸”ç½‘ä¸Šå¾ˆå¤šåšæ–‡æä¾›çš„è§£å†³æ–¹æ¡ˆéƒ½æ— æ³•è§£å†³ä½ çš„é—®é¢˜ï¼Œé‚£ä¹ˆè¯·å¾€ä¸‹çœ‹</p><p>æˆ‘è¯•äº†å„è·¯å¤§ç¥çš„è§£å†³æ–¹æ¡ˆï¼ŒåŸºæœ¬éƒ½è¡Œä¸é€šã€‚</p><p>åªæœ‰ä¸€ç¯‡æ ‡é¢˜å’Œè¿™ä¸ªé—®é¢˜ç›¸å…³åº¦ä¸é«˜çš„æ–‡ç« ï¼Œæåˆ°äº†ä¸€ç§é‡è£…VMware toolsçš„æ–¹æ³•ï¼Œæˆ‘è¯•äº†ä¸€ä¸‹ç»ˆäºè§£å†³äº†é—®é¢˜ã€‚</p><p>è¿™é‡Œè¦è¯´ä¸€ä¸‹ï¼Œç½‘ä¸Šçš„å¾ˆå¤šæ–‡ç« ç”¨cdé‡Œå¸¦çš„VMware toolså‹ç¼©åŒ…æ¥é‡æ–°å®‰è£…ï¼ˆè¿˜è¦æ‰‹åŠ¨è¾“yesçš„é‚£ä¸ªæ–¹æ³•ï¼‰ï¼Œæˆ‘è¯•äº†ï¼Œæ ¹æœ¬æ²¡æœ‰ç”¨ã€‚</p><p>æ¯•ç«Ÿåˆå§‹å®‰è£…çš„å°±æ˜¯é‚£ä¸ªç‰ˆæœ¬ï¼Œå†é‡æ–°å®‰è£…ä¸€ä¸‹å¹¶æ²¡æœ‰æ„ä¹‰ã€‚</p><p>çœŸæ­£çš„è§£å†³æ–¹æ¡ˆå…¶å®å¾ˆæ–¹ä¾¿ï¼š</p><p>æ‰“å¼€ç»ˆç«¯</p><p>1.å¸è½½VMware Tools</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get autoremove open-vm-tools</span><br></pre></td></tr></table></figure><p>2.è”ç½‘å®‰è£…VMware tools</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install open-vm-tools-desktop</span><br></pre></td></tr></table></figure><p>å¦‚æœå‡ºé”™äº†ï¼Œå°±æ‰§è¡Œä¸‹é¢ä¸¤è¡Œå‘½ä»¤</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install open-vm-tools-desktop fuse</span><br></pre></td></tr></table></figure><p>3.é‡å¯è™šæ‹Ÿæœºå³å¯</p>]]></content>
      
      
      <categories>
          
          <category> æ‚è°ˆ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨lambdaè¡¨è¾¾å¼å®ç°sortçš„è‡ªå®šä¹‰æ’åº</title>
      <link href="/posts/32384.html"/>
      <url>/posts/32384.html</url>
      
        <content type="html"><![CDATA[<h2 id="å‰è¨€"><a class="markdownIt-Anchor" href="#å‰è¨€"></a> å‰è¨€</h2><p>é¦–å…ˆå¤§è‡´è®²ä¸€ä¸‹ä»€ä¹ˆæ˜¯lambdaè¡¨è¾¾å¼ï¼š</p><p>ä½ ä¹Ÿå¯ä»¥å°†å®ƒå°±å½“åšæ˜¯åŒ¿åå‡½æ•°ï¼Œlambdaè¡¨è¾¾å¼å…¶å®å°±æ˜¯åŒ¿åå‡½æ•°æ¼”åŒ–å‡ºçš„ä¸€ç§è¯­æ³•ç³»ç»Ÿã€‚</p><p>ä¸¾ä¸ªæ —å­ï¼š</p><p><strong>æ™®é€šå‡½æ•°</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">function</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span></span>;   <span class="comment">//å£°æ˜ï¼ˆå®šä¹‰ï¼‰</span></span><br><span class="line"><span class="built_in">function</span>(<span class="number">1</span>, <span class="number">2</span>);              <span class="comment">//è°ƒç”¨</span></span><br></pre></td></tr></table></figure><p><strong>åŒ¿åå‡½æ•°ï¼ˆlambdaè¡¨è¾¾å¼ï¼‰</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[](<span class="type">int</span> x, <span class="type">int</span> y)&#123;å‡½æ•°ä¸»ä½“&#125;;          <span class="comment">//å£°æ˜ï¼ˆå®šä¹‰ï¼‰</span></span><br><span class="line">[](<span class="type">int</span> x, <span class="type">int</span> y)&#123;å‡½æ•°ä¸»ä½“&#125;(<span class="number">1</span>, <span class="number">2</span>);    <span class="comment">//è°ƒç”¨</span></span><br></pre></td></tr></table></figure><p>ä¸€ä¸ªå¾ˆæ˜æ˜¾çš„åŒºåˆ«å°±æ˜¯ä½¿ç”¨lambdaè¡¨è¾¾å¼å°±çœå»äº†ç»™å‡½æ•°å‘½åçš„å·¥ä½œ</p><p>è€Œä¸”å¯¹äºä¸€äº›ç®€çŸ­çš„å‡½æ•°ï¼Œç›´æ¥ç”¨lambdaè¡¨è¾¾å¼å£°æ˜+è°ƒç”¨èƒ½æé«˜ä¸€ç‚¹ç¼–ç æ•ˆç‡</p><p>å°±æ¯”å¦‚è¯´ï¼Œå¸¸ç”¨çš„è‡ªå®šä¹‰sortçš„æ¯”è¾ƒå‡½æ•°ã€‚</p><hr /><p>å…³äºlambdaè¡¨è¾¾å¼å¦‚æœæƒ³è¿›ä¸€æ­¥äº†è§£ï¼š</p><p>ä½¿ç”¨Javaçš„åŒå­¦å¯ä»¥å†è¯»è¯»å»–è€å¸ˆè¿™ç¯‡æ•™ç¨‹ -&gt; <a href="https://www.liaoxuefeng.com/wiki/1252599548343744/1305158055100449">ä¼ é€é—¨</a></p><p>ä½¿ç”¨C++çš„åŒå­¦å¯ä»¥è¯»è¯»è¿™ç¯‡åšå®¢ -&gt; <a href="https://blog.csdn.net/Ezra521/article/details/113694743" title="ä¼ é€é—¨">ä¼ é€é—¨</a></p><hr /><p>å¦‚æœæˆ‘ä»¬ç”¨æ™®é€šå‡½æ•°çš„å†™æ³•æ¥é‡è½½è¿ç®—ç¬¦</p><p>é‚£ä¹ˆæ˜¯è¿™æ ·å†™</p><p>(æƒ³äº†è§£æ›´å¤šï¼Œå¯ä»¥è¯»è¯»æˆ‘çš„è¿™ç¯‡æ–‡ç«  -&gt; <a href="https://www.cnblogs.com/zhouzhihao/p/10974594.html" title="ä¼ é€é—¨">ä¼ é€é—¨</a>)</p><p>æ­£æ–‡å¼€å§‹</p><h2 id="cç¯‡"><a class="markdownIt-Anchor" href="#cç¯‡"></a> C++ç¯‡</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">int</span> a[<span class="number">15</span>]=&#123;<span class="number">0</span>,<span class="number">10</span>,<span class="number">9</span>,<span class="number">8</span>,<span class="number">1</span>,<span class="number">5</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">6</span>,<span class="number">4</span>,<span class="number">7</span>&#125;;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">cmp</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y)</span></span>&#123;<span class="keyword">return</span> x&gt;y;&#125;</span><br><span class="line"><span class="comment">//è¿™æ ·å®ç°çš„æ˜¯é™åº</span></span><br><span class="line"><span class="comment">//C++å†…éƒ¨é»˜è®¤ç”¨çš„æ˜¯&lt;å®ç°sortï¼Œæ‰€ä»¥æ˜¯å‡åº</span></span><br><span class="line"><span class="comment">//æ¯”è¾ƒå‡½æ•°çš„æ„ä¹‰å°±åœ¨äºå°†&lt;é‡è½½ä¸º&gt; </span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="built_in">sort</span>(a, a<span class="number">+11</span>, cmp);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;=<span class="number">10</span>;i++)</span><br><span class="line">cout&lt;&lt;a[i]&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è€Œç”¨lambdaè¡¨è¾¾å¼å°±å¯ä»¥è¿™æ ·å†™</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">int</span> a[<span class="number">15</span>]=&#123;<span class="number">0</span>,<span class="number">10</span>,<span class="number">9</span>,<span class="number">8</span>,<span class="number">1</span>,<span class="number">5</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">6</span>,<span class="number">4</span>,<span class="number">7</span>&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="built_in">sort</span>(a,a<span class="number">+11</span>,[](<span class="type">int</span> x,<span class="type">int</span> y)&#123;<span class="keyword">return</span> x&gt;y;&#125;);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;=<span class="number">10</span>;i++)</span><br><span class="line">cout&lt;&lt;a[i]&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åŒæ ·lambdaè¡¨è¾¾å¼å¯¹vectorä¹Ÿæ˜¯é€‚ç”¨çš„</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">int</span> a[<span class="number">15</span>]=&#123;<span class="number">0</span>,<span class="number">10</span>,<span class="number">9</span>,<span class="number">8</span>,<span class="number">1</span>,<span class="number">5</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">6</span>,<span class="number">4</span>,<span class="number">7</span>&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; b;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">auto</span> x : a) <span class="comment">//æŠŠaæ•°ç»„å¤åˆ¶ç»™bå‘é‡ </span></span><br><span class="line">b.<span class="built_in">push_back</span>(x);</span><br><span class="line"><span class="built_in">sort</span>(b.<span class="built_in">begin</span>(),b.<span class="built_in">end</span>(),[](<span class="type">int</span> x,<span class="type">int</span> y)&#123;<span class="keyword">return</span> x&gt;y;&#125; );</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;=<span class="number">10</span>;i++)</span><br><span class="line">cout&lt;&lt;b[i]&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯èƒ½æ˜¯é’ˆå¯¹pairæˆ–ç»“æ„ä½“æ¥è‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°<br />é‚£ä¹ˆä¿®æ”¹å¯¹åº”æ•°æ®ç±»å‹ï¼ˆç»“æ„ä½“åï¼‰å°±okäº†ï¼Œç±»ä¼¼è¿™æ ·ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">int</span> a[<span class="number">15</span>]=&#123;<span class="number">0</span>,<span class="number">10</span>,<span class="number">9</span>,<span class="number">8</span>,<span class="number">1</span>,<span class="number">5</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">6</span>,<span class="number">4</span>,<span class="number">7</span>&#125;;</span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt; pii;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;pii&gt; b;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">auto</span> x : a) <span class="comment">//æŠŠaæ•°ç»„å¤åˆ¶ç»™bå‘é‡ </span></span><br><span class="line">b.<span class="built_in">push_back</span>(<span class="built_in">make_pair</span>(x,x<span class="number">+1</span>));</span><br><span class="line"><span class="built_in">sort</span>(b.<span class="built_in">begin</span>(),b.<span class="built_in">end</span>(),[](pii x,pii y)&#123;<span class="keyword">return</span> x.first&gt;y.first;&#125; );</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;=<span class="number">10</span>;i++)</span><br><span class="line">cout&lt;&lt;b[i].second&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¡¥å……ä¸€ç‚¹</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sort</span>(b.<span class="built_in">begin</span>(),b.<span class="built_in">end</span>(),[](<span class="type">int</span> x,<span class="type">int</span> y)&#123;<span class="keyword">return</span> x&gt;y;&#125; );</span><br></pre></td></tr></table></figure><p>åŸæœ¬åº”è¯¥æ˜¯è¿™æ ·çš„ï¼Œ</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sort</span>(b.<span class="built_in">begin</span>(),b.<span class="built_in">end</span>(),[](<span class="type">int</span> x,<span class="type">int</span> y) -&gt; <span class="type">bool</span> &#123;<span class="keyword">return</span> x&gt;y;&#125; );</span><br></pre></td></tr></table></figure><p>ä¸è¿‡C++å¯ä»¥è‡ªåŠ¨è¯†åˆ«å‡½æ•°è¿”å›å€¼å¾—æ•°æ®ç±»å‹ï¼Œæ‰€ä»¥å¯ä»¥ç®€å†™ã€‚</p><h2 id="javaç¯‡"><a class="markdownIt-Anchor" href="#javaç¯‡"></a> Javaç¯‡</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å®ç°å¯¹aæ•°ç»„çš„é™åºæ’åº</span></span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> </span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> </span><br><span class="line">&#123;</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">sc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        Integer[] a = &#123;<span class="number">0</span>,<span class="number">10</span>,<span class="number">9</span>,<span class="number">8</span>,<span class="number">1</span>,<span class="number">5</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">6</span>,<span class="number">4</span>,<span class="number">7</span>&#125;;</span><br><span class="line">        Arrays.sort(a, (x,y) -&gt; &#123;</span><br><span class="line">        <span class="keyword">return</span> y-x;<span class="comment">//æ­¤å¤„å®ç°çš„æ˜¯é™åº</span></span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; a.length; i++) </span><br><span class="line">&#123;</span><br><span class="line">System.out.printf(<span class="string">&quot;%d &quot;</span>,a[i]);</span><br><span class="line">&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Javaçš„sortæ¯”è¾ƒæœºåˆ¶ä¸åŒä¸C++</p><p>å¦‚æœè¦å®ç°é™åºå°±æ˜¯å-å‰</p><p>å‡åºå°±æ˜¯å‰-å</p><p>æ­¤å¤–ï¼Œè¿™æ ·å†™ä¹Ÿèƒ½å®ç°é™åºï¼ˆç”¨å†…ç½®compareToå‡½æ•°ï¼‰ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Arrays.sort(a, (x,y) -&gt; &#123;</span><br><span class="line">       <span class="keyword">return</span> y.compareTo(x);<span class="comment">//æ­¤å¤„å®ç°çš„æ˜¯é™åº</span></span><br><span class="line">       &#125;);</span><br></pre></td></tr></table></figure><p>åä¹‹ï¼Œreturn x.compareTo(y); å°±æ˜¯å‡åºã€‚</p><p>å› ä¸ºåªæœ‰ä¸€è¡Œè¯­å¥ï¼Œæ‰€ä»¥å¯ä»¥æ›´ç®€æ´ç¾è§‚ä¸€ç‚¹ï¼Œç›´æ¥çœç•¥èŠ±æ‹¬å·ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Arrays.sort(a, (x,y) -&gt; y-x;);</span><br></pre></td></tr></table></figure><hr /><p>ç»“æ„ä½“æ–¹é¢ï¼Œæ„Ÿè§‰javaç”¨èµ·æ¥æ²¡æœ‰C++èˆ’æœã€‚</p><p>æˆ‘ä»¬å°±é€šè¿‡è¿™é“ç»å…¸çš„<a href="https://www.luogu.com.cn/problem/P1093" title="[NOIP2007 æ™®åŠç»„] å¥–å­¦é‡‘">[NOIP2007 æ™®åŠç»„] å¥–å­¦é‡‘</a>æ¼”ç¤ºä¸€éJavaçš„å†™æ³•å§ã€‚</p><p>åšè¿™é“é¢˜éœ€è¦ç”¨åˆ°Javaçš„ç±»ä¸æ¥å£</p><p><strong>æœ´ç´ åšæ³•å°±æ˜¯é€šè¿‡è‡ªå®šä¹‰ä¸€ä¸ªclassä»è€Œè‡ªå®šä¹‰compareToæ¥åš</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> </span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> </span><br><span class="line">&#123;</span><br><span class="line"><span class="type">Scanner</span> <span class="variable">sc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line"><span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> sc.nextInt();</span><br><span class="line">Student[] stu = <span class="keyword">new</span> <span class="title class_">Student</span>[n+<span class="number">5</span>];</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>; i&lt;=n; i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="type">int</span> <span class="variable">c</span> <span class="operator">=</span> sc.nextInt();</span><br><span class="line"><span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> sc.nextInt();</span><br><span class="line"><span class="type">int</span> <span class="variable">e</span> <span class="operator">=</span> sc.nextInt();</span><br><span class="line">stu[i] = <span class="keyword">new</span> <span class="title class_">Student</span>(i, c, m, e, c+m+e);</span><br><span class="line">&#125;</span><br><span class="line">Arrays.sort(stu, <span class="number">1</span>, n+<span class="number">1</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>; i&lt;=<span class="number">5</span>; i++)</span><br><span class="line">System.out.println(stu[i].id+<span class="string">&quot; &quot;</span>+stu[i].tot);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> <span class="keyword">implements</span> <span class="title class_">Comparable</span>&lt;Student&gt; </span><br><span class="line">&#123;</span><br><span class="line"><span class="type">int</span> c,m,e,id;<span class="comment">//è¯­æ•°è‹±ã€å­¦å·</span></span><br><span class="line"><span class="type">int</span> tot;<span class="comment">//æ€»åˆ†</span></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(<span class="type">int</span> id,<span class="type">int</span> c,<span class="type">int</span> m,<span class="type">int</span> e,<span class="type">int</span> tot)</span> </span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">this</span>.id=id;</span><br><span class="line"><span class="built_in">this</span>.c=c;</span><br><span class="line"><span class="built_in">this</span>.m=m;</span><br><span class="line"><span class="built_in">this</span>.e=e;</span><br><span class="line"><span class="built_in">this</span>.tot=tot;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compareTo</span><span class="params">(Student st)</span> </span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">this</span>.tot != st.tot) <span class="keyword">return</span> st.tot-<span class="built_in">this</span>.tot;</span><br><span class="line"><span class="comment">//å› ä¸ºæ˜¯é™åºï¼Œæ‰€ä»¥æ˜¯Toåçš„é‚£ä¸ªæ•°å‡å‰é¢çš„æ•°</span></span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">this</span>.c != st.c) <span class="keyword">return</span> st.c-<span class="built_in">this</span>.c;</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">this</span>.id-st.id;<span class="comment">//æ­¤å¤„æ˜¯å‡åº</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸è¿‡Javaå’ŒC++çš„ä¸€ä¸ªä¸åŒç‚¹æ˜¯ï¼Œ<br /><strong>Javaæ²¡æœ‰ç»“æ„ä½“</strong><br />è€ŒJavaé‡Œå®šä¹‰ä¸€ä¸ªç±»æœ¬èº«ä¹Ÿå°±è¦æ±‚å¿…é¡»æœ‰compareTo<br />æ‰€ä»¥åœ¨æœ¬é¢˜ä¸­çš„è¿™ä¸ªStudentç±»å°±æ²¡æ³•è‡ªå®šä¹‰åŒ¿åæ¯”è¾ƒå‡½æ•°ã€‚</p><p>å½“ç„¶è¿™é“é¢˜æƒ³ç”¨lambdaè¡¨è¾¾å¼æ¥ç®€åŒ–ä»£ç ï¼Œä¹Ÿæ˜¯å¯ä»¥çš„ã€‚</p><p>å› ä¸ºJavaé‡Œçš„æ•°ç»„ä¹Ÿæ˜¯å¯¹è±¡ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿå¯ä»¥å¯¹ä¸€ä¸ªäºŒç»´æ•°ç»„ä¸­è¿›è¡Œsortï¼Œè€Œlambdaè¡¨è¾¾å¼ä¹Ÿæ˜¯å¯ä»¥é’ˆå¯¹æ•°ç»„å¯¹è±¡çš„ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">import java.util.*;</span><br><span class="line">public class Main</span><br><span class="line">&#123;</span><br><span class="line">    public static void main(String[] args) </span><br><span class="line">    &#123;</span><br><span class="line">    Scanner sc = new Scanner(System.in);</span><br><span class="line">    int n = sc.nextInt();</span><br><span class="line">    int[][] a = new int[n+5][6];</span><br><span class="line">    for(int i=1; i&lt;=n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">    a[i][1] = i;</span><br><span class="line">    for(int j=2; j&lt;=4; j++)</span><br><span class="line">    &#123;</span><br><span class="line">    a[i][j] = sc.nextInt();</span><br><span class="line">    a[i][5] += a[i][j];</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    Arrays.sort(a, 1, 1+n, (x,y)-&gt;&#123;</span><br><span class="line">    if(x[5] != y[5]) return y[5]-x[5];</span><br><span class="line">    if(x[2] != y[2]) return y[2]-x[2];</span><br><span class="line">    return x[1]-y[1];</span><br><span class="line">    &#125;);</span><br><span class="line">    for(int i=1; i&lt;=5; i++)</span><br><span class="line">    System.out.println(a[i][1]+&quot; &quot;+a[i][5]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·å†™ï¼Œä»£ç å°±ç®€åŒ–å¾ˆå¤šäº†</p>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³•éšç¬” </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸€äº›æå‡Linuxç»ˆç«¯èˆ’é€‚åº¦çš„é…ç½®</title>
      <link href="/posts/13601.html"/>
      <url>/posts/13601.html</url>
      
        <content type="html"><![CDATA[<blockquote><p>æœ¬æ–‡ä¸ºæ–°ç«™å»ºæˆåä»æ—§åšå®¢æ¬è¿ï¼ŒåŸæ–‡åœ°å€ï¼š<a href="https://www.cnblogs.com/zhouzhihao/p/17093067.html">https://www.cnblogs.com/zhouzhihao/p/17093067.html</a><br />åŸæ–‡å‘è¡¨äº2023-02-07 15:49<br />è¯·æ³¨æ„æ—¶æ•ˆæ€§</p></blockquote><h1 id="å‰è¨€"><a class="markdownIt-Anchor" href="#å‰è¨€"></a> å‰è¨€</h1><p>è™½ç„¶ç°åœ¨è®¸å¤šIDEå’Œæ–‡æœ¬ç¼–è¾‘å™¨éƒ½å·²æ”¯æŒäº†è¿œç¨‹è¿æ¥æœåŠ¡å™¨çš„åŠŸèƒ½<br />ä½†ä¸å¾—ä¸è¯´ï¼Œåœ¨ä¸€ä¸ªbashå°é»‘æ¡†é‡Œç”¨vim+tmuxå†™ä»£ç ä¹Ÿæ˜¯ä¸€ä¸ªå¾ˆæœ‰é€¼æ ¼çš„äº‹æƒ…<br />ä½†è¯´å®è¯ï¼Œé»˜è®¤é…ç½®ä¸‹çš„vimè¿˜æ˜¯å¾ˆä¼¤çœ¼ç›çš„ğŸ™ƒ<br />äºæ˜¯æˆ‘å°±èŠ±äº†äº›æ—¶é—´å¯¹ä¸‰å¤§é…ç½®æ–‡ä»¶è¿›è¡Œäº†æ”¹é€ <br />ä»Šå¤©æŠŠå®ƒä»¬åˆ†äº«å‡ºæ¥ï¼ˆä¹Ÿé˜²æ­¢æˆ‘ä»¥åæ¢æœåŠ¡å™¨çš„è¿‡ç¨‹ä¸­å¼„ä¸¢ğŸ˜…<br />ï¼ˆæ”¶é›†è‡ªäº’è”ç½‘ï¼Œéƒ¨åˆ†é…ç½®å€Ÿé‰´äº†å…¶ä»–åšä¸»ï¼‰<br />å¤§å®¶ä¹Ÿå¯ä»¥æ ¹æ®æ³¨é‡Šè‡ªè¡Œä¿®æ”¹</p><h2 id="ps"><a class="markdownIt-Anchor" href="#ps"></a> PS</h2><ul><li>ä¸ºå›¾ä¸ªæ–¹ä¾¿ï¼Œtmuxçš„æ‰€æœ‰Ctrl+Béƒ½æ¢æˆäº†Ctrl+Aï¼›tmuxå¯ç”¨äº†é¼ æ ‡</li><li>ä¸ºå›¾ä¸ªé¡µé¢ç®€æ´ï¼Œæˆ‘æŠŠå½“å‰è·¯å¾„å‰çš„<code>@ä¸»æœºå</code>éƒ¨åˆ†å»æ‰äº†</li><li>vimè¡Œé«˜äº®çš„èƒŒæ™¯è‰²æ¢æˆäº†é»‘è‰²ï¼Œä½†å¯ä»¥æ ¹æ®è¡Œå·å¤„çš„é«˜äº®æ¥ç¡®å®šå½“å‰æ‰€å¤„è¡Œ</li><li>vimå¼€å¯äº†()/{}/[]/â€˜â€™/â€œâ€/``çš„è¡¥å…¨</li></ul><h1 id="vimrc"><a class="markdownIt-Anchor" href="#vimrc"></a> .vimrc</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br></pre></td><td class="code"><pre><span class="line">&quot; An example for a vimrc file.</span><br><span class="line">&quot;</span><br><span class="line">&quot; To use it, copy it to</span><br><span class="line">&quot;     for Unix and OS/2:  ~/.vimrc</span><br><span class="line">&quot;      for Amiga:  s:.vimrc</span><br><span class="line">&quot;  for MS-DOS and Win32:  $VIM\_vimrc</span><br><span class="line">&quot;    for OpenVMS:  sys$login:.vimrc</span><br><span class="line"></span><br><span class="line">&quot; When started as &quot;evim&quot;, evim.vim will already have done these settings.</span><br><span class="line">if v:progname =~? &quot;evim&quot;</span><br><span class="line">  finish</span><br><span class="line">endif</span><br><span class="line"></span><br><span class="line">&quot; Use Vim settings, rather then Vi settings (much better!).</span><br><span class="line">&quot; This must be first, because it changes other options as a side effect.</span><br><span class="line">set nocompatible</span><br><span class="line"></span><br><span class="line">&quot; allow backspacing over everything in insert mode</span><br><span class="line">set backspace=indent,eol,start</span><br><span class="line"></span><br><span class="line">if has(&quot;vms&quot;)</span><br><span class="line">  set nobackup&quot; do not keep a backup file, use versions instead</span><br><span class="line">else</span><br><span class="line">  set backup&quot; keep a backup file</span><br><span class="line">endif</span><br><span class="line">set history=50&quot; keep 50 lines of command line history</span><br><span class="line">set ruler&quot; show the cursor position all the time</span><br><span class="line">set showcmd&quot; display incomplete commands</span><br><span class="line">set incsearch&quot; do incremental searching</span><br><span class="line"></span><br><span class="line">vmap &lt;leader&gt;y :w! /tmp/vitmp&lt;CR&gt;</span><br><span class="line">nmap &lt;leader&gt;p :r! cat /tmp/vitmp&lt;CR&gt;</span><br><span class="line"></span><br><span class="line">&quot;è¯­æ³•é«˜äº®</span><br><span class="line">syntax enable</span><br><span class="line">syntax on</span><br><span class="line">&quot;æ˜¾ç¤ºè¡Œå·</span><br><span class="line">set nu</span><br><span class="line"></span><br><span class="line">&quot;ä¿®æ”¹é»˜è®¤æ³¨é‡Šé¢œè‰²</span><br><span class="line">&quot;hi Comment ctermfg=DarkCyan</span><br><span class="line">&quot;å…è®¸é€€æ ¼é”®åˆ é™¤</span><br><span class="line">&quot;set backspace=2</span><br><span class="line">&quot;å¯ç”¨é¼ æ ‡</span><br><span class="line">set mouse=a</span><br><span class="line">set selection=exclusive</span><br><span class="line">set selectmode=mouse,key</span><br><span class="line">&quot;æŒ‰Cè¯­è¨€æ ¼å¼ç¼©è¿›</span><br><span class="line">set cindent</span><br><span class="line">set autoindent</span><br><span class="line">set smartindent</span><br><span class="line">set shiftwidth=4</span><br><span class="line"></span><br><span class="line">&quot; å…è®¸åœ¨æœ‰æœªä¿å­˜çš„ä¿®æ”¹æ—¶åˆ‡æ¢ç¼“å†²åŒº</span><br><span class="line">&quot;set hidden</span><br><span class="line"></span><br><span class="line">&quot; è®¾ç½®æ— å¤‡ä»½æ–‡ä»¶</span><br><span class="line">set writebackup</span><br><span class="line">set nobackup</span><br><span class="line"></span><br><span class="line">&quot;æ˜¾ç¤ºæ‹¬å·åŒ¹é…</span><br><span class="line">set showmatch</span><br><span class="line">&quot;æ‹¬å·åŒ¹é…æ˜¾ç¤ºæ—¶é—´ä¸º1(å•ä½æ˜¯ååˆ†ä¹‹ä¸€ç§’)</span><br><span class="line">set matchtime=5</span><br><span class="line">&quot;æ˜¾ç¤ºå½“å‰çš„è¡Œå·åˆ—å·ï¼š</span><br><span class="line">set ruler</span><br><span class="line">&quot;åœ¨çŠ¶æ€æ æ˜¾ç¤ºæ­£åœ¨è¾“å…¥çš„å‘½ä»¤</span><br><span class="line">set showcmd</span><br><span class="line"></span><br><span class="line">set foldmethod=syntax</span><br><span class="line">&quot;é»˜è®¤æƒ…å†µä¸‹ä¸æŠ˜å </span><br><span class="line">set foldlevel=100</span><br><span class="line">&quot; å¼€å¯çŠ¶æ€æ ä¿¡æ¯</span><br><span class="line">set laststatus=2</span><br><span class="line">&quot; å‘½ä»¤è¡Œçš„é«˜åº¦ï¼Œé»˜è®¤ä¸º1ï¼Œè¿™é‡Œè®¾ä¸º2</span><br><span class="line">set cmdheight=2</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&quot; æ˜¾ç¤ºTabç¬¦ï¼Œä½¿ç”¨ä¸€é«˜äº®ç«–çº¿ä»£æ›¿</span><br><span class="line">set list</span><br><span class="line">&quot;set listchars=tab:\|\ ,</span><br><span class="line">set listchars=tab:&gt;-,trail:-</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&quot;ä¾¦æµ‹æ–‡ä»¶ç±»å‹</span><br><span class="line">filetype on</span><br><span class="line">&quot;è½½å…¥æ–‡ä»¶ç±»å‹æ’ä»¶</span><br><span class="line">filetype plugin on</span><br><span class="line">&quot;ä¸ºç‰¹å®šæ–‡ä»¶ç±»å‹è½½å…¥ç›¸å…³ç¼©è¿›æ–‡ä»¶</span><br><span class="line">filetype indent on</span><br><span class="line">&quot; å¯ç”¨è‡ªåŠ¨è¡¥å…¨</span><br><span class="line">filetype plugin indent on </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&quot;è®¾ç½®ç¼–ç è‡ªåŠ¨è¯†åˆ«, ä¸­æ–‡å¼•å·æ˜¾ç¤º</span><br><span class="line">filetype on &quot;æ‰“å¼€æ–‡ä»¶ç±»å‹æ£€æµ‹</span><br><span class="line">&quot;set fileencodings=euc-cn,ucs-bom,utf-8,cp936,gb2312,gb18030,gbk,big5,euc-jp,euc-kr,latin1</span><br><span class="line">set fileencodings=utf-8,gb2312,gbk,gb18030</span><br><span class="line">&quot;è¿™ä¸ªç”¨èƒ½å¾ˆç»™åŠ²ï¼Œä¸ç®¡encodingæ˜¯ä»€ä¹ˆç¼–ç ï¼Œéƒ½èƒ½å°†æ–‡æœ¬æ˜¾ç¤ºæ±‰å­—</span><br><span class="line">&quot;set termencoding=gb2312</span><br><span class="line">set termencoding=utf-8</span><br><span class="line">&quot;æ–°å»ºæ–‡ä»¶ä½¿ç”¨çš„ç¼–ç </span><br><span class="line">set fileencoding=utf-8</span><br><span class="line">&quot;set fileencoding=gb2312</span><br><span class="line">&quot;ç”¨äºæ˜¾ç¤ºçš„ç¼–ç ï¼Œä»…ä»…æ˜¯æ˜¾ç¤º</span><br><span class="line">set encoding=utf-8</span><br><span class="line">&quot;set encoding=utf-8</span><br><span class="line">&quot;set encoding=euc-cn</span><br><span class="line">&quot;set encoding=gbk</span><br><span class="line">&quot;set encoding=gb2312</span><br><span class="line">&quot;set ambiwidth=double</span><br><span class="line">set fileformat=unix</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&quot;è®¾ç½®é«˜äº®æœç´¢</span><br><span class="line">set hlsearch</span><br><span class="line">&quot;åœ¨æœç´¢æ—¶ï¼Œè¾“å…¥çš„è¯å¥çš„é€å­—ç¬¦é«˜äº®</span><br><span class="line">set incsearch</span><br><span class="line"></span><br><span class="line">&quot; ç€è‰²æ¨¡å¼</span><br><span class="line">set t_Co=256</span><br><span class="line">&quot;colorscheme wombat256mod</span><br><span class="line">&quot;colorscheme gardener</span><br><span class="line">&quot;colorscheme elflord</span><br><span class="line">colorscheme desert</span><br><span class="line">&quot;colorscheme evening</span><br><span class="line">&quot;colorscheme darkblue</span><br><span class="line">&quot;colorscheme torte</span><br><span class="line">&quot;colorscheme default</span><br><span class="line"></span><br><span class="line">&quot; å­—ä½“ &amp;&amp; å­—å·</span><br><span class="line">set guifont=Monaco:h10</span><br><span class="line">&quot;set guifont=Consolas:h10</span><br><span class="line"></span><br><span class="line">&quot; :LoadTemplate       æ ¹æ®æ–‡ä»¶åç¼€è‡ªåŠ¨åŠ è½½æ¨¡æ¿</span><br><span class="line">&quot;let g:template_path=&#x27;/home/ruchee/.vim/template/&#x27;</span><br><span class="line"></span><br><span class="line">&quot; :AuthorInfoDetect   è‡ªåŠ¨æ·»åŠ ä½œè€…ã€æ—¶é—´ç­‰ä¿¡æ¯ï¼Œæœ¬è´¨æ˜¯NERD_commenter &amp;&amp; authorinfoçš„ç»“åˆ</span><br><span class="line">&quot;&quot;let g:vimrc_author=&#x27;octal&#x27;</span><br><span class="line"></span><br><span class="line">&quot; Ctrl + E            ä¸€æ­¥åŠ è½½è¯­æ³•æ¨¡æ¿å’Œä½œè€…ã€æ—¶é—´ä¿¡æ¯</span><br><span class="line">&quot;&quot;map &lt;c-e&gt; &lt;ESC&gt;:AuthorInfoDetect&lt;CR&gt;&lt;ESC&gt;Gi</span><br><span class="line">&quot;&quot;imap &lt;c-e&gt; &lt;ESC&gt;:AuthorInfoDetect&lt;CR&gt;&lt;ESC&gt;Gi</span><br><span class="line">&quot;&quot;vmap &lt;c-e&gt; &lt;ESC&gt;:AuthorInfoDetect&lt;CR&gt;&lt;ESC&gt;Gi</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&quot; ======= å¼•å· &amp;&amp; æ‹¬å·è‡ªåŠ¨åŒ¹é… ======= &quot;</span><br><span class="line"></span><br><span class="line">inoremap ( ()&lt;ESC&gt;i</span><br><span class="line"></span><br><span class="line">&quot;&quot;inoremap ) &lt;c-r&gt;=ClosePair(&#x27;)&#x27;)&lt;CR&gt;</span><br><span class="line"></span><br><span class="line">inoremap &#123; &#123;&#125;&lt;ESC&gt;i</span><br><span class="line"></span><br><span class="line">&quot;&quot;inoremap &#125; &lt;c-r&gt;=ClosePair(&#x27;&#125;&#x27;)&lt;CR&gt;</span><br><span class="line"></span><br><span class="line">inoremap [ []&lt;ESC&gt;i</span><br><span class="line"></span><br><span class="line">&quot;&quot;inoremap ] &lt;c-r&gt;=ClosePair(&#x27;]&#x27;)&lt;CR&gt;</span><br><span class="line"></span><br><span class="line">&quot;&quot;inoremap &lt; &lt;&gt;&lt;ESC&gt;i</span><br><span class="line"></span><br><span class="line">&quot;&quot;inoremap &gt; &lt;c-r&gt;=ClosePair(&#x27;&gt;&#x27;)&lt;CR&gt;</span><br><span class="line"></span><br><span class="line">inoremap &quot; &quot;&quot;&lt;ESC&gt;i</span><br><span class="line"></span><br><span class="line">inoremap &#x27; &#x27;&#x27;&lt;ESC&gt;i</span><br><span class="line"></span><br><span class="line">inoremap ` ``&lt;ESC&gt;i</span><br><span class="line"></span><br><span class="line">&quot;&quot;inoremap * **&lt;ESC&gt;i</span><br><span class="line"></span><br><span class="line">&quot; æ¯è¡Œè¶…è¿‡80ä¸ªçš„å­—ç¬¦ç”¨ä¸‹åˆ’çº¿æ ‡ç¤º</span><br><span class="line">&quot;&quot;au BufRead,BufNewFile *.s,*.asm,*.h,*.c,*.cpp,*.java,*.cs,*.lisp,*.el,*.erl,*.tex,*.sh,*.lua,*.pl,*.php,*.tpl,*.py,*.rb,*.erb,*.vim,*.js,*.jade,*.coffee,*.css,*.xml,*.html,*.shtml,*.xhtml Underlined /.\%81v/</span><br><span class="line">&quot;</span><br><span class="line">&quot;</span><br><span class="line">&quot; For Win32 GUI: remove &#x27;t&#x27; flag from &#x27;guioptions&#x27;: no tearoff menu entries</span><br><span class="line">&quot; let &amp;guioptions = substitute(&amp;guioptions, &quot;t&quot;, &quot;&quot;, &quot;g&quot;)</span><br><span class="line"></span><br><span class="line">&quot; Don&#x27;t use Ex mode, use Q for formatting</span><br><span class="line">map Q gq</span><br><span class="line"></span><br><span class="line">&quot; This is an alternative that also works in block mode, but the deleted</span><br><span class="line">&quot; text is lost and it only works for putting the current register.</span><br><span class="line">&quot;vnoremap p &quot;_dp</span><br><span class="line"></span><br><span class="line">&quot; Switch syntax highlighting on, when the terminal has colors</span><br><span class="line">&quot; Also switch on highlighting the last used search pattern.</span><br><span class="line">if &amp;t_Co &gt; 2 || has(&quot;gui_running&quot;)</span><br><span class="line">  syntax on</span><br><span class="line">  set hlsearch</span><br><span class="line">endif</span><br><span class="line"></span><br><span class="line">&quot; Only do this part when compiled with support for autocommands.</span><br><span class="line">if has(&quot;autocmd&quot;)</span><br><span class="line"></span><br><span class="line">  &quot; Enable file type detection.</span><br><span class="line">  &quot; Use the default filetype settings, so that mail gets &#x27;tw&#x27; set to 72,</span><br><span class="line">  &quot; &#x27;cindent&#x27; is on in C files, etc.</span><br><span class="line">  &quot; Also load indent files, to automatically do language-dependent indenting.</span><br><span class="line">  filetype plugin indent on</span><br><span class="line"></span><br><span class="line">  &quot; Put these in an autocmd group, so that we can delete them easily.</span><br><span class="line">  augroup vimrcEx</span><br><span class="line">  au!</span><br><span class="line"></span><br><span class="line">  &quot; For all text files set &#x27;textwidth&#x27; to 80 characters.</span><br><span class="line">  autocmd FileType text setlocal textwidth=80</span><br><span class="line"></span><br><span class="line">  &quot; When editing a file, always jump to the last known cursor position.</span><br><span class="line">  &quot; Don&#x27;t do it when the position is invalid or when inside an event handler</span><br><span class="line">  &quot; (happens when dropping a file on gvim).</span><br><span class="line">  autocmd BufReadPost *</span><br><span class="line">    \ if line(&quot;&#x27;\&quot;&quot;) &gt; 0 &amp;&amp; line(&quot;&#x27;\&quot;&quot;) &lt;= line(&quot;$&quot;) |</span><br><span class="line">    \   exe &quot;normal g`\&quot;&quot; |</span><br><span class="line">    \ endif</span><br><span class="line"></span><br><span class="line">  augroup END</span><br><span class="line"></span><br><span class="line">else</span><br><span class="line"></span><br><span class="line">  set autoindent&quot; always set autoindenting on</span><br><span class="line"></span><br><span class="line">endif &quot; has(&quot;autocmd&quot;)</span><br><span class="line"></span><br><span class="line">&quot; å¢åŠ é¼ æ ‡è¡Œé«˜äº®</span><br><span class="line">set cursorline</span><br><span class="line">hi CursorLine  cterm=NONE   ctermbg=black</span><br><span class="line">&quot;&quot;ctermfg=white</span><br><span class="line"></span><br><span class="line">&quot; è®¾ç½®tabæ˜¯å››ä¸ªç©ºæ ¼</span><br><span class="line">set ts=4</span><br><span class="line">set expandtab</span><br><span class="line"></span><br><span class="line">&quot;å·¦å³æ–¹å‘é”®å®ç°æ¢è¡Œ</span><br><span class="line">set whichwrap+=&lt;,&gt;,[,]</span><br><span class="line"></span><br><span class="line">&quot;åœ¨å‘½ä»¤æ¨¡å¼ä¸‹ï¼ŒæŒ‰ä¸‹tabå¯ä»¥è‡ªåŠ¨è¡¥å…¨å‘½ä»¤</span><br><span class="line">set wildmenu</span><br><span class="line">set wildmode=longest,list,full</span><br><span class="line"></span><br><span class="line">&quot; ä¸»è¦ç»™Tlistä½¿ç”¨</span><br><span class="line">let Tlist_Exit_OnlyWindow = 1</span><br><span class="line">let Tlist_Auto_Open = 1</span><br></pre></td></tr></table></figure><h1 id="bashrc"><a class="markdownIt-Anchor" href="#bashrc"></a> .bashrc</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><span class="line"># ~/.bashrc: executed by bash(1) for non-login shells.</span><br><span class="line"># see /usr/share/doc/bash/examples/startup-files (in the package bash-doc)</span><br><span class="line"># for examples</span><br><span class="line"></span><br><span class="line"># If not running interactively, don&#x27;t do anything</span><br><span class="line">case $- in</span><br><span class="line">    *i*) ;;</span><br><span class="line">      *) return;;</span><br><span class="line">esac</span><br><span class="line"></span><br><span class="line"># don&#x27;t put duplicate lines or lines starting with space in the history.</span><br><span class="line"># See bash(1) for more options</span><br><span class="line">HISTCONTROL=ignoreboth</span><br><span class="line"></span><br><span class="line"># append to the history file, don&#x27;t overwrite it</span><br><span class="line">shopt -s histappend</span><br><span class="line"></span><br><span class="line"># for setting history length see HISTSIZE and HISTFILESIZE in bash(1)</span><br><span class="line">HISTSIZE=1000</span><br><span class="line">HISTFILESIZE=2000</span><br><span class="line"></span><br><span class="line"># check the window size after each command and, if necessary,</span><br><span class="line"># update the values of LINES and COLUMNS.</span><br><span class="line">shopt -s checkwinsize</span><br><span class="line"></span><br><span class="line"># If set, the pattern &quot;**&quot; used in a pathname expansion context will</span><br><span class="line"># match all files and zero or more directories and subdirectories.</span><br><span class="line">#shopt -s globstar</span><br><span class="line"></span><br><span class="line"># make less more friendly for non-text input files, see lesspipe(1)</span><br><span class="line">[ -x /usr/bin/lesspipe ] &amp;&amp; eval &quot;$(SHELL=/bin/sh lesspipe)&quot;</span><br><span class="line"></span><br><span class="line"># set variable identifying the chroot you work in (used in the prompt below)</span><br><span class="line">if [ -z &quot;$&#123;debian_chroot:-&#125;&quot; ] &amp;&amp; [ -r /etc/debian_chroot ]; then</span><br><span class="line">    debian_chroot=$(cat /etc/debian_chroot)</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"># set a fancy prompt (non-color, unless we know we &quot;want&quot; color)</span><br><span class="line">case &quot;$TERM&quot; in</span><br><span class="line">    xterm-color|*-256color) color_prompt=yes;;</span><br><span class="line">esac</span><br><span class="line"></span><br><span class="line"># uncomment for a colored prompt, if the terminal has the capability; turned</span><br><span class="line"># off by default to not distract the user: the focus in a terminal window</span><br><span class="line"># should be on the output of commands, not on the prompt</span><br><span class="line">#force_color_prompt=yes</span><br><span class="line"></span><br><span class="line">if [ -n &quot;$force_color_prompt&quot; ]; then</span><br><span class="line">    if [ -x /usr/bin/tput ] &amp;&amp; tput setaf 1 &gt;&amp;/dev/null; then</span><br><span class="line"># We have color support; assume it&#x27;s compliant with Ecma-48</span><br><span class="line"># (ISO/IEC-6429). (Lack of such support is extremely rare, and such</span><br><span class="line"># a case would tend to support setf rather than setaf.)</span><br><span class="line">color_prompt=yes</span><br><span class="line">    else</span><br><span class="line">color_prompt=</span><br><span class="line">    fi</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">if [ &quot;$color_prompt&quot; = yes ]; then</span><br><span class="line">    #PS1=&#x27;$&#123;debian_chroot:+($debian_chroot)&#125;\[\033[01;32m\]\u@\h\[\033[00m\]:\[\033[01;34m\]\w\[\033[00m\]\$ &#x27;</span><br><span class="line">    PS1=&#x27;$&#123;debian_chroot:+($debian_chroot)&#125;\[\033[01;32m\]\u\[\033[00m\]:\[\033[01;34m\]\w\[\033[00m\]\$ &#x27;</span><br><span class="line">else</span><br><span class="line">    #PS1=&#x27;$&#123;debian_chroot:+($debian_chroot)&#125;\u@\h:\w\$ &#x27;</span><br><span class="line">     PS1=&#x27;$&#123;debian_chroot:+($debian_chroot)&#125;\u: \w\$ &#x27;</span><br><span class="line">fi</span><br><span class="line">unset color_prompt force_color_prompt</span><br><span class="line"></span><br><span class="line"># If this is an xterm set the title to user@host:dir</span><br><span class="line">case &quot;$TERM&quot; in</span><br><span class="line">xterm*|rxvt*)</span><br><span class="line">    #PS1=&quot;\[\e]0;$&#123;debian_chroot:+($debian_chroot)&#125;\u@\h: \w\a\]$PS1&quot;</span><br><span class="line">     PS1=&quot;\[\e]0;$&#123;debian_chroot:+($debian_chroot)&#125;\u: \w\a\]$PS1&quot;</span><br><span class="line">    ;;</span><br><span class="line">*)</span><br><span class="line">    ;;</span><br><span class="line">esac</span><br><span class="line"></span><br><span class="line"># enable color support of ls and also add handy aliases</span><br><span class="line">if [ -x /usr/bin/dircolors ]; then</span><br><span class="line">    test -r ~/.dircolors &amp;&amp; eval &quot;$(dircolors -b ~/.dircolors)&quot; || eval &quot;$(dircolors -b)&quot;</span><br><span class="line">    alias ls=&#x27;ls --color=auto&#x27;</span><br><span class="line">    #alias dir=&#x27;dir --color=auto&#x27;</span><br><span class="line">    #alias vdir=&#x27;vdir --color=auto&#x27;</span><br><span class="line"></span><br><span class="line">    alias grep=&#x27;grep --color=auto&#x27;</span><br><span class="line">    alias fgrep=&#x27;fgrep --color=auto&#x27;</span><br><span class="line">    alias egrep=&#x27;egrep --color=auto&#x27;</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"># colored GCC warnings and errors</span><br><span class="line">#export GCC_COLORS=&#x27;error=01;31:warning=01;35:note=01;36:caret=01;32:locus=01:quote=01&#x27;</span><br><span class="line"></span><br><span class="line"># some more ls aliases</span><br><span class="line">alias ll=&#x27;ls -alF&#x27;</span><br><span class="line">alias la=&#x27;ls -A&#x27;</span><br><span class="line">alias l=&#x27;ls -CF&#x27;</span><br><span class="line"></span><br><span class="line"># Add an &quot;alert&quot; alias for long running commands.  Use like so:</span><br><span class="line">#   sleep 10; alert</span><br><span class="line">alias alert=&#x27;notify-send --urgency=low -i &quot;$([ $? = 0 ] &amp;&amp; echo terminal || echo error)&quot; &quot;$(history|tail -n1|sed -e &#x27;\&#x27;&#x27;s/^\s*[0-9]\+\s*//;s/[;&amp;|]\s*alert$//&#x27;\&#x27;&#x27;)&quot;&#x27;</span><br><span class="line"></span><br><span class="line"># Alias definitions.</span><br><span class="line"># You may want to put all your additions into a separate file like</span><br><span class="line"># ~/.bash_aliases, instead of adding them here directly.</span><br><span class="line"># See /usr/share/doc/bash-doc/examples in the bash-doc package.</span><br><span class="line"></span><br><span class="line">if [ -f ~/.bash_aliases ]; then</span><br><span class="line">    . ~/.bash_aliases</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"># enable programmable completion features (you don&#x27;t need to enable</span><br><span class="line"># this, if it&#x27;s already enabled in /etc/bash.bashrc and /etc/profile</span><br><span class="line"># sources /etc/bash.bashrc).</span><br><span class="line">if ! shopt -oq posix; then</span><br><span class="line">  if [ -f /usr/share/bash-completion/bash_completion ]; then</span><br><span class="line">    . /usr/share/bash-completion/bash_completion</span><br><span class="line">  elif [ -f /etc/bash_completion ]; then</span><br><span class="line">    . /etc/bash_completion</span><br><span class="line">  fi</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">export PATH=/home/acs/.homework:$PATH</span><br><span class="line">alias tmux=&#x27;tmux -u&#x27;</span><br></pre></td></tr></table></figure><h1 id="tmuxconf"><a class="markdownIt-Anchor" href="#tmuxconf"></a> .tmux.conf</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line">set-option -g status-keys vi</span><br><span class="line">setw -g mode-keys vi</span><br><span class="line"></span><br><span class="line">setw -g monitor-activity on</span><br><span class="line"></span><br><span class="line"># setw -g c0-change-trigger 10</span><br><span class="line"># setw -g c0-change-interval 100</span><br><span class="line"></span><br><span class="line"># setw -g c0-change-interval 50</span><br><span class="line"># setw -g c0-change-trigger  75</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">set-window-option -g automatic-rename on</span><br><span class="line">set-option -g set-titles on</span><br><span class="line">set -g history-limit 100000</span><br><span class="line"></span><br><span class="line">#set-window-option -g utf8 on</span><br><span class="line"></span><br><span class="line"># set command prefix</span><br><span class="line">set-option -g prefix C-a</span><br><span class="line">unbind-key C-b</span><br><span class="line">bind-key C-a send-prefix</span><br><span class="line"></span><br><span class="line">bind h select-pane -L</span><br><span class="line">bind j select-pane -D</span><br><span class="line">bind k select-pane -U</span><br><span class="line">bind l select-pane -R</span><br><span class="line"></span><br><span class="line">bind -n M-Left select-pane -L</span><br><span class="line">bind -n M-Right select-pane -R</span><br><span class="line">bind -n M-Up select-pane -U</span><br><span class="line">bind -n M-Down select-pane -D</span><br><span class="line"></span><br><span class="line">bind &lt; resize-pane -L 7</span><br><span class="line">bind &gt; resize-pane -R 7</span><br><span class="line">bind - resize-pane -D 7</span><br><span class="line">bind + resize-pane -U 7</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">bind-key -n M-l next-window</span><br><span class="line">bind-key -n M-h previous-window</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">set -g status-interval 1</span><br><span class="line"># status bar</span><br><span class="line">set -g status-bg black</span><br><span class="line">set -g status-fg blue</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#set -g status-utf8 on</span><br><span class="line">set -g status-justify centre</span><br><span class="line">set -g status-bg default</span><br><span class="line">set -g status-left &quot; #[fg=green]#S@#H #[default]&quot;</span><br><span class="line">set -g status-left-length 20</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># mouse support</span><br><span class="line"># for tmux 2.1</span><br><span class="line"># set -g mouse-utf8 on</span><br><span class="line">set -g mouse on</span><br><span class="line">#</span><br><span class="line"># for previous version</span><br><span class="line">#set -g mode-mouse on</span><br><span class="line">#set -g mouse-resize-pane on</span><br><span class="line">#set -g mouse-select-pane on</span><br><span class="line">#set -g mouse-select-window on</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#set -g status-right-length 25</span><br><span class="line">set -g status-right &quot;#[fg=green]%H:%M:%S #[fg=magenta]%a %m-%d #[default]&quot;</span><br><span class="line"></span><br><span class="line"># fix for tmux 1.9</span><br><span class="line">bind &#x27;&quot;&#x27; split-window -vc &quot;#&#123;pane_current_path&#125;&quot;</span><br><span class="line">bind &#x27;%&#x27; split-window -hc &quot;#&#123;pane_current_path&#125;&quot;</span><br><span class="line">bind &#x27;c&#x27; new-window -c &quot;#&#123;pane_current_path&#125;&quot;</span><br><span class="line"></span><br><span class="line"># run-shell &quot;powerline-daemon -q&quot;</span><br><span class="line"></span><br><span class="line"># vim: ft=conf</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ‚è°ˆ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> terminal </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è§£å†³ï¼špowershellæ— æ³•ä½¿ç”¨ssh-copy-idå‘½ä»¤</title>
      <link href="/posts/15639.html"/>
      <url>/posts/15639.html</url>
      
        <content type="html"><![CDATA[<blockquote><p>æœ¬æ–‡ä¸ºæ–°ç«™å»ºæˆåä»æ—§åšå®¢æ¬è¿ï¼ŒåŸæ–‡åœ°å€ï¼š<a href="https://www.cnblogs.com/zhouzhihao/p/17087666.html">https://www.cnblogs.com/zhouzhihao/p/17087666.html</a><br />åŸæ–‡å‘è¡¨äº2023-02-02 22:46<br />è¯·æ³¨æ„æ—¶æ•ˆæ€§</p></blockquote><p>å¦‚æœä½ åœ¨é…ç½®æœåŠ¡å™¨çš„å…å¯†ç™»é™†æ—¶å‡ºç°äº†å¦‚ä¸‹çš„errorï¼Œé‚£è¿™ç¯‡æ–‡ç« ä¸€å®šä¼šå¯¹ä½ æœ‰å¸®åŠ©</p><p><img src="https://picbed.octalzhihao.top/img/myblog/1504700.png" alt="image" /></p><p>ï¼ˆzzhæ˜¯æˆ‘é…ç½®çš„åˆ«åï¼Œå¦‚æœæ²¡æœ‰é…ç½®è¿‡ï¼Œåé¢è·Ÿçš„å‚æ•°åº”è¯¥æ˜¯<code>ç”¨æˆ·å@ipåœ°å€</code>çš„æ ¼å¼ï¼‰</p><p>æŠ¥é”™çš„åŸå› å‘¢ï¼Œå…¶å®æ˜¯Windowsç»ˆç«¯å’ŒLinuxç»ˆç«¯ä¸åŒï¼Œæ²¡æœ‰å†…ç½®<code>ssh-copy-id</code>å‘½ä»¤</p><p>æœ¬æ–‡æä¾›ä¸‰ç§è§£å†³æ–¹æ¡ˆ</p><p>æ­£å¸¸æƒ…å†µä¸‹ï¼Œç”¨ç¬¬ä¸€ç§å°±å¯ä»¥è§£å†³äº†ï¼Œè€Œä¸”ç¬¬ä¸€ç§æ–¹æ¡ˆä¹Ÿæœ€æ–¹ä¾¿</p><h2 id="æ–¹æ¡ˆä¸€-å¤åˆ¶ä¸‹é¢è¿™æ®µè„šæœ¬ç²˜è´´åˆ°windowsç»ˆç«¯æŒ‰å›è½¦è¿è¡Œå³å¯"><a class="markdownIt-Anchor" href="#æ–¹æ¡ˆä¸€-å¤åˆ¶ä¸‹é¢è¿™æ®µè„šæœ¬ç²˜è´´åˆ°windowsç»ˆç«¯æŒ‰å›è½¦è¿è¡Œå³å¯"></a> æ–¹æ¡ˆä¸€ å¤åˆ¶ä¸‹é¢è¿™æ®µè„šæœ¬ï¼Œç²˜è´´åˆ°Windowsç»ˆç«¯ï¼ŒæŒ‰å›è½¦è¿è¡Œå³å¯</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">function ssh-copy-id([string]$userAtMachine, $args)&#123;   </span><br><span class="line">    $publicKey = &quot;$ENV:USERPROFILE&quot; + &quot;/.ssh/id_rsa.pub&quot;</span><br><span class="line">    if (!(Test-Path &quot;$publicKey&quot;))&#123;</span><br><span class="line">        Write-Error &quot;ERROR: failed to open ID file &#x27;$publicKey&#x27;: No such file&quot;            </span><br><span class="line">    &#125;</span><br><span class="line">    else &#123;</span><br><span class="line">        &amp; cat &quot;$publicKey&quot; | ssh $args $userAtMachine &quot;umask 077; test -d .ssh || mkdir .ssh ; cat &gt;&gt; .ssh/authorized_keys || exit 1&quot;      </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·ä»¥åï¼Œå°±å¯ä»¥æˆåŠŸä½¿ç”¨<code>ssh-copy-id</code>äº†</p><p>ä¸Šé¢è¿™æ®µå…¶å®å°±æ˜¯ï¼Œæ ¹æ®<code>ssh-copy-id</code>çš„æ‰§è¡Œé€»è¾‘æ¥ç¼–å†™çš„shellè„šæœ¬</p><h2 id="æ–¹æ¡ˆäºŒä¸‹è½½ä¸€ä¸ªgit-bash"><a class="markdownIt-Anchor" href="#æ–¹æ¡ˆäºŒä¸‹è½½ä¸€ä¸ªgit-bash"></a> æ–¹æ¡ˆäºŒï¼šä¸‹è½½ä¸€ä¸ªgit bash</h2><p>git bashæ˜¯è‚¯å®šå¯ä»¥æœ‰<code>ssh-copy-id</code>å‘½ä»¤çš„ï¼Œç›´æ¥ç”¨å°±å¥½äº†ã€‚</p><p>é¡ºä¾¿æä¸€å¥ï¼Œå¦‚æœè¿˜æ˜¯ä¸è¡Œï¼Œå¯èƒ½æ˜¯æ²¡æœ‰<code>ssh-keygen</code>ç”Ÿæˆå¯†é’¥ã€‚</p><p><img src="https://picbed.octalzhihao.top/img/myblog/1504701.png" alt="image" /></p><p><br><br></p><h2 id="æ–¹æ¡ˆä¸‰-æœ€æœ¬è´¨çš„åšæ³•"><a class="markdownIt-Anchor" href="#æ–¹æ¡ˆä¸‰-æœ€æœ¬è´¨çš„åšæ³•"></a> æ–¹æ¡ˆä¸‰ æœ€æœ¬è´¨çš„åšæ³•</h2><p>ssh-copy-idçš„æœ¬è´¨æ˜¯æŠŠä½ æœ¬åœ°çš„å…¬é’¥æ·»åŠ åˆ°æœåŠ¡å™¨/è¿œç¨‹æœºçš„<code>~/.ssh/authorized_keys</code>æ–‡ä»¶é‡Œ</p><p>powershellä¸ç»™åŠ›ï¼Œé‚£æˆ‘ä»¬è‡ªå·±Ctrl CVå°±å¥½äº†<br /><code>ssh-keygen</code>ç”Ÿæˆå¯†é’¥åï¼Œå®¶ç›®å½•/.sshå°±ä¼šå¤šä¸¤ä¸ªæ–‡ä»¶</p><ul><li><code>id_rsa</code>ï¼šç§é’¥</li><li><code>id_rsa.pub</code>ï¼šå…¬é’¥</li></ul><ul><li><p>ç¬¬ä¸€æ­¥<br />æˆ‘ä»¬<code>cd .ssh</code><br />ç„¶å<code>cat .\id_rsa.pub</code><br />å†æŠŠå†…å®¹å¤åˆ¶</p></li><li><p>ç¬¬äºŒæ­¥<br />sshåˆ°è‡ªå·±çš„æœåŠ¡å™¨<br />åœ¨<code>~/.ssh/</code>ç›®å½•åˆ›å»ºauthorized_keys<br />é€šè¿‡vimæŠŠå‰ªåˆ‡æ¿çš„å†…å®¹ç²˜è´´åˆ°è¯¥æ–‡ä»¶å³å¯</p></li></ul><p>ä¸‹æ¬¡ç™»é™†å°±ä¸éœ€è¦è¾“å…¥å¯†ç å•¦ï¼</p>]]></content>
      
      
      <categories>
          
          <category> æ‚è°ˆ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> terminal </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>mysqlå­¦ä¹ ç¬”è®°</title>
      <link href="/posts/51482.html"/>
      <url>/posts/51482.html</url>
      
        <content type="html"><![CDATA[<blockquote><p>æœ¬ç¯‡æ‘˜å½•è‡ªé»‘é©¬ç¨‹åºå‘˜çš„Bç«™æ•™å­¦è§†é¢‘ã€‚<br />æœ¬ç¬”è®°åªè®°å½•åˆ°è¿›é˜¶ç¯‡ï¼ˆå¤§éƒ¨åˆ†ï¼‰ï¼Œå‰©ä¸‹çš„è¿›é˜¶ç¯‡ä»¥åŠè¿ç»´ç¯‡ç”±äºæœ¬äººèŒä¸šç”Ÿæ¶¯æ²¡æœ‰ç”¨æ­¦ä¹‹åœ°ï¼Œæ‰€ä»¥æ²¡æœ‰è¿›è¡Œå­¦ä¹ ã€‚</p><footer><strong>é»‘é©¬ç¨‹åºå‘˜</strong><cite><a href="https://www.bilibili.com/video/BV1Kr4y1i7ru/?share_source=copy_web&vd_source=e43c1de8e41e1499f7f3fdb03fba0eb6">é»‘é©¬ç¨‹åºå‘˜ MySQLæ•°æ®åº“å…¥é—¨åˆ°ç²¾é€šï¼Œä»mysqlå®‰è£…åˆ°mysqlé«˜çº§ã€mysqlä¼˜åŒ–å…¨å›Šæ‹¬</a></cite></footer></blockquote><span id="more"></span><h1 id="åŸºç¡€ç¯‡"><a class="markdownIt-Anchor" href="#åŸºç¡€ç¯‡"></a> åŸºç¡€ç¯‡</h1><h2 id="é€šç”¨è¯­æ³•åŠåˆ†ç±»"><a class="markdownIt-Anchor" href="#é€šç”¨è¯­æ³•åŠåˆ†ç±»"></a> é€šç”¨è¯­æ³•åŠåˆ†ç±»</h2><ul><li>DDL: æ•°æ®å®šä¹‰è¯­è¨€ï¼Œç”¨æ¥å®šä¹‰æ•°æ®åº“å¯¹è±¡ï¼ˆæ•°æ®åº“ã€è¡¨ã€å­—æ®µï¼‰</li><li>DML: æ•°æ®æ“ä½œè¯­è¨€ï¼Œç”¨æ¥å¯¹æ•°æ®åº“è¡¨ä¸­çš„æ•°æ®è¿›è¡Œå¢åˆ æ”¹</li><li>DQL: æ•°æ®æŸ¥è¯¢è¯­è¨€ï¼Œç”¨æ¥æŸ¥è¯¢æ•°æ®åº“ä¸­è¡¨çš„è®°å½•</li><li>DCL: æ•°æ®æ§åˆ¶è¯­è¨€ï¼Œç”¨æ¥åˆ›å»ºæ•°æ®åº“ç”¨æˆ·ã€æ§åˆ¶æ•°æ®åº“çš„æ§åˆ¶æƒé™</li></ul><h3 id="ddlæ•°æ®å®šä¹‰è¯­è¨€"><a class="markdownIt-Anchor" href="#ddlæ•°æ®å®šä¹‰è¯­è¨€"></a> DDLï¼ˆæ•°æ®å®šä¹‰è¯­è¨€ï¼‰</h3><p>æ•°æ®å®šä¹‰è¯­è¨€</p><h4 id="æ•°æ®åº“æ“ä½œ"><a class="markdownIt-Anchor" href="#æ•°æ®åº“æ“ä½œ"></a> æ•°æ®åº“æ“ä½œ</h4><p>æŸ¥è¯¢æ‰€æœ‰æ•°æ®åº“ï¼š<br /><code>SHOW DATABASES;</code><br />æŸ¥è¯¢å½“å‰æ•°æ®åº“ï¼š<br /><code>SELECT DATABASE();</code><br />åˆ›å»ºæ•°æ®åº“ï¼š<br /><code>CREATE DATABASE [ IF NOT EXISTS ] æ•°æ®åº“å [ DEFAULT CHARSET å­—ç¬¦é›†] [COLLATE æ’åºè§„åˆ™ ];</code><br />åˆ é™¤æ•°æ®åº“ï¼š<br /><code>DROP DATABASE [ IF EXISTS ] æ•°æ®åº“å;</code><br />ä½¿ç”¨æ•°æ®åº“ï¼š<br /><code>USE æ•°æ®åº“å;</code></p><h5 id="æ³¨æ„äº‹é¡¹"><a class="markdownIt-Anchor" href="#æ³¨æ„äº‹é¡¹"></a> æ³¨æ„äº‹é¡¹</h5><ul><li>UTF8å­—ç¬¦é›†é•¿åº¦ä¸º3å­—èŠ‚ï¼Œæœ‰äº›ç¬¦å·å 4å­—èŠ‚ï¼Œæ‰€ä»¥æ¨èç”¨utf8mb4å­—ç¬¦é›†</li></ul><h4 id="è¡¨æ“ä½œ"><a class="markdownIt-Anchor" href="#è¡¨æ“ä½œ"></a> è¡¨æ“ä½œ</h4><p>æŸ¥è¯¢å½“å‰æ•°æ®åº“æ‰€æœ‰è¡¨ï¼š<br /><code>SHOW TABLES;</code><br />æŸ¥è¯¢è¡¨ç»“æ„ï¼š<br /><code>DESC è¡¨å;</code><br />æŸ¥è¯¢æŒ‡å®šè¡¨çš„å»ºè¡¨è¯­å¥ï¼š<br /><code>SHOW CREATE TABLE è¡¨å;</code></p><p>åˆ›å»ºè¡¨ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE è¡¨å(</span><br><span class="line">å­—æ®µ1 å­—æ®µ1ç±»å‹ [COMMENT å­—æ®µ1æ³¨é‡Š],</span><br><span class="line">å­—æ®µ2 å­—æ®µ2ç±»å‹ [COMMENT å­—æ®µ2æ³¨é‡Š],</span><br><span class="line">å­—æ®µ3 å­—æ®µ3ç±»å‹ [COMMENT å­—æ®µ3æ³¨é‡Š],</span><br><span class="line">...</span><br><span class="line">å­—æ®µn å­—æ®µnç±»å‹ [COMMENT å­—æ®µnæ³¨é‡Š]</span><br><span class="line">)[ COMMENT è¡¨æ³¨é‡Š ];</span><br></pre></td></tr></table></figure><p><strong>æœ€åä¸€ä¸ªå­—æ®µåé¢æ²¡æœ‰é€—å·</strong></p><p>æ·»åŠ å­—æ®µï¼š<br /><code>ALTER TABLE è¡¨å ADD å­—æ®µå ç±»å‹(é•¿åº¦) [COMMENT æ³¨é‡Š] [çº¦æŸ];</code><br />ä¾‹ï¼š<code>ALTER TABLE emp ADD nickname varchar(20) COMMENT 'æ˜µç§°';</code></p><p>ä¿®æ”¹æ•°æ®ç±»å‹ï¼š<br /><code>ALTER TABLE è¡¨å MODIFY å­—æ®µå æ–°æ•°æ®ç±»å‹(é•¿åº¦);</code><br />ä¿®æ”¹å­—æ®µåå’Œå­—æ®µç±»å‹ï¼š<br /><code>ALTER TABLE è¡¨å CHANGE æ—§å­—æ®µå æ–°å­—æ®µå ç±»å‹(é•¿åº¦) [COMMENT æ³¨é‡Š] [çº¦æŸ];</code><br />ä¾‹ï¼šå°†empè¡¨çš„nicknameå­—æ®µä¿®æ”¹ä¸ºusernameï¼Œç±»å‹ä¸ºvarchar(30)<br /><code>ALTER TABLE emp CHANGE nickname username varchar(30) COMMENT 'æ˜µç§°';</code></p><p>åˆ é™¤å­—æ®µï¼š<br /><code>ALTER TABLE è¡¨å DROP å­—æ®µå;</code></p><p>ä¿®æ”¹è¡¨åï¼š<br /><code>ALTER TABLE è¡¨å RENAME TO æ–°è¡¨å</code></p><p>åˆ é™¤è¡¨ï¼š<br /><code>DROP TABLE [IF EXISTS] è¡¨å;</code><br />åˆ é™¤è¡¨ï¼Œå¹¶é‡æ–°åˆ›å»ºè¯¥è¡¨ï¼š<br /><code>TRUNCATE TABLE è¡¨å;</code></p><h3 id="dmlæ•°æ®æ“ä½œè¯­è¨€"><a class="markdownIt-Anchor" href="#dmlæ•°æ®æ“ä½œè¯­è¨€"></a> DMLï¼ˆæ•°æ®æ“ä½œè¯­è¨€ï¼‰</h3><h4 id="æ·»åŠ æ•°æ®"><a class="markdownIt-Anchor" href="#æ·»åŠ æ•°æ®"></a> æ·»åŠ æ•°æ®</h4><p>æŒ‡å®šå­—æ®µï¼š<br /><code>INSERT INTO è¡¨å (å­—æ®µå1, å­—æ®µå2, ...) VALUES (å€¼1, å€¼2, ...);</code><br />å…¨éƒ¨å­—æ®µï¼š<br /><code>INSERT INTO è¡¨å VALUES (å€¼1, å€¼2, ...);</code></p><p>æ‰¹é‡æ·»åŠ æ•°æ®ï¼š<br /><code>INSERT INTO è¡¨å (å­—æ®µå1, å­—æ®µå2, ...) VALUES (å€¼1, å€¼2, ...), (å€¼1, å€¼2, ...), (å€¼1, å€¼2, ...);</code><br /><code>INSERT INTO è¡¨å VALUES (å€¼1, å€¼2, ...), (å€¼1, å€¼2, ...), (å€¼1, å€¼2, ...);</code></p><h5 id="æ³¨æ„äº‹é¡¹-2"><a class="markdownIt-Anchor" href="#æ³¨æ„äº‹é¡¹-2"></a> æ³¨æ„äº‹é¡¹</h5><ul><li>å­—ç¬¦ä¸²å’Œæ—¥æœŸç±»å‹æ•°æ®åº”è¯¥åŒ…å«åœ¨å¼•å·ä¸­</li><li>æ’å…¥çš„æ•°æ®å¤§å°åº”è¯¥åœ¨å­—æ®µçš„è§„å®šèŒƒå›´å†…</li></ul><h4 id="æ›´æ–°å’Œåˆ é™¤æ•°æ®"><a class="markdownIt-Anchor" href="#æ›´æ–°å’Œåˆ é™¤æ•°æ®"></a> æ›´æ–°å’Œåˆ é™¤æ•°æ®</h4><p>ä¿®æ”¹æ•°æ®ï¼š<br /><code>UPDATE è¡¨å SET å­—æ®µå1 = å€¼1, å­—æ®µå2 = å€¼2, ... [ WHERE æ¡ä»¶ ];</code><br />ä¾‹ï¼š<br /><code>UPDATE emp SET name = 'Jack' WHERE id = 1;</code></p><p>åˆ é™¤æ•°æ®ï¼š<br /><code>DELETE FROM è¡¨å [ WHERE æ¡ä»¶ ];</code></p><h3 id="dqlæ•°æ®æŸ¥è¯¢è¯­è¨€"><a class="markdownIt-Anchor" href="#dqlæ•°æ®æŸ¥è¯¢è¯­è¨€"></a> DQLï¼ˆæ•°æ®æŸ¥è¯¢è¯­è¨€ï¼‰</h3><p>è¯­æ³•ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">SELECT</span><br><span class="line">å­—æ®µåˆ—è¡¨</span><br><span class="line">FROM</span><br><span class="line">è¡¨åå­—æ®µ</span><br><span class="line">WHERE</span><br><span class="line">æ¡ä»¶åˆ—è¡¨</span><br><span class="line">GROUP BY</span><br><span class="line">åˆ†ç»„å­—æ®µåˆ—è¡¨</span><br><span class="line">HAVING</span><br><span class="line">åˆ†ç»„åçš„æ¡ä»¶åˆ—è¡¨</span><br><span class="line">ORDER BY</span><br><span class="line">æ’åºå­—æ®µåˆ—è¡¨</span><br><span class="line">LIMIT</span><br><span class="line">åˆ†é¡µå‚æ•°</span><br></pre></td></tr></table></figure><h4 id="åŸºç¡€æŸ¥è¯¢"><a class="markdownIt-Anchor" href="#åŸºç¡€æŸ¥è¯¢"></a> åŸºç¡€æŸ¥è¯¢</h4><p>æŸ¥è¯¢å¤šä¸ªå­—æ®µï¼š<br /><code>SELECT å­—æ®µ1, å­—æ®µ2, å­—æ®µ3, ... FROM è¡¨å;</code><br /><code>SELECT * FROM è¡¨å;</code></p><p>è®¾ç½®åˆ«åï¼š<br /><code>SELECT å­—æ®µ1 [ AS åˆ«å1 ], å­—æ®µ2 [ AS åˆ«å2 ], å­—æ®µ3 [ AS åˆ«å3 ], ... FROM è¡¨å;</code><br /><code>SELECT å­—æ®µ1 [ åˆ«å1 ], å­—æ®µ2 [ åˆ«å2 ], å­—æ®µ3 [ åˆ«å3 ], ... FROM è¡¨å;</code></p><p>å»é™¤é‡å¤è®°å½•ï¼š<br /><code>SELECT DISTINCT å­—æ®µåˆ—è¡¨ FROM è¡¨å;</code></p><p>è½¬ä¹‰ï¼š<br /><code>SELECT * FROM è¡¨å WHERE name LIKE '/_å¼ ä¸‰' ESCAPE '/'</code><br />/ ä¹‹åçš„_ä¸ä½œä¸ºé€šé…ç¬¦</p><h4 id="æ¡ä»¶æŸ¥è¯¢"><a class="markdownIt-Anchor" href="#æ¡ä»¶æŸ¥è¯¢"></a> æ¡ä»¶æŸ¥è¯¢</h4><p>è¯­æ³•ï¼š<br /><code>SELECT å­—æ®µåˆ—è¡¨ FROM è¡¨å WHERE æ¡ä»¶åˆ—è¡¨;</code></p><p>æ¡ä»¶ï¼š</p><table><thead><tr><th>æ¯”è¾ƒè¿ç®—ç¬¦</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td>&gt;</td><td>å¤§äº</td></tr><tr><td>&gt;=</td><td>å¤§äºç­‰äº</td></tr><tr><td>&lt;</td><td>å°äº</td></tr><tr><td>&lt;=</td><td>å°äºç­‰äº</td></tr><tr><td>=</td><td>ç­‰äº</td></tr><tr><td>&lt;&gt; æˆ– !=</td><td>ä¸ç­‰äº</td></tr><tr><td>BETWEEN â€¦ AND â€¦</td><td>åœ¨æŸä¸ªèŒƒå›´å†…ï¼ˆå«æœ€å°ã€æœ€å¤§å€¼ï¼‰</td></tr><tr><td>IN(â€¦)</td><td>åœ¨inä¹‹åçš„åˆ—è¡¨ä¸­çš„å€¼ï¼Œå¤šé€‰ä¸€</td></tr><tr><td>LIKE å ä½ç¬¦</td><td>æ¨¡ç³ŠåŒ¹é…ï¼ˆ_åŒ¹é…å•ä¸ªå­—ç¬¦ï¼Œ%åŒ¹é…ä»»æ„ä¸ªå­—ç¬¦ï¼‰</td></tr><tr><td>IS NULL</td><td>æ˜¯NULL</td></tr></tbody></table><table><thead><tr><th>é€»è¾‘è¿ç®—ç¬¦</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td>AND æˆ– &amp;&amp;</td><td>å¹¶ä¸”ï¼ˆå¤šä¸ªæ¡ä»¶åŒæ—¶æˆç«‹ï¼‰</td></tr><tr><td>OR æˆ– ||</td><td>æˆ–è€…ï¼ˆå¤šä¸ªæ¡ä»¶ä»»æ„ä¸€ä¸ªæˆç«‹ï¼‰</td></tr><tr><td>NOT æˆ– !</td><td>éï¼Œä¸æ˜¯</td></tr></tbody></table><p>ä¾‹å­ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">-- å¹´é¾„ç­‰äº30</span><br><span class="line">select * from employee where age = 30;</span><br><span class="line">-- å¹´é¾„å°äº30</span><br><span class="line">select * from employee where age &lt; 30;</span><br><span class="line">-- å°äºç­‰äº</span><br><span class="line">select * from employee where age &lt;= 30;</span><br><span class="line">-- æ²¡æœ‰èº«ä»½è¯</span><br><span class="line">select * from employee where idcard is null or idcard = &#x27;&#x27;;</span><br><span class="line">-- æœ‰èº«ä»½è¯</span><br><span class="line">select * from employee where idcard;</span><br><span class="line">select * from employee where idcard is not null;</span><br><span class="line">-- ä¸ç­‰äº</span><br><span class="line">select * from employee where age != 30;</span><br><span class="line">-- å¹´é¾„åœ¨20åˆ°30ä¹‹é—´</span><br><span class="line">select * from employee where age between 20 and 30;</span><br><span class="line">select * from employee where age &gt;= 20 and age &lt;= 30;</span><br><span class="line">-- ä¸‹é¢è¯­å¥ä¸æŠ¥é”™ï¼Œä½†æŸ¥ä¸åˆ°ä»»ä½•ä¿¡æ¯</span><br><span class="line">select * from employee where age between 30 and 20;</span><br><span class="line">-- æ€§åˆ«ä¸ºå¥³ä¸”å¹´é¾„å°äº30</span><br><span class="line">select * from employee where age &lt; 30 and gender = &#x27;å¥³&#x27;;</span><br><span class="line">-- å¹´é¾„ç­‰äº25æˆ–30æˆ–35</span><br><span class="line">select * from employee where age = 25 or age = 30 or age = 35;</span><br><span class="line">select * from employee where age in (25, 30, 35);</span><br><span class="line">-- å§“åä¸ºä¸¤ä¸ªå­—</span><br><span class="line">select * from employee where name like &#x27;__&#x27;;</span><br><span class="line">-- èº«ä»½è¯æœ€åä¸ºX</span><br><span class="line">select * from employee where idcard like &#x27;%X&#x27;;</span><br></pre></td></tr></table></figure><h4 id="èšåˆæŸ¥è¯¢èšåˆå‡½æ•°"><a class="markdownIt-Anchor" href="#èšåˆæŸ¥è¯¢èšåˆå‡½æ•°"></a> èšåˆæŸ¥è¯¢ï¼ˆèšåˆå‡½æ•°ï¼‰</h4><p>å¸¸è§èšåˆå‡½æ•°ï¼š</p><table><thead><tr><th>å‡½æ•°</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td>count</td><td>ç»Ÿè®¡æ•°é‡</td></tr><tr><td>max</td><td>æœ€å¤§å€¼</td></tr><tr><td>min</td><td>æœ€å°å€¼</td></tr><tr><td>avg</td><td>å¹³å‡å€¼</td></tr><tr><td>sum</td><td>æ±‚å’Œ</td></tr></tbody></table><p>è¯­æ³•ï¼š<br /><code>SELECT èšåˆå‡½æ•°(å­—æ®µåˆ—è¡¨) FROM è¡¨å;</code><br />ä¾‹ï¼š<br /><code>SELECT count(id) from employee where workaddress = &quot;å¹¿ä¸œçœ&quot;;</code></p><h4 id="åˆ†ç»„æŸ¥è¯¢"><a class="markdownIt-Anchor" href="#åˆ†ç»„æŸ¥è¯¢"></a> åˆ†ç»„æŸ¥è¯¢</h4><p>è¯­æ³•ï¼š<br /><code>SELECT å­—æ®µåˆ—è¡¨ FROM è¡¨å [ WHERE æ¡ä»¶ ] GROUP BY åˆ†ç»„å­—æ®µå [ HAVING åˆ†ç»„åçš„è¿‡æ»¤æ¡ä»¶ ];</code></p><p>where å’Œ having çš„åŒºåˆ«ï¼š</p><ul><li>æ‰§è¡Œæ—¶æœºä¸åŒï¼šwhereæ˜¯åˆ†ç»„ä¹‹å‰è¿›è¡Œè¿‡æ»¤ï¼Œä¸æ»¡è¶³whereæ¡ä»¶ä¸å‚ä¸åˆ†ç»„ï¼›havingæ˜¯åˆ†ç»„åå¯¹ç»“æœè¿›è¡Œè¿‡æ»¤ã€‚</li><li>åˆ¤æ–­æ¡ä»¶ä¸åŒï¼šwhereä¸èƒ½å¯¹èšåˆå‡½æ•°è¿›è¡Œåˆ¤æ–­ï¼Œè€Œhavingå¯ä»¥ã€‚</li></ul><p>ä¾‹å­ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">-- æ ¹æ®æ€§åˆ«åˆ†ç»„ï¼Œç»Ÿè®¡ç”·æ€§å’Œå¥³æ€§æ•°é‡ï¼ˆåªæ˜¾ç¤ºåˆ†ç»„æ•°é‡ï¼Œä¸æ˜¾ç¤ºå“ªä¸ªæ˜¯ç”·å“ªä¸ªæ˜¯å¥³ï¼‰</span><br><span class="line">select count(*) from employee group by gender;</span><br><span class="line">-- æ ¹æ®æ€§åˆ«åˆ†ç»„ï¼Œç»Ÿè®¡ç”·æ€§å’Œå¥³æ€§æ•°é‡</span><br><span class="line">select gender, count(*) from employee group by gender;</span><br><span class="line">-- æ ¹æ®æ€§åˆ«åˆ†ç»„ï¼Œç»Ÿè®¡ç”·æ€§å’Œå¥³æ€§çš„å¹³å‡å¹´é¾„</span><br><span class="line">select gender, avg(age) from employee group by gender;</span><br><span class="line">-- å¹´é¾„å°äº45ï¼Œå¹¶æ ¹æ®å·¥ä½œåœ°å€åˆ†ç»„</span><br><span class="line">select workaddress, count(*) from employee where age &lt; 45 group by workaddress;</span><br><span class="line">-- å¹´é¾„å°äº45ï¼Œå¹¶æ ¹æ®å·¥ä½œåœ°å€åˆ†ç»„ï¼Œè·å–å‘˜å·¥æ•°é‡å¤§äºç­‰äº3çš„å·¥ä½œåœ°å€</span><br><span class="line">select workaddress, count(*) address_count from employee where age &lt; 45 group by workaddress having address_count &gt;= 3;</span><br></pre></td></tr></table></figure><h5 id="æ³¨æ„äº‹é¡¹-3"><a class="markdownIt-Anchor" href="#æ³¨æ„äº‹é¡¹-3"></a> æ³¨æ„äº‹é¡¹</h5><ul><li>æ‰§è¡Œé¡ºåºï¼šwhere &gt; èšåˆå‡½æ•° &gt; having</li><li>åˆ†ç»„ä¹‹åï¼ŒæŸ¥è¯¢çš„å­—æ®µä¸€èˆ¬ä¸ºèšåˆå‡½æ•°å’Œåˆ†ç»„å­—æ®µï¼ŒæŸ¥è¯¢å…¶ä»–å­—æ®µæ— ä»»ä½•æ„ä¹‰</li></ul><h4 id="æ’åºæŸ¥è¯¢"><a class="markdownIt-Anchor" href="#æ’åºæŸ¥è¯¢"></a> æ’åºæŸ¥è¯¢</h4><p>è¯­æ³•ï¼š<br /><code>SELECT å­—æ®µåˆ—è¡¨ FROM è¡¨å ORDER BY å­—æ®µ1 æ’åºæ–¹å¼1, å­—æ®µ2 æ’åºæ–¹å¼2;</code></p><p>æ’åºæ–¹å¼ï¼š</p><ul><li>ASC: å‡åºï¼ˆé»˜è®¤ï¼‰</li><li>DESC: é™åº</li></ul><p>ä¾‹å­ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-- æ ¹æ®å¹´é¾„å‡åºæ’åº</span><br><span class="line">SELECT * FROM employee ORDER BY age ASC;</span><br><span class="line">SELECT * FROM employee ORDER BY age;</span><br><span class="line">-- ä¸¤å­—æ®µæ’åºï¼Œæ ¹æ®å¹´é¾„å‡åºæ’åºï¼Œå…¥èŒæ—¶é—´é™åºæ’åº</span><br><span class="line">SELECT * FROM employee ORDER BY age ASC, entrydate DESC;</span><br></pre></td></tr></table></figure><h5 id="æ³¨æ„äº‹é¡¹-4"><a class="markdownIt-Anchor" href="#æ³¨æ„äº‹é¡¹-4"></a> æ³¨æ„äº‹é¡¹</h5><p>å¦‚æœæ˜¯å¤šå­—æ®µæ’åºï¼Œå½“ç¬¬ä¸€ä¸ªå­—æ®µå€¼ç›¸åŒæ—¶ï¼Œæ‰ä¼šæ ¹æ®ç¬¬äºŒä¸ªå­—æ®µè¿›è¡Œæ’åº</p><h4 id="åˆ†é¡µæŸ¥è¯¢"><a class="markdownIt-Anchor" href="#åˆ†é¡µæŸ¥è¯¢"></a> åˆ†é¡µæŸ¥è¯¢</h4><p>è¯­æ³•ï¼š<br /><code>SELECT å­—æ®µåˆ—è¡¨ FROM è¡¨å LIMIT èµ·å§‹ç´¢å¼•, æŸ¥è¯¢è®°å½•æ•°;</code></p><p>ä¾‹å­ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-- æŸ¥è¯¢ç¬¬ä¸€é¡µæ•°æ®ï¼Œå±•ç¤º10æ¡</span><br><span class="line">SELECT * FROM employee LIMIT 0, 10;</span><br><span class="line">-- æŸ¥è¯¢ç¬¬äºŒé¡µ</span><br><span class="line">SELECT * FROM employee LIMIT 10, 10;</span><br></pre></td></tr></table></figure><h5 id="æ³¨æ„äº‹é¡¹-5"><a class="markdownIt-Anchor" href="#æ³¨æ„äº‹é¡¹-5"></a> æ³¨æ„äº‹é¡¹</h5><ul><li>èµ·å§‹ç´¢å¼•ä»0å¼€å§‹ï¼Œèµ·å§‹ç´¢å¼• = ï¼ˆæŸ¥è¯¢é¡µç  - 1ï¼‰ * æ¯é¡µæ˜¾ç¤ºè®°å½•æ•°</li><li>åˆ†é¡µæŸ¥è¯¢æ˜¯æ•°æ®åº“çš„æ–¹è¨€ï¼Œä¸åŒæ•°æ®åº“æœ‰ä¸åŒå®ç°ï¼ŒMySQLæ˜¯LIMIT</li><li>å¦‚æœæŸ¥è¯¢çš„æ˜¯ç¬¬ä¸€é¡µæ•°æ®ï¼Œèµ·å§‹ç´¢å¼•å¯ä»¥çœç•¥ï¼Œç›´æ¥ç®€å†™ LIMIT 10</li></ul><h4 id="dqlæ‰§è¡Œé¡ºåº"><a class="markdownIt-Anchor" href="#dqlæ‰§è¡Œé¡ºåº"></a> DQLæ‰§è¡Œé¡ºåº</h4><p>FROM -&gt; WHERE -&gt; GROUP BY -&gt; SELECT -&gt; ORDER BY -&gt; LIMIT</p><h3 id="dcl"><a class="markdownIt-Anchor" href="#dcl"></a> DCL</h3><h4 id="ç®¡ç†ç”¨æˆ·"><a class="markdownIt-Anchor" href="#ç®¡ç†ç”¨æˆ·"></a> ç®¡ç†ç”¨æˆ·</h4><p>æŸ¥è¯¢ç”¨æˆ·ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">USE mysql;</span><br><span class="line">SELECT * FROM user;</span><br></pre></td></tr></table></figure><p>åˆ›å»ºç”¨æˆ·:<br /><code>CREATE USER 'ç”¨æˆ·å'@'ä¸»æœºå' IDENTIFIED BY 'å¯†ç ';</code></p><p>ä¿®æ”¹ç”¨æˆ·å¯†ç ï¼š<br /><code>ALTER USER 'ç”¨æˆ·å'@'ä¸»æœºå' IDENTIFIED WITH mysql_native_password BY 'æ–°å¯†ç ';</code></p><p>åˆ é™¤ç”¨æˆ·ï¼š<br /><code>DROP USER 'ç”¨æˆ·å'@'ä¸»æœºå';</code></p><p>ä¾‹å­ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">-- åˆ›å»ºç”¨æˆ·testï¼Œåªèƒ½åœ¨å½“å‰ä¸»æœºlocalhostè®¿é—®</span><br><span class="line">create user &#x27;test&#x27;@&#x27;localhost&#x27; identified by &#x27;123456&#x27;;</span><br><span class="line">-- åˆ›å»ºç”¨æˆ·testï¼Œèƒ½åœ¨ä»»æ„ä¸»æœºè®¿é—®</span><br><span class="line">create user &#x27;test&#x27;@&#x27;%&#x27; identified by &#x27;123456&#x27;;</span><br><span class="line">create user &#x27;test&#x27; identified by &#x27;123456&#x27;;</span><br><span class="line">-- ä¿®æ”¹å¯†ç </span><br><span class="line">alter user &#x27;test&#x27;@&#x27;localhost&#x27; identified with mysql_native_password by &#x27;1234&#x27;;</span><br><span class="line">-- åˆ é™¤ç”¨æˆ·</span><br><span class="line">drop user &#x27;test&#x27;@&#x27;localhost&#x27;;</span><br></pre></td></tr></table></figure><h5 id="æ³¨æ„äº‹é¡¹-6"><a class="markdownIt-Anchor" href="#æ³¨æ„äº‹é¡¹-6"></a> æ³¨æ„äº‹é¡¹</h5><ul><li>ä¸»æœºåå¯ä»¥ä½¿ç”¨ % é€šé…</li></ul><h4 id="æƒé™æ§åˆ¶"><a class="markdownIt-Anchor" href="#æƒé™æ§åˆ¶"></a> æƒé™æ§åˆ¶</h4><p>å¸¸ç”¨æƒé™ï¼š</p><table><thead><tr><th>æƒé™</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>ALL, ALL PRIVILEGES</td><td>æ‰€æœ‰æƒé™</td></tr><tr><td>SELECT</td><td>æŸ¥è¯¢æ•°æ®</td></tr><tr><td>INSERT</td><td>æ’å…¥æ•°æ®</td></tr><tr><td>UPDATE</td><td>ä¿®æ”¹æ•°æ®</td></tr><tr><td>DELETE</td><td>åˆ é™¤æ•°æ®</td></tr><tr><td>ALTER</td><td>ä¿®æ”¹è¡¨</td></tr><tr><td>DROP</td><td>åˆ é™¤æ•°æ®åº“/è¡¨/è§†å›¾</td></tr><tr><td>CREATE</td><td>åˆ›å»ºæ•°æ®åº“/è¡¨</td></tr></tbody></table><p>æ›´å¤šæƒé™è¯·çœ‹<a href="#%E6%9D%83%E9%99%90%E4%B8%80%E8%A7%88%E8%A1%A8" title="æƒé™ä¸€è§ˆè¡¨">æƒé™ä¸€è§ˆè¡¨</a></p><p>æŸ¥è¯¢æƒé™ï¼š<br /><code>SHOW GRANTS FOR 'ç”¨æˆ·å'@'ä¸»æœºå';</code></p><p>æˆäºˆæƒé™ï¼š<br /><code>GRANT æƒé™åˆ—è¡¨ ON æ•°æ®åº“å.è¡¨å TO 'ç”¨æˆ·å'@'ä¸»æœºå';</code></p><p>æ’¤é”€æƒé™ï¼š<br /><code>REVOKE æƒé™åˆ—è¡¨ ON æ•°æ®åº“å.è¡¨å FROM 'ç”¨æˆ·å'@'ä¸»æœºå';</code></p><h5 id="æ³¨æ„äº‹é¡¹-7"><a class="markdownIt-Anchor" href="#æ³¨æ„äº‹é¡¹-7"></a> æ³¨æ„äº‹é¡¹</h5><ul><li>å¤šä¸ªæƒé™ç”¨é€—å·åˆ†éš”</li><li>æˆæƒæ—¶ï¼Œæ•°æ®åº“åå’Œè¡¨åå¯ä»¥ç”¨ * è¿›è¡Œé€šé…ï¼Œä»£è¡¨æ‰€æœ‰</li></ul><h2 id="å‡½æ•°"><a class="markdownIt-Anchor" href="#å‡½æ•°"></a> å‡½æ•°</h2><ul><li>å­—ç¬¦ä¸²å‡½æ•°</li><li>æ•°å€¼å‡½æ•°</li><li>æ—¥æœŸå‡½æ•°</li><li>æµç¨‹å‡½æ•°</li></ul><h3 id="å­—ç¬¦ä¸²å‡½æ•°"><a class="markdownIt-Anchor" href="#å­—ç¬¦ä¸²å‡½æ•°"></a> å­—ç¬¦ä¸²å‡½æ•°</h3><p>å¸¸ç”¨å‡½æ•°ï¼š</p><table><thead><tr><th>å‡½æ•°</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td>CONCAT(s1, s2, â€¦, sn)</td><td>å­—ç¬¦ä¸²æ‹¼æ¥ï¼Œå°†s1, s2, â€¦, snæ‹¼æ¥æˆä¸€ä¸ªå­—ç¬¦ä¸²</td></tr><tr><td>LOWER(str)</td><td>å°†å­—ç¬¦ä¸²å…¨éƒ¨è½¬ä¸ºå°å†™</td></tr><tr><td>UPPER(str)</td><td>å°†å­—ç¬¦ä¸²å…¨éƒ¨è½¬ä¸ºå¤§å†™</td></tr><tr><td>LPAD(str, n, pad)</td><td>å·¦å¡«å……ï¼Œç”¨å­—ç¬¦ä¸²padå¯¹strçš„å·¦è¾¹è¿›è¡Œå¡«å……ï¼Œè¾¾åˆ°nä¸ªå­—ç¬¦ä¸²é•¿åº¦</td></tr><tr><td>RPAD(str, n, pad)</td><td>å³å¡«å……ï¼Œç”¨å­—ç¬¦ä¸²padå¯¹strçš„å³è¾¹è¿›è¡Œå¡«å……ï¼Œè¾¾åˆ°nä¸ªå­—ç¬¦ä¸²é•¿åº¦</td></tr><tr><td>TRIM(str)</td><td>å»æ‰å­—ç¬¦ä¸²å¤´éƒ¨å’Œå°¾éƒ¨çš„ç©ºæ ¼</td></tr><tr><td>SUBSTRING(str, start, len)</td><td>è¿”å›ä»å­—ç¬¦ä¸²strä»startä½ç½®èµ·çš„lenä¸ªé•¿åº¦çš„å­—ç¬¦ä¸²</td></tr><tr><td>REPLACE(column, source, replace)</td><td>æ›¿æ¢å­—ç¬¦ä¸²</td></tr></tbody></table><p>ä½¿ç”¨ç¤ºä¾‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">-- æ‹¼æ¥</span><br><span class="line">SELECT CONCAT(&#x27;Hello&#x27;, &#x27;World&#x27;);</span><br><span class="line">-- å°å†™</span><br><span class="line">SELECT LOWER(&#x27;Hello&#x27;);</span><br><span class="line">-- å¤§å†™</span><br><span class="line">SELECT UPPER(&#x27;Hello&#x27;);</span><br><span class="line">-- å·¦å¡«å……</span><br><span class="line">SELECT LPAD(&#x27;01&#x27;, 5, &#x27;-&#x27;);</span><br><span class="line">-- å³å¡«å……</span><br><span class="line">SELECT RPAD(&#x27;01&#x27;, 5, &#x27;-&#x27;);</span><br><span class="line">-- å»é™¤ç©ºæ ¼</span><br><span class="line">SELECT TRIM(&#x27; Hello World &#x27;);</span><br><span class="line">-- åˆ‡ç‰‡ï¼ˆèµ·å§‹ç´¢å¼•ä¸º1ï¼‰</span><br><span class="line">SELECT SUBSTRING(&#x27;Hello World&#x27;, 1, 5);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="æ•°å€¼å‡½æ•°"><a class="markdownIt-Anchor" href="#æ•°å€¼å‡½æ•°"></a> æ•°å€¼å‡½æ•°</h3><p>å¸¸è§å‡½æ•°ï¼š</p><table><thead><tr><th>å‡½æ•°</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td>CEIL(x)</td><td>å‘ä¸Šå–æ•´</td></tr><tr><td>FLOOR(x)</td><td>å‘ä¸‹å–æ•´</td></tr><tr><td>MOD(x, y)</td><td>è¿”å›x/yçš„æ¨¡</td></tr><tr><td>RAND()</td><td>è¿”å›0~1å†…çš„éšæœºæ•°</td></tr><tr><td>ROUND(x, y)</td><td>æ±‚å‚æ•°xçš„å››èˆäº”å…¥å€¼ï¼Œä¿ç•™yä½å°æ•°</td></tr></tbody></table><h3 id="æ—¥æœŸå‡½æ•°"><a class="markdownIt-Anchor" href="#æ—¥æœŸå‡½æ•°"></a> æ—¥æœŸå‡½æ•°</h3><p>å¸¸ç”¨å‡½æ•°ï¼š</p><table><thead><tr><th>å‡½æ•°</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td>CURDATE()</td><td>è¿”å›å½“å‰æ—¥æœŸ</td></tr><tr><td>CURTIME()</td><td>è¿”å›å½“å‰æ—¶é—´</td></tr><tr><td>NOW()</td><td>è¿”å›å½“å‰æ—¥æœŸå’Œæ—¶é—´</td></tr><tr><td>YEAR(date)</td><td>è·å–æŒ‡å®šdateçš„å¹´ä»½</td></tr><tr><td>MONTH(date)</td><td>è·å–æŒ‡å®šdateçš„æœˆä»½</td></tr><tr><td>DAY(date)</td><td>è·å–æŒ‡å®šdateçš„æ—¥æœŸ</td></tr><tr><td>DATE_ADD(date, INTERVAL expr type)</td><td>è¿”å›ä¸€ä¸ªæ—¥æœŸ/æ—¶é—´å€¼åŠ ä¸Šä¸€ä¸ªæ—¶é—´é—´éš”expråçš„æ—¶é—´å€¼</td></tr><tr><td>DATEDIFF(date1, date2)</td><td>è¿”å›èµ·å§‹æ—¶é—´date1å’Œç»“æŸæ—¶é—´date2ä¹‹é—´çš„å¤©æ•°</td></tr></tbody></table><p>ä¾‹å­ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-- DATE_ADD</span><br><span class="line">SELECT DATE_ADD(NOW(), INTERVAL 70 YEAR);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="æµç¨‹å‡½æ•°"><a class="markdownIt-Anchor" href="#æµç¨‹å‡½æ•°"></a> æµç¨‹å‡½æ•°</h3><p>å¸¸ç”¨å‡½æ•°ï¼š</p><table><thead><tr><th>å‡½æ•°</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td>IF(value, t, f)</td><td>å¦‚æœvalueä¸ºtrueï¼Œåˆ™è¿”å›tï¼Œå¦åˆ™è¿”å›f</td></tr><tr><td>IFNULL(value1, value2)</td><td>å¦‚æœvalue1ä¸ä¸ºç©ºï¼Œè¿”å›value1ï¼Œå¦åˆ™è¿”å›value2</td></tr><tr><td>CASE WHEN [ val1 ] THEN [ res1 ] â€¦ ELSE [ default ] END</td><td>å¦‚æœval1ä¸ºtrueï¼Œè¿”å›res1ï¼Œâ€¦ å¦åˆ™è¿”å›defaulté»˜è®¤å€¼</td></tr><tr><td>CASE [ expr ] WHEN [ val1 ] THEN [ res1 ] â€¦ ELSE [ default ] END</td><td>å¦‚æœexprçš„å€¼ç­‰äºval1ï¼Œè¿”å›res1ï¼Œâ€¦ å¦åˆ™è¿”å›defaulté»˜è®¤å€¼</td></tr></tbody></table><p>ä¾‹å­ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">select</span><br><span class="line">name,</span><br><span class="line">(case when age &gt; 30 then &#x27;ä¸­å¹´&#x27; else &#x27;é’å¹´&#x27; end)</span><br><span class="line">from employee;</span><br><span class="line">select</span><br><span class="line">name,</span><br><span class="line">(case workaddress when &#x27;åŒ—äº¬å¸‚&#x27; then &#x27;ä¸€çº¿åŸå¸‚&#x27; when &#x27;ä¸Šæµ·å¸‚&#x27; then &#x27;ä¸€çº¿åŸå¸‚&#x27; else &#x27;äºŒçº¿åŸå¸‚&#x27; end) as &#x27;å·¥ä½œåœ°å€&#x27;</span><br><span class="line">from employee;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="çº¦æŸ"><a class="markdownIt-Anchor" href="#çº¦æŸ"></a> çº¦æŸ</h2><p>åˆ†ç±»ï¼š</p><table><thead><tr><th>çº¦æŸ</th><th>æè¿°</th><th>å…³é”®å­—</th></tr></thead><tbody><tr><td>éç©ºçº¦æŸ</td><td>é™åˆ¶è¯¥å­—æ®µçš„æ•°æ®ä¸èƒ½ä¸ºnull</td><td>NOT NULL</td></tr><tr><td>å”¯ä¸€çº¦æŸ</td><td>ä¿è¯è¯¥å­—æ®µçš„æ‰€æœ‰æ•°æ®éƒ½æ˜¯å”¯ä¸€ã€ä¸é‡å¤çš„</td><td>UNIQUE</td></tr><tr><td>ä¸»é”®çº¦æŸ</td><td>ä¸»é”®æ˜¯ä¸€è¡Œæ•°æ®çš„å”¯ä¸€æ ‡è¯†ï¼Œè¦æ±‚éç©ºä¸”å”¯ä¸€</td><td>PRIMARY KEY</td></tr><tr><td>é»˜è®¤çº¦æŸ</td><td>ä¿å­˜æ•°æ®æ—¶ï¼Œå¦‚æœæœªæŒ‡å®šè¯¥å­—æ®µçš„å€¼ï¼Œåˆ™é‡‡ç”¨é»˜è®¤å€¼</td><td>DEFAULT</td></tr><tr><td>æ£€æŸ¥çº¦æŸï¼ˆ8.0.1ç‰ˆæœ¬åï¼‰</td><td>ä¿è¯å­—æ®µå€¼æ»¡è¶³æŸä¸€ä¸ªæ¡ä»¶</td><td>CHECK</td></tr><tr><td>å¤–é”®çº¦æŸ</td><td>ç”¨æ¥è®©ä¸¤å¼ å›¾çš„æ•°æ®ä¹‹é—´å»ºç«‹è¿æ¥ï¼Œä¿è¯æ•°æ®çš„ä¸€è‡´æ€§å’Œå®Œæ•´æ€§</td><td>FOREIGN KEY</td></tr></tbody></table><p>çº¦æŸæ˜¯ä½œç”¨äºè¡¨ä¸­å­—æ®µä¸Šçš„ï¼Œå¯ä»¥å†åˆ›å»ºè¡¨/ä¿®æ”¹è¡¨çš„æ—¶å€™æ·»åŠ çº¦æŸã€‚</p><h3 id="å¸¸ç”¨çº¦æŸ"><a class="markdownIt-Anchor" href="#å¸¸ç”¨çº¦æŸ"></a> å¸¸ç”¨çº¦æŸ</h3><table><thead><tr><th>çº¦æŸæ¡ä»¶</th><th>å…³é”®å­—</th></tr></thead><tbody><tr><td>ä¸»é”®</td><td>PRIMARY KEY</td></tr><tr><td>è‡ªåŠ¨å¢é•¿</td><td>AUTO_INCREMENT</td></tr><tr><td>ä¸ä¸ºç©º</td><td>NOT NULL</td></tr><tr><td>å”¯ä¸€</td><td>UNIQUE</td></tr><tr><td>é€»è¾‘æ¡ä»¶</td><td>CHECK</td></tr><tr><td>é»˜è®¤å€¼</td><td>DEFAULT</td></tr></tbody></table><p>ä¾‹å­ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">create table user(</span><br><span class="line">id int primary key auto_increment,</span><br><span class="line">name varchar(10) not null unique,</span><br><span class="line">age int check(age &gt; 0 and age &lt; 120),</span><br><span class="line">status char(1) default &#x27;1&#x27;,</span><br><span class="line">gender char(1)</span><br><span class="line">);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="å¤–é”®çº¦æŸ"><a class="markdownIt-Anchor" href="#å¤–é”®çº¦æŸ"></a> å¤–é”®çº¦æŸ</h3><p>æ·»åŠ å¤–é”®ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE è¡¨å(</span><br><span class="line">å­—æ®µå å­—æ®µç±»å‹,</span><br><span class="line">...</span><br><span class="line">[CONSTRAINT] [å¤–é”®åç§°] FOREIGN KEY(å¤–é”®å­—æ®µå) REFERENCES ä¸»è¡¨(ä¸»è¡¨åˆ—å)</span><br><span class="line">);</span><br><span class="line">ALTER TABLE è¡¨å ADD CONSTRAINT å¤–é”®åç§° FOREIGN KEY (å¤–é”®å­—æ®µå) REFERENCES ä¸»è¡¨(ä¸»è¡¨åˆ—å);</span><br><span class="line"></span><br><span class="line">-- ä¾‹å­</span><br><span class="line">alter table emp add constraint fk_emp_dept_id foreign key(dept_id) references dept(id);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åˆ é™¤å¤–é”®ï¼š<br /><code>ALTER TABLE è¡¨å DROP FOREIGN KEY å¤–é”®å;</code></p><h4 id="åˆ é™¤æ›´æ–°è¡Œä¸º"><a class="markdownIt-Anchor" href="#åˆ é™¤æ›´æ–°è¡Œä¸º"></a> åˆ é™¤/æ›´æ–°è¡Œä¸º</h4><table><thead><tr><th>è¡Œä¸º</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>NO ACTION</td><td>å½“åœ¨çˆ¶è¡¨ä¸­åˆ é™¤/æ›´æ–°å¯¹åº”è®°å½•æ—¶ï¼Œé¦–å…ˆæ£€æŸ¥è¯¥è®°å½•æ˜¯å¦æœ‰å¯¹åº”å¤–é”®ï¼Œå¦‚æœæœ‰åˆ™ä¸å…è®¸åˆ é™¤/æ›´æ–°ï¼ˆä¸RESTRICTä¸€è‡´ï¼‰</td></tr><tr><td>RESTRICT</td><td>å½“åœ¨çˆ¶è¡¨ä¸­åˆ é™¤/æ›´æ–°å¯¹åº”è®°å½•æ—¶ï¼Œé¦–å…ˆæ£€æŸ¥è¯¥è®°å½•æ˜¯å¦æœ‰å¯¹åº”å¤–é”®ï¼Œå¦‚æœæœ‰åˆ™ä¸å…è®¸åˆ é™¤/æ›´æ–°ï¼ˆä¸NO ACTIONä¸€è‡´ï¼‰</td></tr><tr><td>CASCADE</td><td>å½“åœ¨çˆ¶è¡¨ä¸­åˆ é™¤/æ›´æ–°å¯¹åº”è®°å½•æ—¶ï¼Œé¦–å…ˆæ£€æŸ¥è¯¥è®°å½•æ˜¯å¦æœ‰å¯¹åº”å¤–é”®ï¼Œå¦‚æœæœ‰åˆ™ä¹Ÿåˆ é™¤/æ›´æ–°å¤–é”®åœ¨å­è¡¨ä¸­çš„è®°å½•</td></tr><tr><td>SET NULL</td><td>å½“åœ¨çˆ¶è¡¨ä¸­åˆ é™¤/æ›´æ–°å¯¹åº”è®°å½•æ—¶ï¼Œé¦–å…ˆæ£€æŸ¥è¯¥è®°å½•æ˜¯å¦æœ‰å¯¹åº”å¤–é”®ï¼Œå¦‚æœæœ‰åˆ™è®¾ç½®å­è¡¨ä¸­è¯¥å¤–é”®å€¼ä¸ºnullï¼ˆè¦æ±‚è¯¥å¤–é”®å…è®¸ä¸ºnullï¼‰</td></tr><tr><td>SET DEFAULT</td><td>çˆ¶è¡¨æœ‰å˜æ›´æ—¶ï¼Œå­è¡¨å°†å¤–é”®è®¾ä¸ºä¸€ä¸ªé»˜è®¤å€¼ï¼ˆInnodbä¸æ”¯æŒï¼‰</td></tr></tbody></table><p>æ›´æ”¹åˆ é™¤/æ›´æ–°è¡Œä¸ºï¼š<br /><code>ALTER TABLE è¡¨å ADD CONSTRAINT å¤–é”®åç§° FOREIGN KEY (å¤–é”®å­—æ®µ) REFERENCES ä¸»è¡¨å(ä¸»è¡¨å­—æ®µå) ON UPDATE è¡Œä¸º ON DELETE è¡Œä¸º;</code></p><h2 id="å¤šè¡¨æŸ¥è¯¢"><a class="markdownIt-Anchor" href="#å¤šè¡¨æŸ¥è¯¢"></a> å¤šè¡¨æŸ¥è¯¢</h2><h3 id="å¤šè¡¨å…³ç³»"><a class="markdownIt-Anchor" href="#å¤šè¡¨å…³ç³»"></a> å¤šè¡¨å…³ç³»</h3><ul><li>ä¸€å¯¹å¤šï¼ˆå¤šå¯¹ä¸€ï¼‰</li><li>å¤šå¯¹å¤š</li><li>ä¸€å¯¹ä¸€</li></ul><h4 id="ä¸€å¯¹å¤š"><a class="markdownIt-Anchor" href="#ä¸€å¯¹å¤š"></a> ä¸€å¯¹å¤š</h4><p>æ¡ˆä¾‹ï¼šéƒ¨é—¨ä¸å‘˜å·¥<br />å…³ç³»ï¼šä¸€ä¸ªéƒ¨é—¨å¯¹åº”å¤šä¸ªå‘˜å·¥ï¼Œä¸€ä¸ªå‘˜å·¥å¯¹åº”ä¸€ä¸ªéƒ¨é—¨<br />å®ç°ï¼šåœ¨å¤šçš„ä¸€æ–¹å»ºç«‹å¤–é”®ï¼ŒæŒ‡å‘ä¸€çš„ä¸€æ–¹çš„ä¸»é”®</p><h4 id="å¤šå¯¹å¤š"><a class="markdownIt-Anchor" href="#å¤šå¯¹å¤š"></a> å¤šå¯¹å¤š</h4><p>æ¡ˆä¾‹ï¼šå­¦ç”Ÿä¸è¯¾ç¨‹<br />å…³ç³»ï¼šä¸€ä¸ªå­¦ç”Ÿå¯ä»¥é€‰å¤šé—¨è¯¾ç¨‹ï¼Œä¸€é—¨è¯¾ç¨‹ä¹Ÿå¯ä»¥ä¾›å¤šä¸ªå­¦ç”Ÿé€‰ä¿®<br />å®ç°ï¼šå»ºç«‹ç¬¬ä¸‰å¼ ä¸­é—´è¡¨ï¼Œä¸­é—´è¡¨è‡³å°‘åŒ…å«ä¸¤ä¸ªå¤–é”®ï¼Œåˆ†åˆ«å…³è”ä¸¤æ–¹ä¸»é”®</p><h4 id="ä¸€å¯¹ä¸€"><a class="markdownIt-Anchor" href="#ä¸€å¯¹ä¸€"></a> ä¸€å¯¹ä¸€</h4><p>æ¡ˆä¾‹ï¼šç”¨æˆ·ä¸ç”¨æˆ·è¯¦æƒ…<br />å…³ç³»ï¼šä¸€å¯¹ä¸€å…³ç³»ï¼Œå¤šç”¨äºå•è¡¨æ‹†åˆ†ï¼Œå°†ä¸€å¼ è¡¨çš„åŸºç¡€å­—æ®µæ”¾åœ¨ä¸€å¼ è¡¨ä¸­ï¼Œå…¶ä»–è¯¦æƒ…å­—æ®µæ”¾åœ¨å¦ä¸€å¼ è¡¨ä¸­ï¼Œä»¥æå‡æ“ä½œæ•ˆç‡<br />å®ç°ï¼šåœ¨ä»»æ„ä¸€æ–¹åŠ å…¥å¤–é”®ï¼Œå…³è”å¦å¤–ä¸€æ–¹çš„ä¸»é”®ï¼Œå¹¶ä¸”è®¾ç½®å¤–é”®ä¸ºå”¯ä¸€çš„ï¼ˆUNIQUEï¼‰</p><h3 id="æŸ¥è¯¢"><a class="markdownIt-Anchor" href="#æŸ¥è¯¢"></a> æŸ¥è¯¢</h3><p>åˆå¹¶æŸ¥è¯¢ï¼ˆç¬›å¡å°”ç§¯ï¼Œä¼šå±•ç¤ºæ‰€æœ‰ç»„åˆç»“æœï¼‰ï¼š<br /><code>select * from employee, dept;</code></p><blockquote><p>ç¬›å¡å°”ç§¯ï¼šä¸¤ä¸ªé›†åˆAé›†åˆå’ŒBé›†åˆçš„æ‰€æœ‰ç»„åˆæƒ…å†µï¼ˆåœ¨å¤šè¡¨æŸ¥è¯¢æ—¶ï¼Œéœ€è¦æ¶ˆé™¤æ— æ•ˆçš„ç¬›å¡å°”ç§¯ï¼‰</p></blockquote><p>æ¶ˆé™¤æ— æ•ˆç¬›å¡å°”ç§¯ï¼š<br /><code>select * from employee, dept where employee.dept = dept.id;</code></p><h3 id="å†…è¿æ¥æŸ¥è¯¢"><a class="markdownIt-Anchor" href="#å†…è¿æ¥æŸ¥è¯¢"></a> å†…è¿æ¥æŸ¥è¯¢</h3><p>å†…è¿æ¥æŸ¥è¯¢çš„æ˜¯ä¸¤å¼ è¡¨äº¤é›†çš„éƒ¨åˆ†</p><p>éšå¼å†…è¿æ¥ï¼š<br /><code>SELECT å­—æ®µåˆ—è¡¨ FROM è¡¨1, è¡¨2 WHERE æ¡ä»¶ ...;</code></p><p>æ˜¾å¼å†…è¿æ¥ï¼š<br /><code>SELECT å­—æ®µåˆ—è¡¨ FROM è¡¨1 [ INNER ] JOIN è¡¨2 ON è¿æ¥æ¡ä»¶ ...;</code></p><p>æ˜¾å¼æ€§èƒ½æ¯”éšå¼é«˜</p><p>ä¾‹å­ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-- æŸ¥è¯¢å‘˜å·¥å§“åï¼ŒåŠå…³è”çš„éƒ¨é—¨çš„åç§°</span><br><span class="line">-- éšå¼</span><br><span class="line">select e.name, d.name from employee as e, dept as d where e.dept = d.id;</span><br><span class="line">-- æ˜¾å¼</span><br><span class="line">select e.name, d.name from employee as e inner join dept as d on e.dept = d.id;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="å¤–è¿æ¥æŸ¥è¯¢"><a class="markdownIt-Anchor" href="#å¤–è¿æ¥æŸ¥è¯¢"></a> å¤–è¿æ¥æŸ¥è¯¢</h3><p>å·¦å¤–è¿æ¥ï¼š<br />æŸ¥è¯¢å·¦è¡¨æ‰€æœ‰æ•°æ®ï¼Œä»¥åŠä¸¤å¼ è¡¨äº¤é›†éƒ¨åˆ†æ•°æ®<br /><code>SELECT å­—æ®µåˆ—è¡¨ FROM è¡¨1 LEFT [ OUTER ] JOIN è¡¨2 ON æ¡ä»¶ ...;</code><br />ç›¸å½“äºæŸ¥è¯¢è¡¨1çš„æ‰€æœ‰æ•°æ®ï¼ŒåŒ…å«è¡¨1å’Œè¡¨2äº¤é›†éƒ¨åˆ†æ•°æ®</p><p>å³å¤–è¿æ¥ï¼š<br />æŸ¥è¯¢å³è¡¨æ‰€æœ‰æ•°æ®ï¼Œä»¥åŠä¸¤å¼ è¡¨äº¤é›†éƒ¨åˆ†æ•°æ®<br /><code>SELECT å­—æ®µåˆ—è¡¨ FROM è¡¨1 RIGHT [ OUTER ] JOIN è¡¨2 ON æ¡ä»¶ ...;</code></p><p>ä¾‹å­ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-- å·¦</span><br><span class="line">select e.*, d.name from employee as e left outer join dept as d on e.dept = d.id;</span><br><span class="line">select d.name, e.* from dept d left outer join emp e on e.dept = d.id;  -- è¿™æ¡è¯­å¥ä¸ä¸‹é¢çš„è¯­å¥æ•ˆæœä¸€æ ·</span><br><span class="line">-- å³</span><br><span class="line">select d.name, e.* from employee as e right outer join dept as d on e.dept = d.id;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å·¦è¿æ¥å¯ä»¥æŸ¥è¯¢åˆ°æ²¡æœ‰deptçš„employeeï¼Œå³è¿æ¥å¯ä»¥æŸ¥è¯¢åˆ°æ²¡æœ‰employeeçš„dept</p><h3 id="è‡ªè¿æ¥æŸ¥è¯¢"><a class="markdownIt-Anchor" href="#è‡ªè¿æ¥æŸ¥è¯¢"></a> è‡ªè¿æ¥æŸ¥è¯¢</h3><p>å½“å‰è¡¨ä¸è‡ªèº«çš„è¿æ¥æŸ¥è¯¢ï¼Œè‡ªè¿æ¥å¿…é¡»ä½¿ç”¨è¡¨åˆ«å</p><p>è¯­æ³•ï¼š<br /><code>SELECT å­—æ®µåˆ—è¡¨ FROM è¡¨A åˆ«åA JOIN è¡¨A åˆ«åB ON æ¡ä»¶ ...;</code></p><p>è‡ªè¿æ¥æŸ¥è¯¢ï¼Œå¯ä»¥æ˜¯å†…è¿æ¥æŸ¥è¯¢ï¼Œä¹Ÿå¯ä»¥æ˜¯å¤–è¿æ¥æŸ¥è¯¢</p><p>ä¾‹å­ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-- æŸ¥è¯¢å‘˜å·¥åŠå…¶æ‰€å±é¢†å¯¼çš„åå­—</span><br><span class="line">select a.name, b.name from employee a, employee b where a.manager = b.id;</span><br><span class="line">-- æ²¡æœ‰é¢†å¯¼çš„ä¹ŸæŸ¥è¯¢å‡ºæ¥</span><br><span class="line">select a.name, b.name from employee a left join employee b on a.manager = b.id;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="è”åˆæŸ¥è¯¢-union-union-all"><a class="markdownIt-Anchor" href="#è”åˆæŸ¥è¯¢-union-union-all"></a> è”åˆæŸ¥è¯¢ union, union all</h3><p>æŠŠå¤šæ¬¡æŸ¥è¯¢çš„ç»“æœåˆå¹¶ï¼Œå½¢æˆä¸€ä¸ªæ–°çš„æŸ¥è¯¢é›†</p><p>è¯­æ³•ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT å­—æ®µåˆ—è¡¨ FROM è¡¨A ...</span><br><span class="line">UNION [ALL]</span><br><span class="line">SELECT å­—æ®µåˆ—è¡¨ FROM è¡¨B ...</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="æ³¨æ„äº‹é¡¹-8"><a class="markdownIt-Anchor" href="#æ³¨æ„äº‹é¡¹-8"></a> æ³¨æ„äº‹é¡¹</h4><ul><li>UNION ALL ä¼šæœ‰é‡å¤ç»“æœï¼ŒUNION ä¸ä¼š</li><li>è”åˆæŸ¥è¯¢æ¯”ä½¿ç”¨oræ•ˆç‡é«˜ï¼Œä¸ä¼šä½¿ç´¢å¼•å¤±æ•ˆ</li></ul><h3 id="å­æŸ¥è¯¢"><a class="markdownIt-Anchor" href="#å­æŸ¥è¯¢"></a> å­æŸ¥è¯¢</h3><p>SQLè¯­å¥ä¸­åµŒå¥—SELECTè¯­å¥ï¼Œç§°è°“åµŒå¥—æŸ¥è¯¢ï¼Œåˆç§°å­æŸ¥è¯¢ã€‚<br /><code>SELECT * FROM t1 WHERE column1 = ( SELECT column1 FROM t2);</code><br /><strong>å­æŸ¥è¯¢å¤–éƒ¨çš„è¯­å¥å¯ä»¥æ˜¯ INSERT / UPDATE / DELETE / SELECT çš„ä»»ä½•ä¸€ä¸ª</strong></p><p>æ ¹æ®å­æŸ¥è¯¢ç»“æœå¯ä»¥åˆ†ä¸ºï¼š</p><ul><li>æ ‡é‡å­æŸ¥è¯¢ï¼ˆå­æŸ¥è¯¢ç»“æœä¸ºå•ä¸ªå€¼ï¼‰</li><li>åˆ—å­æŸ¥è¯¢ï¼ˆå­æŸ¥è¯¢ç»“æœä¸ºä¸€åˆ—ï¼‰</li><li>è¡Œå­æŸ¥è¯¢ï¼ˆå­æŸ¥è¯¢ç»“æœä¸ºä¸€è¡Œï¼‰</li><li>è¡¨å­æŸ¥è¯¢ï¼ˆå­æŸ¥è¯¢ç»“æœä¸ºå¤šè¡Œå¤šåˆ—ï¼‰</li></ul><p>æ ¹æ®å­æŸ¥è¯¢ä½ç½®å¯åˆ†ä¸ºï¼š</p><ul><li>WHERE ä¹‹å</li><li>FROM ä¹‹å</li><li>SELECT ä¹‹å</li></ul><h4 id="æ ‡é‡å­æŸ¥è¯¢"><a class="markdownIt-Anchor" href="#æ ‡é‡å­æŸ¥è¯¢"></a> æ ‡é‡å­æŸ¥è¯¢</h4><p>å­æŸ¥è¯¢è¿”å›çš„ç»“æœæ˜¯å•ä¸ªå€¼ï¼ˆæ•°å­—ã€å­—ç¬¦ä¸²ã€æ—¥æœŸç­‰ï¼‰ã€‚<br />å¸¸ç”¨æ“ä½œç¬¦ï¼š- &lt; &gt; &gt; &gt;= &lt; &lt;=</p><p>ä¾‹å­ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">-- æŸ¥è¯¢é”€å”®éƒ¨æ‰€æœ‰å‘˜å·¥</span><br><span class="line">select id from dept where name = &#x27;é”€å”®éƒ¨&#x27;;</span><br><span class="line">-- æ ¹æ®é”€å”®éƒ¨éƒ¨é—¨IDï¼ŒæŸ¥è¯¢å‘˜å·¥ä¿¡æ¯</span><br><span class="line">select * from employee where dept = 4;</span><br><span class="line">-- åˆå¹¶ï¼ˆå­æŸ¥è¯¢ï¼‰</span><br><span class="line">select * from employee where dept = (select id from dept where name = &#x27;é”€å”®éƒ¨&#x27;);</span><br><span class="line"></span><br><span class="line">-- æŸ¥è¯¢xxxå…¥èŒä¹‹åçš„å‘˜å·¥ä¿¡æ¯</span><br><span class="line">select * from employee where entrydate &gt; (select entrydate from employee where name = &#x27;xxx&#x27;);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="åˆ—å­æŸ¥è¯¢"><a class="markdownIt-Anchor" href="#åˆ—å­æŸ¥è¯¢"></a> åˆ—å­æŸ¥è¯¢</h4><p>è¿”å›çš„ç»“æœæ˜¯ä¸€åˆ—ï¼ˆå¯ä»¥æ˜¯å¤šè¡Œï¼‰ã€‚</p><p>å¸¸ç”¨æ“ä½œç¬¦ï¼š</p><table><thead><tr><th>æ“ä½œç¬¦</th><th>æè¿°</th></tr></thead><tbody><tr><td>IN</td><td>åœ¨æŒ‡å®šçš„é›†åˆèŒƒå›´å†…ï¼Œå¤šé€‰ä¸€</td></tr><tr><td>NOT IN</td><td>ä¸åœ¨æŒ‡å®šçš„é›†åˆèŒƒå›´å†…</td></tr><tr><td>ANY</td><td>å­æŸ¥è¯¢è¿”å›åˆ—è¡¨ä¸­ï¼Œæœ‰ä»»æ„ä¸€ä¸ªæ»¡è¶³å³å¯</td></tr><tr><td>SOME</td><td>ä¸ANYç­‰åŒï¼Œä½¿ç”¨SOMEçš„åœ°æ–¹éƒ½å¯ä»¥ä½¿ç”¨ANY</td></tr><tr><td>ALL</td><td>å­æŸ¥è¯¢è¿”å›åˆ—è¡¨çš„æ‰€æœ‰å€¼éƒ½å¿…é¡»æ»¡è¶³</td></tr></tbody></table><p>ä¾‹å­ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-- æŸ¥è¯¢é”€å”®éƒ¨å’Œå¸‚åœºéƒ¨çš„æ‰€æœ‰å‘˜å·¥ä¿¡æ¯</span><br><span class="line">select * from employee where dept in (select id from dept where name = &#x27;é”€å”®éƒ¨&#x27; or name = &#x27;å¸‚åœºéƒ¨&#x27;);</span><br><span class="line">-- æŸ¥è¯¢æ¯”è´¢åŠ¡éƒ¨æ‰€æœ‰äººå·¥èµ„éƒ½é«˜çš„å‘˜å·¥ä¿¡æ¯</span><br><span class="line">select * from employee where salary &gt; all(select salary from employee where dept = (select id from dept where name = &#x27;è´¢åŠ¡éƒ¨&#x27;));</span><br><span class="line">-- æŸ¥è¯¢æ¯”ç ”å‘éƒ¨ä»»æ„ä¸€äººå·¥èµ„é«˜çš„å‘˜å·¥ä¿¡æ¯</span><br><span class="line">select * from employee where salary &gt; any (select salary from employee where dept = (select id from dept where name = &#x27;ç ”å‘éƒ¨&#x27;));</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="è¡Œå­æŸ¥è¯¢"><a class="markdownIt-Anchor" href="#è¡Œå­æŸ¥è¯¢"></a> è¡Œå­æŸ¥è¯¢</h4><p>è¿”å›çš„ç»“æœæ˜¯ä¸€è¡Œï¼ˆå¯ä»¥æ˜¯å¤šåˆ—ï¼‰ã€‚<br />å¸¸ç”¨æ“ä½œç¬¦ï¼š=, &lt;, &gt;, IN, NOT IN</p><p>ä¾‹å­ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-- æŸ¥è¯¢ä¸xxxçš„è–ªèµ„åŠç›´å±é¢†å¯¼ç›¸åŒçš„å‘˜å·¥ä¿¡æ¯</span><br><span class="line">select * from employee where (salary, manager) = (12500, 1);</span><br><span class="line">select * from employee where (salary, manager) = (select salary, manager from employee where name = &#x27;xxx&#x27;);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="è¡¨å­æŸ¥è¯¢"><a class="markdownIt-Anchor" href="#è¡¨å­æŸ¥è¯¢"></a> è¡¨å­æŸ¥è¯¢</h4><p>è¿”å›çš„ç»“æœæ˜¯å¤šè¡Œå¤šåˆ—<br />å¸¸ç”¨æ“ä½œç¬¦ï¼šIN</p><p>ä¾‹å­ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-- æŸ¥è¯¢ä¸xxx1ï¼Œxxx2çš„èŒä½å’Œè–ªèµ„ç›¸åŒçš„å‘˜å·¥</span><br><span class="line">select * from employee where (job, salary) in (select job, salary from employee where name = &#x27;xxx1&#x27; or name = &#x27;xxx2&#x27;);</span><br><span class="line">-- æŸ¥è¯¢å…¥èŒæ—¥æœŸæ˜¯2006-01-01ä¹‹åçš„å‘˜å·¥ï¼ŒåŠå…¶éƒ¨é—¨ä¿¡æ¯</span><br><span class="line">select e.*, d.* from (select * from employee where entrydate &gt; &#x27;2006-01-01&#x27;) as e left join dept as d on e.dept = d.id;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="äº‹åŠ¡"><a class="markdownIt-Anchor" href="#äº‹åŠ¡"></a> äº‹åŠ¡</h2><p>äº‹åŠ¡æ˜¯ä¸€ç»„æ“ä½œçš„é›†åˆï¼Œäº‹åŠ¡ä¼šæŠŠæ‰€æœ‰æ“ä½œä½œä¸ºä¸€ä¸ªæ•´ä½“ä¸€èµ·å‘ç³»ç»Ÿæäº¤æˆ–æ’¤é”€æ“ä½œè¯·æ±‚ï¼Œå³è¿™äº›æ“ä½œè¦ä¹ˆåŒæ—¶æˆåŠŸï¼Œè¦ä¹ˆåŒæ—¶å¤±è´¥ã€‚</p><p>åŸºæœ¬æ“ä½œï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">-- 1. æŸ¥è¯¢å¼ ä¸‰è´¦æˆ·ä½™é¢</span><br><span class="line">select * from account where name = &#x27;å¼ ä¸‰&#x27;;</span><br><span class="line">-- 2. å°†å¼ ä¸‰è´¦æˆ·ä½™é¢-1000</span><br><span class="line">update account set money = money - 1000 where name = &#x27;å¼ ä¸‰&#x27;;</span><br><span class="line">-- æ­¤è¯­å¥å‡ºé”™åå¼ ä¸‰é’±å‡å°‘ä½†æ˜¯æå››é’±æ²¡æœ‰å¢åŠ </span><br><span class="line">æ¨¡æ‹Ÿsqlè¯­å¥é”™è¯¯</span><br><span class="line">-- 3. å°†æå››è´¦æˆ·ä½™é¢+1000</span><br><span class="line">update account set money = money + 1000 where name = &#x27;æå››&#x27;;</span><br><span class="line"></span><br><span class="line">-- æŸ¥çœ‹äº‹åŠ¡æäº¤æ–¹å¼</span><br><span class="line">SELECT @@AUTOCOMMIT;</span><br><span class="line">-- è®¾ç½®äº‹åŠ¡æäº¤æ–¹å¼ï¼Œ1ä¸ºè‡ªåŠ¨æäº¤ï¼Œ0ä¸ºæ‰‹åŠ¨æäº¤ï¼Œè¯¥è®¾ç½®åªå¯¹å½“å‰ä¼šè¯æœ‰æ•ˆ</span><br><span class="line">SET @@AUTOCOMMIT = 0;</span><br><span class="line">-- æäº¤äº‹åŠ¡</span><br><span class="line">COMMIT;</span><br><span class="line">-- å›æ»šäº‹åŠ¡</span><br><span class="line">ROLLBACK;</span><br><span class="line"></span><br><span class="line">-- è®¾ç½®æ‰‹åŠ¨æäº¤åä¸Šé¢ä»£ç æ”¹ä¸ºï¼š</span><br><span class="line">select * from account where name = &#x27;å¼ ä¸‰&#x27;;</span><br><span class="line">update account set money = money - 1000 where name = &#x27;å¼ ä¸‰&#x27;;</span><br><span class="line">update account set money = money + 1000 where name = &#x27;æå››&#x27;;</span><br><span class="line">commit;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ“ä½œæ–¹å¼äºŒï¼š</p><p>å¼€å¯äº‹åŠ¡ï¼š<br /><code>START TRANSACTION æˆ– BEGIN TRANSACTION;</code><br />æäº¤äº‹åŠ¡ï¼š<br /><code>COMMIT;</code><br />å›æ»šäº‹åŠ¡ï¼š<br /><code>ROLLBACK;</code></p><p>æ“ä½œå®ä¾‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">start transaction;</span><br><span class="line">select * from account where name = &#x27;å¼ ä¸‰&#x27;;</span><br><span class="line">update account set money = money - 1000 where name = &#x27;å¼ ä¸‰&#x27;;</span><br><span class="line">update account set money = money + 1000 where name = &#x27;æå››&#x27;;</span><br><span class="line">commit;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="å››å¤§ç‰¹æ€§acid"><a class="markdownIt-Anchor" href="#å››å¤§ç‰¹æ€§acid"></a> å››å¤§ç‰¹æ€§ACID</h3><ul><li>åŸå­æ€§(Atomicity)ï¼šäº‹åŠ¡æ˜¯ä¸å¯åˆ†å‰²çš„æœ€å°æ“ä½œä½†æ„¿ï¼Œè¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥</li><li>ä¸€è‡´æ€§(Consistency)ï¼šäº‹åŠ¡å®Œæˆæ—¶ï¼Œå¿…é¡»ä½¿æ‰€æœ‰æ•°æ®éƒ½ä¿æŒä¸€è‡´çŠ¶æ€</li><li>éš”ç¦»æ€§(Isolation)ï¼šæ•°æ®åº“ç³»ç»Ÿæä¾›çš„éš”ç¦»æœºåˆ¶ï¼Œä¿è¯äº‹åŠ¡åœ¨ä¸å—å¤–éƒ¨å¹¶å‘æ“ä½œå½±å“çš„ç‹¬ç«‹ç¯å¢ƒä¸‹è¿è¡Œ</li><li>æŒä¹…æ€§(Durability)ï¼šäº‹åŠ¡ä¸€æ—¦æäº¤æˆ–å›æ»šï¼Œå®ƒå¯¹æ•°æ®åº“ä¸­çš„æ•°æ®çš„æ”¹å˜å°±æ˜¯æ°¸ä¹…çš„</li></ul><h3 id="å¹¶å‘äº‹åŠ¡"><a class="markdownIt-Anchor" href="#å¹¶å‘äº‹åŠ¡"></a> å¹¶å‘äº‹åŠ¡</h3><table><thead><tr><th>é—®é¢˜</th><th>æè¿°</th></tr></thead><tbody><tr><td>è„è¯»</td><td>ä¸€ä¸ªäº‹åŠ¡è¯»åˆ°å¦ä¸€ä¸ªäº‹åŠ¡è¿˜æ²¡æäº¤çš„æ•°æ®</td></tr><tr><td>ä¸å¯é‡å¤è¯»</td><td>ä¸€ä¸ªäº‹åŠ¡å…ˆåè¯»å–åŒä¸€æ¡è®°å½•ï¼Œä½†ä¸¤æ¬¡è¯»å–çš„æ•°æ®ä¸åŒ</td></tr><tr><td>å¹»è¯»</td><td>ä¸€ä¸ªäº‹åŠ¡æŒ‰ç…§æ¡ä»¶æŸ¥è¯¢æ•°æ®æ—¶ï¼Œæ²¡æœ‰å¯¹åº”çš„æ•°æ®è¡Œï¼Œä½†æ˜¯å†æ’å…¥æ•°æ®æ—¶ï¼Œåˆå‘ç°è¿™è¡Œæ•°æ®å·²ç»å­˜åœ¨</td></tr></tbody></table><blockquote><p>è¿™ä¸‰ä¸ªé—®é¢˜çš„è¯¦ç»†æ¼”ç¤ºï¼š<a href="https://www.bilibili.com/video/BV1Kr4y1i7ru?p=55cd">https://www.bilibili.com/video/BV1Kr4y1i7ru?p=55cd</a></p></blockquote><p>å¹¶å‘äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼š</p><table><thead><tr><th>éš”ç¦»çº§åˆ«</th><th>è„è¯»</th><th>ä¸å¯é‡å¤è¯»</th><th>å¹»è¯»</th></tr></thead><tbody><tr><td>Read uncommitted</td><td>âˆš</td><td>âˆš</td><td>âˆš</td></tr><tr><td>Read committed</td><td>Ã—</td><td>âˆš</td><td>âˆš</td></tr><tr><td>Repeatable Read(é»˜è®¤)</td><td>Ã—</td><td>Ã—</td><td>âˆš</td></tr><tr><td>Serializable</td><td>Ã—</td><td>Ã—</td><td>Ã—</td></tr></tbody></table><ul><li>âˆšè¡¨ç¤ºåœ¨å½“å‰éš”ç¦»çº§åˆ«ä¸‹è¯¥é—®é¢˜ä¼šå‡ºç°</li><li>Serializable æ€§èƒ½æœ€ä½ï¼›Read uncommitted æ€§èƒ½æœ€é«˜ï¼Œæ•°æ®å®‰å…¨æ€§æœ€å·®</li></ul><p>æŸ¥çœ‹äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼š<br /><code>SELECT @@TRANSACTION_ISOLATION;</code><br />è®¾ç½®äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼š<br /><code>SET [ SESSION | GLOBAL ] TRANSACTION ISOLATION LEVEL &#123;READ UNCOMMITTED | READ COMMITTED | REPEATABLE READ | SERIALIZABLE &#125;;</code><br />SESSION æ˜¯ä¼šè¯çº§åˆ«ï¼Œè¡¨ç¤ºåªé’ˆå¯¹å½“å‰ä¼šè¯æœ‰æ•ˆï¼ŒGLOBAL è¡¨ç¤ºå¯¹æ‰€æœ‰ä¼šè¯æœ‰æ•ˆ</p><h1 id="è¿›é˜¶ç¯‡"><a class="markdownIt-Anchor" href="#è¿›é˜¶ç¯‡"></a> è¿›é˜¶ç¯‡</h1><h2 id="å­˜å‚¨å¼•æ“"><a class="markdownIt-Anchor" href="#å­˜å‚¨å¼•æ“"></a> å­˜å‚¨å¼•æ“</h2><p>MySQLä½“ç³»ç»“æ„ï¼š</p><p><img src="MySQL%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84.png" alt="ç»“æ„å›¾" title="ç»“æ„å›¾" /><br /><img src="MySQL%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E5%B1%82%E7%BA%A7%E5%90%AB%E4%B9%89.png" alt="å±‚çº§æè¿°" title="å±‚çº§æè¿°" /></p><p>å­˜å‚¨å¼•æ“å°±æ˜¯å­˜å‚¨æ•°æ®ã€å»ºç«‹ç´¢å¼•ã€æ›´æ–°/æŸ¥è¯¢æ•°æ®ç­‰æŠ€æœ¯çš„å®ç°æ–¹å¼ã€‚å­˜å‚¨å¼•æ“æ˜¯åŸºäºè¡¨è€Œä¸æ˜¯åŸºäºåº“çš„ï¼Œæ‰€ä»¥å­˜å‚¨å¼•æ“ä¹Ÿå¯ä»¥è¢«ç§°ä¸ºè¡¨å¼•æ“ã€‚<br />é»˜è®¤å­˜å‚¨å¼•æ“æ˜¯InnoDBã€‚</p><p>ç›¸å…³æ“ä½œï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">-- æŸ¥è¯¢å»ºè¡¨è¯­å¥</span><br><span class="line">show create table account;</span><br><span class="line">-- å»ºè¡¨æ—¶æŒ‡å®šå­˜å‚¨å¼•æ“</span><br><span class="line">CREATE TABLE è¡¨å(</span><br><span class="line">...</span><br><span class="line">) ENGINE=INNODB;</span><br><span class="line">-- æŸ¥çœ‹å½“å‰æ•°æ®åº“æ”¯æŒçš„å­˜å‚¨å¼•æ“</span><br><span class="line">show engines;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="innodb"><a class="markdownIt-Anchor" href="#innodb"></a> InnoDB</h3><p>InnoDB æ˜¯ä¸€ç§å…¼é¡¾é«˜å¯é æ€§å’Œé«˜æ€§èƒ½çš„é€šç”¨å­˜å‚¨å¼•æ“ï¼Œåœ¨ MySQL 5.5 ä¹‹åï¼ŒInnoDB æ˜¯é»˜è®¤çš„ MySQL å¼•æ“ã€‚</p><p>ç‰¹ç‚¹ï¼š</p><ul><li>DML æ“ä½œéµå¾ª ACID æ¨¡å‹ï¼Œæ”¯æŒ<strong>äº‹åŠ¡</strong></li><li><strong>è¡Œçº§é”</strong>ï¼Œæé«˜å¹¶å‘è®¿é—®æ€§èƒ½</li><li>æ”¯æŒ<strong>å¤–é”®</strong>çº¦æŸï¼Œä¿è¯æ•°æ®çš„å®Œæ•´æ€§å’Œæ­£ç¡®æ€§</li></ul><p>æ–‡ä»¶ï¼š</p><ul><li>xxx.ibd: xxxä»£è¡¨è¡¨åï¼ŒInnoDB å¼•æ“çš„æ¯å¼ è¡¨éƒ½ä¼šå¯¹åº”è¿™æ ·ä¸€ä¸ªè¡¨ç©ºé—´æ–‡ä»¶ï¼Œå­˜å‚¨è¯¥è¡¨çš„è¡¨ç»“æ„ï¼ˆfrmã€sdiï¼‰ã€æ•°æ®å’Œç´¢å¼•ã€‚</li></ul><p>å‚æ•°ï¼šinnodb_file_per_tableï¼Œå†³å®šå¤šå¼ è¡¨å…±äº«ä¸€ä¸ªè¡¨ç©ºé—´è¿˜æ˜¯æ¯å¼ è¡¨å¯¹åº”ä¸€ä¸ªè¡¨ç©ºé—´</p><p>çŸ¥è¯†ç‚¹ï¼š</p><p>æŸ¥çœ‹ Mysql å˜é‡ï¼š<br /><code>show variables like 'innodb_file_per_table';</code></p><p>ä»idbæ–‡ä»¶æå–è¡¨ç»“æ„æ•°æ®ï¼š<br />ï¼ˆåœ¨cmdè¿è¡Œï¼‰<br /><code>ibd2sdi xxx.ibd</code></p><p>InnoDB é€»è¾‘å­˜å‚¨ç»“æ„ï¼š<br /><img src="%E9%80%BB%E8%BE%91%E5%AD%98%E5%82%A8%E7%BB%93%E6%9E%84.png" alt="InnoDBé€»è¾‘å­˜å‚¨ç»“æ„" title="InnoDBé€»è¾‘å­˜å‚¨ç»“æ„" /></p><h3 id="myisam"><a class="markdownIt-Anchor" href="#myisam"></a> MyISAM</h3><p>MyISAM æ˜¯ MySQL æ—©æœŸçš„é»˜è®¤å­˜å‚¨å¼•æ“ã€‚</p><p>ç‰¹ç‚¹ï¼š</p><ul><li>ä¸æ”¯æŒäº‹åŠ¡ï¼Œä¸æ”¯æŒå¤–é”®</li><li>æ”¯æŒè¡¨é”ï¼Œä¸æ”¯æŒè¡Œé”</li><li>è®¿é—®é€Ÿåº¦å¿«</li></ul><p>æ–‡ä»¶ï¼š</p><ul><li>xxx.sdi: å­˜å‚¨è¡¨ç»“æ„ä¿¡æ¯</li><li>xxx.MYD: å­˜å‚¨æ•°æ®</li><li>xxx.MYI: å­˜å‚¨ç´¢å¼•</li></ul><h3 id="memory"><a class="markdownIt-Anchor" href="#memory"></a> Memory</h3><p>Memory å¼•æ“çš„è¡¨æ•°æ®æ˜¯å­˜å‚¨åœ¨å†…å­˜ä¸­çš„ï¼Œå—ç¡¬ä»¶é—®é¢˜ã€æ–­ç”µé—®é¢˜çš„å½±å“ï¼Œåªèƒ½å°†è¿™äº›è¡¨ä½œä¸ºä¸´æ—¶è¡¨æˆ–ç¼“å­˜ä½¿ç”¨ã€‚</p><p>ç‰¹ç‚¹ï¼š</p><ul><li>å­˜æ”¾åœ¨å†…å­˜ä¸­ï¼Œé€Ÿåº¦å¿«</li><li>hashç´¢å¼•ï¼ˆé»˜è®¤ï¼‰</li></ul><p>æ–‡ä»¶ï¼š</p><ul><li>xxx.sdi: å­˜å‚¨è¡¨ç»“æ„ä¿¡æ¯</li></ul><h3 id="å­˜å‚¨å¼•æ“ç‰¹ç‚¹"><a class="markdownIt-Anchor" href="#å­˜å‚¨å¼•æ“ç‰¹ç‚¹"></a> å­˜å‚¨å¼•æ“ç‰¹ç‚¹</h3><table><thead><tr><th>ç‰¹ç‚¹</th><th>InnoDB</th><th>MyISAM</th><th>Memory</th></tr></thead><tbody><tr><td>å­˜å‚¨é™åˆ¶</td><td>64TB</td><td>æœ‰</td><td>æœ‰</td></tr><tr><td>äº‹åŠ¡å®‰å…¨</td><td>æ”¯æŒ</td><td>-</td><td>-</td></tr><tr><td>é”æœºåˆ¶</td><td>è¡Œé”</td><td>è¡¨é”</td><td>è¡¨é”</td></tr><tr><td>B+treeç´¢å¼•</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td></tr><tr><td>Hashç´¢å¼•</td><td>-</td><td>-</td><td>æ”¯æŒ</td></tr><tr><td>å…¨æ–‡ç´¢å¼•</td><td>æ”¯æŒï¼ˆ5.6ç‰ˆæœ¬ä¹‹åï¼‰</td><td>æ”¯æŒ</td><td>-</td></tr><tr><td>ç©ºé—´ä½¿ç”¨</td><td>é«˜</td><td>ä½</td><td>N/A</td></tr><tr><td>å†…å­˜ä½¿ç”¨</td><td>é«˜</td><td>ä½</td><td>ä¸­ç­‰</td></tr><tr><td>æ‰¹é‡æ’å…¥é€Ÿåº¦</td><td>ä½</td><td>é«˜</td><td>é«˜</td></tr><tr><td>æ”¯æŒå¤–é”®</td><td>æ”¯æŒ</td><td>-</td><td>-</td></tr></tbody></table><h3 id="å­˜å‚¨å¼•æ“çš„é€‰æ‹©"><a class="markdownIt-Anchor" href="#å­˜å‚¨å¼•æ“çš„é€‰æ‹©"></a> å­˜å‚¨å¼•æ“çš„é€‰æ‹©</h3><p>åœ¨é€‰æ‹©å­˜å‚¨å¼•æ“æ—¶ï¼Œåº”è¯¥æ ¹æ®åº”ç”¨ç³»ç»Ÿçš„ç‰¹ç‚¹é€‰æ‹©åˆé€‚çš„å­˜å‚¨å¼•æ“ã€‚å¯¹äºå¤æ‚çš„åº”ç”¨ç³»ç»Ÿï¼Œè¿˜å¯ä»¥æ ¹æ®å®é™…æƒ…å†µé€‰æ‹©å¤šç§å­˜å‚¨å¼•æ“è¿›è¡Œç»„åˆã€‚</p><ul><li>InnoDB: å¦‚æœåº”ç”¨å¯¹äº‹ç‰©çš„å®Œæ•´æ€§æœ‰æ¯”è¾ƒé«˜çš„è¦æ±‚ï¼Œåœ¨å¹¶å‘æ¡ä»¶ä¸‹è¦æ±‚æ•°æ®çš„ä¸€è‡´æ€§ï¼Œæ•°æ®æ“ä½œé™¤äº†æ’å…¥å’ŒæŸ¥è¯¢ä¹‹å¤–ï¼Œè¿˜åŒ…å«å¾ˆå¤šçš„æ›´æ–°ã€åˆ é™¤æ“ä½œï¼Œåˆ™ InnoDB æ˜¯æ¯”è¾ƒåˆé€‚çš„é€‰æ‹©</li><li>MyISAM: å¦‚æœåº”ç”¨æ˜¯ä»¥è¯»æ“ä½œå’Œæ’å…¥æ“ä½œä¸ºä¸»ï¼Œåªæœ‰å¾ˆå°‘çš„æ›´æ–°å’Œåˆ é™¤æ“ä½œï¼Œå¹¶ä¸”å¯¹äº‹åŠ¡çš„å®Œæ•´æ€§ã€å¹¶å‘æ€§è¦æ±‚ä¸é«˜ï¼Œé‚£è¿™ä¸ªå­˜å‚¨å¼•æ“æ˜¯éå¸¸åˆé€‚çš„ã€‚</li><li>Memory: å°†æ‰€æœ‰æ•°æ®ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œè®¿é—®é€Ÿåº¦å¿«ï¼Œé€šå¸¸ç”¨äºä¸´æ—¶è¡¨åŠç¼“å­˜ã€‚Memory çš„ç¼ºé™·æ˜¯å¯¹è¡¨çš„å¤§å°æœ‰é™åˆ¶ï¼Œå¤ªå¤§çš„è¡¨æ— æ³•ç¼“å­˜åœ¨å†…å­˜ä¸­ï¼Œè€Œä¸”æ— æ³•ä¿éšœæ•°æ®çš„å®‰å…¨æ€§</li></ul><p>ç”µå•†ä¸­çš„è¶³è¿¹å’Œè¯„è®ºé€‚åˆä½¿ç”¨ MyISAM å¼•æ“ï¼Œç¼“å­˜é€‚åˆä½¿ç”¨ Memory å¼•æ“ã€‚</p><h2 id="æ€§èƒ½åˆ†æ"><a class="markdownIt-Anchor" href="#æ€§èƒ½åˆ†æ"></a> æ€§èƒ½åˆ†æ</h2><h3 id="æŸ¥çœ‹æ‰§è¡Œé¢‘æ¬¡"><a class="markdownIt-Anchor" href="#æŸ¥çœ‹æ‰§è¡Œé¢‘æ¬¡"></a> æŸ¥çœ‹æ‰§è¡Œé¢‘æ¬¡</h3><p>æŸ¥çœ‹å½“å‰æ•°æ®åº“çš„ INSERT, UPDATE, DELETE, SELECT è®¿é—®é¢‘æ¬¡ï¼š<br /><code>SHOW GLOBAL STATUS LIKE 'Com_______';</code> æˆ–è€… <code>SHOW SESSION STATUS LIKE 'Com_______';</code><br />ä¾‹ï¼š<code>show global status like 'Com_______'</code></p><h3 id="æ…¢æŸ¥è¯¢æ—¥å¿—"><a class="markdownIt-Anchor" href="#æ…¢æŸ¥è¯¢æ—¥å¿—"></a> æ…¢æŸ¥è¯¢æ—¥å¿—</h3><p>æ…¢æŸ¥è¯¢æ—¥å¿—è®°å½•äº†æ‰€æœ‰æ‰§è¡Œæ—¶é—´è¶…è¿‡æŒ‡å®šå‚æ•°ï¼ˆlong_query_timeï¼Œå•ä½ï¼šç§’ï¼Œé»˜è®¤10ç§’ï¼‰çš„æ‰€æœ‰SQLè¯­å¥çš„æ—¥å¿—ã€‚<br />MySQLçš„æ…¢æŸ¥è¯¢æ—¥å¿—é»˜è®¤æ²¡æœ‰å¼€å¯ï¼Œéœ€è¦åœ¨MySQLçš„é…ç½®æ–‡ä»¶ï¼ˆ/etc/my.cnfï¼‰ä¸­é…ç½®å¦‚ä¸‹ä¿¡æ¯ï¼š<br /># å¼€å¯æ…¢æŸ¥è¯¢æ—¥å¿—å¼€å…³<br />slow_query_log=1<br /># è®¾ç½®æ…¢æŸ¥è¯¢æ—¥å¿—çš„æ—¶é—´ä¸º2ç§’ï¼ŒSQLè¯­å¥æ‰§è¡Œæ—¶é—´è¶…è¿‡2ç§’ï¼Œå°±ä¼šè§†ä¸ºæ…¢æŸ¥è¯¢ï¼Œè®°å½•æ…¢æŸ¥è¯¢æ—¥å¿—<br />long_query_time=2<br />æ›´æ”¹åè®°å¾—é‡å¯MySQLæœåŠ¡ï¼Œæ—¥å¿—æ–‡ä»¶ä½ç½®ï¼š/var/lib/mysql/localhost-slow.log</p><p>æŸ¥çœ‹æ…¢æŸ¥è¯¢æ—¥å¿—å¼€å…³çŠ¶æ€ï¼š<br /><code>show variables like 'slow_query_log';</code></p><h3 id="profile"><a class="markdownIt-Anchor" href="#profile"></a> profile</h3><p>show profile èƒ½åœ¨åšSQLä¼˜åŒ–æ—¶å¸®æˆ‘ä»¬äº†è§£æ—¶é—´éƒ½è€—è´¹åœ¨å“ªé‡Œã€‚é€šè¿‡ have_profiling å‚æ•°ï¼Œèƒ½çœ‹åˆ°å½“å‰ MySQL æ˜¯å¦æ”¯æŒ profile æ“ä½œï¼š<br /><code>SELECT @@have_profiling;</code><br />profiling é»˜è®¤å…³é—­ï¼Œå¯ä»¥é€šè¿‡setè¯­å¥åœ¨session/globalçº§åˆ«å¼€å¯ profilingï¼š<br /><code>SET profiling = 1;</code><br />æŸ¥çœ‹æ‰€æœ‰è¯­å¥çš„è€—æ—¶ï¼š<br /><code>show profiles;</code><br />æŸ¥çœ‹æŒ‡å®šquery_idçš„SQLè¯­å¥å„ä¸ªé˜¶æ®µçš„è€—æ—¶ï¼š<br /><code>show profile for query query_id;</code><br />æŸ¥çœ‹æŒ‡å®šquery_idçš„SQLè¯­å¥CPUçš„ä½¿ç”¨æƒ…å†µ<br /><code>show profile cpu for query query_id;</code></p><h3 id="explain"><a class="markdownIt-Anchor" href="#explain"></a> explain</h3><p>EXPLAIN æˆ–è€… DESC å‘½ä»¤è·å– MySQL å¦‚ä½•æ‰§è¡Œ SELECT è¯­å¥çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬åœ¨ SELECT è¯­å¥æ‰§è¡Œè¿‡ç¨‹ä¸­è¡¨å¦‚ä½•è¿æ¥å’Œè¿æ¥çš„é¡ºåºã€‚<br />è¯­æ³•ï¼š<br /># ç›´æ¥åœ¨selectè¯­å¥ä¹‹å‰åŠ ä¸Šå…³é”®å­— explain / desc<br />EXPLAIN SELECT å­—æ®µåˆ—è¡¨ FROM è¡¨å HWERE æ¡ä»¶;</p><p>EXPLAIN å„å­—æ®µå«ä¹‰ï¼š</p><ul><li>idï¼šselect æŸ¥è¯¢çš„åºåˆ—å·ï¼Œè¡¨ç¤ºæŸ¥è¯¢ä¸­æ‰§è¡Œ select å­å¥æˆ–è€…æ“ä½œè¡¨çš„é¡ºåºï¼ˆidç›¸åŒï¼Œæ‰§è¡Œé¡ºåºä»ä¸Šåˆ°ä¸‹ï¼›idä¸åŒï¼Œå€¼è¶Šå¤§è¶Šå…ˆæ‰§è¡Œï¼‰</li><li>select_typeï¼šè¡¨ç¤º SELECT çš„ç±»å‹ï¼Œå¸¸è§å–å€¼æœ‰ SIMPLEï¼ˆç®€å•è¡¨ï¼Œå³ä¸é€‚ç”¨è¡¨è¿æ¥æˆ–è€…å­æŸ¥è¯¢ï¼‰ã€PRIMARYï¼ˆä¸»æŸ¥è¯¢ï¼Œå³å¤–å±‚çš„æŸ¥è¯¢ï¼‰ã€UNIONï¼ˆUNIONä¸­çš„ç¬¬äºŒä¸ªæˆ–è€…åé¢çš„æŸ¥è¯¢è¯­å¥ï¼‰ã€SUBQUERYï¼ˆSELECT/WHEREä¹‹ååŒ…å«äº†å­æŸ¥è¯¢ï¼‰ç­‰</li><li>typeï¼šè¡¨ç¤ºè¿æ¥ç±»å‹ï¼Œæ€§èƒ½ç”±å¥½åˆ°å·®çš„è¿æ¥ç±»å‹ä¸º NULLã€systemã€constã€eq_refã€refã€rangeã€indexã€all</li><li>possible_keyï¼šå¯èƒ½åº”ç”¨åœ¨è¿™å¼ è¡¨ä¸Šçš„ç´¢å¼•ï¼Œä¸€ä¸ªæˆ–å¤šä¸ª</li><li>Keyï¼šå®é™…ä½¿ç”¨çš„ç´¢å¼•ï¼Œå¦‚æœä¸º NULLï¼Œåˆ™æ²¡æœ‰ä½¿ç”¨ç´¢å¼•</li><li>Key_lenï¼šè¡¨ç¤ºç´¢å¼•ä¸­ä½¿ç”¨çš„å­—èŠ‚æ•°ï¼Œè¯¥å€¼ä¸ºç´¢å¼•å­—æ®µæœ€å¤§å¯èƒ½é•¿åº¦ï¼Œå¹¶éå®é™…ä½¿ç”¨é•¿åº¦ï¼Œåœ¨ä¸æŸå¤±ç²¾ç¡®æ€§çš„å‰æä¸‹ï¼Œé•¿åº¦è¶ŠçŸ­è¶Šå¥½</li><li>rowsï¼šMySQLè®¤ä¸ºå¿…é¡»è¦æ‰§è¡Œçš„è¡Œæ•°ï¼Œåœ¨InnoDBå¼•æ“çš„è¡¨ä¸­ï¼Œæ˜¯ä¸€ä¸ªä¼°è®¡å€¼ï¼Œå¯èƒ½å¹¶ä¸æ€»æ˜¯å‡†ç¡®çš„</li><li>filteredï¼šè¡¨ç¤ºè¿”å›ç»“æœçš„è¡Œæ•°å éœ€è¯»å–è¡Œæ•°çš„ç™¾åˆ†æ¯”ï¼Œfilteredçš„å€¼è¶Šå¤§è¶Šå¥½</li></ul><h2 id="ç´¢å¼•"><a class="markdownIt-Anchor" href="#ç´¢å¼•"></a> ç´¢å¼•</h2><p>ç´¢å¼•æ˜¯å¸®åŠ© MySQL <strong>é«˜æ•ˆè·å–æ•°æ®</strong>çš„<strong>æ•°æ®ç»“æ„ï¼ˆæœ‰åºï¼‰</strong>ã€‚åœ¨æ•°æ®ä¹‹å¤–ï¼Œæ•°æ®åº“ç³»ç»Ÿè¿˜ç»´æŠ¤ç€æ»¡è¶³ç‰¹å®šæŸ¥æ‰¾ç®—æ³•çš„æ•°æ®ç»“æ„ï¼Œè¿™äº›æ•°æ®ç»“æ„ä»¥æŸç§æ–¹å¼å¼•ç”¨ï¼ˆæŒ‡å‘ï¼‰æ•°æ®ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨è¿™äº›æ•°æ®ç»“æ„ä¸Šå®ç°é«˜çº§æŸ¥è¯¢ç®—æ³•ï¼Œè¿™ç§æ•°æ®ç»“æ„å°±æ˜¯ç´¢å¼•ã€‚</p><p>ä¼˜ç¼ºç‚¹ï¼š</p><p>ä¼˜ç‚¹ï¼š</p><ul><li>æé«˜æ•°æ®æ£€ç´¢æ•ˆç‡ï¼Œé™ä½æ•°æ®åº“çš„IOæˆæœ¬</li><li>é€šè¿‡ç´¢å¼•åˆ—å¯¹æ•°æ®è¿›è¡Œæ’åºï¼Œé™ä½æ•°æ®æ’åºçš„æˆæœ¬ï¼Œé™ä½CPUçš„æ¶ˆè€—</li></ul><p>ç¼ºç‚¹ï¼š</p><ul><li>ç´¢å¼•åˆ—ä¹Ÿæ˜¯è¦å ç”¨ç©ºé—´çš„</li><li>ç´¢å¼•å¤§å¤§æé«˜äº†æŸ¥è¯¢æ•ˆç‡ï¼Œä½†é™ä½äº†æ›´æ–°çš„é€Ÿåº¦ï¼Œæ¯”å¦‚ INSERTã€UPDATEã€DELETE</li></ul><h3 id="ç´¢å¼•ç»“æ„"><a class="markdownIt-Anchor" href="#ç´¢å¼•ç»“æ„"></a> ç´¢å¼•ç»“æ„</h3><table><thead><tr><th>ç´¢å¼•ç»“æ„</th><th>æè¿°</th></tr></thead><tbody><tr><td>B+Tree</td><td>æœ€å¸¸è§çš„ç´¢å¼•ç±»å‹ï¼Œå¤§éƒ¨åˆ†å¼•æ“éƒ½æ”¯æŒB+æ ‘ç´¢å¼•</td></tr><tr><td>Hash</td><td>åº•å±‚æ•°æ®ç»“æ„æ˜¯ç”¨å“ˆå¸Œè¡¨å®ç°ï¼Œåªæœ‰ç²¾ç¡®åŒ¹é…ç´¢å¼•åˆ—çš„æŸ¥è¯¢æ‰æœ‰æ•ˆï¼Œä¸æ”¯æŒèŒƒå›´æŸ¥è¯¢</td></tr><tr><td>R-Tree(ç©ºé—´ç´¢å¼•)</td><td>ç©ºé—´ç´¢å¼•æ˜¯ MyISAM å¼•æ“çš„ä¸€ä¸ªç‰¹æ®Šç´¢å¼•ç±»å‹ï¼Œä¸»è¦ç”¨äºåœ°ç†ç©ºé—´æ•°æ®ç±»å‹ï¼Œé€šå¸¸ä½¿ç”¨è¾ƒå°‘</td></tr><tr><td>Full-Text(å…¨æ–‡ç´¢å¼•)</td><td>æ˜¯ä¸€ç§é€šè¿‡å»ºç«‹å€’æ’ç´¢å¼•ï¼Œå¿«é€ŸåŒ¹é…æ–‡æ¡£çš„æ–¹å¼ï¼Œç±»ä¼¼äº Lucene, Solr, ES</td></tr></tbody></table><table><thead><tr><th>ç´¢å¼•</th><th>InnoDB</th><th>MyISAM</th><th>Memory</th></tr></thead><tbody><tr><td>B+Treeç´¢å¼•</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td></tr><tr><td>Hashç´¢å¼•</td><td>ä¸æ”¯æŒ</td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒ</td></tr><tr><td>R-Treeç´¢å¼•</td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td></tr><tr><td>Full-text</td><td>5.6ç‰ˆæœ¬åæ”¯æŒ</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td></tr></tbody></table><h4 id="b-tree"><a class="markdownIt-Anchor" href="#b-tree"></a> B-Tree</h4><p><img src="%E4%BA%8C%E5%8F%89%E6%A0%91.png" alt="äºŒå‰æ ‘" title="äºŒå‰æ ‘" /></p><p>äºŒå‰æ ‘çš„ç¼ºç‚¹å¯ä»¥ç”¨çº¢é»‘æ ‘æ¥è§£å†³ï¼š<br /><img src="https://learning-logs-1253130399.cos.ap-guangzhou.myqcloud.com/editor/%E7%BA%A2%E9%BB%91%E6%A0%91_20220316163142686602.png" alt="çº¢é»‘æ ‘" title="çº¢é»‘æ ‘" /><br />çº¢é»‘æ ‘ä¹Ÿå­˜åœ¨å¤§æ•°æ®é‡æƒ…å†µä¸‹ï¼Œå±‚çº§è¾ƒæ·±ï¼Œæ£€ç´¢é€Ÿåº¦æ…¢çš„é—®é¢˜ã€‚</p><p>ä¸ºäº†è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨ B-Tree ç»“æ„ã€‚<br />B-Tree (å¤šè·¯å¹³è¡¡æŸ¥æ‰¾æ ‘) ä»¥ä¸€æ£µæœ€å¤§åº¦æ•°ï¼ˆmax-degreeï¼ŒæŒ‡ä¸€ä¸ªèŠ‚ç‚¹çš„å­èŠ‚ç‚¹ä¸ªæ•°ï¼‰ä¸º5ï¼ˆ5é˜¶ï¼‰çš„ b-tree ä¸ºä¾‹ï¼ˆæ¯ä¸ªèŠ‚ç‚¹æœ€å¤šå­˜å‚¨4ä¸ªkeyï¼Œ5ä¸ªæŒ‡é’ˆï¼‰</p><p><img src="B-Tree%E7%BB%93%E6%9E%84.png" alt="B-Treeç»“æ„" title="B-Treeç»“æ„" /></p><blockquote><p>B-Tree çš„æ•°æ®æ’å…¥è¿‡ç¨‹åŠ¨ç”»å‚ç…§ï¼š<a href="https://www.bilibili.com/video/BV1Kr4y1i7ru?p=68">https://www.bilibili.com/video/BV1Kr4y1i7ru?p=68</a><br />æ¼”ç¤ºåœ°å€ï¼š<a href="https://www.cs.usfca.edu/~galles/visualization/BTree.html">https://www.cs.usfca.edu/~galles/visualization/BTree.html</a></p></blockquote><h4 id="btree"><a class="markdownIt-Anchor" href="#btree"></a> B+Tree</h4><p>ç»“æ„å›¾ï¼š</p><p><img src="B+Tree%E7%BB%93%E6%9E%84%E5%9B%BE.png" alt="B+Treeç»“æ„å›¾" title="B+Treeç»“æ„å›¾" /></p><blockquote><p>æ¼”ç¤ºåœ°å€ï¼š<a href="https://www.cs.usfca.edu/~galles/visualization/BPlusTree.html">https://www.cs.usfca.edu/~galles/visualization/BPlusTree.html</a></p></blockquote><p>ä¸ B-Tree çš„åŒºåˆ«ï¼š</p><ul><li>æ‰€æœ‰çš„æ•°æ®éƒ½ä¼šå‡ºç°åœ¨å¶å­èŠ‚ç‚¹</li><li>å¶å­èŠ‚ç‚¹å½¢æˆä¸€ä¸ªå•å‘é“¾è¡¨</li></ul><p>MySQL ç´¢å¼•æ•°æ®ç»“æ„å¯¹ç»å…¸çš„ B+Tree è¿›è¡Œäº†ä¼˜åŒ–ã€‚åœ¨åŸ B+Tree çš„åŸºç¡€ä¸Šï¼Œå¢åŠ ä¸€ä¸ªæŒ‡å‘ç›¸é‚»å¶å­èŠ‚ç‚¹çš„é“¾è¡¨æŒ‡é’ˆï¼Œå°±å½¢æˆäº†å¸¦æœ‰é¡ºåºæŒ‡é’ˆçš„ B+Treeï¼Œæé«˜åŒºé—´è®¿é—®çš„æ€§èƒ½ã€‚</p><p><img src="%E7%BB%93%E6%9E%84%E5%9B%BE.png" alt="MySQL B+Tree ç»“æ„å›¾" title="MySQL B+Tree ç»“æ„å›¾" /></p><h4 id="hash"><a class="markdownIt-Anchor" href="#hash"></a> Hash</h4><p>å“ˆå¸Œç´¢å¼•å°±æ˜¯é‡‡ç”¨ä¸€å®šçš„hashç®—æ³•ï¼Œå°†é”®å€¼æ¢ç®—æˆæ–°çš„hashå€¼ï¼Œæ˜ å°„åˆ°å¯¹åº”çš„æ§½ä½ä¸Šï¼Œç„¶åå­˜å‚¨åœ¨hashè¡¨ä¸­ã€‚<br />å¦‚æœä¸¤ä¸ªï¼ˆæˆ–å¤šä¸ªï¼‰é”®å€¼ï¼Œæ˜ å°„åˆ°ä¸€ä¸ªç›¸åŒçš„æ§½ä½ä¸Šï¼Œä»–ä»¬å°±äº§ç”Ÿäº†hashå†²çªï¼ˆä¹Ÿç§°ä¸ºhashç¢°æ’ï¼‰ï¼Œå¯ä»¥é€šè¿‡é“¾è¡¨æ¥è§£å†³ã€‚</p><p><img src="https://learning-logs-1253130399.cos.ap-guangzhou.myqcloud.com/editor/Hash%E7%B4%A2%E5%BC%95%E5%8E%9F%E7%90%86%E5%9B%BE_20220317143226150679.png" alt="Hashç´¢å¼•åŸç†å›¾" title="Hashç´¢å¼•åŸç†å›¾" /></p><p>ç‰¹ç‚¹ï¼š</p><ul><li>Hashç´¢å¼•åªèƒ½ç”¨äºå¯¹ç­‰æ¯”è¾ƒï¼ˆ=ã€inï¼‰ï¼Œä¸æ”¯æŒèŒƒå›´æŸ¥è¯¢ï¼ˆbetwwnã€&gt;ã€&lt;ã€â€¦ï¼‰</li><li>æ— æ³•åˆ©ç”¨ç´¢å¼•å®Œæˆæ’åºæ“ä½œ</li><li>æŸ¥è¯¢æ•ˆç‡é«˜ï¼Œé€šå¸¸åªéœ€è¦ä¸€æ¬¡æ£€ç´¢å°±å¯ä»¥äº†ï¼Œæ•ˆç‡é€šå¸¸è¦é«˜äº B+Tree ç´¢å¼•</li></ul><p>å­˜å‚¨å¼•æ“æ”¯æŒï¼š</p><ul><li>Memory</li><li>InnoDB: å…·æœ‰è‡ªé€‚åº”hashåŠŸèƒ½ï¼Œhashç´¢å¼•æ˜¯å­˜å‚¨å¼•æ“æ ¹æ® B+Tree ç´¢å¼•åœ¨æŒ‡å®šæ¡ä»¶ä¸‹è‡ªåŠ¨æ„å»ºçš„</li></ul><h4 id="é¢è¯•é¢˜"><a class="markdownIt-Anchor" href="#é¢è¯•é¢˜"></a> é¢è¯•é¢˜</h4><ol><li>ä¸ºä»€ä¹ˆ InnoDB å­˜å‚¨å¼•æ“é€‰æ‹©ä½¿ç”¨ B+Tree ç´¢å¼•ç»“æ„ï¼Ÿ</li></ol><ul><li>ç›¸å¯¹äºäºŒå‰æ ‘ï¼Œå±‚çº§æ›´å°‘ï¼Œæœç´¢æ•ˆç‡é«˜</li><li>å¯¹äº B-Treeï¼Œæ— è®ºæ˜¯å¶å­èŠ‚ç‚¹è¿˜æ˜¯éå¶å­èŠ‚ç‚¹ï¼Œéƒ½ä¼šä¿å­˜æ•°æ®ï¼Œè¿™æ ·å¯¼è‡´ä¸€é¡µä¸­å­˜å‚¨çš„é”®å€¼å‡å°‘ï¼ŒæŒ‡é’ˆä¹Ÿè·Ÿç€å‡å°‘ï¼Œè¦åŒæ ·ä¿å­˜å¤§é‡æ•°æ®ï¼Œåªèƒ½å¢åŠ æ ‘çš„é«˜åº¦ï¼Œå¯¼è‡´æ€§èƒ½é™ä½</li><li>ç›¸å¯¹äº Hash ç´¢å¼•ï¼ŒB+Tree æ”¯æŒèŒƒå›´åŒ¹é…åŠæ’åºæ“ä½œ</li></ul><h3 id="ç´¢å¼•åˆ†ç±»"><a class="markdownIt-Anchor" href="#ç´¢å¼•åˆ†ç±»"></a> ç´¢å¼•åˆ†ç±»</h3><table><thead><tr><th>åˆ†ç±»</th><th>å«ä¹‰</th><th>ç‰¹ç‚¹</th><th>å…³é”®å­—</th></tr></thead><tbody><tr><td>ä¸»é”®ç´¢å¼•</td><td>é’ˆå¯¹äºè¡¨ä¸­ä¸»é”®åˆ›å»ºçš„ç´¢å¼•</td><td>é»˜è®¤è‡ªåŠ¨åˆ›å»ºï¼Œåªèƒ½æœ‰ä¸€ä¸ª</td><td>PRIMARY</td></tr><tr><td>å”¯ä¸€ç´¢å¼•</td><td>é¿å…åŒä¸€ä¸ªè¡¨ä¸­æŸæ•°æ®åˆ—ä¸­çš„å€¼é‡å¤</td><td>å¯ä»¥æœ‰å¤šä¸ª</td><td>UNIQUE</td></tr><tr><td>å¸¸è§„ç´¢å¼•</td><td>å¿«é€Ÿå®šä½ç‰¹å®šæ•°æ®</td><td>å¯ä»¥æœ‰å¤šä¸ª</td><td></td></tr><tr><td>å…¨æ–‡ç´¢å¼•</td><td>å…¨æ–‡ç´¢å¼•æŸ¥æ‰¾çš„æ˜¯æ–‡æœ¬ä¸­çš„å…³é”®è¯ï¼Œè€Œä¸æ˜¯æ¯”è¾ƒç´¢å¼•ä¸­çš„å€¼</td><td>å¯ä»¥æœ‰å¤šä¸ª</td><td>FULLTEXT</td></tr></tbody></table><p>åœ¨ InnoDB å­˜å‚¨å¼•æ“ä¸­ï¼Œæ ¹æ®ç´¢å¼•çš„å­˜å‚¨å½¢å¼ï¼Œåˆå¯ä»¥åˆ†ä¸ºä»¥ä¸‹ä¸¤ç§ï¼š</p><table><thead><tr><th>åˆ†ç±»</th><th>å«ä¹‰</th><th>ç‰¹ç‚¹</th></tr></thead><tbody><tr><td>èšé›†ç´¢å¼•(Clustered Index)</td><td>å°†æ•°æ®å­˜å‚¨ä¸ç´¢å¼•æ”¾ä¸€å—ï¼Œç´¢å¼•ç»“æ„çš„å¶å­èŠ‚ç‚¹ä¿å­˜äº†è¡Œæ•°æ®</td><td>å¿…é¡»æœ‰ï¼Œè€Œä¸”åªæœ‰ä¸€ä¸ª</td></tr><tr><td>äºŒçº§ç´¢å¼•(Secondary Index)</td><td>å°†æ•°æ®ä¸ç´¢å¼•åˆ†å¼€å­˜å‚¨ï¼Œç´¢å¼•ç»“æ„çš„å¶å­èŠ‚ç‚¹å…³è”çš„æ˜¯å¯¹åº”çš„ä¸»é”®</td><td>å¯ä»¥å­˜åœ¨å¤šä¸ª</td></tr></tbody></table><p>æ¼”ç¤ºå›¾ï¼š</p><p><img src="%E5%8E%9F%E7%90%86%E5%9B%BE.png" alt="å¤§è‡´åŸç†" title="å¤§è‡´åŸç†" /><br /><img src="https://learning-logs-1253130399.cos.ap-guangzhou.myqcloud.com/editor/%E6%BC%94%E7%A4%BA%E5%9B%BE_20220319215403721066.png" alt="æ¼”ç¤ºå›¾" title="æ¼”ç¤ºå›¾" /></p><p>èšé›†ç´¢å¼•é€‰å–è§„åˆ™ï¼š</p><ul><li>å¦‚æœå­˜åœ¨ä¸»é”®ï¼Œä¸»é”®ç´¢å¼•å°±æ˜¯èšé›†ç´¢å¼•</li><li>å¦‚æœä¸å­˜åœ¨ä¸»é”®ï¼Œå°†ä½¿ç”¨ç¬¬ä¸€ä¸ªå”¯ä¸€(UNIQUE)ç´¢å¼•ä½œä¸ºèšé›†ç´¢å¼•</li><li>å¦‚æœè¡¨æ²¡æœ‰ä¸»é”®æˆ–æ²¡æœ‰åˆé€‚çš„å”¯ä¸€ç´¢å¼•ï¼Œåˆ™ InnoDB ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ª rowid ä½œä¸ºéšè—çš„èšé›†ç´¢å¼•</li></ul><h4 id="æ€è€ƒé¢˜"><a class="markdownIt-Anchor" href="#æ€è€ƒé¢˜"></a> æ€è€ƒé¢˜</h4><p>1. ä»¥ä¸‹ SQL è¯­å¥ï¼Œå“ªä¸ªæ‰§è¡Œæ•ˆç‡é«˜ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">select * from user where id = 10;</span><br><span class="line">select * from user where name = &#x27;Arm&#x27;;</span><br><span class="line">-- å¤‡æ³¨ï¼šidä¸ºä¸»é”®ï¼Œnameå­—æ®µåˆ›å»ºçš„æœ‰ç´¢å¼•</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ç­”ï¼šç¬¬ä¸€æ¡è¯­å¥ï¼Œå› ä¸ºç¬¬äºŒæ¡éœ€è¦å›è¡¨æŸ¥è¯¢ï¼Œç›¸å½“äºä¸¤ä¸ªæ­¥éª¤ã€‚</p><p>2. InnoDB ä¸»é”®ç´¢å¼•çš„ B+Tree é«˜åº¦ä¸ºå¤šå°‘ï¼Ÿ</p><p>ç­”ï¼šå‡è®¾ä¸€è¡Œæ•°æ®å¤§å°ä¸º1kï¼Œä¸€é¡µä¸­å¯ä»¥å­˜å‚¨16è¡Œè¿™æ ·çš„æ•°æ®ã€‚InnoDB çš„æŒ‡é’ˆå ç”¨6ä¸ªå­—èŠ‚çš„ç©ºé—´ï¼Œä¸»é”®å‡è®¾ä¸ºbigintï¼Œå ç”¨å­—èŠ‚æ•°ä¸º8.<br />å¯å¾—å…¬å¼ï¼š<code>n * 8 + (n + 1) * 6 = 16 * 1024</code>ï¼Œå…¶ä¸­ 8 è¡¨ç¤º bigint å ç”¨çš„å­—èŠ‚æ•°ï¼Œn è¡¨ç¤ºå½“å‰èŠ‚ç‚¹å­˜å‚¨çš„keyçš„æ•°é‡ï¼Œ(n + 1) è¡¨ç¤ºæŒ‡é’ˆæ•°é‡ï¼ˆæ¯”keyå¤šä¸€ä¸ªï¼‰ã€‚ç®—å‡ºnçº¦ä¸º1170ã€‚</p><p>å¦‚æœæ ‘çš„é«˜åº¦ä¸º2ï¼Œé‚£ä¹ˆä»–èƒ½å­˜å‚¨çš„æ•°æ®é‡å¤§æ¦‚ä¸ºï¼š<code>1171 * 16 = 18736</code>ï¼›<br />å¦‚æœæ ‘çš„é«˜åº¦ä¸º3ï¼Œé‚£ä¹ˆä»–èƒ½å­˜å‚¨çš„æ•°æ®é‡å¤§æ¦‚ä¸ºï¼š<code>1171 * 1171 * 16 = 21939856</code>ã€‚</p><p>å¦å¤–ï¼Œå¦‚æœæœ‰æˆåƒä¸Šä¸‡çš„æ•°æ®ï¼Œé‚£ä¹ˆå°±è¦è€ƒè™‘åˆ†è¡¨ï¼Œæ¶‰åŠè¿ç»´ç¯‡çŸ¥è¯†ã€‚</p><h3 id="è¯­æ³•"><a class="markdownIt-Anchor" href="#è¯­æ³•"></a> è¯­æ³•</h3><p>åˆ›å»ºç´¢å¼•ï¼š<br /><code>CREATE [ UNIQUE | FULLTEXT ] INDEX index_name ON table_name (index_col_name, ...);</code><br />å¦‚æœä¸åŠ  CREATE åé¢ä¸åŠ ç´¢å¼•ç±»å‹å‚æ•°ï¼Œåˆ™åˆ›å»ºçš„æ˜¯å¸¸è§„ç´¢å¼•</p><p>æŸ¥çœ‹ç´¢å¼•ï¼š<br /><code>SHOW INDEX FROM table_name;</code></p><p>åˆ é™¤ç´¢å¼•ï¼š<br /><code>DROP INDEX index_name ON table_name;</code></p><p>æ¡ˆä¾‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">-- nameå­—æ®µä¸ºå§“åå­—æ®µï¼Œè¯¥å­—æ®µçš„å€¼å¯èƒ½ä¼šé‡å¤ï¼Œä¸ºè¯¥å­—æ®µåˆ›å»ºç´¢å¼•</span><br><span class="line">create index idx_user_name on tb_user(name);</span><br><span class="line">-- phoneæ‰‹æœºå·å­—æ®µçš„å€¼éç©ºï¼Œä¸”å”¯ä¸€ï¼Œä¸ºè¯¥å­—æ®µåˆ›å»ºå”¯ä¸€ç´¢å¼•</span><br><span class="line">create unique index idx_user_phone on tb_user (phone);</span><br><span class="line">-- ä¸ºprofession, age, statusåˆ›å»ºè”åˆç´¢å¼•</span><br><span class="line">create index idx_user_pro_age_stat on tb_user(profession, age, status);</span><br><span class="line">-- ä¸ºemailå»ºç«‹åˆé€‚çš„ç´¢å¼•æ¥æå‡æŸ¥è¯¢æ•ˆç‡</span><br><span class="line">create index idx_user_email on tb_user(email);</span><br><span class="line"></span><br><span class="line">-- åˆ é™¤ç´¢å¼•</span><br><span class="line">drop index idx_user_email on tb_user;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨è§„åˆ™"><a class="markdownIt-Anchor" href="#ä½¿ç”¨è§„åˆ™"></a> ä½¿ç”¨è§„åˆ™</h3><h4 id="æœ€å·¦å‰ç¼€æ³•åˆ™"><a class="markdownIt-Anchor" href="#æœ€å·¦å‰ç¼€æ³•åˆ™"></a> æœ€å·¦å‰ç¼€æ³•åˆ™</h4><p>å¦‚æœç´¢å¼•å…³è”äº†å¤šåˆ—ï¼ˆè”åˆç´¢å¼•ï¼‰ï¼Œè¦éµå®ˆæœ€å·¦å‰ç¼€æ³•åˆ™ï¼Œæœ€å·¦å‰ç¼€æ³•åˆ™æŒ‡çš„æ˜¯æŸ¥è¯¢ä»ç´¢å¼•çš„æœ€å·¦åˆ—å¼€å§‹ï¼Œå¹¶ä¸”ä¸è·³è¿‡ç´¢å¼•ä¸­çš„åˆ—ã€‚<br />å¦‚æœè·³è·ƒæŸä¸€åˆ—ï¼Œç´¢å¼•å°†éƒ¨åˆ†å¤±æ•ˆï¼ˆåé¢çš„å­—æ®µç´¢å¼•å¤±æ•ˆï¼‰ã€‚</p><p>è”åˆç´¢å¼•ä¸­ï¼Œå‡ºç°èŒƒå›´æŸ¥è¯¢ï¼ˆ&lt;, &gt;ï¼‰ï¼ŒèŒƒå›´æŸ¥è¯¢å³ä¾§çš„åˆ—ç´¢å¼•å¤±æ•ˆã€‚å¯ä»¥ç”¨&gt;=æˆ–è€…&lt;=æ¥è§„é¿ç´¢å¼•å¤±æ•ˆé—®é¢˜ã€‚</p><h4 id="ç´¢å¼•å¤±æ•ˆæƒ…å†µ"><a class="markdownIt-Anchor" href="#ç´¢å¼•å¤±æ•ˆæƒ…å†µ"></a> ç´¢å¼•å¤±æ•ˆæƒ…å†µ</h4><ol><li>åœ¨ç´¢å¼•åˆ—ä¸Šè¿›è¡Œè¿ç®—æ“ä½œï¼Œç´¢å¼•å°†å¤±æ•ˆã€‚å¦‚ï¼š<code>explain select * from tb_user where substring(phone, 10, 2) = '15';</code></li><li>å­—ç¬¦ä¸²ç±»å‹å­—æ®µä½¿ç”¨æ—¶ï¼Œä¸åŠ å¼•å·ï¼Œç´¢å¼•å°†å¤±æ•ˆã€‚å¦‚ï¼š<code>explain select * from tb_user where phone = 17799990015;</code>ï¼Œæ­¤å¤„phoneçš„å€¼æ²¡æœ‰åŠ å¼•å·</li><li>æ¨¡ç³ŠæŸ¥è¯¢ä¸­ï¼Œå¦‚æœä»…ä»…æ˜¯å°¾éƒ¨æ¨¡ç³ŠåŒ¹é…ï¼Œç´¢å¼•ä¸ä¼šæ˜¯å¤±æ•ˆï¼›å¦‚æœæ˜¯å¤´éƒ¨æ¨¡ç³ŠåŒ¹é…ï¼Œç´¢å¼•å¤±æ•ˆã€‚å¦‚ï¼š<code>explain select * from tb_user where profession like '%å·¥ç¨‹';</code>ï¼Œå‰åéƒ½æœ‰ % ä¹Ÿä¼šå¤±æ•ˆã€‚</li><li>ç”¨ or åˆ†å‰²å¼€çš„æ¡ä»¶ï¼Œå¦‚æœ or å…¶ä¸­ä¸€ä¸ªæ¡ä»¶çš„åˆ—æ²¡æœ‰ç´¢å¼•ï¼Œé‚£ä¹ˆæ¶‰åŠçš„ç´¢å¼•éƒ½ä¸ä¼šè¢«ç”¨åˆ°ã€‚</li><li>å¦‚æœ MySQL è¯„ä¼°ä½¿ç”¨ç´¢å¼•æ¯”å…¨è¡¨æ›´æ…¢ï¼Œåˆ™ä¸ä½¿ç”¨ç´¢å¼•ã€‚</li></ol><h4 id="sql-æç¤º"><a class="markdownIt-Anchor" href="#sql-æç¤º"></a> SQL æç¤º</h4><p>æ˜¯ä¼˜åŒ–æ•°æ®åº“çš„ä¸€ä¸ªé‡è¦æ‰‹æ®µï¼Œç®€å•æ¥è¯´ï¼Œå°±æ˜¯åœ¨SQLè¯­å¥ä¸­åŠ å…¥ä¸€äº›äººä¸ºçš„æç¤ºæ¥è¾¾åˆ°ä¼˜åŒ–æ“ä½œçš„ç›®çš„ã€‚</p><p>ä¾‹å¦‚ï¼Œä½¿ç”¨ç´¢å¼•ï¼š<br /><code>explain select * from tb_user use index(idx_user_pro) where profession=&quot;è½¯ä»¶å·¥ç¨‹&quot;;</code><br />ä¸ä½¿ç”¨å“ªä¸ªç´¢å¼•ï¼š<br /><code>explain select * from tb_user ignore index(idx_user_pro) where profession=&quot;è½¯ä»¶å·¥ç¨‹&quot;;</code><br />å¿…é¡»ä½¿ç”¨å“ªä¸ªç´¢å¼•ï¼š<br /><code>explain select * from tb_user force index(idx_user_pro) where profession=&quot;è½¯ä»¶å·¥ç¨‹&quot;;</code></p><p>use æ˜¯å»ºè®®ï¼Œå®é™…ä½¿ç”¨å“ªä¸ªç´¢å¼• MySQL è¿˜ä¼šè‡ªå·±æƒè¡¡è¿è¡Œé€Ÿåº¦å»æ›´æ”¹ï¼Œforceå°±æ˜¯æ— è®ºå¦‚ä½•éƒ½å¼ºåˆ¶ä½¿ç”¨è¯¥ç´¢å¼•ã€‚</p><h4 id="è¦†ç›–ç´¢å¼•å›è¡¨æŸ¥è¯¢"><a class="markdownIt-Anchor" href="#è¦†ç›–ç´¢å¼•å›è¡¨æŸ¥è¯¢"></a> è¦†ç›–ç´¢å¼•&amp;å›è¡¨æŸ¥è¯¢</h4><p>å°½é‡ä½¿ç”¨è¦†ç›–ç´¢å¼•ï¼ˆæŸ¥è¯¢ä½¿ç”¨äº†ç´¢å¼•ï¼Œå¹¶ä¸”éœ€è¦è¿”å›çš„åˆ—ï¼Œåœ¨è¯¥ç´¢å¼•ä¸­å·²ç»å…¨éƒ¨èƒ½æ‰¾åˆ°ï¼‰ï¼Œå‡å°‘ select *ã€‚</p><p>explain ä¸­ extra å­—æ®µå«ä¹‰ï¼š<br /><code>using index condition</code>ï¼šæŸ¥æ‰¾ä½¿ç”¨äº†ç´¢å¼•ï¼Œä½†æ˜¯éœ€è¦å›è¡¨æŸ¥è¯¢æ•°æ®<br /><code>using where; using index;</code>ï¼šæŸ¥æ‰¾ä½¿ç”¨äº†ç´¢å¼•ï¼Œä½†æ˜¯éœ€è¦çš„æ•°æ®éƒ½åœ¨ç´¢å¼•åˆ—ä¸­èƒ½æ‰¾åˆ°ï¼Œæ‰€ä»¥ä¸éœ€è¦å›è¡¨æŸ¥è¯¢</p><p>å¦‚æœåœ¨èšé›†ç´¢å¼•ä¸­ç›´æ¥èƒ½æ‰¾åˆ°å¯¹åº”çš„è¡Œï¼Œåˆ™ç›´æ¥è¿”å›è¡Œæ•°æ®ï¼Œåªéœ€è¦ä¸€æ¬¡æŸ¥è¯¢ï¼Œå“ªæ€•æ˜¯select *ï¼›å¦‚æœåœ¨è¾…åŠ©ç´¢å¼•ä¸­æ‰¾èšé›†ç´¢å¼•ï¼Œå¦‚<code>select id, name from xxx where name='xxx';</code>ï¼Œä¹Ÿåªéœ€è¦é€šè¿‡è¾…åŠ©ç´¢å¼•(name)æŸ¥æ‰¾åˆ°å¯¹åº”çš„idï¼Œè¿”å›nameå’Œnameç´¢å¼•å¯¹åº”çš„idå³å¯ï¼Œåªéœ€è¦ä¸€æ¬¡æŸ¥è¯¢ï¼›å¦‚æœæ˜¯é€šè¿‡è¾…åŠ©ç´¢å¼•æŸ¥æ‰¾å…¶ä»–å­—æ®µï¼Œåˆ™éœ€è¦å›è¡¨æŸ¥è¯¢ï¼Œå¦‚<code>select id, name, gender from xxx where name='xxx';</code></p><p>æ‰€ä»¥å°½é‡ä¸è¦ç”¨<code>select *</code>ï¼Œå®¹æ˜“å‡ºç°å›è¡¨æŸ¥è¯¢ï¼Œé™ä½æ•ˆç‡ï¼Œé™¤éæœ‰è”åˆç´¢å¼•åŒ…å«äº†æ‰€æœ‰å­—æ®µ</p><p>é¢è¯•é¢˜ï¼šä¸€å¼ è¡¨ï¼Œæœ‰å››ä¸ªå­—æ®µï¼ˆid, username, password, statusï¼‰ï¼Œç”±äºæ•°æ®é‡å¤§ï¼Œéœ€è¦å¯¹ä»¥ä¸‹SQLè¯­å¥è¿›è¡Œä¼˜åŒ–ï¼Œè¯¥å¦‚ä½•è¿›è¡Œæ‰æ˜¯æœ€ä¼˜æ–¹æ¡ˆï¼š<br /><code>select id, username, password from tb_user where username='itcast';</code></p><p>è§£ï¼šç»™usernameå’Œpasswordå­—æ®µå»ºç«‹è”åˆç´¢å¼•ï¼Œåˆ™ä¸éœ€è¦å›è¡¨æŸ¥è¯¢ï¼Œç›´æ¥è¦†ç›–ç´¢å¼•</p><h4 id="å‰ç¼€ç´¢å¼•"><a class="markdownIt-Anchor" href="#å‰ç¼€ç´¢å¼•"></a> å‰ç¼€ç´¢å¼•</h4><p>å½“å­—æ®µç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼ˆvarchar, textç­‰ï¼‰æ—¶ï¼Œæœ‰æ—¶å€™éœ€è¦ç´¢å¼•å¾ˆé•¿çš„å­—ç¬¦ä¸²ï¼Œè¿™ä¼šè®©ç´¢å¼•å˜å¾—å¾ˆå¤§ï¼ŒæŸ¥è¯¢æ—¶ï¼Œæµªè´¹å¤§é‡çš„ç£ç›˜IOï¼Œå½±å“æŸ¥è¯¢æ•ˆç‡ï¼Œæ­¤æ—¶å¯ä»¥åªé™å­—ç¬¦ä¸²çš„ä¸€éƒ¨åˆ†å‰ç¼€ï¼Œå»ºç«‹ç´¢å¼•ï¼Œè¿™æ ·å¯ä»¥å¤§å¤§èŠ‚çº¦ç´¢å¼•ç©ºé—´ï¼Œä»è€Œæé«˜ç´¢å¼•æ•ˆç‡ã€‚</p><p>è¯­æ³•ï¼š<code>create index idx_xxxx on table_name(columnn(n));</code><br />å‰ç¼€é•¿åº¦ï¼šå¯ä»¥æ ¹æ®ç´¢å¼•çš„é€‰æ‹©æ€§æ¥å†³å®šï¼Œè€Œé€‰æ‹©æ€§æ˜¯æŒ‡ä¸é‡å¤çš„ç´¢å¼•å€¼ï¼ˆåŸºæ•°ï¼‰å’Œæ•°æ®è¡¨çš„è®°å½•æ€»æ•°çš„æ¯”å€¼ï¼Œç´¢å¼•é€‰æ‹©æ€§è¶Šé«˜åˆ™æŸ¥è¯¢æ•ˆç‡è¶Šé«˜ï¼Œå”¯ä¸€ç´¢å¼•çš„é€‰æ‹©æ€§æ˜¯1ï¼Œè¿™æ˜¯æœ€å¥½çš„ç´¢å¼•é€‰æ‹©æ€§ï¼Œæ€§èƒ½ä¹Ÿæ˜¯æœ€å¥½çš„ã€‚<br />æ±‚é€‰æ‹©æ€§å…¬å¼ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select count(distinct email) / count(*) from tb_user;</span><br><span class="line">select count(distinct substring(email, 1, 5)) / count(*) from tb_user;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>show index é‡Œé¢çš„sub_partå¯ä»¥çœ‹åˆ°æ¥å–çš„é•¿åº¦</p><h4 id="å•åˆ—ç´¢å¼•è”åˆç´¢å¼•"><a class="markdownIt-Anchor" href="#å•åˆ—ç´¢å¼•è”åˆç´¢å¼•"></a> å•åˆ—ç´¢å¼•&amp;è”åˆç´¢å¼•</h4><p>å•åˆ—ç´¢å¼•ï¼šå³ä¸€ä¸ªç´¢å¼•åªåŒ…å«å•ä¸ªåˆ—<br />è”åˆç´¢å¼•ï¼šå³ä¸€ä¸ªç´¢å¼•åŒ…å«äº†å¤šä¸ªåˆ—<br />åœ¨ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œå¦‚æœå­˜åœ¨å¤šä¸ªæŸ¥è¯¢æ¡ä»¶ï¼Œè€ƒè™‘é’ˆå¯¹äºæŸ¥è¯¢å­—æ®µå»ºç«‹ç´¢å¼•æ—¶ï¼Œå»ºè®®å»ºç«‹è”åˆç´¢å¼•ï¼Œè€Œéå•åˆ—ç´¢å¼•ã€‚</p><p>å•åˆ—ç´¢å¼•æƒ…å†µï¼š<br /><code>explain select id, phone, name from tb_user where phone = '17799990010' and name = 'éŸ©ä¿¡';</code><br />è¿™å¥åªä¼šç”¨åˆ°phoneç´¢å¼•å­—æ®µ</p><h5 id="æ³¨æ„äº‹é¡¹-9"><a class="markdownIt-Anchor" href="#æ³¨æ„äº‹é¡¹-9"></a> æ³¨æ„äº‹é¡¹</h5><ul><li>å¤šæ¡ä»¶è”åˆæŸ¥è¯¢æ—¶ï¼ŒMySQLä¼˜åŒ–å™¨ä¼šè¯„ä¼°å“ªä¸ªå­—æ®µçš„ç´¢å¼•æ•ˆç‡æ›´é«˜ï¼Œä¼šé€‰æ‹©è¯¥ç´¢å¼•å®Œæˆæœ¬æ¬¡æŸ¥è¯¢</li></ul><h3 id="è®¾è®¡åŸåˆ™"><a class="markdownIt-Anchor" href="#è®¾è®¡åŸåˆ™"></a> è®¾è®¡åŸåˆ™</h3><ol><li>é’ˆå¯¹äºæ•°æ®é‡è¾ƒå¤§ï¼Œä¸”æŸ¥è¯¢æ¯”è¾ƒé¢‘ç¹çš„è¡¨å»ºç«‹ç´¢å¼•</li><li>é’ˆå¯¹äºå¸¸ä½œä¸ºæŸ¥è¯¢æ¡ä»¶ï¼ˆwhereï¼‰ã€æ’åºï¼ˆorder byï¼‰ã€åˆ†ç»„ï¼ˆgroup byï¼‰æ“ä½œçš„å­—æ®µå»ºç«‹ç´¢å¼•</li><li>å°½é‡é€‰æ‹©åŒºåˆ†åº¦é«˜çš„åˆ—ä½œä¸ºç´¢å¼•ï¼Œå°½é‡å»ºç«‹å”¯ä¸€ç´¢å¼•ï¼ŒåŒºåˆ†åº¦è¶Šé«˜ï¼Œä½¿ç”¨ç´¢å¼•çš„æ•ˆç‡è¶Šé«˜</li><li>å¦‚æœæ˜¯å­—ç¬¦ä¸²ç±»å‹çš„å­—æ®µï¼Œå­—æ®µé•¿åº¦è¾ƒé•¿ï¼Œå¯ä»¥é’ˆå¯¹äºå­—æ®µçš„ç‰¹ç‚¹ï¼Œå»ºç«‹å‰ç¼€ç´¢å¼•</li><li>å°½é‡ä½¿ç”¨è”åˆç´¢å¼•ï¼Œå‡å°‘å•åˆ—ç´¢å¼•ï¼ŒæŸ¥è¯¢æ—¶ï¼Œè”åˆç´¢å¼•å¾ˆå¤šæ—¶å€™å¯ä»¥è¦†ç›–ç´¢å¼•ï¼ŒèŠ‚çœå­˜å‚¨ç©ºé—´ï¼Œé¿å…å›è¡¨ï¼Œæé«˜æŸ¥è¯¢æ•ˆç‡</li><li>è¦æ§åˆ¶ç´¢å¼•çš„æ•°é‡ï¼Œç´¢å¼•å¹¶ä¸æ˜¯å¤šå¤šç›Šå–„ï¼Œç´¢å¼•è¶Šå¤šï¼Œç»´æŠ¤ç´¢å¼•ç»“æ„çš„ä»£ä»·å°±è¶Šå¤§ï¼Œä¼šå½±å“å¢åˆ æ”¹çš„æ•ˆç‡</li><li>å¦‚æœç´¢å¼•åˆ—ä¸èƒ½å­˜å‚¨NULLå€¼ï¼Œè¯·åœ¨åˆ›å»ºè¡¨æ—¶ä½¿ç”¨NOT NULLçº¦æŸå®ƒã€‚å½“ä¼˜åŒ–å™¨çŸ¥é“æ¯åˆ—æ˜¯å¦åŒ…å«NULLå€¼æ—¶ï¼Œå®ƒå¯ä»¥æ›´å¥½åœ°ç¡®å®šå“ªä¸ªç´¢å¼•æœ€æœ‰æ•ˆåœ°ç”¨äºæŸ¥è¯¢</li></ol><h2 id="sql-ä¼˜åŒ–"><a class="markdownIt-Anchor" href="#sql-ä¼˜åŒ–"></a> SQL ä¼˜åŒ–</h2><h3 id="æ’å…¥æ•°æ®"><a class="markdownIt-Anchor" href="#æ’å…¥æ•°æ®"></a> æ’å…¥æ•°æ®</h3><p>æ™®é€šæ’å…¥ï¼š</p><ol><li>é‡‡ç”¨æ‰¹é‡æ’å…¥ï¼ˆä¸€æ¬¡æ’å…¥çš„æ•°æ®ä¸å»ºè®®è¶…è¿‡1000æ¡ï¼‰</li><li>æ‰‹åŠ¨æäº¤äº‹åŠ¡</li><li>ä¸»é”®é¡ºåºæ’å…¥</li></ol><p>å¤§æ‰¹é‡æ’å…¥ï¼š<br />å¦‚æœä¸€æ¬¡æ€§éœ€è¦æ’å…¥å¤§æ‰¹é‡æ•°æ®ï¼Œä½¿ç”¨insertè¯­å¥æ’å…¥æ€§èƒ½è¾ƒä½ï¼Œæ­¤æ—¶å¯ä»¥ä½¿ç”¨MySQLæ•°æ®åº“æä¾›çš„loadæŒ‡ä»¤æ’å…¥ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># å®¢æˆ·ç«¯è¿æ¥æœåŠ¡ç«¯æ—¶ï¼ŒåŠ ä¸Šå‚æ•° --local-infileï¼ˆè¿™ä¸€è¡Œåœ¨bash/cmdç•Œé¢è¾“å…¥ï¼‰</span><br><span class="line">mysql --local-infile -u root -p</span><br><span class="line"># è®¾ç½®å…¨å±€å‚æ•°local_infileä¸º1ï¼Œå¼€å¯ä»æœ¬åœ°åŠ è½½æ–‡ä»¶å¯¼å…¥æ•°æ®çš„å¼€å…³</span><br><span class="line">set global local_infile = 1;</span><br><span class="line">select @@local_infile;</span><br><span class="line"># æ‰§è¡ŒloadæŒ‡ä»¤å°†å‡†å¤‡å¥½çš„æ•°æ®ï¼ŒåŠ è½½åˆ°è¡¨ç»“æ„ä¸­</span><br><span class="line">load data local infile &#x27;/root/sql1.log&#x27; into table &#x27;tb_user&#x27; fields terminated by &#x27;,&#x27; lines terminated by &#x27;\n&#x27;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="ä¸»é”®ä¼˜åŒ–"><a class="markdownIt-Anchor" href="#ä¸»é”®ä¼˜åŒ–"></a> ä¸»é”®ä¼˜åŒ–</h3><p>æ•°æ®ç»„ç»‡æ–¹å¼ï¼šåœ¨InnoDBå­˜å‚¨å¼•æ“ä¸­ï¼Œè¡¨æ•°æ®éƒ½æ˜¯æ ¹æ®ä¸»é”®é¡ºåºç»„ç»‡å­˜æ”¾çš„ï¼Œè¿™ç§å­˜å‚¨æ–¹å¼çš„è¡¨ç§°ä¸ºç´¢å¼•ç»„ç»‡è¡¨ï¼ˆIndex organized table, IOTï¼‰</p><p>é¡µåˆ†è£‚ï¼šé¡µå¯ä»¥ä¸ºç©ºï¼Œä¹Ÿå¯ä»¥å¡«å……ä¸€èˆ¬ï¼Œä¹Ÿå¯ä»¥å¡«å……100%ï¼Œæ¯ä¸ªé¡µåŒ…å«äº†2-Nè¡Œæ•°æ®ï¼ˆå¦‚æœä¸€è¡Œæ•°æ®è¿‡å¤§ï¼Œä¼šè¡Œæº¢å‡ºï¼‰ï¼Œæ ¹æ®ä¸»é”®æ’åˆ—ã€‚<br />é¡µåˆå¹¶ï¼šå½“åˆ é™¤ä¸€è¡Œè®°å½•æ—¶ï¼Œå®é™…ä¸Šè®°å½•å¹¶æ²¡æœ‰è¢«ç‰©ç†åˆ é™¤ï¼Œåªæ˜¯è®°å½•è¢«æ ‡è®°ï¼ˆflagedï¼‰ä¸ºåˆ é™¤å¹¶ä¸”å®ƒçš„ç©ºé—´å˜å¾—å…è®¸è¢«å…¶ä»–è®°å½•å£°æ˜ä½¿ç”¨ã€‚å½“é¡µä¸­åˆ é™¤çš„è®°å½•åˆ°è¾¾ MERGE_THRESHOLDï¼ˆé»˜è®¤ä¸ºé¡µçš„50%ï¼‰ï¼ŒInnoDBä¼šå¼€å§‹å¯»æ‰¾æœ€é è¿‘çš„é¡µï¼ˆå‰åï¼‰çœ‹çœ‹æ˜¯å¦å¯ä»¥å°†è¿™ä¸¤ä¸ªé¡µåˆå¹¶ä»¥ä¼˜åŒ–ç©ºé—´ä½¿ç”¨ã€‚</p><p>MERGE_THRESHOLDï¼šåˆå¹¶é¡µçš„é˜ˆå€¼ï¼Œå¯ä»¥è‡ªå·±è®¾ç½®ï¼Œåœ¨åˆ›å»ºè¡¨æˆ–åˆ›å»ºç´¢å¼•æ—¶æŒ‡å®š</p><blockquote><p>æ–‡å­—è¯´æ˜ä¸å¤Ÿæ¸…æ™°æ˜äº†ï¼Œå…·ä½“å¯ä»¥çœ‹è§†é¢‘é‡Œçš„PPTæ¼”ç¤ºè¿‡ç¨‹ï¼š<a href="https://www.bilibili.com/video/BV1Kr4y1i7ru?p=90">https://www.bilibili.com/video/BV1Kr4y1i7ru?p=90</a></p></blockquote><p>ä¸»é”®è®¾è®¡åŸåˆ™ï¼š</p><ul><li>æ»¡è¶³ä¸šåŠ¡éœ€æ±‚çš„æƒ…å†µä¸‹ï¼Œå°½é‡é™ä½ä¸»é”®çš„é•¿åº¦</li><li>æ’å…¥æ•°æ®æ—¶ï¼Œå°½é‡é€‰æ‹©é¡ºåºæ’å…¥ï¼Œé€‰æ‹©ä½¿ç”¨ AUTO_INCREMENT è‡ªå¢ä¸»é”®</li><li>å°½é‡ä¸è¦ä½¿ç”¨ UUID åšä¸»é”®æˆ–è€…æ˜¯å…¶ä»–çš„è‡ªç„¶ä¸»é”®ï¼Œå¦‚èº«ä»½è¯å·</li><li>ä¸šåŠ¡æ“ä½œæ—¶ï¼Œé¿å…å¯¹ä¸»é”®çš„ä¿®æ”¹</li></ul><h3 id="order-byä¼˜åŒ–"><a class="markdownIt-Anchor" href="#order-byä¼˜åŒ–"></a> order byä¼˜åŒ–</h3><ol><li>Using filesortï¼šé€šè¿‡è¡¨çš„ç´¢å¼•æˆ–å…¨è¡¨æ‰«æï¼Œè¯»å–æ»¡è¶³æ¡ä»¶çš„æ•°æ®è¡Œï¼Œç„¶ååœ¨æ’åºç¼“å†²åŒº sort buffer ä¸­å®Œæˆæ’åºæ“ä½œï¼Œæ‰€æœ‰ä¸æ˜¯é€šè¿‡ç´¢å¼•ç›´æ¥è¿”å›æ’åºç»“æœçš„æ’åºéƒ½å« FileSort æ’åº</li><li>Using indexï¼šé€šè¿‡æœ‰åºç´¢å¼•é¡ºåºæ‰«æç›´æ¥è¿”å›æœ‰åºæ•°æ®ï¼Œè¿™ç§æƒ…å†µå³ä¸º using indexï¼Œä¸éœ€è¦é¢å¤–æ’åºï¼Œæ“ä½œæ•ˆç‡é«˜</li></ol><p>å¦‚æœorder byå­—æ®µå…¨éƒ¨ä½¿ç”¨å‡åºæ’åºæˆ–è€…é™åºæ’åºï¼Œåˆ™éƒ½ä¼šèµ°ç´¢å¼•ï¼Œä½†æ˜¯å¦‚æœä¸€ä¸ªå­—æ®µå‡åºæ’åºï¼Œå¦ä¸€ä¸ªå­—æ®µé™åºæ’åºï¼Œåˆ™ä¸ä¼šèµ°ç´¢å¼•ï¼Œexplainçš„extraä¿¡æ¯æ˜¾ç¤ºçš„æ˜¯<code>Using index, Using filesort</code>ï¼Œå¦‚æœè¦ä¼˜åŒ–æ‰Using filesortï¼Œåˆ™éœ€è¦å¦å¤–å†åˆ›å»ºä¸€ä¸ªç´¢å¼•ï¼Œå¦‚ï¼š<code>create index idx_user_age_phone_ad on tb_user(age asc, phone desc);</code>ï¼Œæ­¤æ—¶ä½¿ç”¨<code>select id, age, phone from tb_user order by age asc, phone desc;</code>ä¼šå…¨éƒ¨èµ°ç´¢å¼•</p><p>æ€»ç»“ï¼š</p><ul><li>æ ¹æ®æ’åºå­—æ®µå»ºç«‹åˆé€‚çš„ç´¢å¼•ï¼Œå¤šå­—æ®µæ’åºæ—¶ï¼Œä¹Ÿéµå¾ªæœ€å·¦å‰ç¼€æ³•åˆ™</li><li>å°½é‡ä½¿ç”¨è¦†ç›–ç´¢å¼•</li><li>å¤šå­—æ®µæ’åºï¼Œä¸€ä¸ªå‡åºä¸€ä¸ªé™åºï¼Œæ­¤æ—¶éœ€è¦æ³¨æ„è”åˆç´¢å¼•åœ¨åˆ›å»ºæ—¶çš„è§„åˆ™ï¼ˆASC/DESCï¼‰</li><li>å¦‚æœä¸å¯é¿å…å‡ºç°filesortï¼Œå¤§æ•°æ®é‡æ’åºæ—¶ï¼Œå¯ä»¥é€‚å½“å¢å¤§æ’åºç¼“å†²åŒºå¤§å° sort_buffer_sizeï¼ˆé»˜è®¤256kï¼‰</li></ul><h3 id="group-byä¼˜åŒ–"><a class="markdownIt-Anchor" href="#group-byä¼˜åŒ–"></a> group byä¼˜åŒ–</h3><ul><li>åœ¨åˆ†ç»„æ“ä½œæ—¶ï¼Œå¯ä»¥é€šè¿‡ç´¢å¼•æ¥æé«˜æ•ˆç‡</li><li>åˆ†ç»„æ“ä½œæ—¶ï¼Œç´¢å¼•çš„ä½¿ç”¨ä¹Ÿæ˜¯æ»¡è¶³æœ€å·¦å‰ç¼€æ³•åˆ™çš„</li></ul><p>å¦‚ç´¢å¼•ä¸º<code>idx_user_pro_age_stat</code>ï¼Œåˆ™å¥å¼å¯ä»¥æ˜¯<code>select ... where profession order by age</code>ï¼Œè¿™æ ·ä¹Ÿç¬¦åˆæœ€å·¦å‰ç¼€æ³•åˆ™</p><h3 id="limitä¼˜åŒ–"><a class="markdownIt-Anchor" href="#limitä¼˜åŒ–"></a> limitä¼˜åŒ–</h3><p>å¸¸è§çš„é—®é¢˜å¦‚<code>limit 2000000, 10</code>ï¼Œæ­¤æ—¶éœ€è¦ MySQL æ’åºå‰2000000æ¡è®°å½•ï¼Œä½†ä»…ä»…è¿”å›2000000 - 2000010çš„è®°å½•ï¼Œå…¶ä»–è®°å½•ä¸¢å¼ƒï¼ŒæŸ¥è¯¢æ’åºçš„ä»£ä»·éå¸¸å¤§ã€‚<br />ä¼˜åŒ–æ–¹æ¡ˆï¼šä¸€èˆ¬åˆ†é¡µæŸ¥è¯¢æ—¶ï¼Œé€šè¿‡åˆ›å»ºè¦†ç›–ç´¢å¼•èƒ½å¤Ÿæ¯”è¾ƒå¥½åœ°æé«˜æ€§èƒ½ï¼Œå¯ä»¥é€šè¿‡è¦†ç›–ç´¢å¼•åŠ å­æŸ¥è¯¢å½¢å¼è¿›è¡Œä¼˜åŒ–</p><p>ä¾‹å¦‚ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">-- æ­¤è¯­å¥è€—æ—¶å¾ˆé•¿</span><br><span class="line">select * from tb_sku limit 9000000, 10;</span><br><span class="line">-- é€šè¿‡è¦†ç›–ç´¢å¼•åŠ å¿«é€Ÿåº¦ï¼Œç›´æ¥é€šè¿‡ä¸»é”®ç´¢å¼•è¿›è¡Œæ’åºåŠæŸ¥è¯¢</span><br><span class="line">select id from tb_sku order by id limit 9000000, 10;</span><br><span class="line">-- ä¸‹é¢çš„è¯­å¥æ˜¯é”™è¯¯çš„ï¼Œå› ä¸º MySQL ä¸æ”¯æŒ in é‡Œé¢ä½¿ç”¨ limit</span><br><span class="line">-- select * from tb_sku where id in (select id from tb_sku order by id limit 9000000, 10);</span><br><span class="line">-- é€šè¿‡è¿è¡¨æŸ¥è¯¢å³å¯å®ç°ç¬¬ä¸€å¥çš„æ•ˆæœï¼Œå¹¶ä¸”èƒ½è¾¾åˆ°ç¬¬äºŒå¥çš„é€Ÿåº¦</span><br><span class="line">select * from tb_sku as s, (select id from tb_sku order by id limit 9000000, 10) as a where s.id = a.id;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="countä¼˜åŒ–"><a class="markdownIt-Anchor" href="#countä¼˜åŒ–"></a> countä¼˜åŒ–</h3><p>MyISAM å¼•æ“æŠŠä¸€ä¸ªè¡¨çš„æ€»è¡Œæ•°å­˜åœ¨äº†ç£ç›˜ä¸Šï¼Œå› æ­¤æ‰§è¡Œ count(*) çš„æ—¶å€™ä¼šç›´æ¥è¿”å›è¿™ä¸ªæ•°ï¼Œæ•ˆç‡å¾ˆé«˜ï¼ˆå‰ææ˜¯ä¸é€‚ç”¨whereï¼‰ï¼›<br />InnoDB åœ¨æ‰§è¡Œ count(*) æ—¶ï¼Œéœ€è¦æŠŠæ•°æ®ä¸€è¡Œä¸€è¡Œåœ°ä»å¼•æ“é‡Œé¢è¯»å‡ºæ¥ï¼Œç„¶åç´¯è®¡è®¡æ•°ã€‚<br />ä¼˜åŒ–æ–¹æ¡ˆï¼šè‡ªå·±è®¡æ•°ï¼Œå¦‚åˆ›å»ºkey-valueè¡¨å­˜å‚¨åœ¨å†…å­˜æˆ–ç¡¬ç›˜ï¼Œæˆ–è€…æ˜¯ç”¨redis</p><p>countçš„å‡ ç§ç”¨æ³•ï¼š</p><ul><li>å¦‚æœcountå‡½æ•°çš„å‚æ•°ï¼ˆcounté‡Œé¢å†™çš„é‚£ä¸ªå­—æ®µï¼‰ä¸æ˜¯NULLï¼ˆå­—æ®µå€¼ä¸ä¸ºNULLï¼‰ï¼Œç´¯è®¡å€¼å°±åŠ ä¸€ï¼Œæœ€åè¿”å›ç´¯è®¡å€¼</li><li>ç”¨æ³•ï¼šcount(*)ã€count(ä¸»é”®)ã€count(å­—æ®µ)ã€count(1)</li><li>count(ä¸»é”®)è·Ÿcount(*)ä¸€æ ·ï¼Œå› ä¸ºä¸»é”®ä¸èƒ½ä¸ºç©ºï¼›count(å­—æ®µ)åªè®¡ç®—å­—æ®µå€¼ä¸ä¸ºNULLçš„è¡Œï¼›count(1)å¼•æ“ä¼šä¸ºæ¯è¡Œæ·»åŠ ä¸€ä¸ª1ï¼Œç„¶åå°±countè¿™ä¸ª1ï¼Œè¿”å›ç»“æœä¹Ÿè·Ÿcount(*)ä¸€æ ·ï¼›count(null)è¿”å›0</li></ul><p>å„ç§ç”¨æ³•çš„æ€§èƒ½ï¼š</p><ul><li>count(ä¸»é”®)ï¼šInnoDBå¼•æ“ä¼šéå†æ•´å¼ è¡¨ï¼ŒæŠŠæ¯è¡Œçš„ä¸»é”®idå€¼éƒ½å–å‡ºæ¥ï¼Œè¿”å›ç»™æœåŠ¡å±‚ï¼ŒæœåŠ¡å±‚æ‹¿åˆ°ä¸»é”®åï¼Œç›´æ¥æŒ‰è¡Œè¿›è¡Œç´¯åŠ ï¼ˆä¸»é”®ä¸å¯èƒ½ä¸ºç©ºï¼‰</li><li>count(å­—æ®µ)ï¼šæ²¡æœ‰not nullçº¦æŸçš„è¯ï¼ŒInnoDBå¼•æ“ä¼šéå†æ•´å¼ è¡¨æŠŠæ¯ä¸€è¡Œçš„å­—æ®µå€¼éƒ½å–å‡ºæ¥ï¼Œè¿”å›ç»™æœåŠ¡å±‚ï¼ŒæœåŠ¡å±‚åˆ¤æ–­æ˜¯å¦ä¸ºnullï¼Œä¸ä¸ºnullï¼Œè®¡æ•°ç´¯åŠ ï¼›æœ‰not nullçº¦æŸçš„è¯ï¼ŒInnoDBå¼•æ“ä¼šéå†æ•´å¼ è¡¨æŠŠæ¯ä¸€è¡Œçš„å­—æ®µå€¼éƒ½å–å‡ºæ¥ï¼Œè¿”å›ç»™æœåŠ¡å±‚ï¼Œç›´æ¥æŒ‰è¡Œè¿›è¡Œç´¯åŠ </li><li>count(1)ï¼šInnoDB å¼•æ“éå†æ•´å¼ è¡¨ï¼Œä½†ä¸å–å€¼ã€‚æœåŠ¡å±‚å¯¹äºè¿”å›çš„æ¯ä¸€å±‚ï¼Œæ”¾ä¸€ä¸ªæ•°å­— 1 è¿›å»ï¼Œç›´æ¥æŒ‰è¡Œè¿›è¡Œç´¯åŠ </li><li>count(*)ï¼šInnoDB å¼•æ“å¹¶ä¸ä¼šæŠŠå…¨éƒ¨å­—æ®µå–å‡ºæ¥ï¼Œè€Œæ˜¯ä¸“é—¨åšäº†ä¼˜åŒ–ï¼Œä¸å–å€¼ï¼ŒæœåŠ¡å±‚ç›´æ¥æŒ‰è¡Œè¿›è¡Œç´¯åŠ </li></ul><p>æŒ‰æ•ˆç‡æ’åºï¼šcount(å­—æ®µ) &lt; count(ä¸»é”®) &lt; count(1) &lt; count(*)ï¼Œæ‰€ä»¥å°½é‡ä½¿ç”¨ count(*)</p><h3 id="updateä¼˜åŒ–é¿å…è¡Œé”å‡çº§ä¸ºè¡¨é”"><a class="markdownIt-Anchor" href="#updateä¼˜åŒ–é¿å…è¡Œé”å‡çº§ä¸ºè¡¨é”"></a> updateä¼˜åŒ–ï¼ˆé¿å…è¡Œé”å‡çº§ä¸ºè¡¨é”ï¼‰</h3><p>InnoDB çš„è¡Œé”æ˜¯é’ˆå¯¹ç´¢å¼•åŠ çš„é”ï¼Œä¸æ˜¯é’ˆå¯¹è®°å½•åŠ çš„é”ï¼Œå¹¶ä¸”è¯¥ç´¢å¼•ä¸èƒ½å¤±æ•ˆï¼Œå¦åˆ™ä¼šä»è¡Œé”å‡çº§ä¸ºè¡¨é”ã€‚</p><p>å¦‚ä»¥ä¸‹ä¸¤æ¡è¯­å¥ï¼š<br /><code>update student set no = '123' where id = 1;</code>ï¼Œè¿™å¥ç”±äºidæœ‰ä¸»é”®ç´¢å¼•ï¼Œæ‰€ä»¥åªä¼šé”è¿™ä¸€è¡Œï¼›<br /><code>update student set no = '123' where name = 'test';</code>ï¼Œè¿™å¥ç”±äºnameæ²¡æœ‰ç´¢å¼•ï¼Œæ‰€ä»¥ä¼šæŠŠæ•´å¼ è¡¨éƒ½é”ä½è¿›è¡Œæ•°æ®æ›´æ–°ï¼Œè§£å†³æ–¹æ³•æ˜¯ç»™nameå­—æ®µæ·»åŠ ç´¢å¼•</p><h1 id="æ•°æ®ç±»å‹"><a class="markdownIt-Anchor" href="#æ•°æ®ç±»å‹"></a> æ•°æ®ç±»å‹</h1><h2 id="æ•´å‹"><a class="markdownIt-Anchor" href="#æ•´å‹"></a> æ•´å‹</h2><table><thead><tr><th>ç±»å‹åç§°</th><th>å–å€¼èŒƒå›´</th><th>å¤§å°</th></tr></thead><tbody><tr><td>TINYINT</td><td>-128ã€œ127</td><td>1ä¸ªå­—èŠ‚</td></tr><tr><td>SMALLINT</td><td>-32768ã€œ32767</td><td>2ä¸ªå®‡èŠ‚</td></tr><tr><td>MEDIUMINT</td><td>-8388608ã€œ8388607</td><td>3ä¸ªå­—èŠ‚</td></tr><tr><td>INT (INTEGHR)</td><td>-2147483648ã€œ2147483647</td><td>4ä¸ªå­—èŠ‚</td></tr><tr><td>BIGINT</td><td>-9223372036854775808ã€œ9223372036854775807</td><td>8ä¸ªå­—èŠ‚</td></tr></tbody></table><p>æ— ç¬¦å·åœ¨æ•°æ®ç±»å‹ååŠ  unsigned å…³é”®å­—ã€‚</p><h2 id="æµ®ç‚¹å‹"><a class="markdownIt-Anchor" href="#æµ®ç‚¹å‹"></a> æµ®ç‚¹å‹</h2><table><thead><tr><th>ç±»å‹åç§°</th><th>è¯´æ˜</th><th>å­˜å‚¨éœ€æ±‚</th></tr></thead><tbody><tr><td>FLOAT</td><td>å•ç²¾åº¦æµ®ç‚¹æ•°</td><td>4 ä¸ªå­—èŠ‚</td></tr><tr><td>DOUBLE</td><td>åŒç²¾åº¦æµ®ç‚¹æ•°</td><td>8 ä¸ªå­—èŠ‚</td></tr><tr><td>DECIMAL (M, D)ï¼ŒDEC</td><td>å‹ç¼©çš„â€œä¸¥æ ¼â€å®šç‚¹æ•°</td><td>M+2 ä¸ªå­—èŠ‚</td></tr></tbody></table><h2 id="æ—¥æœŸå’Œæ—¶é—´"><a class="markdownIt-Anchor" href="#æ—¥æœŸå’Œæ—¶é—´"></a> æ—¥æœŸå’Œæ—¶é—´</h2><table><thead><tr><th>ç±»å‹åç§°</th><th>æ—¥æœŸæ ¼å¼</th><th>æ—¥æœŸèŒƒå›´</th><th>å­˜å‚¨éœ€æ±‚</th></tr></thead><tbody><tr><td>YEAR</td><td>YYYY</td><td>1901 ~ 2155</td><td>1 ä¸ªå­—èŠ‚</td></tr><tr><td>TIME</td><td>HH:MM:SS</td><td>-838:59:59 ~ 838:59:59</td><td>3 ä¸ªå­—èŠ‚</td></tr><tr><td>DATE</td><td>YYYY-MM-DD</td><td>1000-01-01 ~ 9999-12-3</td><td>3 ä¸ªå­—èŠ‚</td></tr><tr><td>DATETIME</td><td>YYYY-MM-DD HH:MM:SS</td><td>1000-01-01 00:00:00 ~ 9999-12-31 23:59:59</td><td>8 ä¸ªå­—èŠ‚</td></tr><tr><td>TIMESTAMP</td><td>YYYY-MM-DD HH:MM:SS</td><td>1980-01-01 00:00:01 UTC ~ 2040-01-19 03:14:07 UTC</td><td>4 ä¸ªå­—èŠ‚</td></tr></tbody></table><h2 id="å­—ç¬¦ä¸²"><a class="markdownIt-Anchor" href="#å­—ç¬¦ä¸²"></a> å­—ç¬¦ä¸²</h2><table><thead><tr><th>ç±»å‹åç§°</th><th>è¯´æ˜</th><th>å­˜å‚¨éœ€æ±‚</th></tr></thead><tbody><tr><td>CHAR(M)</td><td>å›ºå®šé•¿åº¦éäºŒè¿›åˆ¶å­—ç¬¦ä¸²</td><td>M å­—èŠ‚ï¼Œ1&lt;=M&lt;=255</td></tr><tr><td>VARCHAR(M)</td><td>å˜é•¿éäºŒè¿›åˆ¶å­—ç¬¦ä¸²</td><td>L+1å­—èŠ‚ï¼Œåœ¨æ­¤ï¼ŒL&lt; = Må’Œ 1&lt;=M&lt;=255</td></tr><tr><td>TINYTEXT</td><td>éå¸¸å°çš„éäºŒè¿›åˆ¶å­—ç¬¦ä¸²</td><td>L+1å­—èŠ‚ï¼Œåœ¨æ­¤ï¼ŒL&lt;2^8</td></tr><tr><td>TEXT</td><td>å°çš„éäºŒè¿›åˆ¶å­—ç¬¦ä¸²</td><td>L+2å­—èŠ‚ï¼Œåœ¨æ­¤ï¼ŒL&lt;2^16</td></tr><tr><td>MEDIUMTEXT</td><td>ä¸­ç­‰å¤§å°çš„éäºŒè¿›åˆ¶å­—ç¬¦ä¸²</td><td>L+3å­—èŠ‚ï¼Œåœ¨æ­¤ï¼ŒL&lt;2^24</td></tr><tr><td>LONGTEXT</td><td>å¤§çš„éäºŒè¿›åˆ¶å­—ç¬¦ä¸²</td><td>L+4å­—èŠ‚ï¼Œåœ¨æ­¤ï¼ŒL&lt;2^32</td></tr><tr><td>ENUM</td><td>æšä¸¾ç±»å‹ï¼Œåªèƒ½æœ‰ä¸€ä¸ªæšä¸¾å­—ç¬¦ä¸²å€¼</td><td>1æˆ–2ä¸ªå­—èŠ‚ï¼Œå–å†³äºæšä¸¾å€¼çš„æ•°ç›® (æœ€å¤§å€¼ä¸º65535)</td></tr><tr><td>SET</td><td>ä¸€ä¸ªè®¾ç½®ï¼Œå­—ç¬¦ä¸²å¯¹è±¡å¯ä»¥æœ‰é›¶ä¸ªæˆ– å¤šä¸ªSETæˆå‘˜</td><td>1ã€2ã€3ã€4æˆ–8ä¸ªå­—èŠ‚ï¼Œå–å†³äºé›†åˆ æˆå‘˜çš„æ•°é‡ï¼ˆæœ€å¤š64ä¸ªæˆå‘˜ï¼‰</td></tr></tbody></table><h2 id="äºŒè¿›åˆ¶ç±»å‹"><a class="markdownIt-Anchor" href="#äºŒè¿›åˆ¶ç±»å‹"></a> äºŒè¿›åˆ¶ç±»å‹</h2><table><thead><tr><th>ç±»å‹åç§°</th><th>è¯´æ˜</th><th>å­˜å‚¨éœ€æ±‚</th></tr></thead><tbody><tr><td>BIT(M)</td><td>ä½å­—æ®µç±»å‹</td><td>å¤§çº¦ (M+7)/8 å­—èŠ‚</td></tr><tr><td>BINARY(M)</td><td>å›ºå®šé•¿åº¦äºŒè¿›åˆ¶å­—ç¬¦ä¸²</td><td>M å­—èŠ‚</td></tr><tr><td>VARBINARY (M)</td><td>å¯å˜é•¿åº¦äºŒè¿›åˆ¶å­—ç¬¦ä¸²</td><td>M+1 å­—èŠ‚</td></tr><tr><td>TINYBLOB (M)</td><td>éå¸¸å°çš„BLOB</td><td>L+1 å­—èŠ‚ï¼Œåœ¨æ­¤ï¼ŒL&lt;2^8</td></tr><tr><td>BLOB (M)</td><td>å° BLOB</td><td>L+2 å­—èŠ‚ï¼Œåœ¨æ­¤ï¼ŒL&lt;2^16</td></tr><tr><td>MEDIUMBLOB (M)</td><td>ä¸­ç­‰å¤§å°çš„BLOB</td><td>L+3 å­—èŠ‚ï¼Œåœ¨æ­¤ï¼ŒL&lt;2^24</td></tr><tr><td>LONGBLOB (M)</td><td>éå¸¸å¤§çš„BLOB</td><td>L+4 å­—èŠ‚ï¼Œåœ¨æ­¤ï¼ŒL&lt;2^32</td></tr></tbody></table><h1 id="æƒé™ä¸€è§ˆè¡¨"><a class="markdownIt-Anchor" href="#æƒé™ä¸€è§ˆè¡¨"></a> æƒé™ä¸€è§ˆè¡¨</h1><blockquote><p>å…·ä½“æƒé™çš„ä½œç”¨è¯¦è§<a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html" title="å®˜æ–¹æ–‡æ¡£">å®˜æ–¹æ–‡æ¡£</a></p></blockquote><p>GRANT å’Œ REVOKE å…è®¸çš„é™æ€æƒé™</p><table><thead><tr><th style="text-align:left">Privilege</th><th style="text-align:left">Grant Table Column</th><th style="text-align:left">Context</th></tr></thead><tbody><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_all"><code>ALL [PRIVILEGES]</code></a></td><td style="text-align:left">Synonym for â€œall privilegesâ€</td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_alter"><code>ALTER</code></a></td><td style="text-align:left"><code>Alter_priv</code></td><td style="text-align:left">Tables</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_alter-routine"><code>ALTER ROUTINE</code></a></td><td style="text-align:left"><code>Alter_routine_priv</code></td><td style="text-align:left">Stored routines</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_create"><code>CREATE</code></a></td><td style="text-align:left"><code>Create_priv</code></td><td style="text-align:left">Databases, tables, or indexes</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_create-role"><code>CREATE ROLE</code></a></td><td style="text-align:left"><code>Create_role_priv</code></td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_create-routine"><code>CREATE ROUTINE</code></a></td><td style="text-align:left"><code>Create_routine_priv</code></td><td style="text-align:left">Stored routines</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_create-tablespace"><code>CREATE TABLESPACE</code></a></td><td style="text-align:left"><code>Create_tablespace_priv</code></td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_create-temporary-tables"><code>CREATE TEMPORARY TABLES</code></a></td><td style="text-align:left"><code>Create_tmp_table_priv</code></td><td style="text-align:left">Tables</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_create-user"><code>CREATE USER</code></a></td><td style="text-align:left"><code>Create_user_priv</code></td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_create-view"><code>CREATE VIEW</code></a></td><td style="text-align:left"><code>Create_view_priv</code></td><td style="text-align:left">Views</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_delete"><code>DELETE</code></a></td><td style="text-align:left"><code>Delete_priv</code></td><td style="text-align:left">Tables</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_drop"><code>DROP</code></a></td><td style="text-align:left"><code>Drop_priv</code></td><td style="text-align:left">Databases, tables, or views</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_drop-role"><code>DROP ROLE</code></a></td><td style="text-align:left"><code>Drop_role_priv</code></td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_event"><code>EVENT</code></a></td><td style="text-align:left"><code>Event_priv</code></td><td style="text-align:left">Databases</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_execute"><code>EXECUTE</code></a></td><td style="text-align:left"><code>Execute_priv</code></td><td style="text-align:left">Stored routines</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_file"><code>FILE</code></a></td><td style="text-align:left"><code>File_priv</code></td><td style="text-align:left">File access on server host</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_grant-option"><code>GRANT OPTION</code></a></td><td style="text-align:left"><code>Grant_priv</code></td><td style="text-align:left">Databases, tables, or stored routines</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_index"><code>INDEX</code></a></td><td style="text-align:left"><code>Index_priv</code></td><td style="text-align:left">Tables</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_insert"><code>INSERT</code></a></td><td style="text-align:left"><code>Insert_priv</code></td><td style="text-align:left">Tables or columns</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_lock-tables"><code>LOCK TABLES</code></a></td><td style="text-align:left"><code>Lock_tables_priv</code></td><td style="text-align:left">Databases</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_process"><code>PROCESS</code></a></td><td style="text-align:left"><code>Process_priv</code></td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_proxy"><code>PROXY</code></a></td><td style="text-align:left">See <code>proxies_priv</code> table</td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_references"><code>REFERENCES</code></a></td><td style="text-align:left"><code>References_priv</code></td><td style="text-align:left">Databases or tables</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_reload"><code>RELOAD</code></a></td><td style="text-align:left"><code>Reload_priv</code></td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_replication-client"><code>REPLICATION CLIENT</code></a></td><td style="text-align:left"><code>Repl_client_priv</code></td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_replication-slave"><code>REPLICATION SLAVE</code></a></td><td style="text-align:left"><code>Repl_slave_priv</code></td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_select"><code>SELECT</code></a></td><td style="text-align:left"><code>Select_priv</code></td><td style="text-align:left">Tables or columns</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_show-databases"><code>SHOW DATABASES</code></a></td><td style="text-align:left"><code>Show_db_priv</code></td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_show-view"><code>SHOW VIEW</code></a></td><td style="text-align:left"><code>Show_view_priv</code></td><td style="text-align:left">Views</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_shutdown"><code>SHUTDOWN</code></a></td><td style="text-align:left"><code>Shutdown_priv</code></td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_super"><code>SUPER</code></a></td><td style="text-align:left"><code>Super_priv</code></td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_trigger"><code>TRIGGER</code></a></td><td style="text-align:left"><code>Trigger_priv</code></td><td style="text-align:left">Tables</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_update"><code>UPDATE</code></a></td><td style="text-align:left"><code>Update_priv</code></td><td style="text-align:left">Tables or columns</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_usage"><code>USAGE</code></a></td><td style="text-align:left">Synonym for â€œno privilegesâ€</td><td style="text-align:left">Server administration</td></tr></tbody></table><p>GRANT å’Œ REVOKE å…è®¸çš„åŠ¨æ€æƒé™</p><table><thead><tr><th style="text-align:left">Privilege</th><th style="text-align:left">Context</th></tr></thead><tbody><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_application-password-admin"><code>APPLICATION_PASSWORD_ADMIN</code></a></td><td style="text-align:left">Dual password administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_audit-abort-exempt"><code>AUDIT_ABORT_EXEMPT</code></a></td><td style="text-align:left">Allow queries blocked by audit log filter</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_audit-admin"><code>AUDIT_ADMIN</code></a></td><td style="text-align:left">Audit log administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_authentication-policy-admin"><code>AUTHENTICATION_POLICY_ADMIN</code></a></td><td style="text-align:left">Authentication administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_backup-admin"><code>BACKUP_ADMIN</code></a></td><td style="text-align:left">Backup administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_binlog-admin"><code>BINLOG_ADMIN</code></a></td><td style="text-align:left">Backup and Replication administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_binlog-encryption-admin"><code>BINLOG_ENCRYPTION_ADMIN</code></a></td><td style="text-align:left">Backup and Replication administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_clone-admin"><code>CLONE_ADMIN</code></a></td><td style="text-align:left">Clone administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_connection-admin"><code>CONNECTION_ADMIN</code></a></td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_encryption-key-admin"><code>ENCRYPTION_KEY_ADMIN</code></a></td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_firewall-admin"><code>FIREWALL_ADMIN</code></a></td><td style="text-align:left">Firewall administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_firewall-exempt"><code>FIREWALL_EXEMPT</code></a></td><td style="text-align:left">Firewall administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_firewall-user"><code>FIREWALL_USER</code></a></td><td style="text-align:left">Firewall administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_flush-optimizer-costs"><code>FLUSH_OPTIMIZER_COSTS</code></a></td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_flush-status"><code>FLUSH_STATUS</code></a></td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_flush-tables"><code>FLUSH_TABLES</code></a></td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_flush-user-resources"><code>FLUSH_USER_RESOURCES</code></a></td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_group-replication-admin"><code>GROUP_REPLICATION_ADMIN</code></a></td><td style="text-align:left">Replication administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_group-replication-stream"><code>GROUP_REPLICATION_STREAM</code></a></td><td style="text-align:left">Replication administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_innodb-redo-log-archive"><code>INNODB_REDO_LOG_ARCHIVE</code></a></td><td style="text-align:left">Redo log archiving administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_ndb-stored-user"><code>NDB_STORED_USER</code></a></td><td style="text-align:left">NDB Cluster</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_passwordless-user-admin"><code>PASSWORDLESS_USER_ADMIN</code></a></td><td style="text-align:left">Authentication administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_persist-ro-variables-admin"><code>PERSIST_RO_VARIABLES_ADMIN</code></a></td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_replication-applier"><code>REPLICATION_APPLIER</code></a></td><td style="text-align:left"><code>PRIVILEGE_CHECKS_USER</code> for a replication channel</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_replication-slave-admin"><code>REPLICATION_SLAVE_ADMIN</code></a></td><td style="text-align:left">Replication administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_resource-group-admin"><code>RESOURCE_GROUP_ADMIN</code></a></td><td style="text-align:left">Resource group administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_resource-group-user"><code>RESOURCE_GROUP_USER</code></a></td><td style="text-align:left">Resource group administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_role-admin"><code>ROLE_ADMIN</code></a></td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_session-variables-admin"><code>SESSION_VARIABLES_ADMIN</code></a></td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_set-user-id"><code>SET_USER_ID</code></a></td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_show-routine"><code>SHOW_ROUTINE</code></a></td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_system-user"><code>SYSTEM_USER</code></a></td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_system-variables-admin"><code>SYSTEM_VARIABLES_ADMIN</code></a></td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_table-encryption-admin"><code>TABLE_ENCRYPTION_ADMIN</code></a></td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_version-token-admin"><code>VERSION_TOKEN_ADMIN</code></a></td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_xa-recover-admin"><code>XA_RECOVER_ADMIN</code></a></td><td style="text-align:left">Server administration</td></tr></tbody></table><h1 id="å›¾å½¢åŒ–ç•Œé¢å·¥å…·"><a class="markdownIt-Anchor" href="#å›¾å½¢åŒ–ç•Œé¢å·¥å…·"></a> å›¾å½¢åŒ–ç•Œé¢å·¥å…·</h1><ul><li>Workbench(å…è´¹): <a href="http://dev.mysql.com/downloads/workbench/">http://dev.mysql.com/downloads/workbench/</a></li><li>navicat(æ”¶è´¹ï¼Œè¯•ç”¨ç‰ˆ30å¤©): <a href="https://www.navicat.com/en/download/navicat-for-mysql">https://www.navicat.com/en/download/navicat-for-mysql</a></li><li>Sequel Pro(å¼€æºå…è´¹ï¼Œä»…æ”¯æŒMac OS): <a href="http://www.sequelpro.com/">http://www.sequelpro.com/</a></li><li>HeidiSQL(å…è´¹): <a href="http://www.heidisql.com/">http://www.heidisql.com/</a></li><li>phpMyAdmin(å…è´¹): <a href="https://www.phpmyadmin.net/">https://www.phpmyadmin.net/</a></li><li>SQLyog: <a href="https://sqlyog.en.softonic.com/">https://sqlyog.en.softonic.com/</a></li></ul><h1 id="å®‰è£…"><a class="markdownIt-Anchor" href="#å®‰è£…"></a> å®‰è£…</h1><h1 id="å°æŠ€å·§"><a class="markdownIt-Anchor" href="#å°æŠ€å·§"></a> å°æŠ€å·§</h1><ol><li>åœ¨SQLè¯­å¥ä¹‹ååŠ ä¸Š<code>\G</code>ä¼šå°†ç»“æœçš„è¡¨æ ¼å½¢å¼è½¬æ¢æˆè¡Œæ–‡æœ¬å½¢å¼</li><li>æŸ¥çœ‹Mysqlæ•°æ®åº“å ç”¨ç©ºé—´ï¼š</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SELECT table_schema &quot;Database Name&quot;</span><br><span class="line">     , SUM(data_length + index_length) / (1024 * 1024) &quot;Database Size in MB&quot;</span><br><span class="line">FROM information_schema.TABLES</span><br><span class="line">GROUP BY table_schema;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="åç»­å†…å®¹"><a class="markdownIt-Anchor" href="#åç»­å†…å®¹"></a> åç»­å†…å®¹</h1><p>åç»­å†…å®¹å› ä¸ºè·Ÿå½“å‰å­¦ä¹ ã€å·¥ä½œè®¡åˆ’æœ‰å†²çªï¼Œæ‰€ä»¥åç»­è¯¾ç¨‹çš„å­¦ä¹ è®¡åˆ’ä¼šæ— é™æœŸæ¨åã€‚<br />ç›®å‰çš„å·¥ä½œé‡ç‚¹æ”¾åœ¨é‡åšä¸€ä¸ªå­¦ä¹ ç¬”è®°ç½‘ç«™ï¼Œå½“ç„¶è¿™æ˜¯è¾¹åšè¾¹å­¦çš„ï¼Œå¼€å‘è¿‡ç¨‹ä¸­é‡åˆ°çš„éš¾ç‚¹å’ŒçŸ¥è¯†ç‚¹æˆ‘ä¹Ÿä¼šè®°å½•ä¸‹æ¥ä¾›å¤§å®¶å­¦ä¹ ã€‚<br /><strong>åœ¨æ­¤æ„Ÿè°¢Bç«™åŒæ ·çˆ±å­¦ä¹ çš„åŒå­¦ @å®ˆå¿ƒ-äºº æä¾›çš„åç»­è¯¾ç¨‹ç¬”è®°ï¼Œå¤§å®¶æœ‰æ¡ä»¶ä¸€å®šè¦å»ç»™ä¸ªstarï¼Œä½ çš„æ¯ä¸€ä¸ªstarå’Œç‚¹èµéƒ½æ˜¯æˆ‘ä»¬å‰è¿›çš„åŠ¨åŠ›</strong><br /><strong><a href="https://github.com/Buildings-Lei/mysql_note/blob/main/README.md">https://github.com/Buildings-Lei/mysql_note/blob/main/README.md</a></strong></p>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°æ®åº“ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2023YNUè¿æ–°æ¯ç¨‹åºè®¾è®¡å¤§èµ›ã®é¢˜è§£</title>
      <link href="/posts/52957.html"/>
      <url>/posts/52957.html</url>
      
        <content type="html"><![CDATA[<h1 id="awelcome-to-yunnan"><a class="markdownIt-Anchor" href="#awelcome-to-yunnan"></a> Aï¼šWelcome to Yunnanï¼</h1><p>ã€çŸ¥è¯†ç‚¹ã€‘ æ•°å­¦ã€æ€ç»´é¢˜</p><p>ã€ideaã€‘</p><p>å‡å¦‚ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span> æ˜¯ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span> çš„å€æ•°ï¼Œç›´æ¥æ¯ä¸ªç¢Ÿå­æ”¾1ä¸ªå³å¯ï¼›</p><p>å¦åˆ™ï¼Œç”±äºæ¯ä¸ªç¢Ÿå­è‡³å°‘æ”¾ä¸€ä¸ªï¼Œæˆ‘ä»¬å…ˆåœ¨æ¯ä¸ªç¢Ÿå­å†…æ”¾ä¸€ä¸ª</p><p>ç„¶åæ‰¾åˆ°æ¯”nå¤§çš„ç¬¬ä¸€ä¸ªkçš„å€æ•°ï¼ŒæŠŠç›¸å·®çš„è¿™ä¹ˆå¤šä¸ªå‡åˆ†åˆ° <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span> ä¸ªç¢Ÿå­</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n, k;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; k;</span><br><span class="line">    <span class="keyword">if</span>(n % k == <span class="number">0</span>) &#123;</span><br><span class="line">        cout &lt;&lt; <span class="number">1</span> &lt;&lt; endl;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        ll sum = (n + k - <span class="number">1</span>) / k * k; <span class="comment">//æ‰¾åˆ°æ¯”nå¤§çš„ç¬¬ä¸€ä¸ªkçš„å€æ•°</span></span><br><span class="line">        ll r = sum - n;</span><br><span class="line">        cout &lt;&lt; (r+n<span class="number">-1</span>)/n + <span class="number">1</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="bwelcome-come-to-ynu"><a class="markdownIt-Anchor" href="#bwelcome-come-to-ynu"></a> Bï¼šWelcome come to YNUï¼</h1><p>ã€çŸ¥è¯†ç‚¹ã€‘é€’æ¨</p><p>ã€ideaã€‘</p><p>ynuerå‡ºç°çš„æ¬¡æ•°ï¼Œå¯é€šè¿‡æ¯ä¸€ä¸ªrä¹‹å‰å‡ºç°çš„<code>ynue</code>çš„ä¸ªæ•°ç´¯åŠ æ±‚å¾—ï¼›</p><p>åŒç†ï¼Œyuneå‡ºç°çš„æ¬¡æ•°â€¦</p><p>å…¶å®æœ¬é¢˜ä¹Ÿå¯ä»¥æ”¹ä¸ºç”¨ä¸€ä¸ªæ•°ç»„æ¥é€’æ¨ï¼Œä½†ç”±äº<code>ynuer</code>æ¯”è¾ƒçŸ­ï¼Œç”¨äº”ä¸ªå˜é‡å³å¯è¾¾åˆ°ç›®çš„ï¼›å‡å¦‚è¦æ±‚è®¡æ•°çš„å­—ç¬¦ä¸²é•¿åº¦å¾ˆé•¿ï¼Œä¹Ÿå¯ä»¥ç…§æ ·é€šè¿‡æ•°ç»„æ¥é€’æ¨ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pii pair<span class="string">&lt;int, int&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pdd pair<span class="string">&lt;double, double&gt;</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> mod = <span class="number">1e9</span><span class="number">+7</span>;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    string s;</span><br><span class="line">    cin &gt;&gt; s;</span><br><span class="line">    ll y = <span class="number">0</span>; <span class="comment">//yå‡ºç°çš„ä¸ªæ•°</span></span><br><span class="line">    ll yn = <span class="number">0</span>; <span class="comment">//ynå‡ºç°çš„ä¸ªæ•°</span></span><br><span class="line">    ll ynu = <span class="number">0</span>; <span class="comment">//ynuå‡ºç°çš„ä¸ªæ•°</span></span><br><span class="line">    ll ynue = <span class="number">0</span>; <span class="comment">//ynueå‡ºç°çš„ä¸ªæ•°</span></span><br><span class="line">    ll res = <span class="number">0</span>; <span class="comment">//ynuerå‡ºç°çš„ä¸ªæ•°</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">char</span> c : s) &#123;</span><br><span class="line">        <span class="keyword">if</span>(c == <span class="string">&#x27;y&#x27;</span>) y ++;</span><br><span class="line">        <span class="keyword">if</span>(c == <span class="string">&#x27;n&#x27;</span>) yn = (yn + y) % mod;</span><br><span class="line">        <span class="keyword">if</span>(c == <span class="string">&#x27;u&#x27;</span>) ynu = (ynu + yn) % mod;</span><br><span class="line">        <span class="keyword">if</span>(c == <span class="string">&#x27;e&#x27;</span>) ynue = (ynue + ynu) % mod;</span><br><span class="line">        <span class="keyword">if</span>(c == <span class="string">&#x27;r&#x27;</span>) res = (res + ynue) % mod;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; res &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="cäº‘ä¸Šçš„æ°”çƒæ´¾å¯¹"><a class="markdownIt-Anchor" href="#cäº‘ä¸Šçš„æ°”çƒæ´¾å¯¹"></a> Cï¼šäº‘ä¸Šçš„æ°”çƒæ´¾å¯¹</h1><p>ã€çŸ¥è¯†ç‚¹ã€‘æ¡¶æ€æƒ³</p><p>è€ƒå¯Ÿå¯¹ä¸€ç»´æ•°ç»„çš„ç†è§£ï¼Œä¸æ¡¶æ€æƒ³ç±»ä¼¼ï¼Œå…¸</p><p>ã€ideaã€‘</p><p>è®¾ç«‹ä¸€ä¸ªå…ƒç´ æ•°ç»„ã€ä¸€ä¸ªåœ°å€æ•°ç»„</p><p>äº¤æ¢çš„æ—¶å€™ä¸¤ä¸ªæ•°ç»„çš„å€¼éƒ½è¦æ”¹å˜ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pii pair<span class="string">&lt;int, int&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pdd pair<span class="string">&lt;double, double&gt;</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> n, q;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; q;</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">a</span><span class="params">(n<span class="number">+5</span>)</span>, <span class="title">p</span><span class="params">(n<span class="number">+5</span>)</span></span>;</span><br><span class="line">    <span class="comment">//a[i]å…ƒç´ æ•°ç»„ï¼šä»£è¡¨ç¬¬iä¸ªæ°”çƒä¸Šçš„æ•°å­—</span></span><br><span class="line">    <span class="comment">//p[i]åœ°å€æ•°ç»„ï¼šä»£è¡¨å†™æœ‰içš„æ°”çƒæ‰€åœ¨ä½ç½®ç¼–å·</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>; i&lt;=n; i++)</span><br><span class="line">        a[i] = p[i] = i;</span><br><span class="line">    <span class="keyword">while</span>(q --)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> x;</span><br><span class="line">        cin &gt;&gt; x;</span><br><span class="line">        <span class="type">int</span> p1 = p[x], p2; <span class="comment">//p1è®°å½•xçš„åŸä½ç½®ï¼Œp2è®°å½•xå°†å‰å¾€çš„ä½ç½®</span></span><br><span class="line">        <span class="keyword">if</span>(p1 != n) p2 = p1<span class="number">+1</span>;</span><br><span class="line">        <span class="keyword">else</span> p2 = p1<span class="number">-1</span>;</span><br><span class="line">        <span class="built_in">swap</span>(a[p1], a[p2]);</span><br><span class="line">        p[a[p1]] = p1;</span><br><span class="line">        p[a[p2]] = p2;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>; i&lt;=n; i++)</span><br><span class="line">        cout &lt;&lt; a[i] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="dç©¿è¶Šä¹‹æˆ‘æ˜¯æœ€ä¼Ÿå¤§çš„å¡ç‰Œå¤§å¸ˆ"><a class="markdownIt-Anchor" href="#dç©¿è¶Šä¹‹æˆ‘æ˜¯æœ€ä¼Ÿå¤§çš„å¡ç‰Œå¤§å¸ˆ"></a> Dï¼šç©¿è¶Šä¹‹æˆ‘æ˜¯æœ€ä¼Ÿå¤§çš„å¡ç‰Œå¤§å¸ˆï¼</h1><p>ã€çŸ¥è¯†ç‚¹ã€‘è´ªå¿ƒç®—æ³•</p><p>ã€ideaã€‘</p><p>æœ¬é¢˜æ”¹ç¼–è‡ªæŸä¸€å¹´ICPCäºšæ´²åŒºåŸŸèµ›ï¼ˆå—äº¬ï¼‰çš„ç­¾åˆ°é¢˜</p><p>é¦–å…ˆï¼Œè¦ä½¿p/qè¶Šå¤§ï¼Œq-1çš„æ¬¡æ•°è¶Šå¤šè¶Šå¥½ã€‚</p><p>æˆ‘ä»¬å…ˆå°½å¯èƒ½å¤šçš„æŠŠ0éƒ½å½“åš-1ä½¿ï¼Œå¦‚æœèµ°åˆ°åé¢å‘ç°å‰é¢qåŠ çš„ä¸å¤Ÿï¼Œå†æ¥çŸ«æ­£ã€‚</p><p>è¿™é‡Œæœ‰ä¸ªæŠ€å·§ï¼Œç”¨ä¸€ä¸ªtotå˜é‡æ¥è®°å½•æ­¤å‰<code>0-&gt;-1</code>çš„æ•°é‡ï¼Œå°±å¯ä»¥ç”¨O(1)å®ç°çŸ«æ­£ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pii pair<span class="string">&lt;int, int&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pdd pair<span class="string">&lt;double, double&gt;</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    </span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">a</span><span class="params">(n<span class="number">+5</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>; i&lt;=n; i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;a[i]);</span><br><span class="line">    <span class="type">int</span> p = <span class="number">1</span>, q = <span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> tot = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>; i&lt;=n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(a[i] == <span class="number">1</span>) &#123;</span><br><span class="line">            p ++, q ++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(a[i] == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span>(q &gt; <span class="number">1</span>) &#123; <span class="comment">//qè¿˜å¤§äº1ï¼Œå°±æŠŠ0å½“-1</span></span><br><span class="line">                q --;</span><br><span class="line">                tot ++;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                p ++;</span><br><span class="line">                q ++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(a[i] == <span class="number">-1</span>) &#123;</span><br><span class="line">            q --;</span><br><span class="line">            <span class="keyword">if</span>(q == <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span>(tot &gt; <span class="number">0</span>) &#123; <span class="comment">//çº æ­£ä¸€ä¸ª0</span></span><br><span class="line">                    q += <span class="number">2</span>;</span><br><span class="line">                    p ++;</span><br><span class="line">                    tot --;</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="built_in">puts</span>(<span class="string">&quot;-1&quot;</span>);</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> g = __gcd(p, q);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d %d\n&quot;</span>, p/g, q/g);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> t;</span><br><span class="line">    t = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(t--)</span><br><span class="line">        <span class="built_in">solve</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="eç©¿è¶Šä¹‹æˆ‘è¦ç©é­”å…½äº‰éœ¸"><a class="markdownIt-Anchor" href="#eç©¿è¶Šä¹‹æˆ‘è¦ç©é­”å…½äº‰éœ¸"></a> Eï¼šç©¿è¶Šä¹‹æˆ‘è¦ç©é­”å…½äº‰éœ¸ï¼</h1><p>ã€çŸ¥è¯†ç‚¹ã€‘æ€ç»´é¢˜</p><p>ã€ideaã€‘</p><p>é¦–å…ˆï¼Œæ•°æ®æ‘†åœ¨é‚£é‡Œäº†ï¼Œè¿™ä¹ˆå¤§çš„æ•°æ®ï¼Œå°±ä¸ç”¨è€ƒè™‘æš´åŠ›æ¨¡æ‹Ÿäº†ã€‚</p><p>è¿™é“é¢˜çš„è¿‡ç¨‹è™½ç„¶çœ‹ç€å¤æ‚ï¼Œä½†æ˜¯æˆ‘ä»¬ä»¥å®è§‚çš„è§†è§’å»çœ‹è¿™ä¸ªé—®é¢˜ï¼Œå…¶å®å°±æ²¡é‚£ä¹ˆå¤æ‚ã€‚</p><p>éœ€è¦é‡ç‚¹å…³æ³¨çš„æ€§è´¨ï¼š<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>+</mo><mi>y</mi><mo>â‰¤</mo><mi>n</mi></mrow><annotation encoding="application/x-tex">x+yâ‰¤n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8304100000000001em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span></p><p>æˆ‘ä»¬å¯ä»¥åˆ†ä¸¤ç±»æƒ…å†µè®¨è®ºï¼š</p><p>â‘  <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>â‰¤</mo><mi>y</mi></mrow><annotation encoding="application/x-tex">xâ‰¤y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7719400000000001em;vertical-align:-0.13597em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span> åˆ™ä¸€å®šæ¯ç§’éƒ½å¯ä»¥å¬å”¤æ°´å…ƒç´ ï¼Œå³å¯å¬å”¤mä¸ªï¼›</p><p>â‘¡ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>&gt;</mo><mi>y</mi></mrow><annotation encoding="application/x-tex">x&gt;y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span> æ—¶ï¼Œä¸€å®šä¸ä¼šè¶…è¿‡é­”æ³•å€¼ä¸Šé™ï¼Œæ‰€ä»¥<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">m</span></span></span></span>ç§’çš„æ€»é­”æ³•å€¼ä¸º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>+</mo><mo stretchy="false">(</mo><mi>m</mi><mo>âˆ’</mo><mn>1</mn><mo stretchy="false">)</mo><mo>âˆ—</mo><mi>y</mi></mrow><annotation encoding="application/x-tex">n+(m-1)*y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span>ï¼ˆå› ä¸ºæœ€åä¸€ç§’å›å¤çš„é­”æ³•å€¼æ˜¯åœ¨å¬å”¤åæ‰€ä»¥ç”¨ä¸åˆ°ï¼Œæ•…<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi><mo>âˆ’</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">m-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>ï¼‰ï¼Œå¬å”¤ä¸€ä¸ªæ°´å…ƒç´ æ¶ˆè€—<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">x</span></span></span></span>ç‚¹é­”æ³•ï¼Œæ•…å¬å”¤æ°´å…ƒç´ ä¸º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi><mi>i</mi><mi>n</mi></mrow><annotation encoding="application/x-tex">min</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathnormal">m</span><span class="mord mathnormal">i</span><span class="mord mathnormal">n</span></span></span></span> {<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi><mo separator="true">,</mo><mo stretchy="false">(</mo><mi>n</mi><mo>+</mo><mo stretchy="false">(</mo><mi>m</mi><mo>âˆ’</mo><mn>1</mn><mo stretchy="false">)</mo><mo>âˆ—</mo><mi>y</mi><mo stretchy="false">)</mo><mi mathvariant="normal">/</mi><mi>x</mi></mrow><annotation encoding="application/x-tex">m, (n+(m-1)*y)/x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">m</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mord">/</span><span class="mord mathnormal">x</span></span></span></span>}ã€‚(ä¹‹æ‰€ä»¥è¦å–minï¼Œæ˜¯å› ä¸ºå½“nå¾ˆå¤§æ—¶ï¼Œå¾—å‡ºçš„å€¼å¯èƒ½å¤§äºm)</p><p>ç»¼åˆå¯å¾—ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mi>n</mi><mi>s</mi><mo>=</mo><mi>m</mi><mi>i</mi><mi>n</mi><mo stretchy="false">(</mo><mi>m</mi><mo separator="true">,</mo><mo stretchy="false">(</mo><mi>n</mi><mo>+</mo><mo stretchy="false">(</mo><mi>m</mi><mo>âˆ’</mo><mn>1</mn><mo stretchy="false">)</mo><mo>âˆ—</mo><mi>y</mi><mo stretchy="false">)</mo><mi mathvariant="normal">/</mi><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">ans=min(m,(n+(m-1)*y)/x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">a</span><span class="mord mathnormal">n</span><span class="mord mathnormal">s</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">m</span><span class="mord mathnormal">i</span><span class="mord mathnormal">n</span><span class="mopen">(</span><span class="mord mathnormal">m</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mord">/</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span>ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pii pair<span class="string">&lt;int, int&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pdd pair<span class="string">&lt;double, double&gt;</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n, m, x, y;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m &gt;&gt; x &gt;&gt; y;</span><br><span class="line">    cout &lt;&lt; <span class="built_in">min</span>(m, ((m<span class="number">-1</span>)*y+n)/x) &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>Fun Factï¼šå‡ºè¿™é¢˜çš„æ—¶å€™å‡ºé¢˜äººä¸å†å–„è‰¯@_@æ²¡æœ‰è®©æš´åŠ›åšæ³•è¿‡ã€‚</p><p>æˆ‘ä»¬çŸ¥é“æ™®é€šcpuåœ¨1sæ—¶é™å†…å¯ä»¥åš<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><msup><mn>0</mn><mn>9</mn></msup></mrow><annotation encoding="application/x-tex">10^9</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">9</span></span></span></span></span></span></span></span></span></span></span>æ¬¡è¿ç®—ï¼Œä½†ä¸€èˆ¬åšç®—æ³•é¢˜çš„æ—¶å€™æˆ‘ä»¬éƒ½éœ€è¦æŠŠç¨‹åºçš„æœ€å¤§æ“ä½œæ•°æ§åˆ¶åœ¨<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><msup><mn>0</mn><mn>8</mn></msup></mrow><annotation encoding="application/x-tex">10^8</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">8</span></span></span></span></span></span></span></span></span></span></span>ä»¥å†…ï¼Œç”šè‡³æœ‰äº›é¢˜æ˜¯<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><msup><mn>0</mn><mn>7</mn></msup></mrow><annotation encoding="application/x-tex">10^7</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">7</span></span></span></span></span></span></span></span></span></span></span>ä»¥å†…ã€‚</p><p>è¿™æ˜¯å› ä¸ºï¼šä¸€æ–¹é¢ï¼Œä¸€ä¸ªç®—æ³•éƒ½æ˜¯ä¼šæœ‰å¸¸æ•°çš„ï¼Œåœ¨å®é™…è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œç®—æ³•çš„å¸¸æ•°ä¼šä½¿å®é™…æ“ä½œæ•°å¢å¤§ä¸€ä¸ªæˆ–å¤šä¸ªæ•°é‡çº§ï¼›å¦ä¸€æ–¹é¢æµ‹è¯„æœºè¿è¡Œå’Œæœ¬åœ°è¿è¡Œä¸å¤ªä¸€æ ·ï¼Œç”³è¯·åœ°å€ç©ºé—´ã€è°ƒç”¨ç¼–è¯‘å¥½çš„æ–‡ä»¶å•Šéƒ½æ˜¯éœ€è¦è´¹æ—¶çš„ã€‚æ‰€ä»¥è¯´ä¸Šé™ä¸æ˜¯1e9ã€‚</p><p>ä½†æ˜¯éªŒé¢˜çš„æ—¶å€™ï¼Œoctalå‘ç°O(1e9)çš„æ•°æ®åœ¨C++20å¼€O2ä¼˜åŒ–çš„æƒ…å†µä¸‹ç«Ÿç„¶å¯ä»¥åªç”¨700msï¼Œæ‰€ä»¥ä¹‹åå°±æ›´æ”¹äº†æ—¶é™ã€‚</p></blockquote><h1 id="fäº‘å±±æ¢é™©è®°"><a class="markdownIt-Anchor" href="#fäº‘å±±æ¢é™©è®°"></a> Fï¼šäº‘å±±æ¢é™©è®°</h1><p>ã€çŸ¥è¯†ç‚¹ã€‘èƒŒåŒ…  / dp+äºŒåˆ†</p><p>ã€ideaã€‘</p><p>ä¸¤ç§åšæ³•ï¼šä¸€ç§æ˜¯å½“åšå‰ç¼€èƒŒåŒ…çš„æ¿å­é¢˜æ¥åšï¼›ä¸€ç§æ˜¯åšä¸€ä¸ªæ€ç»´çš„è½¬åŒ–ï¼Œè½¬ä¸ºä¸€é“<code>äºŒåˆ†ç­”æ¡ˆ</code>æ¥å†™</p><p>ç¬¬ä¸€ç§åšæ³•æœ‰ç‚¹è¶…çº²ï¼Œç®—æ˜¯é“œç‰Œç®—æ³•äº†ï¼Œç›®å‰ä¸è¦æ±‚æŒæ¡ã€‚è¿™é‡Œæä¾›ç¬¬äºŒç§è§£æ³•ã€‚</p><p>å…¶å®å¾ˆç®€å•ï¼Œå‡å¦‚ä¸€ä¸ªç‰©å“æ˜¯ â€œå¿…è¦â€ çš„ï¼Œé‚£ä¹ˆæ‰€æœ‰å‹‡æ°”å€¼æ¯”å®ƒå¤§çš„ç‰©å“ä¹Ÿä¸€å®šæ˜¯å¿…è¦çš„ã€‚</p><p><strong>è¯æ˜</strong> ï¼šè‹¥ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">x</span></span></span></span> æ˜¯å¿…è¦çš„ï¼Œåˆ™å­˜åœ¨é›†åˆ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span></span> ä½¿å¾— <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span></span> å»æ‰ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">x</span></span></span></span> å°± <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>&lt;</mo><mi>K</mi></mrow><annotation encoding="application/x-tex">&lt;K</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">K</span></span></span></span>ï¼ŒåŠ ä¸Š <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">x</span></span></span></span> å°±<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â‰¥</mo><mi>K</mi></mrow><annotation encoding="application/x-tex">â‰¥K</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7719400000000001em;vertical-align:-0.13597em;"></span><span class="mrel">â‰¥</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">K</span></span></span></span>ã€‚é‚£ä¹ˆå¯¹äº <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span></span> ä¸­çš„ä»»æ„ä¸€ä¸ªå¤§äº <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">x</span></span></span></span> çš„æ•°ï¼Œæ˜¾ç„¶ä¹Ÿä¸€å®šæ˜¯å¿…è¦çš„ã€‚å¯¹äºé›†åˆå¤–ä»»æ„ä¸€ä¸ªå¤§äº <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">x</span></span></span></span> çš„æ•° <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span> ï¼Œä¹Ÿä¸€å®šæœ‰ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo>âˆ’</mo><mi>x</mi><mo>+</mo><mi>y</mi></mrow><annotation encoding="application/x-tex">S-x+y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span> æ»¡è¶³æ¡ä»¶ã€‚</p><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬äºŒåˆ†æŸ¥æ‰¾è¿™ä¸ªè¾¹ç•Œå³å¯ã€‚</p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi><mi>h</mi><mi>e</mi><mi>c</mi><mi>k</mi></mrow><annotation encoding="application/x-tex">check</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal">c</span><span class="mord mathnormal">h</span><span class="mord mathnormal">e</span><span class="mord mathnormal">c</span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span> å‡½æ•°éœ€è¦ç”¨åˆ° DPï¼Œè¿™ä¸ªè¿‡ç¨‹å…¶å®å°±ç­‰ä»·äºè´§å¸é¢å€¼é‚£ä¸ªæ¨¡å‹ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt; pii;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> n, k;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; k;</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">a</span><span class="params">(n<span class="number">+5</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>; i&lt;=n; i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;a[i]);</span><br><span class="line">    <span class="built_in">sort</span>(a.<span class="built_in">begin</span>()<span class="number">+1</span>, a.<span class="built_in">begin</span>()<span class="number">+1</span>+n);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">auto</span> check = [&amp;](<span class="type">int</span> x) &#123;</span><br><span class="line">        vector&lt;<span class="type">int</span>&gt; <span class="built_in">dp</span>(k<span class="number">+5</span>);</span><br><span class="line">        dp[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>; i&lt;=n; i++)</span><br><span class="line">        <span class="keyword">if</span>(i != x) &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=k; j&gt;=a[i]; j--)</span><br><span class="line">                dp[j] |= dp[j-a[i]];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="built_in">max</span>(k-a[x], <span class="number">0</span>); i&lt;=k<span class="number">-1</span>; i++)</span><br><span class="line">        <span class="keyword">if</span>(dp[i]) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="type">int</span> l = <span class="number">1</span>, r = n<span class="number">+1</span>;</span><br><span class="line">    <span class="keyword">while</span>(l &lt; r)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> mid = l+r &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">check</span>(mid)) r = mid;</span><br><span class="line">        <span class="keyword">else</span> l = mid<span class="number">+1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; n-l<span class="number">+1</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="gé»‘ç™½æ‰‹"><a class="markdownIt-Anchor" href="#gé»‘ç™½æ‰‹"></a> Gï¼šé»‘ç™½æ‰‹</h1><p>ã€çŸ¥è¯†ç‚¹ã€‘åšå¼ˆè®ºã€æ€ç»´é¢˜</p><p>ã€ideaã€‘</p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>Ã—</mo><mi>n</mi></mrow><annotation encoding="application/x-tex">n Ã— n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span> çš„æ£‹ç›˜æ˜¯ä¸­å¿ƒå¯¹ç§°çš„ï¼Œæ‰€ä»¥åæ‰‹çš„æœ€ä¼˜ç­–ç•¥å°±æ˜¯æ¨¡ä»¿å…ˆæ‰‹ï¼›è€Œå…ˆæ‰‹çš„æœ€ä¼˜ç­–ç•¥æ˜¯å°½å¯èƒ½å¤šåœ°èµ°è¿‡æ£‹ç›˜çš„æ ¼å­ã€‚</p><p>åœ¨åŒæ–¹çš„ç›¸äº’æ–½æ³•ä¸‹ï¼Œæœ€ç»ˆä¸€å®šæ˜¯èƒ½å°†æ£‹ç›˜çš„æ¯ä¸ªæ ¼å­éƒ½èµ°è¿‡ã€‚</p><p>é‚£ä¹ˆï¼Œæ£‹ç›˜çš„æ ¼å­æ€»æ•°ä¸ºå¥‡æ•°ï¼Œå°±æ˜¯å…ˆæ‰‹è·èƒœï¼›åä¹‹ï¼Œåˆ™åæ‰‹èƒœã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="keyword">if</span>(n % <span class="number">2</span>) <span class="built_in">puts</span>(<span class="string">&quot;J&quot;</span>);</span><br><span class="line">    <span class="keyword">else</span> <span class="built_in">puts</span>(<span class="string">&quot;L&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="hå¹¸ç¦åœ¨å“ªé‡Œ"><a class="markdownIt-Anchor" href="#hå¹¸ç¦åœ¨å“ªé‡Œ"></a> Hï¼šå¹¸ç¦åœ¨å“ªé‡Œ</h1><p>ã€çŸ¥è¯†ç‚¹ã€‘æš´åŠ›æ¨¡æ‹Ÿ / æ•°å­¦</p><p>ä½œä¸ºç­¾åˆ°é¢˜ï¼Œæœ¬é¢˜æ•°æ®èŒƒå›´å¾ˆå°ï¼Œæ²¡æœ‰å¡æš´åŠ›åšæ³•</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> int long long</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);cout.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line">    <span class="type">int</span> n,k;</span><br><span class="line">    cin&gt;&gt;n&gt;&gt;k;</span><br><span class="line">    string str=<span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">26</span>;i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;n;j++)&#123;</span><br><span class="line">            str+=<span class="string">&#x27;A&#x27;</span>+i;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout&lt;&lt;str[k<span class="number">-1</span>]&lt;&lt;<span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>å½“ç„¶ï¼Œé™¤äº†æš´åŠ›æ¨¡æ‹Ÿï¼Œä¹Ÿå¯ä»¥ç›´æ¥å¾—åˆ°ç­”æ¡ˆ</strong></p><p>ï¼ˆèµ›åœºä¸Šé‡åˆ°è¿™ç§èŒƒå›´çš„é¢˜ï¼Œå»ºè®®æš´åŠ›åšï¼Œè‚¯å®šä¸ä¼šå‡ºé”™ï¼‰</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pii pair<span class="string">&lt;int, int&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pdd pair<span class="string">&lt;double, double&gt;</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> n, k;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; k;</span><br><span class="line">    cout &lt;&lt; (<span class="type">char</span>)((k+n<span class="number">-1</span>)/n + <span class="string">&#x27;A&#x27;</span> - <span class="number">1</span>) &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="iå¹¸ç¦ç»ˆå°†é™ä¸´åœ¨æˆ‘ä»¬å¤´ä¸Š"><a class="markdownIt-Anchor" href="#iå¹¸ç¦ç»ˆå°†é™ä¸´åœ¨æˆ‘ä»¬å¤´ä¸Š"></a> Iï¼šå¹¸ç¦ç»ˆå°†é™ä¸´åœ¨æˆ‘ä»¬å¤´ä¸Š</h1><p>ã€çŸ¥è¯†ç‚¹ã€‘å‰ç¼€æ•°ç»„+åŒæŒ‡é’ˆç®—æ³• / çº¿æ®µæ ‘ + äºŒåˆ†</p><p>ã€ideaã€‘</p><p>å…ˆæƒ³æ¸…æ¥šä¸€ä¸ªç»“è®ºï¼šåœ¨ä¸€ä¸ªåºåˆ—ä¸­ï¼Œå‡å¦‚è¦äº¤æ¢ä¸¤æ•°çš„ä½ç½®ï¼Œä¸”åªå…è®¸ç”¨ç±»ä¼¼å†’æ³¡æ’åºäº¤æ¢æ–¹å¼ï¼Œæœ€å°‘äº¤æ¢æ¬¡æ•°ä¸ºä¸¤æ•°ä¹‹é—´çš„è·ç¦»ã€‚</p><p>ä¸¾ä¾‹æ¥è¯´ï¼Œæˆ‘è¦äº¤æ¢ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">a[i]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">a</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span> å’Œ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo stretchy="false">[</mo><mi>j</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">a[j]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">a</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mclose">]</span></span></span></span> ï¼Œæœ€å°‘éœ€è¦ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">âˆ£</mi><mi>i</mi><mo>âˆ’</mo><mi>j</mi><mi mathvariant="normal">âˆ£</mi></mrow><annotation encoding="application/x-tex">|i-j|</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">âˆ£</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mord">âˆ£</span></span></span></span> æ¬¡ç›¸é‚»äº¤æ¢ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å†æ¥æƒ³è¿™é“é¢˜è¦æ€ä¹ˆåšã€‚</p><p>â‘ ç¬¬ä¸€æ­¥ï¼Œå…ˆå»ºç«‹æ•°å­¦æ¨¡å‹</p><p>æˆ‘æƒ³è®©äº¤æ¢ä¹‹åä¸¥æ ¼å¤§äºäº¤æ¢ä¹‹å‰ï¼Œæ˜¯ä¸æ˜¯åªè¦åœ¨ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mi>k</mi><mo>+</mo><mn>1</mn><mo separator="true">,</mo><mi>n</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[k+1, n]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">n</span><span class="mclose">]</span></span></span></span> ä¹‹ä¸­æ‰¾ä¸€ä¸ªæ•° <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">x</span></span></span></span> ï¼Œå†åœ¨ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>1</mn><mo separator="true">,</mo><mi>k</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[1, k]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mclose">]</span></span></span></span> ä¸­æ‰¾ä¸€ä¸ªæ•° <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span> ï¼Œæ»¡è¶³ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>&gt;</mo><mi>y</mi></mrow><annotation encoding="application/x-tex">x &gt; y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span>ï¼Œç„¶åäº¤æ¢ä¸¤æ•°å³å¯ã€‚</p><p><strong>é‚£ä¹ˆé—®é¢˜å¯ä»¥è½¬åŒ–ä¸ºï¼Œæ‰¾ä¸€ä¸ªåŒºé—´ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mi>L</mi><mo separator="true">,</mo><mi>R</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[L, R]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathnormal">L</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mclose">]</span></span></span></span>ï¼Œä½¿å¾—åŒºé—´åŒ…å« <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span>ï¼Œå¹¶ä¸” <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mi>k</mi><mo>+</mo><mn>1</mn><mo separator="true">,</mo><mi>R</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[k+1,R]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mclose">]</span></span></span></span> ä¸­ å­˜åœ¨ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">x</span></span></span></span> , <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mi>L</mi><mo separator="true">,</mo><mi>k</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[L, k]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathnormal">L</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mclose">]</span></span></span></span> ä¸­å­˜åœ¨ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span>ï¼Œæ»¡è¶³ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>&gt;</mo><mi>y</mi></mrow><annotation encoding="application/x-tex">x &gt; y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span>ã€‚æ±‚å¯¹äºæ‰€æœ‰æ»¡è¶³æ¡ä»¶çš„åŒºé—´ï¼ŒåŒºé—´é•¿åº¦çš„æœ€å°å€¼ã€‚</strong></p><p>è¿™ç§æ¨¡å‹ï¼Œä¸€çœ‹å°±åº”è¯¥æƒ³åˆ°<strong>ç»å…¸äºŒåˆ†</strong>ï¼Œå¯ä»¥äºŒåˆ†åŒºé—´é•¿åº¦ç„¶å <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi><mi>h</mi><mi>e</mi><mi>c</mi><mi>k</mi></mrow><annotation encoding="application/x-tex">check</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal">c</span><span class="mord mathnormal">h</span><span class="mord mathnormal">e</span><span class="mord mathnormal">c</span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span> ä¸€ä¸‹ï¼Œå…³äºå¦‚ä½•æ‰¾ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo separator="true">,</mo><mi>y</mi></mrow><annotation encoding="application/x-tex">x, y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span> ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨çº¿æ®µæ ‘ã€‚</p><p>å½“ç„¶ï¼Œå¯¹äºè¿™é“é¢˜æ¥è¯´ï¼ŒäºŒåˆ†è¿˜æ˜¯å±äºæš´åŠ›çš„åšæ³•ï¼Œä½†ä¸å¤±ä¸ºä¸€ä¸ªå¥½æ–¹æ³•ã€‚</p><p>æ¥ä¸‹æ¥ä»‹ç»å¦ä¸€ç§è½¬åŒ–ï¼Œè¿ç”¨äº†å‰ç¼€æ•°ç»„çš„æ€æƒ³ã€‚</p><p>å› ä¸ºè¿™é“é¢˜é‡è¦çš„æ˜¯ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span> ä¹‹å‰å’Œ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span> ä¹‹åçš„å¤§å°å…³ç³»ï¼Œä½†å¹¶ä¸æ˜¯æ‰€æœ‰çš„æ•°éƒ½æ˜¯é‡è¦çš„ã€‚åœ¨kå‰åªæœ‰å¤§æ•°é‡è¦ï¼Œåœ¨kååªæœ‰å°æ•°é‡è¦ã€‚</p><p>æˆ‘ä»¬å¯ä»¥ç”¨å‰ç¼€æœ€å€¼ï¼ˆåç¼€æœ€å€¼ï¼‰æ¥ç»´æŠ¤è¿™äº›æ•°ã€‚</p><p>æˆ‘ä»¬ç”¨å‰ç¼€æœ€å€¼ï¼ˆåç¼€æœ€å€¼ï¼‰å¯ä»¥æŠŠç›®å…‰é›†ä¸­åœ¨å¯¹ä¸¤è¾¹æ•°ç»„çš„å¤§å°å…³ç³»èµ·å†³å®šæ€§å˜åŒ–çš„å‡ ä¸ªæ•°ï¼ˆä¹Ÿå°±æ˜¯æˆ‘ä»¬ç»´æŠ¤çš„åç¼€minå‰ç¼€maxï¼‰è€Œå¿½è§†æ‰ä¸å¤§ä¸å°çš„é‚£äº›æ— å…³ç´§è¦çš„æ•°ã€‚</p><p>ç„¶åå°±æ˜¯åŒæŒ‡é’ˆç®—æ³•çš„åº”ç”¨äº†ã€‚</p><p>æˆ‘ä»¬è¦æ±‚æœ€å°å€¼å˜›ï¼Œå¤–å¾ªç¯æ¥ç§»å·¦è¾¹ç•Œï¼Œä¸æ–­åœ°å»ç¼©å°åŒºé—´é•¿åº¦ã€‚</p><p>ä¸ºäº†æ›´å¥½åœ°ç†è§£åŒæŒ‡é’ˆçš„è¿‡ç¨‹ï¼Œæˆ‘ä»¬éœ€è¦æ˜ç™½ä¸€ä¸ªè¿™ä¸ªå‰ç¼€æ•°ç»„ï¼ˆåç¼€æ•°ç»„ï¼‰çš„ç‰¹æ€§ï¼š</p><p>kå‰é¢æ˜¯å•è°ƒé€’å¢çš„ï¼Œkåé¢ä¹Ÿæ˜¯å•è°ƒé€’å¢çš„ã€‚</p><blockquote><p>O(n)</p></blockquote><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pii pair<span class="string">&lt;int, int&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pdd pair<span class="string">&lt;double, double&gt;</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> n, k;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; k;</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">a</span><span class="params">(n<span class="number">+5</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>; i&lt;=n; i++)</span><br><span class="line">        cin &gt;&gt; a[i];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=k<span class="number">-1</span>; i&gt;=<span class="number">1</span>; i--)</span><br><span class="line">        a[i] = <span class="built_in">min</span>(a[i<span class="number">+1</span>], a[i]); <span class="comment">//å‰é¢æ‰¾ä¸€ä¸ªå°çš„</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=k<span class="number">+2</span>; i&lt;=n; i++)</span><br><span class="line">        a[i] = <span class="built_in">max</span>(a[i<span class="number">-1</span>], a[i]); <span class="comment">//åé¢æ‰¾ä¸€ä¸ªå¤§çš„</span></span><br><span class="line">    <span class="type">int</span> res = <span class="number">1e9</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>, j=k<span class="number">+1</span>; i&lt;=k; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">while</span>(j &lt;= n &amp;&amp; a[j] &lt;= a[i])</span><br><span class="line">            j ++;</span><br><span class="line">        <span class="keyword">if</span>(j &lt;= n)</span><br><span class="line">            res = <span class="built_in">min</span>(res, j - i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(res &lt; <span class="number">1e9</span>) cout &lt;&lt; res &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">else</span> cout &lt;&lt; <span class="number">-1</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Lihgçš„æœ¬æ„æ˜¯æƒ³è€ƒä¸Šé¢è¿™ä¸ªæ–¹æ³•ï¼Œä½†æˆ‘éªŒé¢˜çš„æ—¶å€™å‘ç°æ“ä¸€ä¸ªçº¿æ®µæ ‘ä¹Ÿèƒ½è¿‡ã€‚</p><p>æƒ³ç€è¿™é“é¢˜èƒ½æƒ³åˆ°ç¬¬ä¸€æ­¥è½¬åŒ–ï¼Œå¹¶ä¸”ç”¨çº¿æ®µæ ‘æ¥å®ç°ä¹Ÿç®—å¾ˆä¸é”™äº†ï¼Œæ‰€ä»¥æ²¡æœ‰ä¹Ÿå¹¶æ²¡æœ‰è®©å‡ºé¢˜äººåŠ å¼ºæ•°æ®ã€‚</p><p>ä¸è¿‡çº¿æ®µæ ‘æ–¹æ³•å±äºæš´åŠ›åšæ³•ï¼Œæ—¶é—´å¤æ‚åº¦è¿˜æ˜¯å¾ˆå±é™©çš„ï¼Œä¸€ä¸å°å¿ƒå°±ä¼šè¶…æ—¶ã€‚</p><blockquote><p>O(nlogn*logn)</p></blockquote><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pii pair<span class="string">&lt;int, int&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pdd pair<span class="string">&lt;double, double&gt;</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">4e5</span><span class="number">+5</span>;</span><br><span class="line"><span class="type">int</span> a[N];</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">node</span> &#123;</span><br><span class="line">    <span class="type">int</span> maxv;</span><br><span class="line">    <span class="type">int</span> minv;</span><br><span class="line">&#125; tr[N * <span class="number">4</span>];</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">update</span><span class="params">(<span class="type">int</span> id)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    tr[id].maxv = <span class="built_in">max</span>(tr[id*<span class="number">2</span>].maxv, tr[id*<span class="number">2</span><span class="number">+1</span>].maxv);</span><br><span class="line">    tr[id].minv = <span class="built_in">min</span>(tr[id*<span class="number">2</span>].minv, tr[id*<span class="number">2</span><span class="number">+1</span>].minv);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">build</span><span class="params">(<span class="type">int</span> id, <span class="type">int</span> l ,<span class="type">int</span> r)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(l == r) </span><br><span class="line">        tr[id].maxv = tr[id].minv = a[l];</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="type">int</span> mid = l+r &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="built_in">build</span>(id * <span class="number">2</span>, l, mid);</span><br><span class="line">        <span class="built_in">build</span>(id * <span class="number">2</span> + <span class="number">1</span>, mid + <span class="number">1</span>, r);</span><br><span class="line">        <span class="built_in">update</span>(id);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æŸ¥è¯¢çš„åŒºé—´ä¸ºqlå’Œqr max</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">query1</span><span class="params">(<span class="type">int</span> id, <span class="type">int</span> l, <span class="type">int</span> r, <span class="type">int</span> ql, <span class="type">int</span> qr)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(l == ql &amp;&amp; r == qr) <span class="keyword">return</span> tr[id].maxv;</span><br><span class="line">    <span class="type">int</span> mid = l+r &gt;&gt; <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(qr &lt;= mid) <span class="keyword">return</span> <span class="built_in">query1</span>(id*<span class="number">2</span>, l, mid, ql, qr);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(ql &gt; mid) <span class="keyword">return</span> <span class="built_in">query1</span>(id*<span class="number">2</span><span class="number">+1</span>, mid<span class="number">+1</span>, r, ql, qr);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> <span class="built_in">max</span>(<span class="built_in">query1</span>(id*<span class="number">2</span>, l, mid, ql, mid),</span><br><span class="line">    <span class="built_in">query1</span>(id*<span class="number">2</span><span class="number">+1</span>, mid<span class="number">+1</span>, r, mid<span class="number">+1</span>, qr));</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æŸ¥è¯¢çš„åŒºé—´ä¸ºqlå’Œqr min</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">query2</span><span class="params">(<span class="type">int</span> id, <span class="type">int</span> l, <span class="type">int</span> r, <span class="type">int</span> ql, <span class="type">int</span> qr)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(l == ql &amp;&amp; r == qr) <span class="keyword">return</span> tr[id].minv;</span><br><span class="line">    <span class="type">int</span> mid = l+r &gt;&gt; <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(qr &lt;= mid) <span class="keyword">return</span> <span class="built_in">query2</span>(id*<span class="number">2</span>, l, mid, ql, qr);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(ql &gt; mid) <span class="keyword">return</span> <span class="built_in">query2</span>(id*<span class="number">2</span><span class="number">+1</span>, mid<span class="number">+1</span>, r, ql, qr);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> <span class="built_in">min</span>(<span class="built_in">query2</span>(id*<span class="number">2</span>, l, mid, ql, mid),</span><br><span class="line">    <span class="built_in">query2</span>(id*<span class="number">2</span><span class="number">+1</span>, mid<span class="number">+1</span>, r, mid<span class="number">+1</span>, qr));</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> n, k;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; k;</span><br><span class="line">    priority_queue&lt;<span class="type">int</span>&gt; hp;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>; i&lt;=n; i++) &#123;</span><br><span class="line">        cin &gt;&gt; a[i];</span><br><span class="line">        hp.<span class="built_in">push</span>(a[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">build</span>(<span class="number">1</span>, <span class="number">1</span>, n);</span><br><span class="line">    set&lt;<span class="type">int</span>&gt; b, c;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>; i&lt;=k; i++) &#123;</span><br><span class="line">        b.<span class="built_in">insert</span>(a[i]);</span><br><span class="line">        c.<span class="built_in">insert</span>(hp.<span class="built_in">top</span>());</span><br><span class="line">        hp.<span class="built_in">pop</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(b == c) &#123;</span><br><span class="line">        <span class="built_in">puts</span>(<span class="string">&quot;-1&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">auto</span> check = [&amp;](<span class="type">int</span> x) &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=k<span class="number">+1</span>; i&lt;=k+x; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> R = <span class="built_in">min</span>(n, i);</span><br><span class="line">            <span class="type">int</span> L = <span class="built_in">max</span>(<span class="number">1</span>, i-x);</span><br><span class="line">            <span class="type">int</span> minv = <span class="built_in">query2</span>(<span class="number">1</span>, <span class="number">1</span>, n, L, k);</span><br><span class="line">            <span class="type">int</span> maxv = <span class="built_in">query1</span>(<span class="number">1</span>, <span class="number">1</span>, n, k<span class="number">+1</span>, R);</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span>(maxv &gt; minv) </span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>; </span><br><span class="line">                </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="type">int</span> l = <span class="number">1</span>, r = n;</span><br><span class="line">    <span class="keyword">while</span>(l &lt; r) &#123;</span><br><span class="line">        <span class="type">int</span> mid = l+r &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">check</span>(mid)) r = mid;</span><br><span class="line">        <span class="keyword">else</span> l = mid + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; l &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³•é¢˜è§£ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ¯”èµ›é¢˜è§£ </tag>
            
            <tag> ç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>YNUCPC-2024 å®˜æ–¹é¢˜è§£</title>
      <link href="/posts/49243.html"/>
      <url>/posts/49243.html</url>
      
        <content type="html"><![CDATA[<h1 id="æ€»è§ˆ"><a class="markdownIt-Anchor" href="#æ€»è§ˆ"></a> æ€»è§ˆ</h1><p><strong>å‡ºé¢˜äººï¼š<a href="https://www.luogu.com.cn/user/313822">Octal</a>ã€<a href="https://www.luogu.com.cn/user/769414">Lihg</a></strong><br /><strong>å‹æƒ…å®¢ä¸²ï¼šCatherineã€Catgokã€å°å¸…ã€GPTã€æ´¾è’™</strong><br /><s>ç‰¹åˆ«é¸£è°¢ï¼šGPTåŒå­¦å¯¹é¢˜é¢æ„é€ å·¥ä½œæä¾›çš„æ”¯æŒï¼</s></p><hr /><p><strong>æ„Ÿè°¢æ‰€æœ‰å‚ä¸å†…æµ‹çš„ICPCé›†è®­é˜Ÿé˜Ÿå‘˜ï¼š<br />â‘  Ai,give me a nameå…¨é˜Ÿï¼ˆCatgokã€Nocoldinsummerã€fexlaï¼‰<br />â‘¡ Ulterior Motiveå…¨é˜Ÿï¼ˆKrowFeatherã€False0099ã€Leexxxxï¼‰<br />â‘¢ ç‰¹åˆ«é¸£è°¢ï¼Œè¿œåœ¨USAçš„ <a href="https://www.luogu.com.cn/user/27470">Felix</a> é˜Ÿé•¿ï¼ˆICPCé›†è®­é˜Ÿç¬¬ä¸€ä»»é˜Ÿé•¿ï¼‰å¯¹éªŒé¢˜å·¥ä½œçš„å¤§åŠ›æ”¯æŒï¼</strong></p><hr /><p>æœ¬æ¬¡æ ¡èµ›å¤§éƒ¨åˆ†é¢˜ç›®ï¼ˆæ‰€æœ‰éš¾é¢˜ï¼‰çš„ideaéƒ½æ¥è‡ªæˆ‘çš„é˜Ÿå‹<code>Lihg</code>ï¼Œæˆ‘çš„å·¥ä½œè¿˜æ˜¯æŒºè½»æ¾çš„ï¼Œå°±å¸®å¿™å‡ºå‡ºæ•°æ®å’Œå†™å†™é¢˜é¢ï¼Œæ‰€ä»¥å†™é¢˜è§£çš„ä»»åŠ¡å°±è¿˜æ˜¯æˆ‘è‡ªå·±æ¥å§ã€‚</p><p><strong>æœ¬æ–‡ä¸ºå®˜æ–¹é¢˜è§£ï¼Œä¹Ÿé¼“åŠ±å„ä½YNUçš„å°ä¼™ä¼´ä»¬å‘å¸ƒè‡ªå·±çš„é¢˜è§£ãƒ¾(â—Â°âˆ‡Â°â—)ï¾‰ï¾</strong></p><p><em>èµ›å‰æ•…äº‹ï¼š</em><br />ä¸€å¬è¯´è¦å‡ºæ ¡èµ›äº†ï¼ŒLihgä¸€ä¸‹å­æ‰”ç»™äº†æˆ‘8ä¸ªé¢˜çš„ideaï¼Œè®©æˆ‘éšä¾¿é€‰ï¼Œ<s>çœ‹æ ·å­æ˜¯è“„è°‹å·²ä¹…äº†</s> ã€‚<br />æˆ‘ä¸€çœ‹ï¼Œä»€ä¹ˆéš¾é¢˜ã€ä¸­æ¡£é¢˜ã€é˜²AKé¢˜éƒ½æœ‰äº†ï¼Œ<s>è™½ç„¶å‡ºé¢˜äººè¡¨ç¤ºéƒ½å¾ˆä¸€çœ¼ï¼ˆç‹—å¤´ï¼‰</s> ã€‚<br /><s>ç”±æ­¤ï¼ŒOctalä¹Ÿå¯ä»¥æ‘†çƒ‚äº†</s><br />ç”±æ­¤ï¼Œæœ¬æ¬¡æ ¡èµ›çš„éš¾åº¦å°±è¢«æ‹‰é«˜äº†â€¦<br />æ‰€ä»¥ï¼Œå–„è‰¯çš„Octalè¿˜æ˜¯ä¸èƒ½æ‘†çƒ‚ï¼Œåˆ äº†å‡ ä¸ªæ›´éš¾çš„é¢˜ï¼Œè‡ªå·±å‡ºäº†å‡ ä¸ªç®€å•é¢˜ã€‚<br />æœ€åè¿˜æ˜¯è¦æ„Ÿè°¢Lihgï¼Œè´¡çŒ®äº†å‡ é“éå¸¸ä¸é”™çš„é¢˜ç›®ã€‚<br />è€Œä¸”ï¼Œä»–å‡ºçš„è¿™äº›é¢˜ï¼Œæ•°æ®éƒ½å¾ˆéš¾å‡ºï¼Œä¸ºLihgå“¥å“¥ç‚¹èµo(ï¿£â–½ï¿£)ï½„ã€‚</p><hr /><p>èµ›å‰é¢„ä¼°æ˜¯ä¸‰ä¸ªç®€å•é¢˜ï¼ˆ1â€“2ï¼‰ï¼Œå››ä¸ªä¸­æ¡£é¢˜ï¼ˆ3â€“4ï¼‰ï¼Œä¸¤ä¸ªICPCæ­£èµ›éš¾åº¦é¢˜ï¼ˆ5ï¼‰ã€‚ï¼ˆæ›´éš¾çš„é¢˜è¢«octalåˆ äº†ï¼‰</p><p>èµ›åupdateï¼š<br />å‰æœŸæ¦œä¸¥é‡æ­ªäº†T_Tï¼Œ01_DreameråŒå­¦é€Ÿåº¦Käº†Cé¢˜ï¼Œå¯¼è‡´å¤§å®¶éƒ½å»å†™Cï¼ˆå“­ç¬‘ï¼‰ã€‚</p><p>å…¶å®ä»æ€ç»´ä¸Šè¯´ï¼ŒBã€Hè¦æ›´ç®€å•ä¸€äº›T_T</p><p>ç¬¬äºŒä¸ªåçš„æ˜¯Eï¼Œå…¶å®å¾ˆæ—©çš„æ—¶å€™404liuyanï¼ˆå¥½åƒæ˜¯ç ”ä¸€å­¦é•¿ï¼‰å°±æ‹¿ä¸‹äº†ä¸€è¡€ï¼Œä½†å¯èƒ½æ˜¯LaTeXæŠŠå¤§å®¶å“ä½äº†ï¼Œå¯¼è‡´å¾ˆæ™šæ‰æœ‰ç¬¬äºŒä¸ªäººå¼€Eé¢˜ã€‚å¯¹æˆ‘ä»¬ç®—ç«é€‰æ‰‹æ¥è¯´ï¼Œç±»ä¼¼é¢˜å†™å¤šäº†ï¼Œå¯èƒ½ä¼šè§‰å¾—Eæ¯”Cè¦ç®€å•ä¸€äº›ã€‚</p><p>å¦ä¸€ä¸ªä¸€ç›´æ²¡äººå¼€çš„é¢˜å°±æ˜¯Ié¢˜ï¼ŒIå…¶å®æ˜¯ä¸€é“çº¯çº¯çš„è„‘ç­‹æ€¥è½¬å¼¯é¢˜ï¼Œæ²¡æ¶‰åŠåˆ°ç®—æ³•ã€‚ä¸ªäººçŒœæµ‹ï¼šå‚èµ›é›†è®­é˜Ÿçš„é€€å½¹é˜Ÿå‘˜ä»¬å¯èƒ½å¤ªä¹…æ²¡æ‰“CFï¼Œå¯¹è¿™äº›é¢˜æ‰‹ç”Ÿäº†ï¼›è€Œç°å½¹é˜Ÿå‘˜ä»¬çœ‹å‰æ’å¤§ä½¬éƒ½æ²¡å†™è¿™é¢˜ï¼Œä¹Ÿéƒ½ä¸æ•¢å»è¯•ã€‚è¿˜å¥½æœ€åçŸ¥éåŒå­¦åŠ›æŒ½ç‹‚æ¾œï¼Œè®©Lihgçš„é¢˜æ²¡ç™½å‡ºã€‚</p><p>æ€»çš„æ¥è¯´è¿˜ä¸é”™ï¼Œæ¯é“é¢˜éƒ½æœ‰äººACäº†ï¼Œæœ‰ç‚¹ICPCçš„å‘³é“äº†ï¼Œå˜»å˜»ã€‚</p><table><thead><tr><th></th><th>é¢„ä¼°éš¾åº¦</th><th>çŸ¥è¯†ç‚¹</th><th>FirstBlood</th><th>å‡ºé¢˜äºº</th></tr></thead><tbody><tr><td>A</td><td>1 â˜…</td><td>ç®€å•æ•°å­¦</td><td>01_Dreamer</td><td>Lihg</td></tr><tr><td>B</td><td>2 â˜…</td><td>æ•°å­¦ã€æ¨¡æ‹Ÿï¼ˆè¿›åˆ¶è½¬æ¢ï¼‰</td><td>Frank000</td><td>octal</td></tr><tr><td>C</td><td>STDåšæ³•ï¼š3 â˜…<br> å…¶ä»–åšæ³•ï¼š4 â˜…</td><td>STDåšæ³•ï¼šäºŒåˆ† + å‰ç¼€å’Œ <br> å…¶ä»–åšæ³•ï¼šâ‘  çº¿æ®µæ ‘ + äºŒåˆ†<br> â‘¡ ç¦»çº¿æŸ¥è¯¢ + åŒæŒ‡é’ˆ â‘¢å•è°ƒé˜Ÿåˆ— + äºŒåˆ†</td><td>01_Dreamer</td><td>Lihg</td></tr><tr><td>D</td><td>4 â€“ 5 â˜…</td><td>æ€ç»´ã€æ ‘çŠ¶æ•°ç»„ + äºŒåˆ†</td><td>01_Dreamer</td><td>Lihg</td></tr><tr><td>E</td><td>3 â˜…</td><td>æ€ç»´ã€ç»„åˆæ•°å­¦</td><td>404liuyan</td><td>octal</td></tr><tr><td>F</td><td>5 â˜…</td><td>æ‹“æ‰‘æ’åº / æ€ç»´ + å¹¶æŸ¥é›† / tarjanç¼©ç‚¹</td><td>JALJAYO</td><td>Lihg</td></tr><tr><td>G</td><td>5 â˜…</td><td>æ ‘çŠ¶æ•°ç»„ + DFN</td><td>ZZFreya</td><td>Lihg</td></tr><tr><td>H</td><td>1 â€“ 2 â˜…</td><td>æ¨¡æ‹Ÿã€åˆ†ç±»è®¨è®º</td><td>cqsbz_cxy</td><td>octal</td></tr><tr><td>I</td><td>4 â˜…</td><td>æ€ç»´ã€æ¨¡æ‹Ÿ</td><td>Frank000</td><td>Lihg</td></tr></tbody></table><h1 id="a-å¹¸è¿æ•°å­—1"><a class="markdownIt-Anchor" href="#a-å¹¸è¿æ•°å­—1"></a> A å¹¸è¿æ•°å­—ï¼ˆ1ï¼‰</h1><p>ã€æ•°å­¦ã€‘ã€ç­¾åˆ°ã€‘<br />é¦–å…ˆï¼Œæ ¹æ®æ•°å­¦å¸¸è¯†ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>âˆ’</mo><mi>n</mi></mrow><annotation encoding="application/x-tex">1-n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span> ä¸­æœ‰å¤šå°‘ä¸ª <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span> çš„å€æ•°ï¼Œç”¨ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mi mathvariant="normal">/</mi><mi>k</mi></mrow><annotation encoding="application/x-tex">n/k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">n</span><span class="mord">/</span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span> ï¼ˆæ•´é™¤ï¼‰å³å¯è·å¾—ã€‚<br />æœ¬é¢˜ä¸­æˆ‘ä»¬è¦æ±‚ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mi>L</mi><mo separator="true">,</mo><mi>R</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[L, R]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathnormal">L</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mclose">]</span></span></span></span> ä¸­æœ‰å¤šå°‘ä¸ª3çš„å€æ•°ï¼Œåªéœ€è¦ç”¨ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>1</mn><mo separator="true">,</mo><mi>R</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[1, R]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mclose">]</span></span></span></span> ä¸­3çš„å€æ•°çš„ä¸ªæ•° å‡å» <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>1</mn><mo separator="true">,</mo><mi>L</mi><mo>âˆ’</mo><mn>1</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[1, L-1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">L</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span></span></span></span> ä¸­3çš„å€æ•°çš„ä¸ªæ•°ï¼Œå³å¯ã€‚<br />ç”±äºè®¾å®šæ˜¯ç­¾åˆ°é¢˜ï¼Œå°±æ²¡æœ‰å¡intï¼Œä¸éœ€è¦å¼€long longå°±èƒ½è¿‡ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> l, r;</span><br><span class="line">    cin &gt;&gt; l &gt;&gt; r;</span><br><span class="line">    cout &lt;&lt; r/<span class="number">3</span> - (l<span class="number">-1</span>)/<span class="number">3</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="b-å¹¸è¿æ•°å­—2"><a class="markdownIt-Anchor" href="#b-å¹¸è¿æ•°å­—2"></a> B å¹¸è¿æ•°å­—ï¼ˆ2ï¼‰</h1><p>ã€æ•°å­¦ã€‘ã€æ¨¡æ‹Ÿã€‘ã€ç­¾åˆ°ã€‘<br />æ¯ä¸ªæ•°ä½åªæœ‰0ã€3ã€6ã€9ï¼Œå››ä¸ªæ•°å­—ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠè¿™å››ä¸ªæ•°å­—ç­‰ä»·ä¸º0ã€1ã€2ã€3ã€‚<br />é—®é¢˜å°±è½¬åŒ–ä¸ºäº†åœ¨å››è¿›åˆ¶ä¸‹ï¼Œç¬¬ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span> ä¸ªè‡ªç„¶æ•°æ˜¯ä»€ä¹ˆã€‚ï¼ˆå¤§å®¶è”æƒ³ä¸€ä¸‹ï¼Œåè¿›åˆ¶å…¶å®å°±æ˜¯æ¯ä¸€ä¸ªæ•°ä½éƒ½åªæœ‰ 0-9 åç§æ•°å­—çš„æ•°ï¼‰<br />é‚£ä¹ˆï¼Œå†™ä¸€ä¸ªåè¿›åˆ¶è½¬å››è¿›åˆ¶çš„ä»£ç å³å¯ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    n --; <span class="comment">// è‡ªç„¶æ•°ä»0å¼€å§‹ï¼Œç¬¬ä¸€ä¸ªè‡ªç„¶æ•°æ˜¯0</span></span><br><span class="line">    vector&lt;<span class="type">int</span>&gt; r;</span><br><span class="line">    <span class="comment">// ç”¨vectoræ¥æ¨¡æ‹Ÿæ ˆ</span></span><br><span class="line">    <span class="comment">// ç”¨æ™®é€šæ•°ç»„æ¥æ¨¡æ‹Ÿæ ˆorç›´æ¥ç”¨stack&lt;int&gt;éƒ½è¡Œ</span></span><br><span class="line">    <span class="keyword">while</span>(n) &#123;</span><br><span class="line">        r.<span class="built_in">push_back</span>(n % <span class="number">4</span>);</span><br><span class="line">        n /= <span class="number">4</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(r.<span class="built_in">size</span>() == <span class="number">0</span>) cout &lt;&lt; <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(!r.<span class="built_in">empty</span>()) &#123; <span class="comment">// å€’åºè¾“å‡º</span></span><br><span class="line">        <span class="comment">// vectorç”¨èµ·æ¥å’Œæ ˆæ˜¯ä¸€æ ·çš„</span></span><br><span class="line">        cout &lt;&lt; r.<span class="built_in">back</span>()*<span class="number">3</span>;</span><br><span class="line">        r.<span class="built_in">pop_back</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> t;</span><br><span class="line">    cin &gt;&gt; t;</span><br><span class="line">    <span class="keyword">while</span>(t --)</span><br><span class="line">        <span class="built_in">solve</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="c-åº”æ€¥é£Ÿå“"><a class="markdownIt-Anchor" href="#c-åº”æ€¥é£Ÿå“"></a> C åº”æ€¥é£Ÿå“</h1><p>ã€äºŒåˆ†ã€‘ã€å‰ç¼€å’Œã€‘<br />å…ˆè®²è®²äºŒåˆ†æŸ¥æ‰¾çš„åšæ³•å§ï¼Œå­¦è¿‡äºŒåˆ†æŸ¥æ‰¾çš„å°ä¼™ä¼´ä»¬åº”è¯¥éƒ½çŸ¥é“ï¼Œåœ¨ä¸€ä¸ªåºåˆ—ä¸­äºŒåˆ†æŸ¥æ‰¾ä¸€ä¸ªæ•°ï¼Œéœ€è¦æ»¡è¶³ä¸€ä¸ªå‰æï¼š<strong>åºåˆ—æœ‰åº</strong>ã€‚ï¼ˆå‹¿å–·ï¼Œç‹­ä¹‰ä¸Šå¯ä»¥è¿™ä¹ˆç†è§£ï¼‰<br />ä½†æ˜¯ï¼Œ<strong>å‡å¦‚åŸæ•°ç»„æœ‰æ­£æœ‰è´Ÿï¼Œå¾—åˆ°çš„å‰ç¼€å’Œæ•°ç»„æ˜¯æ‘†åŠ¨çš„</strong>ï¼Œä¸ç¬¦åˆäºŒåˆ†æŸ¥æ‰¾çš„å‰ææ¡ä»¶ã€‚æ‰€ä»¥å¦‚æœæˆ‘ä»¬è¿˜æƒ³ç”¨äºŒåˆ†æŸ¥æ‰¾çš„è¯ï¼Œé¦–è¦ä»»åŠ¡æ˜¯è®©åºåˆ—å˜å¾—æœ‰åºã€‚<br />é‚£å¦‚ä½•è®©åºåˆ—å•è°ƒé€’å¢å‘¢ï¼Ÿ</p><h2 id="åšæ³•ä¸€"><a class="markdownIt-Anchor" href="#åšæ³•ä¸€"></a> åšæ³•ä¸€</h2><p><strong>ä¸€ã€ä¸€ç§åšæ³•æ˜¯ç»´æŠ¤ä¸€ä¸ªå‰ç¼€å’Œçš„å‰ç¼€æœ€å¤§å€¼å³å¯</strong>ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pii pair<span class="string">&lt;int, int&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pdd pair<span class="string">&lt;double, double&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pll pair<span class="string">&lt;ll, ll&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> endl <span class="string">&#x27;\n&#x27;</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> n, q;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; q;</span><br><span class="line">    <span class="function">vector&lt;ll&gt; <span class="title">pre</span><span class="params">(n<span class="number">+5</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>; i&lt;=n; i++) &#123;</span><br><span class="line">        ll x;</span><br><span class="line">        cin &gt;&gt; x;</span><br><span class="line">        pre[i] = pre[i<span class="number">-1</span>] + x;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>; i&lt;=n; i++)</span><br><span class="line">        pre[i] = <span class="built_in">max</span>(pre[i], pre[i<span class="number">-1</span>]);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span>(q --) &#123;</span><br><span class="line">        ll x;</span><br><span class="line">        cin &gt;&gt; x;</span><br><span class="line">        <span class="type">int</span> l = <span class="number">1</span>, r = n;</span><br><span class="line">        <span class="keyword">while</span>(l &lt; r) &#123;</span><br><span class="line">            <span class="type">int</span> mid = l+r &gt;&gt; <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span>(pre[mid] &gt;= x) r = mid;</span><br><span class="line">            <span class="keyword">else</span> l = mid + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(pre[l] &gt;= x) cout &lt;&lt; l &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">else</span> cout &lt;&lt; <span class="number">-1</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">solve</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åšæ³•äºŒ"><a class="markdownIt-Anchor" href="#åšæ³•äºŒ"></a> åšæ³•äºŒ</h2><p><strong>äºŒã€ç¬¬äºŒç§åšæ³•ç±»ä¼¼å•è°ƒé˜Ÿåˆ—ï¼Œæˆ‘ä»¬ç»´æŠ¤ä¸€ä¸ªå•è°ƒçš„æ•°ç»„ï¼Œåªç•™ä¸‹æœ‰ç”¨çš„æ•°ã€‚</strong><br />è¿™é‡Œé™„ä¸ŠFelixå¤§ä½¬çš„éªŒé¢˜ä»£ç ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">using</span> ll = <span class="type">long</span> <span class="type">long</span>;</span><br><span class="line">vector&lt;ll&gt; pre_sum = &#123;<span class="number">0ll</span>&#125;;</span><br><span class="line">vector&lt;ll&gt; indices = &#123;<span class="number">0ll</span>&#125;;</span><br><span class="line"><span class="comment">// ä¸‹æ ‡æ˜¯indices[i]çš„å‰ç¼€å’Œæ˜¯pre_sum[i]</span></span><br><span class="line">ll a[<span class="number">100005</span>], n, q;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; q;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        cin &gt;&gt; a[i];</span><br><span class="line">    ll sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        sum += a[i];</span><br><span class="line">        <span class="keyword">if</span>(sum &gt; pre_sum.<span class="built_in">back</span>())</span><br><span class="line">        &#123;</span><br><span class="line">            pre_sum.<span class="built_in">push_back</span>(sum);</span><br><span class="line">            indices.<span class="built_in">push_back</span>(i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(q--)</span><br><span class="line">    &#123;</span><br><span class="line">        ll x; cin &gt;&gt; x;</span><br><span class="line">        <span class="keyword">if</span>(x &gt; pre_sum.<span class="built_in">back</span>())</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;-1\n&quot;</span>;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">auto</span> pos = <span class="built_in">lower_bound</span>(pre_sum.<span class="built_in">begin</span>(), pre_sum.<span class="built_in">end</span>(), x) - pre_sum.<span class="built_in">begin</span>();</span><br><span class="line">            cout &lt;&lt; indices[pos] &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åšæ³•ä¸‰"><a class="markdownIt-Anchor" href="#åšæ³•ä¸‰"></a> åšæ³•ä¸‰</h2><p>ä¸‰ã€<strong>å½“ç„¶ï¼Œæœ¬é¢˜å…¶å®è¿˜æœ‰ä¸ªç¦»çº¿åšæ³•</strong><br />æŠŠæ‰€æœ‰çš„è¯¢é—®å­˜ä¸‹æ¥ï¼Œä»å°åˆ°å¤§æ’ä¸ªåº</p><p>å› ä¸ºåœ¨æœ‰è§£çš„æƒ…å†µä¸‹ï¼Œæ›´å°çš„xå¯¹åº”çš„ç­”æ¡ˆä¹Ÿä¸€å®šæ˜¯æ›´å°çš„</p><p>åœ¨è¿™ç§å•è°ƒä¸€è‡´æ€§çš„æ¡ä»¶ä¸‹ï¼Œå°±æœ‰ç‚¹ç±»ä¼¼åŒæŒ‡é’ˆçš„æ„Ÿè§‰ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathnormal">i</span></span></span></span> å’Œ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>j</mi></mrow><annotation encoding="application/x-tex">j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.85396em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span></span></span></span> ä¸€èµ·å¾€åç§»ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pii pair<span class="string">&lt;int, int&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pdd pair<span class="string">&lt;double, double&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pll pair<span class="string">&lt;ll, ll&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> endl <span class="string">&#x27;\n&#x27;</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> n, q;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; q;</span><br><span class="line">    <span class="function">vector&lt;ll&gt; <span class="title">pre</span><span class="params">(n<span class="number">+1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>; i&lt;=n; i++) &#123;</span><br><span class="line">        ll a;</span><br><span class="line">        cin &gt;&gt; a;</span><br><span class="line">        pre[i] = pre[i<span class="number">-1</span>] + a;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">vector&lt;pll&gt; <span class="title">qs</span><span class="params">(q<span class="number">+1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>; i&lt;=q; i++) &#123;</span><br><span class="line">        cin &gt;&gt; qs[i].first;</span><br><span class="line">        qs[i].second = i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">sort</span>(qs.<span class="built_in">begin</span>()<span class="number">+1</span>, qs.<span class="built_in">end</span>(), [&amp;](pll a, pll b) &#123;</span><br><span class="line">        <span class="keyword">return</span> a.first &lt; b.first;</span><br><span class="line">    &#125;); <span class="comment">// æŠŠè¯¢é—®ä»å°åˆ°å¤§æ’åº</span></span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">res</span><span class="params">(q<span class="number">+1</span>, <span class="number">-1</span>)</span></span>; <span class="comment">// è®°å½•ç­”æ¡ˆ</span></span><br><span class="line">    <span class="type">int</span> j = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>; i&lt;=q; i++) &#123;</span><br><span class="line">        <span class="keyword">while</span>(j &lt;= n &amp;&amp; qs[i].first &gt; pre[j])</span><br><span class="line">            j ++;</span><br><span class="line">        <span class="keyword">if</span>(j &gt; n) <span class="keyword">break</span>;</span><br><span class="line">        res[qs[i].second] = j;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>; i&lt;=q; i++) &#123;</span><br><span class="line">        cout &lt;&lt; res[i] &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cout &lt;&lt; fixed &lt;&lt; <span class="built_in">setprecision</span>(<span class="number">10</span>);</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="number">0</span>);cout.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">    <span class="built_in">solve</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>çº¿æ®µæ ‘ + äºŒåˆ†çš„åšæ³•å°±å±äºæ˜¯â€œå¤§ç‚®æ‰“èšŠå­â€äº†ï¼Œä¸åœ¨æ­¤èµ˜è¿°ã€‚</p></blockquote><h1 id="d-é€†åºå¯¹ä¼ è¯´"><a class="markdownIt-Anchor" href="#d-é€†åºå¯¹ä¼ è¯´"></a> D é€†åºå¯¹ä¼ è¯´</h1><p>ã€æ ‘çŠ¶æ•°ç»„+äºŒåˆ†ã€‘ã€æ€ç»´ã€‘<br />åŒºé—´ç¬¬ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi></mrow><annotation encoding="application/x-tex">K</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">K</span></span></span></span> å¤§æ¨¡æ¿é¢˜ï¼ˆæ ‘çŠ¶æ•°ç»„+äºŒåˆ†æ¨¡æ¿é¢˜ï¼‰<br />å‡å¦‚æˆ‘ä»¬åˆå§‹æœ‰ä¸€ä¸ªåºåˆ—ï¼Œæˆ‘ä»¬åœ¨åºåˆ—æœ«å°¾æ·»åŠ ä¸€ä¸ªæ•°ï¼Œæ–°å¢çš„é€†åºå¯¹æ•° <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>=</mo></mrow><annotation encoding="application/x-tex">=</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">=</span></span></span></span> æ­¤å‰æ¯”è¯¥æ•°æ›´å¤§çš„æ•°çš„ä¸ªæ•°</p><p>åœ¨å›åˆ°è¿™é“é¢˜ä¸Šæ¥ï¼Œæˆ‘ä»¬ä»åå¾€å‰å¯¹è¿™ä¸ª <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi></mrow><annotation encoding="application/x-tex">a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">a</span></span></span></span> åºåˆ—åšä¸€ä¸ªå·®åˆ†ã€‚</p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mi>i</mi></msub><mo>âˆ’</mo><msub><mi>a</mi><mrow><mi>i</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">a_i-a_{i-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.73333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.638891em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span></span> ä»£è¡¨ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>p</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">p_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> æ‰€å¸¦æ¥çš„é€†åºå¯¹æ•°ï¼Œå³ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathnormal">i</span></span></span></span> ä½ç½®ä¹‹å‰æ¯” <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>p</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">p_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> çš„å¤§çš„æ•°çš„ä¸ªæ•°ã€‚</p><p>é‰´äºåŸåºåˆ—æ˜¯ä¸€ä¸ª <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>âˆ’</mo><mi>n</mi></mrow><annotation encoding="application/x-tex">1-n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span> çš„æ’åˆ—ï¼Œæ¯ä¸ª <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>p</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">p_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> éƒ½æ˜¯å›ºå®šå…ƒç´ é›†åˆä¸­çš„å…ƒç´ ã€‚</p><p>æˆ‘ä»¬æŠŠå‰©ä½™æœªå®‰æ’çš„å…ƒç´ çœ‹æˆä¸€ä¸ªé›†åˆï¼Œå¦‚æœæ¯” <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>p</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">p_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> å¤§çš„æ•°æœ‰ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">m</span></span></span></span> ä¸ªï¼Œé‚£ä¹ˆ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>p</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">p_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> å°±æ˜¯è¿™ä¸ªç¬¬ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">m+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span> å¤§çš„æ•°ã€‚</p><p>é—®é¢˜å°±è½¬åŒ–ä¸ºäº†ç»´æŠ¤åŒºé—´ç¬¬ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi></mrow><annotation encoding="application/x-tex">K</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">K</span></span></span></span> å¤§çš„æ¨¡å‹ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pii pair<span class="string">&lt;int, int&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pdd pair<span class="string">&lt;double, double&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pll pair<span class="string">&lt;ll, ll&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> endl <span class="string">&#x27;\n&#x27;</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Fenwick</span> &#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    vector&lt;T&gt; tr;</span><br><span class="line">    <span class="built_in">Fenwick</span>(<span class="type">int</span> n) : <span class="built_in">n</span>(n), <span class="built_in">tr</span>(n + <span class="number">1</span>, <span class="number">0</span>)&#123;&#125;</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">lowbit</span><span class="params">(<span class="type">int</span> x)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> x &amp; -x;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> x, T c)</span> </span>&#123; </span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = x; i &lt;= n; i += <span class="built_in">lowbit</span>(i)) tr[i] += c;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">T <span class="title">sum</span><span class="params">(<span class="type">int</span> x)</span> </span>&#123;</span><br><span class="line">        T res = <span class="built_in">T</span>();</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = x; i; i -= <span class="built_in">lowbit</span>(i)) res += tr[i];</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">T <span class="title">sum</span><span class="params">(<span class="type">int</span> l, <span class="type">int</span> r)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">sum</span>(r) - <span class="built_in">sum</span>(l - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="function">vector&lt;ll&gt; <span class="title">a</span><span class="params">(n<span class="number">+1</span>)</span></span>;</span><br><span class="line">    a[<span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">2</span>; i&lt;=n; i++)</span><br><span class="line">        cin &gt;&gt; a[i];</span><br><span class="line">    <span class="function">Fenwick&lt;ll&gt; <span class="title">bit</span><span class="params">(n<span class="number">+1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>; i&lt;=n; i++)</span><br><span class="line">        bit.<span class="built_in">add</span>(i, <span class="number">1</span>);</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">res</span><span class="params">(n<span class="number">+1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=n; i&gt;=<span class="number">1</span>; i--) &#123;</span><br><span class="line">        <span class="type">int</span> l=<span class="number">1</span>, r=n;</span><br><span class="line">        ll k = a[i] - a[i<span class="number">-1</span>] + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(l &lt; r) &#123;</span><br><span class="line">            <span class="type">int</span> mid = (l+r<span class="number">+1</span>)/<span class="number">2</span>;</span><br><span class="line">            <span class="keyword">if</span>(bit.<span class="built_in">sum</span>(mid, n) &gt;= k) l = mid;</span><br><span class="line">            <span class="keyword">else</span> r = mid - <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        res[i] = l;</span><br><span class="line">        bit.<span class="built_in">add</span>(l, <span class="number">-1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>; i&lt;=n; i++)</span><br><span class="line">        cout &lt;&lt; res[i] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">    cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> t;</span><br><span class="line">    cin &gt;&gt; t;</span><br><span class="line">    <span class="keyword">while</span>(t --)</span><br><span class="line">        <span class="built_in">solve</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="e-é›†åˆè¿ç®—"><a class="markdownIt-Anchor" href="#e-é›†åˆè¿ç®—"></a> E é›†åˆè¿ç®—</h1><p>ã€ç»„åˆæ•°å­¦ã€‘<br />é¢˜ç›®è¦æ±‚æ‰€æœ‰å…ƒç´ ä¸ªæ•° <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>&gt;</mo><mo>=</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">&gt;=2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mrel">&gt;</span></span><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span></span></span></span> çš„ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span></span> çš„å­é›†ä¸­ç¬¬äºŒå¤§çš„å…ƒç´ ä¹‹å’Œï¼Œå³æ±‚ï¼šSä¸­çš„å„ä¸ªå…ƒç´ ä½œä¸ºç¬¬äºŒå¤§å…ƒç´ å‡ºç°åœ¨å­é›†ä¸­çš„æ¬¡æ•°ä¸è¯¥å…ƒç´ ä¹˜ç§¯ä¹‹å’Œã€‚</p><p>æˆ‘ä»¬å¯ä»¥å…ˆå°†æ‰€ç»™é›†åˆå…ƒç´ ä»å°åˆ°å¤§æ’åºï¼Œç„¶åä»å·¦åˆ°å³ä¾æ¬¡éå†  1 åˆ° n-1 ä½ç½®ä¸Šçš„æ•°ï¼ˆç¬¬nä¸ªå…ƒç´ ä¸ç”¨éå†ï¼Œå› ä¸ºå®ƒä¸å¯èƒ½æ˜¯ç¬¬äºŒå¤§ï¼‰ï¼Œè§‚å¯Ÿå¯å‘ç°ï¼šä»¥è¯¥æ•°ä½œä¸ºå­é›†ä¸­ç¬¬äºŒå¤§å…ƒç´ ï¼Œéœ€è¦ä»è¯¥æ•°å³è¾¹çš„æ¯”å®ƒå¤§çš„æ•°ä¸­é€‰ä¸€ä¸ªå…ƒç´ (æœ‰ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>âˆ’</mo><mi>i</mi></mrow><annotation encoding="application/x-tex">n-i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathnormal">i</span></span></span></span> ç§é€‰æ³•)ï¼Œç„¶åè¯¥æ•°å·¦è¾¹çš„ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mo>âˆ’</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">i-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.74285em;vertical-align:-0.08333em;"></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span> ä¸ªå…ƒç´ éƒ½æœ‰é€‰ä¸ä¸é€‰ä¸¤ç§æƒ…å†µ(æœ‰ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mrow><mi>i</mi><mo>âˆ’</mo><mn>1</mn></mrow></msup></mrow><annotation encoding="application/x-tex">2^{i - 1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.824664em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.824664em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span></span></span> ç§æƒ…å†µ)ã€‚</p><p>ç”±ä¹˜æ³•åŸç†å¯çŸ¥ï¼Œéå†åˆ°ç¬¬iä¸ªä½ç½®æ—¶ï¼Œä»¥è¯¥å…ƒç´ ä½œä¸ºç¬¬äºŒå¤§å…ƒç´ åœ¨å­é›†ä¸­å‡ºç°çš„æ¬¡æ•°æœ‰ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>n</mi><mo>âˆ’</mo><mi>i</mi><mo stretchy="false">)</mo><mo>Ã—</mo><msup><mn>2</mn><mrow><mi>i</mi><mo>âˆ’</mo><mn>1</mn></mrow></msup></mrow><annotation encoding="application/x-tex">(n - i) Ã— 2 ^{i - 1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">i</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.824664em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.824664em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span></span></span> ç§æƒ…å†µï¼Œç´¯åŠ  <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>n</mi><mo>âˆ’</mo><mi>i</mi><mo stretchy="false">)</mo><mo>Ã—</mo><msup><mn>2</mn><mrow><mi>i</mi><mo>âˆ’</mo><mn>1</mn></mrow></msup><mo>Ã—</mo><mi>a</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">(n - i) Ã— 2 ^{i - 1} Ã— a[i]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">i</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.907994em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.824664em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">a</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span> å³å¯æ±‚å¾—æ‰€éœ€è§£ã€‚</p><p>è¿™é‡Œéœ€è¦æ³¨æ„ï¼Œç”±äºæ•°æ®èŒƒå›´è¾ƒå¤§ï¼Œä¼šçˆ†long longï¼Œéœ€è¦è¿›è¡Œå–æ¨¡å¤„ç†ã€‚è€Œå–æ¨¡éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸èƒ½æœ‰ä¸­é—´é‡çš„æº¢å‡ºï¼Œæ‰€ä»¥è¦æ¯è¿ç®—ä¸€æ¬¡å°±å–æ¨¡ä¸€æ¬¡ï¼Œå…·ä½“æ“ä½œè¯¦è§ä»£ç ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pii pair<span class="string">&lt;int, int&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pdd pair<span class="string">&lt;double, double&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pll pair<span class="string">&lt;ll, ll&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> endl <span class="string">&#x27;\n&#x27;</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> mod = <span class="number">1e9</span><span class="number">+7</span>;</span><br><span class="line"><span class="function">ll <span class="title">qmi</span><span class="params">(ll a, ll b, ll mod)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">ll res = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span>(b) &#123;</span><br><span class="line"><span class="keyword">if</span>(b &amp; <span class="number">1</span>) res = res*a%mod;</span><br><span class="line">a = a*a%mod;</span><br><span class="line">b &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="function">vector&lt;ll&gt; <span class="title">a</span><span class="params">(n<span class="number">+1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>; i&lt;=n; i++)</span><br><span class="line">        cin &gt;&gt; a[i];</span><br><span class="line">    <span class="built_in">sort</span>(a.<span class="built_in">begin</span>()<span class="number">+1</span>, a.<span class="built_in">end</span>());</span><br><span class="line">    ll res = <span class="number">0</span>, k = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>; i&lt;=n<span class="number">-1</span>; i++) &#123;</span><br><span class="line">        res = (res + a[i] * <span class="built_in">qmi</span>(<span class="number">2</span>, i<span class="number">-1</span>, mod) % mod * (n-i) % mod) % mod;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; res &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">solve</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>å¦‚æœä¸ä¼šå¿«é€Ÿå¹‚ï¼Œå…¶å®ç”¨ä¸€ä¸ªå˜é‡è¿­ä»£ä¹Ÿèƒ½åšï¼Œç›¸å½“äºæ¯è¿›è¡Œä¸€è½®å¾ªç¯å°±Ã—2ã€‚</p></blockquote><h1 id="f-å¸®lihgå…³ä¸‹ç¯"><a class="markdownIt-Anchor" href="#f-å¸®lihgå…³ä¸‹ç¯"></a> F å¸®Lihgå…³ä¸‹ç¯</h1><h2 id="åšæ³•ä¸€-2"><a class="markdownIt-Anchor" href="#åšæ³•ä¸€-2"></a> åšæ³•ä¸€</h2><p>ã€æ‹“æ‰‘æ’åºã€‘ã€åŸºç¯æ ‘ã€‘<br />å¯¹è¿™é“é¢˜è¿›è¡Œæ•°å­¦å»ºæ¨¡ï¼šå¯¹äºæ¯ä¸€ä¸ªå…³è”å…³ç³»ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥çœ‹ä½œæ˜¯ä¸€æ¡æœ‰å‘è¾¹ï¼Œæ¯ä¸ªç¯å°±æ˜¯å›¾ä¸Šçš„æ¯ä¸ªèŠ‚ç‚¹ã€‚</p><p>ä»”ç»†ä¸€æƒ³ï¼Œæ„æˆçš„å›¾å°±æ˜¯ä¸€ä¸ªåŸºç¯æ ‘æ£®æ—ï¼ˆå¤šä¸ªåŸºç¯æ ‘ï¼‰ã€‚</p><p>æˆ‘ä»¬ç”¨æ‹“æ‰‘æ’åºè·‘ä¸€éï¼Œé‡åˆ°å¼€ç€çš„ç¯å°±å…³ï¼Œå°±å¯ä»¥åªç•™ä¸‹å¤šä¸ªç¯ã€‚</p><p>è€Œåœ¨ç¯ä¸Šæ¨¡æ‹Ÿå…³ç¯çš„è¯ï¼Œåªè¦è€ƒè™‘1çš„ä¸ªæ•°çš„å¥‡å¶æ€§å°±è¡Œäº†ã€‚å› ä¸ºæˆ‘ä»¬å¯ä»¥å‘ç°ï¼šå¼€å…³æ“ä½œè¦ä¹ˆ1ä¸å˜ã€è¦ä¹ˆå¤šä¸¤ä¸ª1ï¼Œè¦ä¹ˆå°‘2ä¸ª1ï¼Œ1çš„ä¸ªæ•°çš„å¥‡å¶æ€§æ˜¯ä¸å˜çš„ã€‚å¦‚æœæ˜¯å¶æ•°ä¸ªç¯ï¼Œå°±ä¸€å®šæœ‰åŠæ³•å˜ä¸ºåªå‰©0ä¸ªç¯ï¼›åä¹‹ï¼Œå¦‚æœæ˜¯å¥‡æ•°ï¼Œå°±ä¸€å®šä¸è¡Œã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pii pair<span class="string">&lt;int, int&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pdd pair<span class="string">&lt;double, double&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pll pair<span class="string">&lt;ll, ll&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> endl <span class="string">&#x27;\n&#x27;</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">a</span><span class="params">(n<span class="number">+1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>; i&lt;=n; i++)</span><br><span class="line">        cin &gt;&gt; a[i];</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">fa</span><span class="params">(n<span class="number">+1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>; i&lt;=n; i++)</span><br><span class="line">        fa[i] = i;</span><br><span class="line">    function&lt;<span class="type">int</span>(<span class="type">int</span>)&gt; find = [&amp;](<span class="type">int</span> x) &#123;</span><br><span class="line">        <span class="keyword">if</span>(x == fa[x]) <span class="keyword">return</span> x;</span><br><span class="line">        <span class="keyword">return</span> fa[x] = <span class="built_in">find</span>(fa[x]);</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">deg</span><span class="params">(n<span class="number">+1</span>)</span>, <span class="title">p</span><span class="params">(n<span class="number">+1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>; i&lt;=n; i++) &#123;</span><br><span class="line">        cin &gt;&gt; p[i];</span><br><span class="line">        <span class="type">int</span> u = <span class="built_in">find</span>(i);</span><br><span class="line">        <span class="type">int</span> v = <span class="built_in">find</span>(p[i]);</span><br><span class="line">        <span class="keyword">if</span>(u != v) fa[u] = v;</span><br><span class="line">        deg[p[i]] ++;</span><br><span class="line">    &#125;</span><br><span class="line">    queue&lt;<span class="type">int</span>&gt; q;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>; i&lt;=n; i++)</span><br><span class="line">    <span class="keyword">if</span>(deg[i] == <span class="number">0</span>) &#123;</span><br><span class="line">        q.<span class="built_in">push</span>(i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(!q.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">        <span class="type">int</span> i = q.<span class="built_in">front</span>();</span><br><span class="line">        q.<span class="built_in">pop</span>();</span><br><span class="line">        <span class="keyword">if</span>(a[i]) &#123;</span><br><span class="line">            a[p[i]] = <span class="number">1</span>-a[p[i]];</span><br><span class="line">        &#125;</span><br><span class="line">        deg[p[i]] --;</span><br><span class="line">        <span class="keyword">if</span>(deg[p[i]] == <span class="number">0</span>) q.<span class="built_in">push</span>(p[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">cnt</span><span class="params">(n<span class="number">+1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>; i&lt;=n; i++)</span><br><span class="line">    <span class="keyword">if</span>(deg[i] &amp;&amp; a[i] == <span class="number">1</span>) &#123;</span><br><span class="line">        cnt[<span class="built_in">find</span>(i)] ++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>; i&lt;=n; i++)</span><br><span class="line">    <span class="keyword">if</span>(cnt[i] % <span class="number">2</span>) &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;No&quot;</span> &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Yes&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cout &lt;&lt; fixed &lt;&lt; <span class="built_in">setprecision</span>(<span class="number">10</span>);</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="number">0</span>);cout.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">    <span class="built_in">solve</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Felixå¤§ä½¬çš„éªŒé¢˜ä»£ç æ€è·¯æ›´æ¸…æ™°ã€ä¹Ÿæ›´ç›´è§‚ï¼Œè¿˜æœ‰ç”ŸåŠ¨çš„æ³¨é‡Šï¼Œæ¨èå¤§å®¶å­¦ä¹ ä¸€ä¸‹orzã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">using</span> ll = <span class="type">long</span> <span class="type">long</span>;</span><br><span class="line"><span class="comment">// å¹¶ä¸æ˜¯â€¦â€¦å“‡é ï¼ŒåŸæ¥æ˜¯ï¼Œæ‹“æ‰‘æ’åºï¼ï¼ç¡¬ç”Ÿç”Ÿæƒ³å¤æ‚äº†å‘œå‘œå‘œå‘œå‘œå‘œå‘œå‘œå‘œ</span></span><br><span class="line"><span class="type">int</span> p[<span class="number">100005</span>], n, a[<span class="number">100005</span>], in_degree[<span class="number">100005</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">check_cycle</span><span class="params">(<span class="type">int</span> start)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> light = a[start]; <span class="comment">//ç¯ä¸Šæœ‰å‡ ä¸ªç¯å¼€ç€</span></span><br><span class="line">    in_degree[start] = <span class="number">0</span>; <span class="comment">//æŠŠç¯ä»ä¸–ç•Œä¸ŠæŠ¹å»ï¼ï¼F**k ç¯ï¼ï¼</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = p[start]; i != start; i = p[i])</span><br><span class="line">    &#123;</span><br><span class="line">        in_degree[i] = <span class="number">0</span>;</span><br><span class="line">        light += a[i];</span><br><span class="line">        a[i] = <span class="number">0</span>; <span class="comment">//ç¯é‡Œçš„éƒ½ç»™æˆ‘å…³äº†ï¼ï¼</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> light % <span class="number">2</span> == <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">toposhin_start</span><span class="params">(queue&lt;<span class="type">int</span>&gt; &amp;q)</span> <span class="comment">//æ‹“æ‰‘ç¥ï¼Œå¯åŠ¨ï¼</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(!q.<span class="built_in">empty</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> now = q.<span class="built_in">front</span>();</span><br><span class="line">        q.<span class="built_in">pop</span>();</span><br><span class="line">        <span class="keyword">if</span>(a[now] == <span class="number">1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            a[now] = <span class="number">0</span>;</span><br><span class="line">            a[p[now]] = !a[p[now]];;</span><br><span class="line">        &#125;</span><br><span class="line">        in_degree[p[now]] --;</span><br><span class="line">        <span class="keyword">if</span>(in_degree[p[now]] == <span class="number">0</span>)</span><br><span class="line">            q.<span class="built_in">push</span>(p[now]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        cin &gt;&gt; a[i];</span><br><span class="line">    <span class="built_in">memset</span>(in_degree, <span class="number">0</span>, <span class="built_in">sizeof</span>(in_degree));</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        cin &gt;&gt; p[i];</span><br><span class="line">        in_degree[p[i]] ++;</span><br><span class="line">    &#125;</span><br><span class="line">    queue&lt;<span class="type">int</span>&gt; starts;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="keyword">if</span>(in_degree[i] == <span class="number">0</span>)</span><br><span class="line">            starts.<span class="built_in">push</span>(i);</span><br><span class="line">    <span class="built_in">toposhin_start</span>(starts); <span class="comment">//æ‹“æ‰‘æ’åºç»“æŸä¹‹åï¼Œå°±åªå‰©ä¸‹ä¸€ä¸ªä¸€ä¸ªä¸€ä¸ªä¸€ä¸ªçš„ç¯äº†</span></span><br><span class="line">    <span class="comment">//å¤„ç†ç¯</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="keyword">if</span>(in_degree[i] == <span class="number">1</span>)</span><br><span class="line">            <span class="keyword">if</span>(!<span class="built_in">check_cycle</span>(i))</span><br><span class="line">            &#123;</span><br><span class="line">                cout &lt;&lt; <span class="string">&quot;No&quot;</span>;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Yes&quot;</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">11</span></span><br><span class="line"><span class="comment">1 0 1 0 1 0 0 0 1 1 0</span></span><br><span class="line"><span class="comment">2 3 4 1 6 7 8 9 7 7 7</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">15</span></span><br><span class="line"><span class="comment">1 1 1 1 1 1 1 1 1 1 1 1 1 1 1</span></span><br><span class="line"><span class="comment">2 3 4 5 6 7 1 13 14 13 14 13 14 1 1</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">11</span></span><br><span class="line"><span class="comment">1 1 0 1 0 1 1 1 1 1 0</span></span><br><span class="line"><span class="comment">2 3 11 5 3 3 3 3 8 9 10</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure><h2 id="åšæ³•äºŒ-2"><a class="markdownIt-Anchor" href="#åšæ³•äºŒ-2"></a> åšæ³•äºŒ</h2><p>ã€å¹¶æŸ¥é›†ã€‘<br />ä½†ä»”ç»†ä¸€æƒ³ï¼Œæˆ‘ä»¬å‘ç°åŸºç¯æ ‘æå¶ä¸Šçš„1æ€»ä¼šæ”¶æŸåˆ°ç¯ä¸Šï¼›åŒæ—¶ï¼Œåœ¨æ”¶æŸåˆ°ç¯ä¹‹åï¼Œ1çš„ä¸ªæ•°çš„å¥‡å¶æ€§å’Œæ”¶æŸå‰ä¹Ÿä¸€å®šæ˜¯ä¸€æ ·çš„ã€‚<br />æ‰€ä»¥å…¶å®æ‹“æ‰‘æ’åºè¿™ä¸€æ­¥æ˜¯å¤šä½™çš„ï¼Œæˆ‘ä»¬åªéœ€è¦ç»Ÿè®¡åˆå§‹çŠ¶æ€ä¸‹æ¯ä¸ªè¿é€šå—ä¸­1çš„ä¸ªæ•°å³å¯ã€‚</p><p>è‹¥å‡ºç°æŸä¸€ä¸ªè¿é€šå—ä¸­1çš„ä¸ªæ•°æ˜¯å¥‡æ•°ï¼Œå°±ä¸€å®šæ— æ³•å…¨å…³ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pii pair<span class="string">&lt;int, int&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pdd pair<span class="string">&lt;double, double&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pll pair<span class="string">&lt;ll, ll&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> endl <span class="string">&#x27;\n&#x27;</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">a</span><span class="params">(n<span class="number">+1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>; i&lt;=n; i++)</span><br><span class="line">        cin &gt;&gt; a[i];</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">fa</span><span class="params">(n<span class="number">+1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>; i&lt;=n; i++)</span><br><span class="line">        fa[i] = i;</span><br><span class="line">    function&lt;<span class="type">int</span>(<span class="type">int</span>)&gt; find = [&amp;](<span class="type">int</span> x) &#123;</span><br><span class="line">        <span class="keyword">if</span>(x == fa[x]) <span class="keyword">return</span> x;</span><br><span class="line">        <span class="keyword">return</span> fa[x] = <span class="built_in">find</span>(fa[x]);</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">deg</span><span class="params">(n<span class="number">+1</span>)</span>, <span class="title">p</span><span class="params">(n<span class="number">+1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>; i&lt;=n; i++) &#123;</span><br><span class="line">        cin &gt;&gt; p[i];</span><br><span class="line">        <span class="type">int</span> u = <span class="built_in">find</span>(i);</span><br><span class="line">        <span class="type">int</span> v = <span class="built_in">find</span>(p[i]);</span><br><span class="line">        <span class="keyword">if</span>(u != v) fa[u] = v;</span><br><span class="line">        deg[p[i]] ++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">cnt</span><span class="params">(n<span class="number">+1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>; i&lt;=n; i++)</span><br><span class="line">    <span class="keyword">if</span>(a[i] == <span class="number">1</span>) &#123;</span><br><span class="line">        cnt[<span class="built_in">find</span>(i)] ++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>; i&lt;=n; i++)</span><br><span class="line">    <span class="keyword">if</span>(cnt[i] % <span class="number">2</span>) &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;No&quot;</span> &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Yes&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">solve</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>PSï¼šè¿™é¢˜ä¹Ÿå¯ä»¥ç”¨å¼ºè¿é€šåˆ†é‡ç¼©ç‚¹æ¥å†™ï¼Œæœ¬è´¨å’Œå¹¶æŸ¥é›†åšæ³•å·®ä¸å¤šï¼Œå°±æ˜¯æ›´æš´åŠ›ä¸€ç‚¹ã€‚<br />æˆ‘ä¸ªäººè§‰å¾—æ²¡å¿…è¦é‚£æ ·ï¼Œæƒ³å­¦ä¹ çš„åŒå­¦å¯ä»¥ç§æˆ‘è¦ä»£ç ã€‚</p></blockquote><h1 id="g-å¸®lihgå¼€ç¯"><a class="markdownIt-Anchor" href="#g-å¸®lihgå¼€ç¯"></a> G å¸®Lihgå¼€ç¯</h1><p>ã€æ ‘çŠ¶æ•°ç»„ã€‘ã€DFSåºã€‘</p><p>æ ‘çŠ¶æ•°ç»„+DFNåºæ¨¡æ¿é¢˜ï¼Œæƒ³è¡¥é¢˜çš„åŒå­¦ï¼Œå­¦ä¹ ä¸€ä¸‹è¿™ä¸¤ä¸ªçŸ¥è¯†ç‚¹å°±è¡Œäº†ã€‚</p><p>å­¦ä¼šäº†ä¹‹åï¼Œä½¿ç”¨è¿™ä¸ªå·¥å…·æ¨¡æ‹Ÿå³å¯ï¼</p><blockquote><p>ä¸€ä¸ªæœ‰æ„æ€çš„äº‹ï¼šè¿™é“é¢˜å’Œåˆšåˆšç»“æŸçš„3æœˆ31æ—¥çš„CSPè®¤è¯çš„æœ€åä¸€é¢˜çŸ¥è¯†ç‚¹æ’äº†ï¼Œé‚£é“é¢˜æ˜¯è¿™é“é¢˜çš„ä¸€ä¸ªåŠ å¼ºç‰ˆ</p></blockquote><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pii pair<span class="string">&lt;int, int&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pdd pair<span class="string">&lt;double, double&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pll pair<span class="string">&lt;ll, ll&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> endl <span class="string">&#x27;\n&#x27;</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Fenwick</span> &#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    vector&lt;T&gt; tr;</span><br><span class="line">    <span class="built_in">Fenwick</span>(<span class="type">int</span> n) : <span class="built_in">n</span>(n), <span class="built_in">tr</span>(n + <span class="number">1</span>, <span class="number">0</span>)&#123;&#125;</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">lowbit</span><span class="params">(<span class="type">int</span> x)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> x &amp; -x;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> x, T c)</span> </span>&#123; </span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = x; i &lt;= n; i += <span class="built_in">lowbit</span>(i)) tr[i] += c;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">T <span class="title">sum</span><span class="params">(<span class="type">int</span> x)</span> </span>&#123;</span><br><span class="line">        T res = <span class="built_in">T</span>();</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = x; i; i -= <span class="built_in">lowbit</span>(i)) res += tr[i];</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">T <span class="title">sum</span><span class="params">(<span class="type">int</span> l, <span class="type">int</span> r)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">sum</span>(r) - <span class="built_in">sum</span>(l - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    vector&lt;<span class="type">int</span>&gt; g[n<span class="number">+1</span>];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>; i&lt;n; i++) &#123;</span><br><span class="line">        <span class="type">int</span> u, v;</span><br><span class="line">        cin &gt;&gt; u &gt;&gt; v;</span><br><span class="line">        g[u].<span class="built_in">push_back</span>(v);</span><br><span class="line">        g[v].<span class="built_in">push_back</span>(u);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">p</span><span class="params">(n<span class="number">+5</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>; i&lt;=n; i++) &#123;</span><br><span class="line">        <span class="type">int</span> a;</span><br><span class="line">        cin &gt;&gt; a;</span><br><span class="line">        p[a] = i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">dfn</span><span class="params">(n<span class="number">+5</span>)</span>, <span class="title">sz</span><span class="params">(n<span class="number">+5</span>)</span></span>;</span><br><span class="line">    <span class="type">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">    function&lt;<span class="type">void</span>(<span class="type">int</span>, <span class="type">int</span>)&gt; dfs = [&amp;](<span class="type">int</span> u, <span class="type">int</span> fa) &#123;</span><br><span class="line">        dfn[u] = ++cnt;</span><br><span class="line">        sz[u] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> v: g[u]) &#123;</span><br><span class="line">            <span class="keyword">if</span>(v == fa) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="built_in">dfs</span>(v, u);</span><br><span class="line">            sz[u] += sz[v];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="built_in">dfs</span>(<span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="function">Fenwick&lt;<span class="type">int</span>&gt; <span class="title">bit</span><span class="params">(n<span class="number">+5</span>)</span></span>;</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">res</span><span class="params">(n<span class="number">+1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>; i&lt;=n; i++) &#123;</span><br><span class="line">        bit.<span class="built_in">add</span>(dfn[p[i]], <span class="number">1</span>);</span><br><span class="line">        res[p[i]] = bit.<span class="built_in">sum</span>(dfn[p[i]], dfn[p[i]]+sz[p[i]]<span class="number">-1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>; i&lt;=n; i++)</span><br><span class="line">        cout &lt;&lt; res[i] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">solve</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="h-èƒ½é‡ä¹‹åœ°"><a class="markdownIt-Anchor" href="#h-èƒ½é‡ä¹‹åœ°"></a> H èƒ½é‡ä¹‹åœ°</h1><p>ã€æ¨¡æ‹Ÿã€‘</p><h2 id="åšæ³•ä¸€-3"><a class="markdownIt-Anchor" href="#åšæ³•ä¸€-3"></a> åšæ³•ä¸€</h2><p>è¿™é“é¢˜ä¸»è¦æœ‰ä¸¤ä¸ªåšæ³•ï¼Œä¸€ç§åšæ³•å°±æ˜¯è€è€å®å®åœ°æ¨¡æ‹Ÿè›‡å½¢èµ°ä½çš„è¿‡ç¨‹ã€‚ç”¨ä¸€ä¸ªå˜é‡æ¥ç»´æŠ¤ï¼Œå‘å·¦è¿˜æ˜¯å‘å³ã€‚åº”è¯¥æ˜¯æ¯”è¾ƒç®€æ´çš„å½¢å¼äº†ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pii pair<span class="string">&lt;int, int&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pdd pair<span class="string">&lt;double, double&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pll pair<span class="string">&lt;ll, ll&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> endl <span class="string">&#x27;\n&#x27;</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> n, m;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">a</span>(n<span class="number">+1</span>,<span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(m<span class="number">+1</span>));</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>; i&lt;=n; i++)</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>; j&lt;=m; j++)</span><br><span class="line">        cin &gt;&gt; a[i][j];</span><br><span class="line">    <span class="type">int</span> x=<span class="number">1</span>, y=<span class="number">1</span>, tot=<span class="number">0</span>;</span><br><span class="line">    <span class="type">bool</span> p = <span class="literal">false</span>;</span><br><span class="line">    ll sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(<span class="literal">true</span>) &#123; <span class="comment">// æ°¸çœŸå¾ªç¯</span></span><br><span class="line">        sum += <span class="number">1ll</span>*a[x][y];</span><br><span class="line">        <span class="keyword">if</span>(x == n &amp;&amp; y == m) <span class="keyword">break</span>; <span class="comment">// èµ°åˆ°(n, m)å°±é€€å‡ºå¾ªç¯</span></span><br><span class="line">        <span class="keyword">if</span>(y == m &amp;&amp; tot%<span class="number">2</span> == <span class="number">0</span> || y == <span class="number">1</span> &amp;&amp; tot%<span class="number">2</span> == <span class="number">1</span>) &#123;</span><br><span class="line">            x ++;</span><br><span class="line">            <span class="keyword">if</span>(p) p = <span class="literal">false</span>, tot ++;</span><br><span class="line">            <span class="keyword">else</span> p = <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span>(tot % <span class="number">2</span> == <span class="number">0</span>) y ++;</span><br><span class="line">            <span class="keyword">else</span> y --;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; sum &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">solve</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åšæ³•äºŒ-3"><a class="markdownIt-Anchor" href="#åšæ³•äºŒ-3"></a> åšæ³•äºŒ</h2><p>å¦ä¸€ç§åšæ³•æ˜¯ä»¥ä¸€è¡Œä¸ºå•ä½ç®—æ€»å…±åˆ†è¡Œå·%4=0,1,2,3æœ‰4ç§æƒ…å†µä½†è¿™ä¸ªåšæ³•éœ€è¦å¤„ç†çš„è¾¹ç•Œæ¡ä»¶æ¯”è¾ƒå¤šï¼ŒéªŒé¢˜çš„æ—¶å€™ä¸å°‘éªŒé¢˜äººç”¨è¿™ä¸ªåšæ³•è´¡çŒ®äº†å‡ å‘waï¼Œæ‰€ä»¥æ¨èä½¿ç”¨ç¬¬ä¸€ç§åšæ³•ã€‚<br />è¿™é‡Œé™„ä¸Šæœ¬é¢˜ä¸»è§’Catgokçš„éªŒé¢˜ä»£ç ï¼</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;assert.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> int long long</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> PII pair<span class="string">&lt;int, int&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">2e5</span> + <span class="number">9</span>, INF = <span class="number">1e18</span> + <span class="number">9</span>, P = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line"><span class="type">int</span> T, n, m, x;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> ans = <span class="number">0</span>;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt; m; j++) &#123;</span><br><span class="line">            cin &gt;&gt; x;</span><br><span class="line">            <span class="keyword">if</span>(i % <span class="number">2</span> == <span class="number">0</span>) ans += x;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(i % <span class="number">4</span> == <span class="number">1</span> &amp;&amp; j == m - <span class="number">1</span>) ans += x;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(i % <span class="number">4</span> == <span class="number">3</span> &amp;&amp; j == <span class="number">0</span>) ans += x;</span><br><span class="line">            <span class="keyword">if</span>(i == n - <span class="number">1</span> &amp;&amp; i % <span class="number">4</span> == <span class="number">2</span> &amp;&amp; j != m - <span class="number">1</span>) ans -= x;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; ans;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    <span class="type">int</span> t = <span class="number">1</span>;</span><br><span class="line">    <span class="comment">// cin &gt;&gt; t;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(t--) <span class="built_in">solve</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="i-è½®å›ä¸æ›´è¿­"><a class="markdownIt-Anchor" href="#i-è½®å›ä¸æ›´è¿­"></a> I è½®å›ä¸æ›´è¿­</h1><p>ã€æ€ç»´ã€‘ã€æ¨¡æ‹Ÿã€‘<br />æœ¬é¢˜æœ‰ä¸¤ä¸ªæ“ä½œï¼šâ‘ æ”¹å˜å€¼ï¼›â‘¡å·¦ç§»</p><p>æˆ‘ä»¬ä¸éš¾å‘ç°ï¼Œæ¯ä¸€è¡Œæ˜¯ç‹¬ç«‹çš„ï¼Œä¸å…¶ä»–è¡Œæ²¡æœ‰å…³ç³»ã€‚</p><p>å†è€…ï¼Œå¯¹äºallå¯è¡Œæ–¹æ¡ˆï¼Œå…ˆå·¦ç§»å®Œäº†å†æ”¹å˜ï¼Œä¸€å®šæ˜¯æœ€çœäº‹çš„ï¼</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pii pair<span class="string">&lt;int, int&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pdd pair<span class="string">&lt;double, double&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pll pair<span class="string">&lt;ll, ll&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> endl <span class="string">&#x27;\n&#x27;</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> n, m;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">a</span>(n<span class="number">+1</span>, <span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(m<span class="number">+5</span>));</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>; i&lt;=n; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>; j&lt;=m; j++) &#123;</span><br><span class="line">            <span class="type">int</span> x;</span><br><span class="line">            cin &gt;&gt; x;</span><br><span class="line">            x -= (i<span class="number">-1</span>)*m;</span><br><span class="line">            a[i][j] = x;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>; i&lt;=n; i++) &#123;</span><br><span class="line">        <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">cnt</span><span class="params">(m)</span></span>; <span class="comment">//cntè¡¨ç¤ºå·¦ç§»iæ¬¡ä¹‹åï¼Œä¸ºè¾¾æˆæ¡ä»¶éœ€è¦æ”¹å˜çš„æ•°çš„ä¸ªæ•°</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>; j&lt;=m; j++) &#123; </span><br><span class="line">            <span class="keyword">if</span>(a[i][j] &lt; <span class="number">1</span> || a[i][j] &gt; m) <span class="keyword">continue</span>;</span><br><span class="line">            cnt[(j-a[i][j]+m) % m] ++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> minn = <span class="number">1e9</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>; i&lt;m; i++)</span><br><span class="line">            minn = <span class="built_in">min</span>(minn, i+m-cnt[i]);</span><br><span class="line">        res += minn;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; res &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">solve</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³•é¢˜è§£ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ¯”èµ›é¢˜è§£ </tag>
            
            <tag> ç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
